From 5eaa87775f63b6928a6f20a4c31495d66fdc025e Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Thu, 16 Jun 2016 18:44:36 +0300
Subject: [PATCH 01/50] Added missing files

---
 .meteor/.finished-upgraders |  13 +++++
 .meteor/.gitignore          |   1 +
 .meteor/.id                 |   7 +++
 .meteor/packages            |  71 ++++++++++++++++++++++++
 .meteor/platforms           |   4 ++
 .meteor/release             |   1 +
 .meteor/versions            | 132 ++++++++++++++++++++++++++++++++++++++++++++
 7 files changed, 229 insertions(+)
 create mode 100755 .meteor/.finished-upgraders
 create mode 100755 .meteor/.gitignore
 create mode 100755 .meteor/.id
 create mode 100755 .meteor/packages
 create mode 100755 .meteor/platforms
 create mode 100644 .meteor/release
 create mode 100644 .meteor/versions

diff --git a/.meteor/.finished-upgraders b/.meteor/.finished-upgraders
new file mode 100755
index 0000000..dacc2c0
--- /dev/null
+++ b/.meteor/.finished-upgraders
@@ -0,0 +1,13 @@
+# This file contains information which helps Meteor properly upgrade your
+# app when you run 'meteor update'. You should check it into version control
+# with your project.
+
+notices-for-0.9.0
+notices-for-0.9.1
+0.9.4-platform-file
+notices-for-facebook-graph-api-2
+1.2.0-standard-minifiers-package
+1.2.0-meteor-platform-split
+1.2.0-cordova-changes
+1.2.0-breaking-changes
+1.3.0-split-minifiers-package
diff --git a/.meteor/.gitignore b/.meteor/.gitignore
new file mode 100755
index 0000000..4083037
--- /dev/null
+++ b/.meteor/.gitignore
@@ -0,0 +1 @@
+local
diff --git a/.meteor/.id b/.meteor/.id
new file mode 100755
index 0000000..c27c0e4
--- /dev/null
+++ b/.meteor/.id
@@ -0,0 +1,7 @@
+# This file contains a token that is unique to your project.
+# Check it into your repository along with the rest of this directory.
+# It can be used for purposes such as:
+#   - ensuring you don't accidentally deploy one app on top of another
+#   - providing package authors with aggregated statistics
+
+vqze4o4fmojp1vxyybb
diff --git a/.meteor/packages b/.meteor/packages
new file mode 100755
index 0000000..84de7d0
--- /dev/null
+++ b/.meteor/packages
@@ -0,0 +1,71 @@
+# Meteor packages used by this project one per line.
+# Check this file (and the other files in this directory) into your repository.
+#
+# 'meteor add' and 'meteor remove' will edit this file for you
+# but you can also edit it by hand.
+
+# meteor libraries
+meteor-base
+ecmascript
+es5-shim
+check
+tracker
+
+# standard libraries
+jquery
+underscore
+less
+
+# ui
+blaze-html-templates
+reactive-dict
+reactive-var
+aldeed:template-extension
+percolate:momentum
+
+# data
+mongo
+aldeed:simple-schema
+aldeed:collection2
+dburles:collection-helpers
+reywood:publish-composite
+mdg:validated-method
+mdg:validation-error
+
+# routing
+kadira:flow-router@2.11.0
+kadira:blaze-layout
+arillo:flow-router-helpers
+zimme:active-route
+
+# i18n
+tap:i18n
+
+# accounts
+accounts-password
+useraccounts:unstyled
+useraccounts:flow-routing
+softwarerero:accounts-t9n
+
+# mobile
+crosswalk
+mobile-experience
+chriswessels:hammer
+
+# production
+juliancwirko:postcss@1.0.0-beta.11
+standard-minifier-js
+ddp-rate-limiter
+app-prod-security
+
+# rest apis
+simple:rest-accounts-password
+simple:rest
+
+# testing
+factory
+xolvio:cleaner
+dispatch:mocha-phantomjs
+practicalmeteor:mocha@2.1.1-rc.1
+hwillson:stub-collections
+johanbrook:publication-collector
diff --git a/.meteor/platforms b/.meteor/platforms
new file mode 100755
index 0000000..0c5aaa5
--- /dev/null
+++ b/.meteor/platforms
@@ -0,0 +1,4 @@
+server
+browser
+android
+ios
diff --git a/.meteor/release b/.meteor/release
new file mode 100644
index 0000000..b2d8cda
--- /dev/null
+++ b/.meteor/release
@@ -0,0 +1 @@
+METEOR@1.3.3
diff --git a/.meteor/versions b/.meteor/versions
new file mode 100644
index 0000000..d8ddf64
--- /dev/null
+++ b/.meteor/versions
@@ -0,0 +1,132 @@
+accounts-base@1.2.7
+accounts-password@1.1.10
+aldeed:collection2@2.9.1
+aldeed:collection2-core@1.1.1
+aldeed:schema-deny@1.0.1
+aldeed:schema-index@1.0.1
+aldeed:simple-schema@1.5.3
+aldeed:template-extension@4.0.0
+allow-deny@1.0.5
+app-prod-security@0.0.0
+arillo:flow-router-helpers@0.5.2
+autoupdate@1.2.10
+babel-compiler@6.8.0
+babel-runtime@0.1.9
+base64@1.0.9
+binary-heap@1.0.9
+blaze@2.1.8
+blaze-html-templates@1.0.4
+blaze-tools@1.0.9
+boilerplate-generator@1.0.9
+browser-policy@1.0.9
+browser-policy-common@1.0.10
+browser-policy-content@1.0.11
+browser-policy-framing@1.0.11
+caching-compiler@1.0.5
+caching-html-compiler@1.0.6
+callback-hook@1.0.9
+cfs:http-methods@0.0.32
+check@1.2.2
+chriswessels:hammer@4.0.2
+coffeescript@1.1.0
+crosswalk@1.6.2
+dburles:collection-helpers@1.0.4
+ddp@1.2.5
+ddp-client@1.2.8
+ddp-common@1.2.6
+ddp-rate-limiter@1.0.5
+ddp-server@1.2.7
+deps@1.0.12
+diff-sequence@1.0.6
+dispatch:mocha-core@0.0.2
+dispatch:mocha-phantomjs@0.1.5
+dispatch:phantomjs-tests@0.0.5
+ecmascript@0.4.4
+ecmascript-runtime@0.2.11
+ejson@1.0.12
+email@1.0.13
+es5-shim@4.5.11
+factory@1.0.0
+fastclick@1.0.12
+force-ssl@1.0.12
+geojson-utils@1.0.9
+hot-code-push@1.0.4
+html-tools@1.0.10
+htmljs@1.0.10
+http@1.1.6
+hwillson:stub-collections@1.0.1
+id-map@1.0.8
+johanbrook:publication-collector@1.0.0
+jquery@1.11.9
+juliancwirko:postcss@1.1.1
+kadira:blaze-layout@2.3.0
+kadira:flow-router@2.12.1
+launch-screen@1.0.12
+less@2.6.1
+livedata@1.0.18
+localstorage@1.0.11
+logging@1.0.13
+mdg:validated-method@1.1.0
+mdg:validation-error@0.5.1
+meteor@1.1.15
+meteor-base@1.0.4
+meteorspark:util@0.2.0
+minifier-css@1.1.12
+minifier-js@1.1.12
+minimongo@1.0.17
+mobile-experience@1.0.4
+mobile-status-bar@1.0.12
+modules@0.6.2
+modules-runtime@0.6.4
+mongo@1.1.8
+mongo-id@1.0.5
+npm-bcrypt@0.8.6_1
+npm-mongo@1.4.44
+observe-sequence@1.0.12
+ordered-dict@1.0.8
+percolate:momentum@0.7.2
+percolate:velocityjs@1.1.0
+practicalmeteor:chai@2.1.0_1
+practicalmeteor:loglevel@1.2.0_2
+practicalmeteor:mocha@2.4.5_2
+practicalmeteor:mocha-core@0.1.4
+practicalmeteor:sinon@1.14.1_2
+promise@0.7.2
+raix:eventemitter@0.1.3
+random@1.0.9
+rate-limit@1.0.5
+reactive-dict@1.1.8
+reactive-var@1.0.10
+reload@1.1.9
+retry@1.0.8
+reywood:publish-composite@1.4.2
+routepolicy@1.0.11
+service-configuration@1.0.10
+session@1.1.6
+sha@1.0.8
+simple:authenticate-user-by-token@1.0.1
+simple:json-routes@2.1.0
+simple:rest@1.1.1
+simple:rest-accounts-password@1.1.2
+simple:rest-bearer-token-parser@1.0.1
+simple:rest-json-error-handler@1.0.1
+softwarerero:accounts-t9n@1.3.4
+spacebars@1.0.12
+spacebars-compiler@1.0.12
+srp@1.0.9
+standard-minifier-js@1.0.7
+tap:i18n@1.8.2
+templating@1.1.10
+templating-tools@1.0.4
+tmeasday:test-reporter-helpers@0.2.1
+tracker@1.0.14
+ui@1.0.11
+underscore@1.0.9
+url@1.0.10
+useraccounts:core@1.14.2
+useraccounts:flow-routing@1.14.2
+useraccounts:unstyled@1.14.2
+webapp@1.2.9
+webapp-hashing@1.0.9
+xolvio:cleaner@0.3.1
+zimme:active-route@2.3.2
-- 
2.6.4


From c784d2d7bb7e6abe31e61fd70e8853513d2a7bfe Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 17 Jun 2016 18:17:07 +0300
Subject: [PATCH 02/50] Step 1.1: Add Angular 2 compilers

---
 .meteor/packages | 1 +
 .meteor/versions | 6 ++++++
 2 files changed, 7 insertions(+)
 mode change 100755 => 100644 .meteor/packages

diff --git a/.meteor/packages b/.meteor/packages
old mode 100755
new mode 100644
index 84de7d0..d46ec8e
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -69,3 +69,4 @@ dispatch:mocha-phantomjs
 practicalmeteor:mocha@2.1.1-rc.1
 hwillson:stub-collections
 johanbrook:publication-collector
+angular2-with-blaze-compilers
diff --git a/.meteor/versions b/.meteor/versions
index d8ddf64..b91253d 100644
--- a/.meteor/versions
+++ b/.meteor/versions
@@ -7,11 +7,17 @@ aldeed:schema-index@1.0.1
 aldeed:simple-schema@1.5.3
 aldeed:template-extension@4.0.0
 allow-deny@1.0.5
+angular2-css@0.1.0
+angular2-html-templates@0.5.3
+angular2-with-blaze-compilers@0.5.7
 app-prod-security@0.0.0
 arillo:flow-router-helpers@0.5.2
 autoupdate@1.2.10
 babel-compiler@6.8.0
 babel-runtime@0.1.9
+barbatus:typescript@0.3.3
+barbatus:typescript-compiler@0.6.1
+barbatus:typescript-runtime@0.1.2
 base64@1.0.9
 binary-heap@1.0.9
 blaze@2.1.8
-- 
2.6.4


From ee69a33a13f08db108c483e763315c4abf9bcab7 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 17 Jun 2016 18:19:26 +0300
Subject: [PATCH 03/50] Step 1.2: Add angular2 , angular2-meteor and polyfills

---
 package.json | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)
 mode change 100755 => 100644 package.json

diff --git a/package.json b/package.json
old mode 100755
new mode 100644
index 49fa9dd..e29a6ea
--- a/package.json
+++ b/package.json
@@ -9,8 +9,13 @@
     "chimp-watch": "chimp --ddp=http://localhost:3000 --watch --mocha --path=tests"
   },
   "dependencies": {
-    "autoprefixer": "^6.3.1",
-    "faker": "^3.0.1"
+    "@angular/compiler": "2.0.0-rc.1",
+    "@angular/platform-browser-dynamic": "2.0.0-rc.1",
+    "@angular/router-deprecated": "2.0.0-rc.1",
+    "angular2-meteor": "0.5.5",
+    "angular2-meteor-polyfills": "0.1.1",
+    "autoprefixer": "6.3.1",
+    "faker": "3.0.1"
   },
   "devDependencies": {
     "eslint": "^2.3.0",
-- 
2.6.4


From a9d1cf09d2b4916c216146915095a8e633ce804d Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 17 Jun 2016 18:20:04 +0300
Subject: [PATCH 04/50] Step 1.3: Add angular 2 runtime package from Atmosphere

---
 .meteor/packages | 1 +
 .meteor/versions | 1 +
 2 files changed, 2 insertions(+)

diff --git a/.meteor/packages b/.meteor/packages
index d46ec8e..25a1410 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -70,3 +70,4 @@ practicalmeteor:mocha@2.1.1-rc.1
 hwillson:stub-collections
 johanbrook:publication-collector
 angular2-with-blaze-compilers
+barbatus:angular2-runtime
diff --git a/.meteor/versions b/.meteor/versions
index b91253d..67bfd2f 100644
--- a/.meteor/versions
+++ b/.meteor/versions
@@ -15,6 +15,7 @@ arillo:flow-router-helpers@0.5.2
 autoupdate@1.2.10
 babel-compiler@6.8.0
 babel-runtime@0.1.9
+barbatus:angular2-runtime@0.5.0
 barbatus:typescript@0.3.3
 barbatus:typescript-compiler@0.6.1
 barbatus:typescript-runtime@0.1.2
-- 
2.6.4


From 0743708049ce36d6fcdf1a6a4b342e3eff21f8a0 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 17 Jun 2016 18:29:53 +0300
Subject: [PATCH 05/50] Step 1.4: Removed less dependency

---
 .meteor/packages | 1 -
 .meteor/versions | 1 -
 2 files changed, 2 deletions(-)

diff --git a/.meteor/packages b/.meteor/packages
index 25a1410..d706fec 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -14,7 +14,6 @@ tracker
 # standard libraries
 jquery
 underscore
-less
 
 # ui
 blaze-html-templates
diff --git a/.meteor/versions b/.meteor/versions
index 67bfd2f..8fcc2c6 100644
--- a/.meteor/versions
+++ b/.meteor/versions
@@ -69,7 +69,6 @@ juliancwirko:postcss@1.1.1
 kadira:blaze-layout@2.3.0
 kadira:flow-router@2.12.1
 launch-screen@1.0.12
-less@2.6.1
 livedata@1.0.18
 localstorage@1.0.11
 logging@1.0.13
-- 
2.6.4


From af7c39f2230eee6315dfb6dc5310cb33c86d8322 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 17 Jun 2016 18:31:00 +0300
Subject: [PATCH 06/50] Step 1.5: Added angular2-blaze-template package

---
 package.json | 1 +
 1 file changed, 1 insertion(+)

diff --git a/package.json b/package.json
index e29a6ea..492d3b2 100644
--- a/package.json
+++ b/package.json
@@ -12,6 +12,7 @@
     "@angular/compiler": "2.0.0-rc.1",
     "@angular/platform-browser-dynamic": "2.0.0-rc.1",
     "@angular/router-deprecated": "2.0.0-rc.1",
+    "angular2-blaze-template": "0.0.1",
     "angular2-meteor": "0.5.5",
     "angular2-meteor-polyfills": "0.1.1",
     "autoprefixer": "6.3.1",
-- 
2.6.4


From 007e43208cb4973ef8b72e9cd1b664fc83b511f3 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 17 Jun 2016 18:33:14 +0300
Subject: [PATCH 07/50] Step 1.6: Change the extension of the main file

---
 client/main.js | 1 -
 client/main.ts | 1 +
 2 files changed, 1 insertion(+), 1 deletion(-)
 delete mode 100755 client/main.js
 create mode 100755 client/main.ts

diff --git a/client/main.js b/client/main.js
deleted file mode 100755
index 090ed9e..0000000
--- a/client/main.js
+++ /dev/null
@@ -1 +0,0 @@
-import '/imports/startup/client';
diff --git a/client/main.ts b/client/main.ts
new file mode 100755
index 0000000..090ed9e
--- /dev/null
+++ b/client/main.ts
@@ -0,0 +1 @@
+import '/imports/startup/client';
-- 
2.6.4


From 3e1c84b590de8debf81a2e2f973a144e1226628b Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 17 Jun 2016 18:41:23 +0300
Subject: [PATCH 08/50] Step 2.1: Create the MainComponent

---
 client/main.ts | 13 +++++++++++++
 1 file changed, 13 insertions(+)

diff --git a/client/main.ts b/client/main.ts
index 090ed9e..6d7311b 100755
--- a/client/main.ts
+++ b/client/main.ts
@@ -1 +1,14 @@
 import '/imports/startup/client';
+
+import {bootstrap} from "@angular/platform-browser-dynamic";
+import {Component} from "@angular/core";
+
+@Component({
+  selector: 'app',
+  template: ''
+})
+class MainComponent {
+  constructor() {}
+}
+
+bootstrap(MainComponent, []);
\ No newline at end of file
-- 
2.6.4


From d3589871d52cb78ec325b4175cc911e0015b2450 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 17 Jun 2016 18:42:10 +0300
Subject: [PATCH 09/50] Step 2.2: Changed the name of the main HTML file

---
 client/head.html      | 8 --------
 client/index.ng2.html | 8 ++++++++
 2 files changed, 8 insertions(+), 8 deletions(-)
 delete mode 100755 client/head.html
 create mode 100755 client/index.ng2.html

diff --git a/client/head.html b/client/head.html
deleted file mode 100755
index 6bf9f6f..0000000
--- a/client/head.html
+++ /dev/null
@@ -1,8 +0,0 @@
-<head>
-  <meta charset="utf-8">
-  <title>Todos - All your todos synced wherever you happen to be</title>
-  <meta name="description" content="The simple todo list that keeps your todos in sync everywhere free forever. Todos is open source and powered by Meteor.">
-  <meta name="viewport" content="user-scalable=no, initial-scale=1, minimal-ui, maximum-scale=1, minimum-scale=1" />
-  <link rel="shortcut icon" type="image/png" href="favicon.png?v1" sizes="16x16 32x32 64x64">
-  <link rel="apple-touch-icon" sizes="120x120" href="apple-touch-icon-precomposed.png">
-</head>
\ No newline at end of file
diff --git a/client/index.ng2.html b/client/index.ng2.html
new file mode 100755
index 0000000..6bf9f6f
--- /dev/null
+++ b/client/index.ng2.html
@@ -0,0 +1,8 @@
+<head>
+  <meta charset="utf-8">
+  <title>Todos - All your todos synced wherever you happen to be</title>
+  <meta name="description" content="The simple todo list that keeps your todos in sync everywhere free forever. Todos is open source and powered by Meteor.">
+  <meta name="viewport" content="user-scalable=no, initial-scale=1, minimal-ui, maximum-scale=1, minimum-scale=1" />
+  <link rel="shortcut icon" type="image/png" href="favicon.png?v1" sizes="16x16 32x32 64x64">
+  <link rel="apple-touch-icon" sizes="120x120" href="apple-touch-icon-precomposed.png">
+</head>
\ No newline at end of file
-- 
2.6.4


From 531af27ca7aed3829f6e06202e04b2cfef578893 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 17 Jun 2016 18:42:32 +0300
Subject: [PATCH 10/50] Step 2.3: Added app tag to the main HTML file

---
 client/index.ng2.html | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/client/index.ng2.html b/client/index.ng2.html
index 6bf9f6f..9670ce7 100755
--- a/client/index.ng2.html
+++ b/client/index.ng2.html
@@ -5,4 +5,7 @@
   <meta name="viewport" content="user-scalable=no, initial-scale=1, minimal-ui, maximum-scale=1, minimum-scale=1" />
   <link rel="shortcut icon" type="image/png" href="favicon.png?v1" sizes="16x16 32x32 64x64">
   <link rel="apple-touch-icon" sizes="120x120" href="apple-touch-icon-precomposed.png">
-</head>
\ No newline at end of file
+</head>
+<body>
+    <app></app>
+</body>
\ No newline at end of file
-- 
2.6.4


From 9a9204778cd0946f2be8b2f1c9d8ce403a37702e Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 17 Jun 2016 18:49:52 +0300
Subject: [PATCH 11/50] Step 3.1: Commented all the FlowRouter definitions

---
 imports/startup/client/routes.js | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/imports/startup/client/routes.js b/imports/startup/client/routes.js
index 6c61877..5bebb6e 100755
--- a/imports/startup/client/routes.js
+++ b/imports/startup/client/routes.js
@@ -11,6 +11,7 @@ import '../../ui/pages/app-not-found.js';
 // Import to override accounts templates
 import '../../ui/accounts/accounts-templates.js';
 
+/*
 FlowRouter.route('/lists/:_id', {
   name: 'Lists.show',
   action() {
@@ -48,3 +49,4 @@ AccountsTemplates.configureRoute('resetPwd', {
   name: 'resetPwd',
   path: '/reset-password',
 });
+*/
\ No newline at end of file
-- 
2.6.4


From d7aaa46059bf4958967e7a00f055b79de8d32af2 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 17 Jun 2016 18:51:58 +0300
Subject: [PATCH 12/50] Step 3.2: Added routes definitions using Angular 2
 router

---
 client/main.ts | 12 +++++++++---
 1 file changed, 9 insertions(+), 3 deletions(-)

diff --git a/client/main.ts b/client/main.ts
index 6d7311b..1aa4fdf 100755
--- a/client/main.ts
+++ b/client/main.ts
@@ -2,13 +2,19 @@ import '/imports/startup/client';
 
 import {bootstrap} from "@angular/platform-browser-dynamic";
 import {Component} from "@angular/core";
+import {ROUTER_DIRECTIVES, ROUTER_PROVIDERS, RouteConfig} from "@angular/router-deprecated";
 
 @Component({
-  selector: 'app',
-  template: ''
+  selector: "app",
+  directives: [ROUTER_DIRECTIVES],
+  template: `<router-outlet></router-outlet>`,
 })
+@RouteConfig([
+  {path: '/', name: 'Home', component: MainContainerComponent },
+  {path: '/lists/:_id', name: 'ListShow', component: ListShowComponent }
+])
 class MainComponent {
   constructor() {}
 }
 
-bootstrap(MainComponent, []);
\ No newline at end of file
+bootstrap(MainComponent, [ROUTER_PROVIDERS]);
\ No newline at end of file
-- 
2.6.4


From 5e52f881a91032341185f6127242ed0f53100e99 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 17 Jun 2016 19:34:18 +0300
Subject: [PATCH 13/50] Step 3.3: Added base tag

---
 client/index.ng2.html | 1 +
 1 file changed, 1 insertion(+)

diff --git a/client/index.ng2.html b/client/index.ng2.html
index 9670ce7..e80ca6a 100755
--- a/client/index.ng2.html
+++ b/client/index.ng2.html
@@ -5,6 +5,7 @@
   <meta name="viewport" content="user-scalable=no, initial-scale=1, minimal-ui, maximum-scale=1, minimum-scale=1" />
   <link rel="shortcut icon" type="image/png" href="favicon.png?v1" sizes="16x16 32x32 64x64">
   <link rel="apple-touch-icon" sizes="120x120" href="apple-touch-icon-precomposed.png">
+  <base href="/">
 </head>
 <body>
     <app></app>
-- 
2.6.4


From 27f0263ac8fbdb030b80c27340d423bad95fe030 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 17 Jun 2016 18:57:05 +0300
Subject: [PATCH 14/50] Step 3.4: Created a stub for MainContainerComponent

---
 client/imports/components/main-container.component.ts | 8 ++++++++
 1 file changed, 8 insertions(+)
 create mode 100644 client/imports/components/main-container.component.ts

diff --git a/client/imports/components/main-container.component.ts b/client/imports/components/main-container.component.ts
new file mode 100644
index 0000000..daeb148
--- /dev/null
+++ b/client/imports/components/main-container.component.ts
@@ -0,0 +1,8 @@
+import {Component} from "@angular/core";
+
+@Component({
+  template: 'Hello MainContainer!'
+})
+export class MainContainerComponent {
+
+}
\ No newline at end of file
-- 
2.6.4


From c0c78b136cbe904bb35294f6694ef6f48b7fbe87 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 17 Jun 2016 18:57:33 +0300
Subject: [PATCH 15/50] Step 3.5: Created a stub for ListShowComponent

---
 client/imports/components/list-show.component.ts | 8 ++++++++
 1 file changed, 8 insertions(+)
 create mode 100644 client/imports/components/list-show.component.ts

diff --git a/client/imports/components/list-show.component.ts b/client/imports/components/list-show.component.ts
new file mode 100644
index 0000000..cdc5fba
--- /dev/null
+++ b/client/imports/components/list-show.component.ts
@@ -0,0 +1,8 @@
+import {Component} from "@angular/core";
+
+@Component({
+  template: 'Hello ListShow!'
+})
+export class ListShowComponent {
+
+}
\ No newline at end of file
-- 
2.6.4


From f2c8c5391c143dcf41890287430483de43e8a690 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 17 Jun 2016 18:57:58 +0300
Subject: [PATCH 16/50] Step 3.6: Added imports

---
 client/main.ts | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/client/main.ts b/client/main.ts
index 1aa4fdf..362c403 100755
--- a/client/main.ts
+++ b/client/main.ts
@@ -3,6 +3,8 @@ import '/imports/startup/client';
 import {bootstrap} from "@angular/platform-browser-dynamic";
 import {Component} from "@angular/core";
 import {ROUTER_DIRECTIVES, ROUTER_PROVIDERS, RouteConfig} from "@angular/router-deprecated";
+import {MainContainerComponent} from "./imports/components/main-container.component";
+import {ListShowComponent} from "./imports/components/list-show.component";
 
 @Component({
   selector: "app",
-- 
2.6.4


From 580380cab059df50c92d618828015de4261264d3 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 17 Jun 2016 19:08:48 +0300
Subject: [PATCH 17/50] Step 4.1: Added MeteorComponent

---
 client/imports/components/main-container.component.ts | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

diff --git a/client/imports/components/main-container.component.ts b/client/imports/components/main-container.component.ts
index daeb148..999e0c3 100644
--- a/client/imports/components/main-container.component.ts
+++ b/client/imports/components/main-container.component.ts
@@ -1,8 +1,11 @@
 import {Component} from "@angular/core";
+import {MeteorComponent} from "angular2-meteor";
 
 @Component({
-  template: 'Hello MainContainer!'
+  directives: [],
+  template: ''
 })
-export class MainContainerComponent {
-
+export class MainContainerComponent extends MeteorComponent {
+  constructor() {
+  }
 }
\ No newline at end of file
-- 
2.6.4


From 878fa9a4fa433d4889f6d504e6ff07fc9d378e54 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 17 Jun 2016 19:10:45 +0300
Subject: [PATCH 18/50] Step 4.2: Added router redirection

---
 client/imports/components/main-container.component.ts | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

diff --git a/client/imports/components/main-container.component.ts b/client/imports/components/main-container.component.ts
index 999e0c3..fc07ba1 100644
--- a/client/imports/components/main-container.component.ts
+++ b/client/imports/components/main-container.component.ts
@@ -1,11 +1,16 @@
 import {Component} from "@angular/core";
 import {MeteorComponent} from "angular2-meteor";
+import {Lists} from "../../../imports/api/lists/lists.js";
+import {Router} from "@angular/router-deprecated";
 
 @Component({
   directives: [],
   template: ''
 })
 export class MainContainerComponent extends MeteorComponent {
-  constructor() {
+  constructor(router : Router) {
+    if (Lists.findOne()) {
+      router.navigate(['ListShow', {_id: Lists.findOne()._id}]);
+    }
   }
 }
\ No newline at end of file
-- 
2.6.4


From 17aac887be6d0571412a78d7abbd937f384612c1 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 17 Jun 2016 19:17:31 +0300
Subject: [PATCH 19/50] Step 4.3: Added data subscription

---
 client/imports/components/main-container.component.ts | 13 ++++++++++---
 1 file changed, 10 insertions(+), 3 deletions(-)

diff --git a/client/imports/components/main-container.component.ts b/client/imports/components/main-container.component.ts
index fc07ba1..6ec1952 100644
--- a/client/imports/components/main-container.component.ts
+++ b/client/imports/components/main-container.component.ts
@@ -9,8 +9,15 @@ import {Router} from "@angular/router-deprecated";
 })
 export class MainContainerComponent extends MeteorComponent {
   constructor(router : Router) {
-    if (Lists.findOne()) {
-      router.navigate(['ListShow', {_id: Lists.findOne()._id}]);
-    }
+    super();
+
+    this.subscribe('lists.public');
+    this.subscribe('lists.private');
+
+    this.autorun(() => {
+      if (Lists.findOne()) {
+        router.navigate(['ListShow', {_id: Lists.findOne()._id}]);
+      }
+    });
   }
 }
\ No newline at end of file
-- 
2.6.4


From 4ed93f5c7d298c15aab0fa8a8da2a4f9dc87e5b5 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 17 Jun 2016 19:18:39 +0300
Subject: [PATCH 20/50] Step 5.1: Get the ID of the list from the router

---
 client/imports/components/list-show.component.ts | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/client/imports/components/list-show.component.ts b/client/imports/components/list-show.component.ts
index cdc5fba..085236e 100644
--- a/client/imports/components/list-show.component.ts
+++ b/client/imports/components/list-show.component.ts
@@ -1,8 +1,11 @@
 import {Component} from "@angular/core";
+import {RouteParams} from "@angular/router-deprecated";
 
 @Component({
   template: 'Hello ListShow!'
 })
 export class ListShowComponent {
-
+  constructor(params : RouteParams) {
+    let listId = params.get("_id");
+  }
 }
\ No newline at end of file
-- 
2.6.4


From 52536c45120f5ebda6152a0ba09cdb098e287c9b Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 17 Jun 2016 19:21:50 +0300
Subject: [PATCH 21/50] Step 5.2: Added the template loading and context

---
 client/imports/components/list-show.component.ts | 11 ++++++++++-
 1 file changed, 10 insertions(+), 1 deletion(-)

diff --git a/client/imports/components/list-show.component.ts b/client/imports/components/list-show.component.ts
index 085236e..42202bf 100644
--- a/client/imports/components/list-show.component.ts
+++ b/client/imports/components/list-show.component.ts
@@ -1,11 +1,20 @@
 import {Component} from "@angular/core";
 import {RouteParams} from "@angular/router-deprecated";
+import {BlazeTemplate} from "angular2-blaze-template";
 
 @Component({
-  template: 'Hello ListShow!'
+  directives: [BlazeTemplate],
+  template: `<blaze-template name="App_body" [context]="templateContext"></blaze-template>`
 })
 export class ListShowComponent {
+  private templateContext : any;
+
   constructor(params : RouteParams) {
     let listId = params.get("_id");
+
+    this.templateContext = {
+      main: "Lists_show_page",
+      _id: listId
+    };
   }
 }
\ No newline at end of file
-- 
2.6.4


From 7d84aa3dfb4ea924b34da5e1be21acd388d5eea8 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 17 Jun 2016 19:27:46 +0300
Subject: [PATCH 22/50] Step 5.3: Changed the way of getting the list ID

---
 imports/ui/pages/lists-show-page.js | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/imports/ui/pages/lists-show-page.js b/imports/ui/pages/lists-show-page.js
index 4287674..3e33194 100755
--- a/imports/ui/pages/lists-show-page.js
+++ b/imports/ui/pages/lists-show-page.js
@@ -11,7 +11,7 @@ import './app-not-found.js';
 import '../components/lists-show.js';
 
 Template.Lists_show_page.onCreated(function listsShowPageOnCreated() {
-  this.getListId = () => FlowRouter.getParam('_id');
+  this.getListId = () => this.data._id;;
 
   this.autorun(() => {
     this.subscribe('todos.inList', this.getListId());
-- 
2.6.4


From 4448efc62bf6f495a2d08b69d7ca74e89a103b66 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Thu, 23 Jun 2016 10:55:50 +0300
Subject: [PATCH 23/50] Step 6.1: Migrate the App_body template

---
 client/imports/components/main-container.ng2.html | 48 +++++++++++++++++++++++
 1 file changed, 48 insertions(+)
 create mode 100644 client/imports/components/main-container.ng2.html

diff --git a/client/imports/components/main-container.ng2.html b/client/imports/components/main-container.ng2.html
new file mode 100644
index 0000000..d81e697
--- /dev/null
+++ b/client/imports/components/main-container.ng2.html
@@ -0,0 +1,48 @@
+<div id="container" [ngClass]="{'menu-open': menuOpen, 'cordova': isCordova}">
+    <section id="menu">
+        <div *ngIf="currentUser" class="btns-group-vertical">
+            <a href="#" class="js-user-menu btn-secondary">
+                <span *ngIf="userMenuOpen" class="icon-arrow-up"></span>
+                <span *ngIf="!userMenuOpen" class="icon-arrow-down"></span>
+
+                {{emailLocalPart()}}
+            </a>
+            <a *ngIf="userMenuOpen" class="js-logout btn-secondary">Logout</a>
+        </div>
+        <div *ngIf="!currentUser" class="btns-group">
+            <a href="SIGNIN_LINK" class="btn-secondary">Sign In</a>
+            <a href="JOIN_LINK" class="btn-secondary">Join</a>
+        </div>
+
+        <div class="list-todos">
+            <a class="js-new-list link-list-new">
+                <span class="icon-plus"></span>
+                New List
+            </a>
+
+            <a *ngFor="let list of lists" href="LIST_LINK" [title]="list.name"
+               class="list-todo" [ngClass]="{'active': isCurrentList(list)}">
+                <span *ngIf="list.userId" class="icon-lock"></span>
+                <span *ngIf="list.incompleteCount" class="count-list">{{list.incompleteCount}}</span>
+
+                {{list.name}}
+            </a>
+        </div>
+    </section>
+
+    <div *ngIf="!isConnected()" class="notifications">
+        <div class="notification">
+            <span class="icon-sync"></span>
+            <div class="meta">
+                <div class="title-notification">Trying to connect</div>
+                <div class="description">There seems to be a connection issue</div>
+            </div>
+        </div>
+    </div>
+
+    <div class="content-overlay"></div>
+
+    <div id="content-container">
+        <router-outlet></router-outlet>
+    </div>
+</div>
-- 
2.6.4


From d662fc0cd9808743a15446401ac31533471db8f5 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Thu, 23 Jun 2016 10:56:03 +0300
Subject: [PATCH 24/50] Step 6.2: Use the new template and added stub methods

---
 .../imports/components/main-container.component.ts | 22 +++++++++++++++++-----
 1 file changed, 17 insertions(+), 5 deletions(-)

diff --git a/client/imports/components/main-container.component.ts b/client/imports/components/main-container.component.ts
index 6ec1952..1e656f4 100644
--- a/client/imports/components/main-container.component.ts
+++ b/client/imports/components/main-container.component.ts
@@ -1,11 +1,11 @@
 import {Component} from "@angular/core";
 import {MeteorComponent} from "angular2-meteor";
 import {Lists} from "../../../imports/api/lists/lists.js";
-import {Router} from "@angular/router-deprecated";
+import {Router, ROUTER_DIRECTIVES} from "@angular/router-deprecated";
 
 @Component({
-  directives: [],
-  template: ''
+  directives: [ROUTER_DIRECTIVES],
+  templateUrl: '/client/imports/components/main-container.ng2.html'
 })
 export class MainContainerComponent extends MeteorComponent {
   constructor(router : Router) {
@@ -14,10 +14,22 @@ export class MainContainerComponent extends MeteorComponent {
     this.subscribe('lists.public');
     this.subscribe('lists.private');
 
-    this.autorun(() => {
+    /*this.autorun(() => {
       if (Lists.findOne()) {
         router.navigate(['ListShow', {_id: Lists.findOne()._id}]);
       }
-    });
+    });*/
+  }
+
+  isConnected() {
+
+  }
+
+  isCurrentList() {
+
+  }
+
+  emailLocalPart() {
+
   }
 }
\ No newline at end of file
-- 
2.6.4


From efaba8e9e1ff6a88bb0bb93f5ec474add3346143 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Thu, 23 Jun 2016 10:58:24 +0300
Subject: [PATCH 25/50] Step 6.3: Added the list of todo lists

---
 client/imports/components/main-container.component.ts | 16 ++++++++++------
 1 file changed, 10 insertions(+), 6 deletions(-)

diff --git a/client/imports/components/main-container.component.ts b/client/imports/components/main-container.component.ts
index 1e656f4..1f9964c 100644
--- a/client/imports/components/main-container.component.ts
+++ b/client/imports/components/main-container.component.ts
@@ -2,23 +2,27 @@ import {Component} from "@angular/core";
 import {MeteorComponent} from "angular2-meteor";
 import {Lists} from "../../../imports/api/lists/lists.js";
 import {Router, ROUTER_DIRECTIVES} from "@angular/router-deprecated";
+import {Mongo} from "meteor/mongo";
 
 @Component({
   directives: [ROUTER_DIRECTIVES],
   templateUrl: '/client/imports/components/main-container.ng2.html'
 })
 export class MainContainerComponent extends MeteorComponent {
-  constructor(router : Router) {
+  private lists : Mongo.Cursor;
+
+  constructor() {
     super();
 
     this.subscribe('lists.public');
     this.subscribe('lists.private');
 
-    /*this.autorun(() => {
-      if (Lists.findOne()) {
-        router.navigate(['ListShow', {_id: Lists.findOne()._id}]);
-      }
-    });*/
+    this.autorun(() => {
+      this.lists = Lists.find({ $or: [
+        { userId: { $exists: false } },
+        { userId: Meteor.userId() },
+      ] });
+    }, true);
   }
 
   isConnected() {
-- 
2.6.4


From ed04c09748b603099b1609a659c60e71fbf568dd Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Thu, 23 Jun 2016 11:18:18 +0300
Subject: [PATCH 26/50] Step 6.4: Implemented isConnect

---
 client/imports/components/main-container.component.ts | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/client/imports/components/main-container.component.ts b/client/imports/components/main-container.component.ts
index 1f9964c..b870293 100644
--- a/client/imports/components/main-container.component.ts
+++ b/client/imports/components/main-container.component.ts
@@ -3,6 +3,7 @@ import {MeteorComponent} from "angular2-meteor";
 import {Lists} from "../../../imports/api/lists/lists.js";
 import {Router, ROUTER_DIRECTIVES} from "@angular/router-deprecated";
 import {Mongo} from "meteor/mongo";
+import {Meteor} from "meteor/meteor";
 
 @Component({
   directives: [ROUTER_DIRECTIVES],
@@ -26,7 +27,7 @@ export class MainContainerComponent extends MeteorComponent {
   }
 
   isConnected() {
-
+    return Meteor.status().connected;
   }
 
   isCurrentList() {
-- 
2.6.4


From edbba9c297a94ea1c280c86e804a7156a4d65de1 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Thu, 23 Jun 2016 11:20:33 +0300
Subject: [PATCH 27/50] Step 6.5: Implemented emailLocalPart method

---
 client/imports/components/main-container.component.ts | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

diff --git a/client/imports/components/main-container.component.ts b/client/imports/components/main-container.component.ts
index b870293..9774afe 100644
--- a/client/imports/components/main-container.component.ts
+++ b/client/imports/components/main-container.component.ts
@@ -35,6 +35,13 @@ export class MainContainerComponent extends MeteorComponent {
   }
 
   emailLocalPart() {
-
+    if (Meteor.user()) {
+      const email = Meteor.user().emails[0].address;
+
+      return email.substring(0, email.indexOf('@'));
+    }
+    else {
+      return "";
+    }
   }
 }
\ No newline at end of file
-- 
2.6.4


From 0294b78918ae18554f5269f463bb4ab00d3cd4a5 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Thu, 23 Jun 2016 12:00:02 +0300
Subject: [PATCH 28/50] Step 6.6: Added ability to create child routes

---
 client/main.ts | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/client/main.ts b/client/main.ts
index 362c403..9b4472e 100755
--- a/client/main.ts
+++ b/client/main.ts
@@ -12,8 +12,7 @@ import {ListShowComponent} from "./imports/components/list-show.component";
   template: `<router-outlet></router-outlet>`,
 })
 @RouteConfig([
-  {path: '/', name: 'Home', component: MainContainerComponent },
-  {path: '/lists/:_id', name: 'ListShow', component: ListShowComponent }
+  {path: '/...', name: 'Home', component: MainContainerComponent }
 ])
 class MainComponent {
   constructor() {}
-- 
2.6.4


From 7fc8afd781944a7328ecf0b6a6edeac2b6d3339d Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Thu, 23 Jun 2016 12:00:17 +0300
Subject: [PATCH 29/50] Step 6.7: Added the child route in the main page

---
 client/imports/components/main-container.component.ts | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/client/imports/components/main-container.component.ts b/client/imports/components/main-container.component.ts
index 9774afe..5d13731 100644
--- a/client/imports/components/main-container.component.ts
+++ b/client/imports/components/main-container.component.ts
@@ -1,14 +1,18 @@
 import {Component} from "@angular/core";
 import {MeteorComponent} from "angular2-meteor";
 import {Lists} from "../../../imports/api/lists/lists.js";
-import {Router, ROUTER_DIRECTIVES} from "@angular/router-deprecated";
+import {Router, ROUTER_DIRECTIVES, RouteConfig} from "@angular/router-deprecated";
 import {Mongo} from "meteor/mongo";
 import {Meteor} from "meteor/meteor";
+import {ListShowComponent} from "./list-show.component";
 
 @Component({
   directives: [ROUTER_DIRECTIVES],
   templateUrl: '/client/imports/components/main-container.ng2.html'
 })
+@RouteConfig([
+  {path: 'lists/:_id', name: 'ListShow', component: ListShowComponent }
+])
 export class MainContainerComponent extends MeteorComponent {
   private lists : Mongo.Cursor;
 
-- 
2.6.4


From 8a5f695766506920e2f9fa9429b2527b2220e351 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Thu, 23 Jun 2016 12:01:30 +0300
Subject: [PATCH 30/50] Step 6.8: Update the list show component to load the
 child Template

---
 client/imports/components/list-show.component.ts | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/client/imports/components/list-show.component.ts b/client/imports/components/list-show.component.ts
index 42202bf..cc2ddac 100644
--- a/client/imports/components/list-show.component.ts
+++ b/client/imports/components/list-show.component.ts
@@ -4,7 +4,7 @@ import {BlazeTemplate} from "angular2-blaze-template";
 
 @Component({
   directives: [BlazeTemplate],
-  template: `<blaze-template name="App_body" [context]="templateContext"></blaze-template>`
+  template: `<blaze-template name="Lists_show_page" [context]="templateContext"></blaze-template>`
 })
 export class ListShowComponent {
   private templateContext : any;
@@ -13,7 +13,6 @@ export class ListShowComponent {
     let listId = params.get("_id");
 
     this.templateContext = {
-      main: "Lists_show_page",
       _id: listId
     };
   }
-- 
2.6.4


From 4e882ef35a4ed7dd67defe88485ea2eada8b61b6 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Thu, 23 Jun 2016 12:25:08 +0300
Subject: [PATCH 31/50] Step 6.9: Added default route for redirection

---
 client/imports/components/main-container.component.ts | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/client/imports/components/main-container.component.ts b/client/imports/components/main-container.component.ts
index 5d13731..09f01dd 100644
--- a/client/imports/components/main-container.component.ts
+++ b/client/imports/components/main-container.component.ts
@@ -5,18 +5,20 @@ import {Router, ROUTER_DIRECTIVES, RouteConfig} from "@angular/router-deprecated
 import {Mongo} from "meteor/mongo";
 import {Meteor} from "meteor/meteor";
 import {ListShowComponent} from "./list-show.component";
+import {ListRedirectorComponent} from "./list-redirector.component";
 
 @Component({
   directives: [ROUTER_DIRECTIVES],
   templateUrl: '/client/imports/components/main-container.ng2.html'
 })
 @RouteConfig([
-  {path: 'lists/:_id', name: 'ListShow', component: ListShowComponent }
+  {path: 'lists/:_id', name: 'ListShow', component: ListShowComponent },
+  {path: '', name: 'ListRedirector', component: ListRedirectorComponent, useAsDefault: true}
 ])
 export class MainContainerComponent extends MeteorComponent {
   private lists : Mongo.Cursor;
 
-  constructor() {
+  constructor(private router : Router) {
     super();
 
     this.subscribe('lists.public');
-- 
2.6.4


From 6afb600d2aa6697e5e9a41ed743e452d78dcb419 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Thu, 23 Jun 2016 12:25:22 +0300
Subject: [PATCH 32/50] Step 6.10: Added the list redirector component

---
 .../imports/components/list-redirector.component.ts  | 20 ++++++++++++++++++++
 1 file changed, 20 insertions(+)
 create mode 100644 client/imports/components/list-redirector.component.ts

diff --git a/client/imports/components/list-redirector.component.ts b/client/imports/components/list-redirector.component.ts
new file mode 100644
index 0000000..a08e2ae
--- /dev/null
+++ b/client/imports/components/list-redirector.component.ts
@@ -0,0 +1,20 @@
+import {Component} from "@angular/core";
+import {Router} from "@angular/router-deprecated";
+import {Lists} from "../../../imports/api/lists/lists.js";
+import {MeteorComponent} from "angular2-meteor/build/index";
+
+@Component({
+  directives: [],
+  template: 'T'
+})
+export class ListRedirectorComponent extends MeteorComponent {
+  constructor(router : Router) {
+    super();
+
+    this.autorun(() => {
+      if (Lists.findOne()) {
+        router.navigate(['ListShow', {_id: Lists.findOne()._id}]);
+      }
+    }, true);
+  }
+}
\ No newline at end of file
-- 
2.6.4


From 2376e2e2db202f0d6965a3c2aa8689a21ec44db7 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Thu, 23 Jun 2016 12:34:11 +0300
Subject: [PATCH 33/50] Step 6.11: Implemented the isCurrentList logic

---
 client/imports/components/main-container.component.ts | 11 ++++++++++-
 1 file changed, 10 insertions(+), 1 deletion(-)

diff --git a/client/imports/components/main-container.component.ts b/client/imports/components/main-container.component.ts
index 09f01dd..01ddde0 100644
--- a/client/imports/components/main-container.component.ts
+++ b/client/imports/components/main-container.component.ts
@@ -17,6 +17,9 @@ import {ListRedirectorComponent} from "./list-redirector.component";
 ])
 export class MainContainerComponent extends MeteorComponent {
   private lists : Mongo.Cursor;
+  private isCordova : boolean;
+  private menuOpen : boolean = false;
+  private userMenuOpen : boolean = false;
 
   constructor(private router : Router) {
     super();
@@ -24,6 +27,8 @@ export class MainContainerComponent extends MeteorComponent {
     this.subscribe('lists.public');
     this.subscribe('lists.private');
 
+    this.isCordova = Meteor.isCordova;
+
     this.autorun(() => {
       this.lists = Lists.find({ $or: [
         { userId: { $exists: false } },
@@ -36,8 +41,12 @@ export class MainContainerComponent extends MeteorComponent {
     return Meteor.status().connected;
   }
 
-  isCurrentList() {
+  isCurrentList(list) {
+    if (this.router.currentInstruction) {
+      let currentRouteParams = this.router.currentInstruction.component.params;
 
+      return currentRouteParams._id === list._id;
+    }
   }
 
   emailLocalPart() {
-- 
2.6.4


From 37aa8de081e22e7c609b427dc99cd25c4c9e2750 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Thu, 23 Jun 2016 12:48:06 +0300
Subject: [PATCH 34/50] Step 6.12: Added the routers link in the HTML file

---
 client/imports/components/main-container.ng2.html | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/client/imports/components/main-container.ng2.html b/client/imports/components/main-container.ng2.html
index d81e697..fdb9378 100644
--- a/client/imports/components/main-container.ng2.html
+++ b/client/imports/components/main-container.ng2.html
@@ -10,8 +10,8 @@
             <a *ngIf="userMenuOpen" class="js-logout btn-secondary">Logout</a>
         </div>
         <div *ngIf="!currentUser" class="btns-group">
-            <a href="SIGNIN_LINK" class="btn-secondary">Sign In</a>
-            <a href="JOIN_LINK" class="btn-secondary">Join</a>
+            <a [routerLink]="['Signin']" class="btn-secondary">Sign In</a>
+            <a [routerLink]="['Join']" class="btn-secondary">Join</a>
         </div>
 
         <div class="list-todos">
@@ -20,7 +20,7 @@
                 New List
             </a>
 
-            <a *ngFor="let list of lists" href="LIST_LINK" [title]="list.name"
+            <a *ngFor="let list of lists" [routerLink]="['ListShow', {_id: list._id}]" [title]="list.name"
                class="list-todo" [ngClass]="{'active': isCurrentList(list)}">
                 <span *ngIf="list.userId" class="icon-lock"></span>
                 <span *ngIf="list.incompleteCount" class="count-list">{{list.incompleteCount}}</span>
-- 
2.6.4


From 1dd7191cf2db1d75a02e82617ad33d2626946b5b Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Thu, 23 Jun 2016 12:48:20 +0300
Subject: [PATCH 35/50] Step 6.13: Added the routes definitions

---
 client/imports/components/main-container.component.ts | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/client/imports/components/main-container.component.ts b/client/imports/components/main-container.component.ts
index 01ddde0..5df273a 100644
--- a/client/imports/components/main-container.component.ts
+++ b/client/imports/components/main-container.component.ts
@@ -6,6 +6,8 @@ import {Mongo} from "meteor/mongo";
 import {Meteor} from "meteor/meteor";
 import {ListShowComponent} from "./list-show.component";
 import {ListRedirectorComponent} from "./list-redirector.component";
+import {JoinComponent} from "./join.component";
+import {SigninComponent} from "./signin.component";
 
 @Component({
   directives: [ROUTER_DIRECTIVES],
@@ -13,7 +15,9 @@ import {ListRedirectorComponent} from "./list-redirector.component";
 })
 @RouteConfig([
   {path: 'lists/:_id', name: 'ListShow', component: ListShowComponent },
-  {path: '', name: 'ListRedirector', component: ListRedirectorComponent, useAsDefault: true}
+  {path: '', name: 'ListRedirector', component: ListRedirectorComponent, useAsDefault: true},
+  {path: 'join', name: 'Join', component: JoinComponent},
+  {path: 'signin', name: 'Signin', component: SigninComponent}
 ])
 export class MainContainerComponent extends MeteorComponent {
   private lists : Mongo.Cursor;
-- 
2.6.4


From 07854ea82996c74158a2c1056dd69a867debf957 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Thu, 23 Jun 2016 12:48:46 +0300
Subject: [PATCH 36/50] Step 6.14: Added stubs for signin/join components

---
 client/imports/components/join.component.ts   | 12 ++++++++++++
 client/imports/components/signin.component.ts | 12 ++++++++++++
 2 files changed, 24 insertions(+)
 create mode 100644 client/imports/components/join.component.ts
 create mode 100644 client/imports/components/signin.component.ts

diff --git a/client/imports/components/join.component.ts b/client/imports/components/join.component.ts
new file mode 100644
index 0000000..d509962
--- /dev/null
+++ b/client/imports/components/join.component.ts
@@ -0,0 +1,12 @@
+import {Component} from "@angular/core";
+import {MeteorComponent} from "angular2-meteor/build/index";
+
+@Component({
+  directives: [],
+  template: 'Join!'
+})
+export class JoinComponent extends MeteorComponent {
+  constructor() {
+    super();
+  }
+}
\ No newline at end of file
diff --git a/client/imports/components/signin.component.ts b/client/imports/components/signin.component.ts
new file mode 100644
index 0000000..273f990
--- /dev/null
+++ b/client/imports/components/signin.component.ts
@@ -0,0 +1,12 @@
+import {Component} from "@angular/core";
+import {MeteorComponent} from "angular2-meteor/build/index";
+
+@Component({
+  directives: [],
+  template: 'Signin!'
+})
+export class SigninComponent extends MeteorComponent {
+  constructor() {
+    super();
+  }
+}
\ No newline at end of file
-- 
2.6.4


From 69334479f60cbcf45bd92dfccead1c172b4dd204 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Thu, 23 Jun 2016 12:54:48 +0300
Subject: [PATCH 37/50] Step 6.15: Added addNewList method to the main
 component

---
 client/imports/components/main-container.component.ts | 13 +++++++++++++
 1 file changed, 13 insertions(+)

diff --git a/client/imports/components/main-container.component.ts b/client/imports/components/main-container.component.ts
index 5df273a..64e0dff 100644
--- a/client/imports/components/main-container.component.ts
+++ b/client/imports/components/main-container.component.ts
@@ -8,6 +8,8 @@ import {ListShowComponent} from "./list-show.component";
 import {ListRedirectorComponent} from "./list-redirector.component";
 import {JoinComponent} from "./join.component";
 import {SigninComponent} from "./signin.component";
+import { insert } from '../../../imports/api/lists/methods.js';
+
 
 @Component({
   directives: [ROUTER_DIRECTIVES],
@@ -63,4 +65,15 @@ export class MainContainerComponent extends MeteorComponent {
       return "";
     }
   }
+
+  addNewList() {
+    const listId = insert.call((err) => {
+      if (err) {
+        this.router.navigate(['Home']);
+        alert('Could not create list.');
+      }
+    });
+
+    this.router.navigate(['ListShow', {_id: listId}]);
+  }
 }
\ No newline at end of file
-- 
2.6.4


From c103553805397c322d001d3b8500b467a317fa21 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Thu, 23 Jun 2016 12:55:11 +0300
Subject: [PATCH 38/50] Step 6.16: Added click action to the new list button

---
 client/imports/components/main-container.ng2.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/client/imports/components/main-container.ng2.html b/client/imports/components/main-container.ng2.html
index fdb9378..fc3da0d 100644
--- a/client/imports/components/main-container.ng2.html
+++ b/client/imports/components/main-container.ng2.html
@@ -15,7 +15,7 @@
         </div>
 
         <div class="list-todos">
-            <a class="js-new-list link-list-new">
+            <a class="js-new-list link-list-new" (click)="addNewList()">
                 <span class="icon-plus"></span>
                 New List
             </a>
-- 
2.6.4


From b97b5e611ed8bddad8136aabd918b25934e78ce8 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Thu, 23 Jun 2016 12:58:50 +0300
Subject: [PATCH 39/50] Step 6.17: Added logout method

---
 client/imports/components/main-container.component.ts | 16 ++++++++++++++++
 1 file changed, 16 insertions(+)

diff --git a/client/imports/components/main-container.component.ts b/client/imports/components/main-container.component.ts
index 64e0dff..720496b 100644
--- a/client/imports/components/main-container.component.ts
+++ b/client/imports/components/main-container.component.ts
@@ -76,4 +76,20 @@ export class MainContainerComponent extends MeteorComponent {
 
     this.router.navigate(['ListShow', {_id: listId}]);
   }
+
+  logout() {
+    Meteor.logout();
+
+    if (this.router.currentInstruction) {
+      let currentRouteParams = this.router.currentInstruction.component.params;
+
+      if (currentRouteParams._id) {
+        const list = Lists.findOne(currentRouteParams._id);
+
+        if (list.userId) {
+          this.router.navigate(['ListShow', {_id: Lists.findOne({ userId: { $exists: false } })._id}]);
+        }
+      }
+    }
+  }
 }
\ No newline at end of file
-- 
2.6.4


From d8a0c74f3fb12f95f858733c24e5644f723d9d01 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Thu, 23 Jun 2016 12:59:01 +0300
Subject: [PATCH 40/50] Step 6.18: Added logout click action

---
 client/imports/components/main-container.ng2.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/client/imports/components/main-container.ng2.html b/client/imports/components/main-container.ng2.html
index fc3da0d..a35bc92 100644
--- a/client/imports/components/main-container.ng2.html
+++ b/client/imports/components/main-container.ng2.html
@@ -7,7 +7,7 @@
 
                 {{emailLocalPart()}}
             </a>
-            <a *ngIf="userMenuOpen" class="js-logout btn-secondary">Logout</a>
+            <a *ngIf="userMenuOpen" class="js-logout btn-secondary" (click)="logout()">Logout</a>
         </div>
         <div *ngIf="!currentUser" class="btns-group">
             <a [routerLink]="['Signin']" class="btn-secondary">Sign In</a>
-- 
2.6.4


From 430fd19e99c2af65ca62aceac7bf0c57e726c78f Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Thu, 23 Jun 2016 17:04:50 +0300
Subject: [PATCH 41/50] Step 6.19: Removed App_body and root_director templates

---
 imports/startup/client/routes.js      |   2 -
 imports/ui/layouts/app-body.html      |  75 -------------------
 imports/ui/layouts/app-body.js        | 136 ----------------------------------
 imports/ui/pages/root-redirector.html |   2 -
 imports/ui/pages/root-redirector.js   |  14 ----
 5 files changed, 229 deletions(-)
 delete mode 100755 imports/ui/layouts/app-body.html
 delete mode 100755 imports/ui/layouts/app-body.js
 delete mode 100755 imports/ui/pages/root-redirector.html
 delete mode 100755 imports/ui/pages/root-redirector.js

diff --git a/imports/startup/client/routes.js b/imports/startup/client/routes.js
index 5bebb6e..4213bc4 100755
--- a/imports/startup/client/routes.js
+++ b/imports/startup/client/routes.js
@@ -3,8 +3,6 @@ import { BlazeLayout } from 'meteor/kadira:blaze-layout';
 import { AccountsTemplates } from 'meteor/useraccounts:core';
 
 // Import to load these templates
-import '../../ui/layouts/app-body.js';
-import '../../ui/pages/root-redirector.js';
 import '../../ui/pages/lists-show-page.js';
 import '../../ui/pages/app-not-found.js';
 
diff --git a/imports/ui/layouts/app-body.html b/imports/ui/layouts/app-body.html
deleted file mode 100755
index 96756fe..0000000
--- a/imports/ui/layouts/app-body.html
+++ /dev/null
@@ -1,75 +0,0 @@
-<template name="App_body">
-  {{#HammerTouchArea gestureMap=templateGestures}}
-    <div id="container" class="{{menuOpen}} {{cordova}}">
-      <section id="menu">
-        {{#if currentUser}}
-          <div class="btns-group-vertical">
-            <a href="#" class="js-user-menu btn-secondary">
-              {{#if userMenuOpen}}
-                <span class="icon-arrow-up"></span>
-                {{else}}
-                <span class="icon-arrow-down"></span>
-              {{/if}}
-
-              {{emailLocalPart}}
-            </a>
-            {{#if userMenuOpen}}
-              <a class="js-logout btn-secondary">{{_ 'Logout'}}</a>
-            {{/if}}
-          </div>
-        {{else}}
-          <div class="btns-group">
-            <a href="{{pathFor 'signin'}}" class="btn-secondary">{{_ 'Sign In'}}</a>
-            <a href="{{pathFor 'join'}}" class="btn-secondary">{{_ 'Join'}}</a>
-          </div>
-        {{/if}}
-
-        <div class="list-todos">
-          <a class="js-new-list link-list-new">
-            <span class="icon-plus"></span>
-            {{_ "New List"}}
-          </a>
-
-          {{#each list in lists}}
-            <a href="{{pathFor 'Lists.show' _id=list._id}}" title="{{list.name}}"
-                class="list-todo {{activeListClass list}}">
-              {{#if list.userId}}
-                <span class="icon-lock"></span>
-              {{/if}}
-
-              {{#if list.incompleteCount}}
-                <span class="count-list">{{list.incompleteCount}}</span>
-              {{/if}}
-
-              {{list.name}}
-            </a>
-          {{/each}}
-        </div>
-      </section>
-
-      {{#unless connected}}
-        <div class="notifications">
-          <div class="notification">
-            <span class="icon-sync"></span>
-            <div class="meta">
-              <div class="title-notification">Trying to connect</div>
-              <div class="description">There seems to be a connection issue</div>
-            </div>
-          </div>
-        </div>
-      {{/unless}}
-
-      <div class="content-overlay"></div>
-
-      <div id="content-container">
-        {{#momentum plugin="fade"}}
-          {{#if Template.subscriptionsReady}}
-            {{> Template.dynamic template=main}}
-          {{else}}
-            {{> App_loading}}
-          {{/if}}
-        {{/momentum}}
-      </div>
-    </div>
-  {{/HammerTouchArea}}
-</template>
diff --git a/imports/ui/layouts/app-body.js b/imports/ui/layouts/app-body.js
deleted file mode 100755
index f90a3a3..0000000
--- a/imports/ui/layouts/app-body.js
+++ /dev/null
@@ -1,136 +0,0 @@
-import './app-body.html';
-
-import { Meteor } from 'meteor/meteor';
-import { ReactiveVar } from 'meteor/reactive-var';
-import { ReactiveDict } from 'meteor/reactive-dict';
-import { Lists } from '../../api/lists/lists.js';
-import { Template } from 'meteor/templating';
-import { ActiveRoute } from 'meteor/zimme:active-route';
-import { FlowRouter } from 'meteor/kadira:flow-router';
-import { TAPi18n } from 'meteor/tap:i18n';
-
-import { insert } from '../../api/lists/methods.js';
-
-import '../components/loading.js';
-
-const CONNECTION_ISSUE_TIMEOUT = 5000;
-
-// A store which is local to this file?
-const showConnectionIssue = new ReactiveVar(false);
-
-Meteor.startup(() => {
-  // Only show the connection error box if it has been 5 seconds since
-  // the app started
-  setTimeout(() => {
-    // FIXME:
-    // Launch screen handle created in lib/router.js
-    // dataReadyHold.release();
-
-    // Show the connection error box
-    showConnectionIssue.set(true);
-  }, CONNECTION_ISSUE_TIMEOUT);
-});
-
-Template.App_body.onCreated(function appBodyOnCreated() {
-  this.subscribe('lists.public');
-  this.subscribe('lists.private');
-
-  this.state = new ReactiveDict();
-  this.state.setDefault({
-    menuOpen: false,
-    userMenuOpen: false,
-  });
-});
-
-Template.App_body.helpers({
-  menuOpen() {
-    const instance = Template.instance();
-    return instance.state.get('menuOpen') && 'menu-open';
-  },
-  cordova() {
-    return Meteor.isCordova && 'cordova';
-  },
-  emailLocalPart() {
-    const email = Meteor.user().emails[0].address;
-    return email.substring(0, email.indexOf('@'));
-  },
-  userMenuOpen() {
-    const instance = Template.instance();
-    return instance.state.get('userMenuOpen');
-  },
-  lists() {
-    return Lists.find({ $or: [
-      { userId: { $exists: false } },
-      { userId: Meteor.userId() },
-    ] });
-  },
-  activeListClass(list) {
-    const active = ActiveRoute.name('Lists.show')
-      && FlowRouter.getParam('_id') === list._id;
-
-    return active && 'active';
-  },
-  connected() {
-    if (showConnectionIssue.get()) {
-      return Meteor.status().connected;
-    }
-
-    return true;
-  },
-  templateGestures: {
-    'swipeleft .cordova'(event, instance) {
-      instance.state.set('menuOpen', false);
-    },
-    'swiperight .cordova'(event, instance) {
-      instance.state.set('menuOpen', true);
-    },
-  },
-});
-
-Template.App_body.events({
-  'click .js-menu'(event, instance) {
-    instance.state.set('menuOpen', !instance.state.get('menuOpen'));
-  },
-
-  'click .content-overlay'(event, instance) {
-    instance.state.set('menuOpen', false);
-    event.preventDefault();
-  },
-
-  'click .js-user-menu'(event, instance) {
-    instance.state.set('userMenuOpen', !instance.state.get('userMenuOpen'));
-    // stop the menu from closing
-    event.stopImmediatePropagation();
-  },
-
-  'click #menu a'(event, instance) {
-    instance.state.set('menuOpen', false);
-  },
-
-  'click .js-logout'() {
-    Meteor.logout();
-
-    // if we are on a private list, we'll need to go to a public one
-    if (ActiveRoute.name('Lists.show')) {
-      // TODO -- test this code path
-      const list = Lists.findOne(FlowRouter.getParam('_id'));
-      if (list.userId) {
-        FlowRouter.go('Lists.show', Lists.findOne({ userId: { $exists: false } }));
-      }
-    }
-  },
-
-  'click .js-new-list'() {
-    const listId = insert.call((err) => {
-      if (err) {
-        // At this point, we have already redirected to the new list page, but
-        // for some reason the list didn't get created. This should almost never
-        // happen, but it's good to handle it anyway.
-        FlowRouter.go('App.home');
-        alert(TAPi18n.__('Could not create list.')); // eslint-disable-line no-alert
-      }
-    });
-
-    FlowRouter.go('Lists.show', { _id: listId });
-  },
-});
diff --git a/imports/ui/pages/root-redirector.html b/imports/ui/pages/root-redirector.html
deleted file mode 100755
index f4911b9..0000000
--- a/imports/ui/pages/root-redirector.html
+++ /dev/null
@@ -1,2 +0,0 @@
-<template name="app_rootRedirector">
-</template>
\ No newline at end of file
diff --git a/imports/ui/pages/root-redirector.js b/imports/ui/pages/root-redirector.js
deleted file mode 100755
index 5cb98d9..0000000
--- a/imports/ui/pages/root-redirector.js
+++ /dev/null
@@ -1,14 +0,0 @@
-import { Meteor } from 'meteor/meteor';
-import { Template } from 'meteor/templating';
-import { FlowRouter } from 'meteor/kadira:flow-router';
-import { Lists } from '../../api/lists/lists.js';
-
-import './root-redirector.html';
-
-Template.app_rootRedirector.onCreated(() => {
-  // We need to set a timeout here so that we don't redirect from inside a redirection
-  //   which is a no-no in FR.
-  Meteor.defer(() => {
-    FlowRouter.go('Lists.show', Lists.findOne());
-  });
-});
-- 
2.6.4


From 01528f775cba6f923f936b6a196fb71ea17d37b4 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Thu, 23 Jun 2016 14:53:41 +0300
Subject: [PATCH 42/50] Step 7.1: Take the layout of the join form

---
 client/imports/components/join.ng2.html | 24 ++++++++++++++++++++++++
 1 file changed, 24 insertions(+)
 create mode 100644 client/imports/components/join.ng2.html

diff --git a/client/imports/components/join.ng2.html b/client/imports/components/join.ng2.html
new file mode 100644
index 0000000..fbbd088
--- /dev/null
+++ b/client/imports/components/join.ng2.html
@@ -0,0 +1,24 @@
+<div class="page auth">
+    <nav>
+        <div class="nav-group">
+            <a href="#" class="js-menu nav-item">
+                <span class="icon-list-unordered"></span>
+            </a>
+        </div>
+    </nav>
+
+    <div class="content-scrollable">
+        <div class="wrapper-auth">
+            <div class="at-form">
+                <h1 class="title-auth">Join</h1>
+                <p class="subtitle-auth">Signing in allows you to have private lists</p>
+                <div class="at-pwd-form">
+                    <form role="form" id="at-pwd-form">
+
+                    </form>
+                </div>
+            </div>
+
+        </div>
+    </div>
+</div>
\ No newline at end of file
-- 
2.6.4


From ead20a7a965319975ac1e3cc9dc9d5d9e772e7d5 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Thu, 23 Jun 2016 14:53:55 +0300
Subject: [PATCH 43/50] Step 7.2: Use the new template

---
 client/imports/components/join.component.ts | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/client/imports/components/join.component.ts b/client/imports/components/join.component.ts
index d509962..979f1a7 100644
--- a/client/imports/components/join.component.ts
+++ b/client/imports/components/join.component.ts
@@ -3,7 +3,7 @@ import {MeteorComponent} from "angular2-meteor/build/index";
 
 @Component({
   directives: [],
-  template: 'Join!'
+  templateUrl: '/client/imports/components/join.ng2.html'
 })
 export class JoinComponent extends MeteorComponent {
   constructor() {
-- 
2.6.4


From 893bc190af79acea0f920bee2f8441ae0b1f409a Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Thu, 23 Jun 2016 16:47:20 +0300
Subject: [PATCH 44/50] Step 7.3: Added the join form HTML

---
 client/imports/components/join.ng2.html | 20 ++++++++++++++++----
 1 file changed, 16 insertions(+), 4 deletions(-)

diff --git a/client/imports/components/join.ng2.html b/client/imports/components/join.ng2.html
index fbbd088..fd16b02 100644
--- a/client/imports/components/join.ng2.html
+++ b/client/imports/components/join.ng2.html
@@ -6,19 +6,31 @@
             </a>
         </div>
     </nav>
-
     <div class="content-scrollable">
         <div class="wrapper-auth">
             <div class="at-form">
                 <h1 class="title-auth">Join</h1>
                 <p class="subtitle-auth">Signing in allows you to have private lists</p>
+                <div class="list-errors">
+                    <div *ngFor="let errorText of errors" class="list-item">{{errorText}}</div>
+                </div>
                 <div class="at-pwd-form">
-                    <form role="form" id="at-pwd-form">
-
+                    <form id="at-pwd-form" (ngSubmit)="join()" #joinForm="ngForm">
+                        <div class="input">
+                            <input [(ngModel)]="model.email" ngControl="email" #email="ngForm" type="text" id="email" name="email" placeholder="Email" class="form-control" autocapitalize="none" autocorrect="off">
+                        </div>
+                        <div class="input">
+                            <input [(ngModel)]="model.password" ngControl="password" #password="ngForm" required type="password" id="password" name="password" class="form-control" placeholder="Password" autocapitalize="none" autocorrect="off">
+                        </div>
+                        <div class="input">
+                            <input [(ngModel)]="model.passwordVerify" ngControl="passwordVerify" #passwordVerify="ngForm" required type="password" id="password_verify" class="form-control" name="password_verify" placeholder="Password (Again)" autocapitalize="none" autocorrect="off">
+                        </div>
+                        <button type="submit" class="btn-primary" [disabled]="!joinForm.form.valid">
+                            REGISTER
+                        </button>
                     </form>
                 </div>
             </div>
-
         </div>
     </div>
 </div>
\ No newline at end of file
-- 
2.6.4


From a6f4a1e28b28d720cd3987148257c09490c1f4c6 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Thu, 23 Jun 2016 16:47:41 +0300
Subject: [PATCH 45/50] Step 7.4: Added the logic for join component

---
 client/imports/components/join.component.ts | 42 ++++++++++++++++++++++++++++-
 1 file changed, 41 insertions(+), 1 deletion(-)

diff --git a/client/imports/components/join.component.ts b/client/imports/components/join.component.ts
index 979f1a7..fbf7c5c 100644
--- a/client/imports/components/join.component.ts
+++ b/client/imports/components/join.component.ts
@@ -1,12 +1,52 @@
 import {Component} from "@angular/core";
 import {MeteorComponent} from "angular2-meteor/build/index";
+import {Accounts} from "meteor/accounts-base";
+import {Router} from "@angular/router-deprecated";
+
+class JoinModel {
+  constructor(public email : string, public password : string, public passwordVerify : string) {
+
+  }
+}
 
 @Component({
   directives: [],
   templateUrl: '/client/imports/components/join.ng2.html'
 })
 export class JoinComponent extends MeteorComponent {
-  constructor() {
+  private model : JoinModel;
+  private errors : Array<string> = [];
+
+  constructor(private router : Router) {
     super();
+
+    this.model = new JoinModel('', '', '');
+  }
+
+  resetErrors() {
+    this.errors = [];
+  }
+
+  join() {
+    this.resetErrors();
+
+    if (this.model.password !== this.model.passwordVerify) {
+      this.errors.push("Passwords does not match!");
+
+      return;
+    }
+
+    Accounts.createUser({
+      email: this.model.email,
+      password: this.model.email
+    }, (err) => {
+      if (err) {
+        this.errors.push(err.reason);
+
+        return;
+      }
+
+      this.router.root.navigate(['Home']);
+    });
   }
 }
\ No newline at end of file
-- 
2.6.4


From 6c1bab196ba03c8f5d2e933644411733acd62272 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Thu, 23 Jun 2016 16:48:11 +0300
Subject: [PATCH 46/50] Step 7.5: Removed Blaze accounts packages

---
 .meteor/packages                                   |  3 --
 .meteor/versions                                   |  4 --
 imports/startup/client/index.js                    |  1 -
 imports/startup/client/routes.js                   | 46 +---------------------
 .../startup/client/useraccounts-configuration.js   | 20 ----------
 5 files changed, 1 insertion(+), 73 deletions(-)
 delete mode 100755 imports/startup/client/useraccounts-configuration.js

diff --git a/.meteor/packages b/.meteor/packages
index d706fec..7ff072c 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -42,9 +42,6 @@ tap:i18n
 
 # accounts
 accounts-password
-useraccounts:unstyled
-useraccounts:flow-routing
-softwarerero:accounts-t9n
 
 # mobile
 crosswalk
diff --git a/.meteor/versions b/.meteor/versions
index 8fcc2c6..78e859b 100644
--- a/.meteor/versions
+++ b/.meteor/versions
@@ -116,7 +116,6 @@ simple:rest@1.1.1
 simple:rest-accounts-password@1.1.2
 simple:rest-bearer-token-parser@1.0.1
 simple:rest-json-error-handler@1.0.1
-softwarerero:accounts-t9n@1.3.4
 spacebars@1.0.12
 spacebars-compiler@1.0.12
 srp@1.0.9
@@ -129,9 +128,6 @@ tracker@1.0.14
 ui@1.0.11
 underscore@1.0.9
 url@1.0.10
-useraccounts:core@1.14.2
-useraccounts:flow-routing@1.14.2
-useraccounts:unstyled@1.14.2
 webapp@1.2.9
 webapp-hashing@1.0.9
 xolvio:cleaner@0.3.1
diff --git a/imports/startup/client/index.js b/imports/startup/client/index.js
index a36a1b1..b0b0f47 100755
--- a/imports/startup/client/index.js
+++ b/imports/startup/client/index.js
@@ -1,2 +1 @@
-import './useraccounts-configuration.js';
 import './routes.js';
diff --git a/imports/startup/client/routes.js b/imports/startup/client/routes.js
index 4213bc4..dbd1a96 100755
--- a/imports/startup/client/routes.js
+++ b/imports/startup/client/routes.js
@@ -1,50 +1,6 @@
 import { FlowRouter } from 'meteor/kadira:flow-router';
 import { BlazeLayout } from 'meteor/kadira:blaze-layout';
-import { AccountsTemplates } from 'meteor/useraccounts:core';
 
 // Import to load these templates
 import '../../ui/pages/lists-show-page.js';
-import '../../ui/pages/app-not-found.js';
-
-// Import to override accounts templates
-import '../../ui/accounts/accounts-templates.js';
-
-/*
-FlowRouter.route('/lists/:_id', {
-  name: 'Lists.show',
-  action() {
-    BlazeLayout.render('App_body', { main: 'Lists_show_page' });
-  },
-});
-
-FlowRouter.route('/', {
-  name: 'App.home',
-  action() {
-    BlazeLayout.render('App_body', { main: 'app_rootRedirector' });
-  },
-});
-
-// the App_notFound template is used for unknown routes and missing lists
-FlowRouter.notFound = {
-  action() {
-    BlazeLayout.render('App_body', { main: 'App_notFound' });
-  },
-};
-
-AccountsTemplates.configureRoute('signIn', {
-  name: 'signin',
-  path: '/signin',
-});
-
-AccountsTemplates.configureRoute('signUp', {
-  name: 'join',
-  path: '/join',
-});
-
-AccountsTemplates.configureRoute('forgotPwd');
-
-AccountsTemplates.configureRoute('resetPwd', {
-  name: 'resetPwd',
-  path: '/reset-password',
-});
-*/
\ No newline at end of file
+import '../../ui/pages/app-not-found.js';
\ No newline at end of file
diff --git a/imports/startup/client/useraccounts-configuration.js b/imports/startup/client/useraccounts-configuration.js
deleted file mode 100755
index a24d28c..0000000
--- a/imports/startup/client/useraccounts-configuration.js
+++ /dev/null
@@ -1,20 +0,0 @@
-import { AccountsTemplates } from 'meteor/useraccounts:core';
-import { TAPi18n } from 'meteor/tap:i18n';
-
-AccountsTemplates.configure({
-  showForgotPasswordLink: true,
-  texts: {
-    errors: {
-      loginForbidden: TAPi18n.__('Incorrect username or password'),
-      pwdMismatch: TAPi18n.__('Passwords don\'t match'),
-    },
-    title: {
-      signIn: TAPi18n.__('Sign In'),
-      signUp: TAPi18n.__('Join'),
-    },
-  },
-  defaultTemplate: 'Auth_page',
-  defaultLayout: 'App_body',
-  defaultContentRegion: 'main',
-  defaultLayoutRegions: {},
-});
-- 
2.6.4


From 7d02e08274ec688405a27563b9dc50044e801e3f Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Thu, 23 Jun 2016 16:49:58 +0300
Subject: [PATCH 47/50] Step 7.6: Added current user to the main page

---
 client/imports/components/main-container.component.ts | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/client/imports/components/main-container.component.ts b/client/imports/components/main-container.component.ts
index 720496b..1333107 100644
--- a/client/imports/components/main-container.component.ts
+++ b/client/imports/components/main-container.component.ts
@@ -26,6 +26,7 @@ export class MainContainerComponent extends MeteorComponent {
   private isCordova : boolean;
   private menuOpen : boolean = false;
   private userMenuOpen : boolean = false;
+  private currentUser : Meteor.User;
 
   constructor(private router : Router) {
     super();
@@ -40,6 +41,8 @@ export class MainContainerComponent extends MeteorComponent {
         { userId: { $exists: false } },
         { userId: Meteor.userId() },
       ] });
+
+      this.currentUser = Meteor.user();
     }, true);
   }
 
-- 
2.6.4


From b11dc184bec9fc1c1f3baf4cf4479719060f9b28 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Thu, 23 Jun 2016 16:51:22 +0300
Subject: [PATCH 48/50] Step 7.7: Fix the user menu toggle

---
 client/imports/components/main-container.ng2.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/client/imports/components/main-container.ng2.html b/client/imports/components/main-container.ng2.html
index a35bc92..0ff0645 100644
--- a/client/imports/components/main-container.ng2.html
+++ b/client/imports/components/main-container.ng2.html
@@ -1,7 +1,7 @@
 <div id="container" [ngClass]="{'menu-open': menuOpen, 'cordova': isCordova}">
     <section id="menu">
         <div *ngIf="currentUser" class="btns-group-vertical">
-            <a href="#" class="js-user-menu btn-secondary">
+            <a class="js-user-menu btn-secondary" (click)="userMenuOpen = !userMenuOpen">
                 <span *ngIf="userMenuOpen" class="icon-arrow-up"></span>
                 <span *ngIf="!userMenuOpen" class="icon-arrow-down"></span>
 
-- 
2.6.4


From 981007d86d2744e7d21eead54db2bb6477490238 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Thu, 23 Jun 2016 17:00:21 +0300
Subject: [PATCH 49/50] Step 7.8: Added sign in template HTML

---
 client/imports/components/signin.ng2.html | 33 +++++++++++++++++++++++++++++++
 1 file changed, 33 insertions(+)
 create mode 100644 client/imports/components/signin.ng2.html

diff --git a/client/imports/components/signin.ng2.html b/client/imports/components/signin.ng2.html
new file mode 100644
index 0000000..5c71bfa
--- /dev/null
+++ b/client/imports/components/signin.ng2.html
@@ -0,0 +1,33 @@
+<div class="page auth">
+    <nav>
+        <div class="nav-group">
+            <a href="#" class="js-menu nav-item">
+                <span class="icon-list-unordered"></span>
+            </a>
+        </div>
+    </nav>
+    <div class="content-scrollable">
+        <div class="wrapper-auth">
+            <div class="at-form">
+                <h1 class="title-auth">Signin</h1>
+                <p class="subtitle-auth">Signing in allows you to have private lists</p>
+                <div class="list-errors">
+                    <div *ngFor="let errorText of errors" class="list-item">{{errorText}}</div>
+                </div>
+                <div class="at-pwd-form">
+                    <form id="at-pwd-form" (ngSubmit)="join()" #joinForm="ngForm">
+                        <div class="input">
+                            <input [(ngModel)]="model.email" ngControl="email" #email="ngForm" type="text" id="email" name="email" placeholder="Email" class="form-control" autocapitalize="none" autocorrect="off">
+                        </div>
+                        <div class="input">
+                            <input [(ngModel)]="model.password" ngControl="password" #password="ngForm" required type="password" id="password" name="password" class="form-control" placeholder="Password" autocapitalize="none" autocorrect="off">
+                        </div>
+                        <button type="submit" class="btn-primary" [disabled]="!joinForm.form.valid">
+                            SIGN IN
+                        </button>
+                    </form>
+                </div>
+            </div>
+        </div>
+    </div>
+</div>
\ No newline at end of file
-- 
2.6.4


From b0701f44408f34b6b07416b971e8d2c424925851 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Thu, 23 Jun 2016 17:00:30 +0300
Subject: [PATCH 50/50] Step 7.9: Added sign in component login

---
 client/imports/components/signin.component.ts | 34 +++++++++++++++++++++++++--
 1 file changed, 32 insertions(+), 2 deletions(-)

diff --git a/client/imports/components/signin.component.ts b/client/imports/components/signin.component.ts
index 273f990..fe90288 100644
--- a/client/imports/components/signin.component.ts
+++ b/client/imports/components/signin.component.ts
@@ -1,12 +1,42 @@
 import {Component} from "@angular/core";
 import {MeteorComponent} from "angular2-meteor/build/index";
+import {Router} from "@angular/router-deprecated";
+
+class SigninModel {
+  constructor(public email : string, public password : string) {
+
+  }
+}
 
 @Component({
   directives: [],
-  template: 'Signin!'
+  templateUrl: '/client/imports/components/signin.ng2.html'
 })
 export class SigninComponent extends MeteorComponent {
-  constructor() {
+  private model : SigninModel;
+  private errors : Array<string> = [];
+
+  constructor(private router : Router) {
     super();
+
+    this.model = new SigninModel('', '');
+  }
+
+  resetErrors() {
+    this.errors = [];
+  }
+
+  join() {
+    this.resetErrors();
+
+    Meteor.loginWithPassword(this.model.email, this.model.password, (err) => {
+      if (err) {
+        this.errors.push(err.reason);
+
+        return;
+      }
+
+      this.router.root.navigate(['Home']);
+    });
   }
 }
\ No newline at end of file
-- 
2.6.4

