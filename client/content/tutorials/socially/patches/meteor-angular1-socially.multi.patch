From 420461d552ad3989a65385b2f735f6580dc27436 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 09:15:57 +0200
Subject: [PATCH 001/375] Step 0.2: Remove project files

---
 client/main.css  |  1 -
 client/main.html | 25 -------------------------
 client/main.js   | 22 ----------------------
 server/main.js   |  5 -----
 4 files changed, 53 deletions(-)
 delete mode 100644 client/main.css
 delete mode 100644 client/main.html
 delete mode 100644 client/main.js
 delete mode 100644 server/main.js

diff --git a/client/main.css b/client/main.css
deleted file mode 100644
index b6b4052..0000000
--- a/client/main.css
+++ /dev/null
@@ -1 +0,0 @@
-/* CSS declarations go here */
diff --git a/client/main.html b/client/main.html
deleted file mode 100644
index 203539b..0000000
--- a/client/main.html
+++ /dev/null
@@ -1,25 +0,0 @@
-<head>
-  <title>simple</title>
-</head>
-
-<body>
-  <h1>Welcome to Meteor!</h1>
-
-  {{> hello}}
-  {{> info}}
-</body>
-
-<template name="hello">
-  <button>Click Me</button>
-  <p>You've pressed the button {{counter}} times.</p>
-</template>
-
-<template name="info">
-  <h2>Learn Meteor!</h2>
-  <ul>
-    <li><a href="https://www.meteor.com/try">Do the Tutorial</a></li>
-    <li><a href="http://guide.meteor.com">Follow the Guide</a></li>
-    <li><a href="https://docs.meteor.com">Read the Docs</a></li>
-    <li><a href="https://forums.meteor.com">Discussions</a></li>
-  </ul>
-</template>
\ No newline at end of file
diff --git a/client/main.js b/client/main.js
deleted file mode 100644
index ecb3282..0000000
--- a/client/main.js
+++ /dev/null
@@ -1,22 +0,0 @@
-import { Template } from 'meteor/templating';
-import { ReactiveVar } from 'meteor/reactive-var';
-
-import './main.html';
-
-Template.hello.onCreated(function helloOnCreated() {
-  // counter starts at 0
-  this.counter = new ReactiveVar(0);
-});
-
-Template.hello.helpers({
-  counter() {
-    return Template.instance().counter.get();
-  },
-});
-
-Template.hello.events({
-  'click button'(event, instance) {
-    // increment the counter when button is clicked
-    instance.counter.set(instance.counter.get() + 1);
-  },
-});
diff --git a/server/main.js b/server/main.js
deleted file mode 100644
index 31a9e0e..0000000
--- a/server/main.js
+++ /dev/null
@@ -1,5 +0,0 @@
-import { Meteor } from 'meteor/meteor';
-
-Meteor.startup(() => {
-  // code to run on server at startup
-});
-- 
2.7.4


From cb7f716926bada91e1ade2d2fe201e0af49036ca Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 09:29:56 +0200
Subject: [PATCH 002/375] Step 0.3: Create an empty html file

---
 client/index.html | 3 +++
 1 file changed, 3 insertions(+)
 create mode 100644 client/index.html

diff --git a/client/index.html b/client/index.html
new file mode 100644
index 0000000..ef412ef
--- /dev/null
+++ b/client/index.html
@@ -0,0 +1,3 @@
+<body>
+  <p>Nothing here</p>
+</body>
-- 
2.7.4


From b3768c3c558fdc7cab8b57112758806e9ae41e4d Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 09:33:17 +0200
Subject: [PATCH 003/375] Step 0.4: Remove `blaze-html-templates` and
 `ecmascript`

---
 .meteor/packages | 2 --
 .meteor/versions | 5 -----
 2 files changed, 7 deletions(-)

diff --git a/.meteor/packages b/.meteor/packages
index d4c8001..c370be2 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -7,7 +7,6 @@
 meteor-base             # Packages every Meteor app needs to have
 mobile-experience       # Packages for a great mobile UX
 mongo                   # The database Meteor supports right now
-blaze-html-templates    # Compile .html files into Meteor Blaze views
 reactive-var            # Reactive variable for tracker
 jquery                  # Helpful client-side library
 tracker                 # Meteor's client-side reactive programming library
@@ -15,7 +14,6 @@ tracker                 # Meteor's client-side reactive programming library
 standard-minifier-css   # CSS minifier run for production mode
 standard-minifier-js    # JS minifier run for production mode
 es5-shim                # ECMAScript 5 compatibility for older browsers.
-ecmascript              # Enable ECMAScript2015+ syntax in app code
 
 autopublish             # Publish all data to the clients (for prototyping)
 insecure                # Allow all DB writes from clients (for prototyping)
diff --git a/.meteor/versions b/.meteor/versions
index 726e24a..e2742f2 100644
--- a/.meteor/versions
+++ b/.meteor/versions
@@ -6,11 +6,8 @@ babel-runtime@0.1.8
 base64@1.0.8
 binary-heap@1.0.8
 blaze@2.1.7
-blaze-html-templates@1.0.4
 blaze-tools@1.0.8
 boilerplate-generator@1.0.8
-caching-compiler@1.0.4
-caching-html-compiler@1.0.6
 callback-hook@1.0.8
 check@1.2.1
 ddp@1.2.5
@@ -59,8 +56,6 @@ spacebars@1.0.11
 spacebars-compiler@1.0.11
 standard-minifier-css@1.0.6
 standard-minifier-js@1.0.6
-templating@1.1.9
-templating-tools@1.0.4
 tracker@1.0.13
 ui@1.0.11
 underscore@1.0.8
-- 
2.7.4


From ebeed7ec9825d5ebbe2ff338d936e5da2ab17038 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 09:35:22 +0200
Subject: [PATCH 004/375] Step 0.5: Add `angular-templates` and
 `pbastowski:angular-babel`

---
 .meteor/packages | 2 ++
 .meteor/versions | 5 +++++
 2 files changed, 7 insertions(+)

diff --git a/.meteor/packages b/.meteor/packages
index c370be2..d74ee49 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -17,3 +17,5 @@ es5-shim                # ECMAScript 5 compatibility for older browsers.
 
 autopublish             # Publish all data to the clients (for prototyping)
 insecure                # Allow all DB writes from clients (for prototyping)
+pbastowski:angular-babel
+angular-templates
diff --git a/.meteor/versions b/.meteor/versions
index e2742f2..5a2d576 100644
--- a/.meteor/versions
+++ b/.meteor/versions
@@ -1,4 +1,5 @@
 allow-deny@1.0.4
+angular-templates@1.0.2
 autopublish@1.0.7
 autoupdate@1.2.8
 babel-compiler@6.6.4
@@ -8,6 +9,8 @@ binary-heap@1.0.8
 blaze@2.1.7
 blaze-tools@1.0.8
 boilerplate-generator@1.0.8
+caching-compiler@1.0.2
+caching-html-compiler@1.0.4
 callback-hook@1.0.8
 check@1.2.1
 ddp@1.2.5
@@ -46,6 +49,7 @@ mongo-id@1.0.4
 npm-mongo@1.4.43
 observe-sequence@1.0.11
 ordered-dict@1.0.7
+pbastowski:angular-babel@1.3.2
 promise@0.6.7
 random@1.0.9
 reactive-var@1.0.9
@@ -56,6 +60,7 @@ spacebars@1.0.11
 spacebars-compiler@1.0.11
 standard-minifier-css@1.0.6
 standard-minifier-js@1.0.6
+templating-tools@1.0.2
 tracker@1.0.13
 ui@1.0.11
 underscore@1.0.8
-- 
2.7.4


From 5cb3c9f37e360f82ec817748861cbad85bf16a42 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 09:36:09 +0200
Subject: [PATCH 005/375] Step 0.6: Add `angular` and `angular-meteor`

---
 package.json | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/package.json b/package.json
index 196e6e1..1fdb919 100644
--- a/package.json
+++ b/package.json
@@ -5,6 +5,8 @@
     "start": "meteor run"
   },
   "dependencies": {
+    "angular": "^1.5.3",
+    "angular-meteor": "^1.3.9",
     "meteor-node-stubs": "~0.2.0"
   }
 }
-- 
2.7.4


From 0768c2322fc56ab927082c9fdfac0bfb40a6caaf Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 09:38:27 +0200
Subject: [PATCH 006/375] Step 0.7: Move the main content to a new file

---
 client/main.html | 1 +
 1 file changed, 1 insertion(+)
 create mode 100644 client/main.html

diff --git a/client/main.html b/client/main.html
new file mode 100644
index 0000000..79ed426
--- /dev/null
+++ b/client/main.html
@@ -0,0 +1 @@
+<p>Nothing here</p>
-- 
2.7.4


From 84e9a1492a4c32b9c4fedfb9e75acb6886aae83c Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 09:39:02 +0200
Subject: [PATCH 007/375] Step 0.8: Add `ng-include` that loads the main.html
 file

---
 client/index.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/client/index.html b/client/index.html
index ef412ef..6378317 100644
--- a/client/index.html
+++ b/client/index.html
@@ -1,3 +1,3 @@
 <body>
-  <p>Nothing here</p>
+  <div ng-include src="'client/main.html'"></div>
 </body>
-- 
2.7.4


From fe7b2fbf1e404f15ec15ea11c75ff30d6ece07de Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 09:41:54 +0200
Subject: [PATCH 008/375] Step 0.9: Add main.js with angular module

---
 client/main.js | 6 ++++++
 1 file changed, 6 insertions(+)
 create mode 100644 client/main.js

diff --git a/client/main.js b/client/main.js
new file mode 100644
index 0000000..558ad57
--- /dev/null
+++ b/client/main.js
@@ -0,0 +1,6 @@
+import angular from 'angular';
+import angularMeteor from 'angular-meteor';
+
+angular.module('socially', [
+  angularMeteor
+]);
-- 
2.7.4


From 5fac685d6a33442a80d5c2ab1e6e58744879152a Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 09:42:29 +0200
Subject: [PATCH 009/375] Step 0.10: Add usage of `ng-app` in our app

---
 client/index.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/client/index.html b/client/index.html
index 6378317..f6b9ac4 100644
--- a/client/index.html
+++ b/client/index.html
@@ -1,3 +1,3 @@
-<body>
+<body ng-app="socially">
   <div ng-include src="'client/main.html'"></div>
 </body>
-- 
2.7.4


From 5fac81e7b55fba2acc4f40dab69316c1cd49a101 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 09:47:16 +0200
Subject: [PATCH 010/375] Step 0.11: Add some AngularJS code !

---
 client/main.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/client/main.html b/client/main.html
index 79ed426..a9c8ddc 100644
--- a/client/main.html
+++ b/client/main.html
@@ -1 +1 @@
-<p>Nothing here</p>
+<p>Nothing here {{ 'yet' + '!' }}</p>
-- 
2.7.4


From bc3f6a411ef781e97e90f47fac9621564a02f589 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 09:48:04 +0200
Subject: [PATCH 011/375] Step 1.1: Add some static HTML the to main page

---
 client/main.html | 15 ++++++++++++++-
 1 file changed, 14 insertions(+), 1 deletion(-)

diff --git a/client/main.html b/client/main.html
index a9c8ddc..dd1ef68 100644
--- a/client/main.html
+++ b/client/main.html
@@ -1 +1,14 @@
-<p>Nothing here {{ 'yet' + '!' }}</p>
+<ul>
+  <li>
+    <span>Dubstep-Free Zone</span>
+    <p>
+      Can we please just for an evening not listen to dubstep.
+    </p>
+  </li>
+  <li>
+    <span>All dubstep all the time</span>
+    <p>
+      Get it on!
+    </p>
+  </li>
+</ul>
-- 
2.7.4


From 1aa9222fb2ef70f8c86e926561b547d924453041 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 09:49:31 +0200
Subject: [PATCH 012/375] Step 2.1: Use dynamic template instead of static

---
 client/main.html | 22 ++++++++--------------
 1 file changed, 8 insertions(+), 14 deletions(-)

diff --git a/client/main.html b/client/main.html
index dd1ef68..7f8c6d9 100644
--- a/client/main.html
+++ b/client/main.html
@@ -1,14 +1,8 @@
-<ul>
-  <li>
-    <span>Dubstep-Free Zone</span>
-    <p>
-      Can we please just for an evening not listen to dubstep.
-    </p>
-  </li>
-  <li>
-    <span>All dubstep all the time</span>
-    <p>
-      Get it on!
-    </p>
-  </li>
-</ul>
+<div ng-controller="PartiesListCtrl">
+  <ul>
+    <li ng-repeat="party in parties">
+      {{party.name}}
+      <p>{{party.description}}</p>
+    </li>
+  </ul>
+</div>
-- 
2.7.4


From 0c9a5e36562ca4cd97718f32bc7c693df29878f2 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 09:50:30 +0200
Subject: [PATCH 013/375] Step 2.2: Add the parties controller

---
 client/main.js | 16 ++++++++++++++--
 1 file changed, 14 insertions(+), 2 deletions(-)

diff --git a/client/main.js b/client/main.js
index 558ad57..abc441c 100644
--- a/client/main.js
+++ b/client/main.js
@@ -2,5 +2,17 @@ import angular from 'angular';
 import angularMeteor from 'angular-meteor';
 
 angular.module('socially', [
-  angularMeteor
-]);
+    angularMeteor
+  ])
+  .controller('PartiesListCtrl', ['$scope', function($scope) {
+    $scope.parties = [{
+      'name': 'Dubstep-Free Zone',
+      'description': 'Can we please just for an evening not listen to dubstep.'
+    }, {
+      'name': 'All dubstep all the time',
+      'description': 'Get it on!'
+    }, {
+      'name': 'Savage lounging',
+      'description': 'Leisure suit required. And only fiercest manners.'
+    }];
+  }]);
-- 
2.7.4


From b04c41ea446e7f28a788618de309fde03babbf8d Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 09:51:13 +0200
Subject: [PATCH 014/375] Step 2.3: Remove the DI manual decleration

---
 client/main.js | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/client/main.js b/client/main.js
index abc441c..feb14f8 100644
--- a/client/main.js
+++ b/client/main.js
@@ -4,7 +4,9 @@ import angularMeteor from 'angular-meteor';
 angular.module('socially', [
     angularMeteor
   ])
-  .controller('PartiesListCtrl', ['$scope', function($scope) {
+  .controller('PartiesListCtrl', function($scope) {
+    'ngInject';
+    
     $scope.parties = [{
       'name': 'Dubstep-Free Zone',
       'description': 'Can we please just for an evening not listen to dubstep.'
@@ -15,4 +17,4 @@ angular.module('socially', [
       'name': 'Savage lounging',
       'description': 'Leisure suit required. And only fiercest manners.'
     }];
-  }]);
+  });
-- 
2.7.4


From 30cf6c597dd8eae8e1db6d0af5f6afc51be28cab Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 09:51:56 +0200
Subject: [PATCH 015/375] Step 2.4: Add ng-strict-di directive to the app

---
 client/index.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/client/index.html b/client/index.html
index f6b9ac4..48c2d09 100644
--- a/client/index.html
+++ b/client/index.html
@@ -1,3 +1,3 @@
-<body ng-app="socially">
+<body ng-app="socially" ng-strict-di="">
   <div ng-include src="'client/main.html'"></div>
 </body>
-- 
2.7.4


From 5ff43afd217c889939ce2ea81cddcdd61f389bd8 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 09:56:08 +0200
Subject: [PATCH 016/375] Step 3.1: Add the parties collection

---
 collections/parties.js | 1 +
 1 file changed, 1 insertion(+)
 create mode 100644 collections/parties.js

diff --git a/collections/parties.js b/collections/parties.js
new file mode 100644
index 0000000..f78fa2c
--- /dev/null
+++ b/collections/parties.js
@@ -0,0 +1 @@
+Parties = new Mongo.Collection('parties');
-- 
2.7.4


From 73c907b7a52cde8c2a4511e5ee72fe1232dafd39 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 09:56:46 +0200
Subject: [PATCH 017/375] Step 3.2: Add the parties collection helper

---
 client/main.js | 17 ++++++-----------
 1 file changed, 6 insertions(+), 11 deletions(-)

diff --git a/client/main.js b/client/main.js
index feb14f8..1b17ade 100644
--- a/client/main.js
+++ b/client/main.js
@@ -6,15 +6,10 @@ angular.module('socially', [
   ])
   .controller('PartiesListCtrl', function($scope) {
     'ngInject';
-    
-    $scope.parties = [{
-      'name': 'Dubstep-Free Zone',
-      'description': 'Can we please just for an evening not listen to dubstep.'
-    }, {
-      'name': 'All dubstep all the time',
-      'description': 'Get it on!'
-    }, {
-      'name': 'Savage lounging',
-      'description': 'Leisure suit required. And only fiercest manners.'
-    }];
+
+    $scope.helpers({
+      parties() {
+        return Parties.find({});
+      }
+    });
   });
-- 
2.7.4


From 2e9847816b99cfc2f995117a72ad8ff130a450d7 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 10:00:24 +0200
Subject: [PATCH 018/375] Step 3.3: Add some data to the parties collection

---
 server/startup.js | 18 ++++++++++++++++++
 1 file changed, 18 insertions(+)
 create mode 100644 server/startup.js

diff --git a/server/startup.js b/server/startup.js
new file mode 100644
index 0000000..ad3fd85
--- /dev/null
+++ b/server/startup.js
@@ -0,0 +1,18 @@
+Meteor.startup(() => {
+  if (Parties.find().count() === 0) {
+    const parties = [{
+      'name': 'Dubstep-Free Zone',
+      'description': 'Fast just got faster with Nexus S.'
+    }, {
+      'name': 'All dubstep all the time',
+      'description': 'Get it on!'
+    }, {
+      'name': 'Savage lounging',
+      'description': 'Leisure suit required. And only fiercest manners.'
+    }];
+
+    parties.forEach((party) => {
+      Parties.insert(party)
+    });
+  }
+});
-- 
2.7.4


From 1292041aed71221f443418225ca0626e2d611687 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 10:00:58 +0200
Subject: [PATCH 019/375] Step 3.4: Change to use controllerAs syntax

---
 client/main.html | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/client/main.html b/client/main.html
index 7f8c6d9..62eca58 100644
--- a/client/main.html
+++ b/client/main.html
@@ -1,6 +1,6 @@
-<div ng-controller="PartiesListCtrl">
+<div ng-controller="PartiesListCtrl as vm">
   <ul>
-    <li ng-repeat="party in parties">
+    <li ng-repeat="party in vm.parties">
       {{party.name}}
       <p>{{party.description}}</p>
     </li>
-- 
2.7.4


From 16165a4348e7dde4885da9e3b10a2ad70bfa6591 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 10:07:22 +0200
Subject: [PATCH 020/375] Step 3.5: Change the parties controller to use
 $reactive and `this` instead of `$scope`

---
 client/main.js | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/client/main.js b/client/main.js
index 1b17ade..58efe3e 100644
--- a/client/main.js
+++ b/client/main.js
@@ -4,10 +4,12 @@ import angularMeteor from 'angular-meteor';
 angular.module('socially', [
     angularMeteor
   ])
-  .controller('PartiesListCtrl', function($scope) {
+  .controller('PartiesListCtrl', function($scope, $reactive) {
     'ngInject';
 
-    $scope.helpers({
+    $reactive(this).attach($scope);
+
+    this.helpers({
       parties() {
         return Parties.find({});
       }
-- 
2.7.4


From 3c36724925070883b302b73c0001ebe9b86acbc4 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 10:12:43 +0200
Subject: [PATCH 021/375] Step 3.6: Refactor PartiesListCtrl to be a component

---
 client/main.js | 20 ++++++++++++--------
 1 file changed, 12 insertions(+), 8 deletions(-)

diff --git a/client/main.js b/client/main.js
index 58efe3e..a898321 100644
--- a/client/main.js
+++ b/client/main.js
@@ -4,14 +4,18 @@ import angularMeteor from 'angular-meteor';
 angular.module('socially', [
     angularMeteor
   ])
-  .controller('PartiesListCtrl', function($scope, $reactive) {
-    'ngInject';
+  .component('partiesList', {
+    templateUrl: 'client/partiesList.html',
+    controllerAs: 'partiesList',
+    controller($scope, $reactive) {
+      'ngInject';
 
-    $reactive(this).attach($scope);
+      $reactive(this).attach($scope);
 
-    this.helpers({
-      parties() {
-        return Parties.find({});
-      }
-    });
+      this.helpers({
+        parties() {
+          return Parties.find({});
+        }
+      });
+    }
   });
-- 
2.7.4


From 31b8e6cf06dbc6bc6e810620a718af9daaf31075 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 10:13:37 +0200
Subject: [PATCH 022/375] Step 3.7: Change usage from controllerAs to
 components code-style - view

---
 client/index.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/client/index.html b/client/index.html
index 48c2d09..84f0ef3 100644
--- a/client/index.html
+++ b/client/index.html
@@ -1,3 +1,3 @@
 <body ng-app="socially" ng-strict-di="">
-  <div ng-include src="'client/main.html'"></div>
+  <parties-list></parties-list>
 </body>
-- 
2.7.4


From 5eca431d6bd94bccbc8fff724fe013c4be64ceb7 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 10:14:22 +0200
Subject: [PATCH 023/375] Step 3.8: Move the parties list to a different HTML
 file

---
 client/partiesList.html | 6 ++++++
 1 file changed, 6 insertions(+)
 create mode 100644 client/partiesList.html

diff --git a/client/partiesList.html b/client/partiesList.html
new file mode 100644
index 0000000..64ac441
--- /dev/null
+++ b/client/partiesList.html
@@ -0,0 +1,6 @@
+<ul>
+  <li ng-repeat="party in partiesList.parties">
+    {{party.name}}
+    <p>{{party.description}}</p>
+  </li>
+</ul>
-- 
2.7.4


From e9b05e468ae17cdb51cda544b4734d7cac9a248a Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 10:25:52 +0200
Subject: [PATCH 024/375] Step 3.9: Move PartiesList to imports

---
 imports/ui/components/partiesList/partiesList.js | 27 ++++++++++++++++++++++++
 1 file changed, 27 insertions(+)
 create mode 100644 imports/ui/components/partiesList/partiesList.js

diff --git a/imports/ui/components/partiesList/partiesList.js b/imports/ui/components/partiesList/partiesList.js
new file mode 100644
index 0000000..a5a8a27
--- /dev/null
+++ b/imports/ui/components/partiesList/partiesList.js
@@ -0,0 +1,27 @@
+import angular from 'angular';
+import angularMeteor from 'angular-meteor';
+
+class PartiesList {
+  constructor($scope, $reactive) {
+    'ngInject';
+
+    $reactive(this).attach($scope);
+
+    this.helpers({
+      parties() {
+        return Parties.find({});
+      }
+    });
+  }
+}
+
+const name = 'partiesList';
+
+// create a module
+export default angular.module(name, [
+  angularMeteor
+]).component(name, {
+  templateUrl: `imports/ui/components/${name}/${name}.html`,
+  controllerAs: name,
+  controller: PartiesList
+});
-- 
2.7.4


From 895aeb726cfaa1bbef90d7c015bf06c1ff0f726f Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 10:26:25 +0200
Subject: [PATCH 025/375] Step 3.10: Move PartiesList view to imports

---
 imports/ui/components/partiesList/partiesList.html | 6 ++++++
 1 file changed, 6 insertions(+)
 create mode 100644 imports/ui/components/partiesList/partiesList.html

diff --git a/imports/ui/components/partiesList/partiesList.html b/imports/ui/components/partiesList/partiesList.html
new file mode 100644
index 0000000..64ac441
--- /dev/null
+++ b/imports/ui/components/partiesList/partiesList.html
@@ -0,0 +1,6 @@
+<ul>
+  <li ng-repeat="party in partiesList.parties">
+    {{party.name}}
+    <p>{{party.description}}</p>
+  </li>
+</ul>
-- 
2.7.4


From 7e1b7ae48aa225bf8a2fc664789abeb6d8798668 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 10:27:59 +0200
Subject: [PATCH 026/375] Step 3.11: Use PartiesList from imports

---
 client/main.js | 22 +++++-----------------
 1 file changed, 5 insertions(+), 17 deletions(-)

diff --git a/client/main.js b/client/main.js
index a898321..d643c33 100644
--- a/client/main.js
+++ b/client/main.js
@@ -1,21 +1,9 @@
 import angular from 'angular';
 import angularMeteor from 'angular-meteor';
 
-angular.module('socially', [
-    angularMeteor
-  ])
-  .component('partiesList', {
-    templateUrl: 'client/partiesList.html',
-    controllerAs: 'partiesList',
-    controller($scope, $reactive) {
-      'ngInject';
-
-      $reactive(this).attach($scope);
+import { name as PartiesList } from '../imports/ui/components/partiesList/partiesList';
 
-      this.helpers({
-        parties() {
-          return Parties.find({});
-        }
-      });
-    }
-  });
+angular.module('socially', [
+    angularMeteor,
+    PartiesList
+  ]);
-- 
2.7.4


From c6fbe249654979b574d79b0e9a99a778d4f8fe3f Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 10:28:46 +0200
Subject: [PATCH 027/375] Step 3.12: Remove old partiesList.html

---
 client/partiesList.html | 6 ------
 1 file changed, 6 deletions(-)
 delete mode 100644 client/partiesList.html

diff --git a/client/partiesList.html b/client/partiesList.html
deleted file mode 100644
index 64ac441..0000000
--- a/client/partiesList.html
+++ /dev/null
@@ -1,6 +0,0 @@
-<ul>
-  <li ng-repeat="party in partiesList.parties">
-    {{party.name}}
-    <p>{{party.description}}</p>
-  </li>
-</ul>
-- 
2.7.4


From 785fe816e756e338b604411509c7087208f167e7 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 10:29:23 +0200
Subject: [PATCH 028/375] Step 3.13: Remove unused main.html

---
 client/main.html | 8 --------
 1 file changed, 8 deletions(-)
 delete mode 100644 client/main.html

diff --git a/client/main.html b/client/main.html
deleted file mode 100644
index 62eca58..0000000
--- a/client/main.html
+++ /dev/null
@@ -1,8 +0,0 @@
-<div ng-controller="PartiesListCtrl as vm">
-  <ul>
-    <li ng-repeat="party in vm.parties">
-      {{party.name}}
-      <p>{{party.description}}</p>
-    </li>
-  </ul>
-</div>
-- 
2.7.4


From 4f78728cc8081552eed3f1161a2815ab4f944594 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 10:29:59 +0200
Subject: [PATCH 029/375] Step 3.14: Import template

---
 imports/ui/components/partiesList/partiesList.js | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/imports/ui/components/partiesList/partiesList.js b/imports/ui/components/partiesList/partiesList.js
index a5a8a27..2a87f91 100644
--- a/imports/ui/components/partiesList/partiesList.js
+++ b/imports/ui/components/partiesList/partiesList.js
@@ -1,6 +1,8 @@
 import angular from 'angular';
 import angularMeteor from 'angular-meteor';
 
+import './partiesList.html';
+
 class PartiesList {
   constructor($scope, $reactive) {
     'ngInject';
-- 
2.7.4


From d1c819f9a5249a66f6e111f80a9b26d70b7a36f4 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 10:31:27 +0200
Subject: [PATCH 030/375] Step 3.15: Create view for Socially component

---
 imports/ui/components/socially/socially.html | 1 +
 1 file changed, 1 insertion(+)
 create mode 100644 imports/ui/components/socially/socially.html

diff --git a/imports/ui/components/socially/socially.html b/imports/ui/components/socially/socially.html
new file mode 100644
index 0000000..5e9673b
--- /dev/null
+++ b/imports/ui/components/socially/socially.html
@@ -0,0 +1 @@
+<parties-list></parties-list>
-- 
2.7.4


From 289aa17b9edac6cece59febea1660e5966f537ec Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 10:32:56 +0200
Subject: [PATCH 031/375] Step 3.16: Create Socially component

---
 imports/ui/components/socially/socially.js | 19 +++++++++++++++++++
 1 file changed, 19 insertions(+)
 create mode 100644 imports/ui/components/socially/socially.js

diff --git a/imports/ui/components/socially/socially.js b/imports/ui/components/socially/socially.js
new file mode 100644
index 0000000..e436684
--- /dev/null
+++ b/imports/ui/components/socially/socially.js
@@ -0,0 +1,19 @@
+import angular from 'angular';
+import angularMeteor from 'angular-meteor';
+
+import './socially.html';
+import { name as PartiesList } from '../partiesList/partiesList';
+
+class Socially {}
+
+const name = 'socially';
+
+// create a module
+export default angular.module(name, [
+  angularMeteor,
+  PartiesList
+]).component(name, {
+  templateUrl: `imports/ui/components/${name}/${name}.html`,
+  controllerAs: name,
+  controller: Socially
+});
-- 
2.7.4


From 1456467911b270596a9abc00b589aa557e414e3c Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 10:33:26 +0200
Subject: [PATCH 032/375] Step 3.17: Replace parties-list with socially

---
 client/index.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/client/index.html b/client/index.html
index 84f0ef3..e6d21ea 100644
--- a/client/index.html
+++ b/client/index.html
@@ -1,3 +1,3 @@
 <body ng-app="socially" ng-strict-di="">
-  <parties-list></parties-list>
+  <socially></socially>
 </body>
-- 
2.7.4


From 4016e79d970179dd5c526a67822779f446a2a413 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 10:34:53 +0200
Subject: [PATCH 033/375] Step 3.18: Import Socially in main.js

---
 client/main.js | 7 +------
 1 file changed, 1 insertion(+), 6 deletions(-)

diff --git a/client/main.js b/client/main.js
index d643c33..212f992 100644
--- a/client/main.js
+++ b/client/main.js
@@ -1,9 +1,4 @@
 import angular from 'angular';
 import angularMeteor from 'angular-meteor';
 
-import { name as PartiesList } from '../imports/ui/components/partiesList/partiesList';
-
-angular.module('socially', [
-    angularMeteor,
-    PartiesList
-  ]);
+import { name as Socially } from '../imports/ui/components/socially/socially';
-- 
2.7.4


From 489a4de3d6b81d5f47bff7915565fefb6ec969dd Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 10:35:46 +0200
Subject: [PATCH 034/375] Step 4.1: Create template for PartyAdd component

---
 imports/ui/components/partyAdd/partyAdd.html | 11 +++++++++++
 1 file changed, 11 insertions(+)
 create mode 100644 imports/ui/components/partyAdd/partyAdd.html

diff --git a/imports/ui/components/partyAdd/partyAdd.html b/imports/ui/components/partyAdd/partyAdd.html
new file mode 100644
index 0000000..a61cf04
--- /dev/null
+++ b/imports/ui/components/partyAdd/partyAdd.html
@@ -0,0 +1,11 @@
+<form>
+  <label>
+    Party Name:
+  </label>
+  <input type="text"/>
+  <label>
+    Description:
+  </label>
+  <input type="text"/>
+  <button>Add Party!</button>
+</form>
-- 
2.7.4


From 0c8847700596be0b59a141176419da8cbe7a6e9e Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 10:36:39 +0200
Subject: [PATCH 035/375] Step 4.2: Create PartyAdd component

---
 imports/ui/components/partyAdd/partyAdd.js | 17 +++++++++++++++++
 1 file changed, 17 insertions(+)
 create mode 100644 imports/ui/components/partyAdd/partyAdd.js

diff --git a/imports/ui/components/partyAdd/partyAdd.js b/imports/ui/components/partyAdd/partyAdd.js
new file mode 100644
index 0000000..440dec8
--- /dev/null
+++ b/imports/ui/components/partyAdd/partyAdd.js
@@ -0,0 +1,17 @@
+import angular from 'angular';
+import angularMeteor from 'angular-meteor';
+
+import './partyAdd.html';
+
+class PartyAdd {}
+
+const name = 'partyAdd';
+
+// create a module
+export default angular.module(name, [
+  angularMeteor
+]).component(name, {
+  templateUrl: `imports/ui/components/${name}/${name}.html`,
+  controllerAs: name,
+  controller: PartyAdd
+});
-- 
2.7.4


From 14a32bd3e1dc36ee7ad13308edfa267d09a80e66 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 10:37:19 +0200
Subject: [PATCH 036/375] Step 4.3: Implement PartyAdd to the view

---
 imports/ui/components/partiesList/partiesList.html | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/imports/ui/components/partiesList/partiesList.html b/imports/ui/components/partiesList/partiesList.html
index 64ac441..229908b 100644
--- a/imports/ui/components/partiesList/partiesList.html
+++ b/imports/ui/components/partiesList/partiesList.html
@@ -1,3 +1,5 @@
+<party-add></party-add>
+
 <ul>
   <li ng-repeat="party in partiesList.parties">
     {{party.name}}
-- 
2.7.4


From e81d6c9ca481ce73c4ef1041d274993cabc29eca Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 10:42:22 +0200
Subject: [PATCH 037/375] Step 4.4: Add PartyAdd to PartiesList

---
 imports/ui/components/partiesList/partiesList.js | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partiesList/partiesList.js b/imports/ui/components/partiesList/partiesList.js
index 2a87f91..e72d93e 100644
--- a/imports/ui/components/partiesList/partiesList.js
+++ b/imports/ui/components/partiesList/partiesList.js
@@ -2,6 +2,7 @@ import angular from 'angular';
 import angularMeteor from 'angular-meteor';
 
 import './partiesList.html';
+import { name as PartyAdd } from '../partyAdd/partyAdd';
 
 class PartiesList {
   constructor($scope, $reactive) {
@@ -21,7 +22,8 @@ const name = 'partiesList';
 
 // create a module
 export default angular.module(name, [
-  angularMeteor
+  angularMeteor,
+  PartyAdd
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
   controllerAs: name,
-- 
2.7.4


From c332f9a5010759f4e53237829ec12020e88a3fb0 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 10:43:11 +0200
Subject: [PATCH 038/375] Step 4.5: Add ng-model to the form inputs

---
 imports/ui/components/partyAdd/partyAdd.html | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/imports/ui/components/partyAdd/partyAdd.html b/imports/ui/components/partyAdd/partyAdd.html
index a61cf04..f035ecd 100644
--- a/imports/ui/components/partyAdd/partyAdd.html
+++ b/imports/ui/components/partyAdd/partyAdd.html
@@ -2,10 +2,10 @@
   <label>
     Party Name:
   </label>
-  <input type="text"/>
+  <input type="text" ng-model="partyAdd.party.name" />
   <label>
     Description:
   </label>
-  <input type="text"/>
+  <input type="text" ng-model="partyAdd.party.description" />
   <button>Add Party!</button>
 </form>
-- 
2.7.4


From 2648480ac8565bea56bb65e5785b4567d90e7397 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 10:46:01 +0200
Subject: [PATCH 039/375] Step 4.6: Add submit method to the button

---
 imports/ui/components/partyAdd/partyAdd.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/imports/ui/components/partyAdd/partyAdd.html b/imports/ui/components/partyAdd/partyAdd.html
index f035ecd..3508bef 100644
--- a/imports/ui/components/partyAdd/partyAdd.html
+++ b/imports/ui/components/partyAdd/partyAdd.html
@@ -7,5 +7,5 @@
     Description:
   </label>
   <input type="text" ng-model="partyAdd.party.description" />
-  <button>Add Party!</button>
+  <button ng-click="partyAdd.submit()">Add Party!</button>
 </form>
-- 
2.7.4


From 5a28b98914c9b74da007c4a7a02f2e45c9eb0d8e Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 10:47:30 +0200
Subject: [PATCH 040/375] Step 4.7: Add submit method

---
 imports/ui/components/partyAdd/partyAdd.js | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partyAdd/partyAdd.js b/imports/ui/components/partyAdd/partyAdd.js
index 440dec8..3ab5c47 100644
--- a/imports/ui/components/partyAdd/partyAdd.js
+++ b/imports/ui/components/partyAdd/partyAdd.js
@@ -3,7 +3,15 @@ import angularMeteor from 'angular-meteor';
 
 import './partyAdd.html';
 
-class PartyAdd {}
+class PartyAdd {
+  constructor() {
+    this.party = {};
+  }
+
+  submit() {
+    console.log('submit:', this.party);
+  }
+}
 
 const name = 'partyAdd';
 
-- 
2.7.4


From b4c38203954f01afb9a1412d8781ef78f0ac425e Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 10:52:00 +0200
Subject: [PATCH 041/375] Step 4.8: Move Parties to imports

---
 imports/api/parties.js | 3 +++
 1 file changed, 3 insertions(+)
 create mode 100644 imports/api/parties.js

diff --git a/imports/api/parties.js b/imports/api/parties.js
new file mode 100644
index 0000000..e308632
--- /dev/null
+++ b/imports/api/parties.js
@@ -0,0 +1,3 @@
+import { Mongo } from 'meteor/mongo';
+
+export const Parties = new Mongo.Collection('parties');
-- 
2.7.4


From e932cb1378f47199d8362270f0c62815eeaeb651 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 10:52:33 +0200
Subject: [PATCH 042/375] Step 4.9: Remove old collection

---
 collections/parties.js | 1 -
 1 file changed, 1 deletion(-)
 delete mode 100644 collections/parties.js

diff --git a/collections/parties.js b/collections/parties.js
deleted file mode 100644
index f78fa2c..0000000
--- a/collections/parties.js
+++ /dev/null
@@ -1 +0,0 @@
-Parties = new Mongo.Collection('parties');
-- 
2.7.4


From 5a995721feca246fc0c93652988517b7f03b7625 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 10:56:28 +0200
Subject: [PATCH 043/375] Step 4.10: Import new module with Parties collection

---
 server/startup.js | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/server/startup.js b/server/startup.js
index ad3fd85..6ce39cd 100644
--- a/server/startup.js
+++ b/server/startup.js
@@ -1,3 +1,6 @@
+import { Meteor } from 'meteor/meteor';
+import { Parties } from '../imports/api/parties';
+
 Meteor.startup(() => {
   if (Parties.find().count() === 0) {
     const parties = [{
-- 
2.7.4


From 3cca1ba0d4032087b797bb7a2cfe62fc1f98d08c Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 10:57:41 +0200
Subject: [PATCH 044/375] Step 4.11: Import new module with Parties to
 PartiesList

---
 imports/ui/components/partiesList/partiesList.js | 1 +
 1 file changed, 1 insertion(+)

diff --git a/imports/ui/components/partiesList/partiesList.js b/imports/ui/components/partiesList/partiesList.js
index e72d93e..eba585f 100644
--- a/imports/ui/components/partiesList/partiesList.js
+++ b/imports/ui/components/partiesList/partiesList.js
@@ -2,6 +2,7 @@ import angular from 'angular';
 import angularMeteor from 'angular-meteor';
 
 import './partiesList.html';
+import { Parties } from '../../../api/parties';
 import { name as PartyAdd } from '../partyAdd/partyAdd';
 
 class PartiesList {
-- 
2.7.4


From 4fbf3e632c7ea7530dcd46c95244f09726e0c1b1 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:00:20 +0200
Subject: [PATCH 045/375] Step 4.12: Insert new party

---
 imports/ui/components/partyAdd/partyAdd.js | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partyAdd/partyAdd.js b/imports/ui/components/partyAdd/partyAdd.js
index 3ab5c47..f51f219 100644
--- a/imports/ui/components/partyAdd/partyAdd.js
+++ b/imports/ui/components/partyAdd/partyAdd.js
@@ -2,6 +2,7 @@ import angular from 'angular';
 import angularMeteor from 'angular-meteor';
 
 import './partyAdd.html';
+import { Parties } from '../../../api/parties';
 
 class PartyAdd {
   constructor() {
@@ -9,7 +10,12 @@ class PartyAdd {
   }
 
   submit() {
-    console.log('submit:', this.party);
+    Parties.insert(this.party);
+    this.reset();
+  }
+
+  reset() {
+    this.party = {};
   }
 }
 
-- 
2.7.4


From 7d820c4f5da5c00344b609362da262f7ea99cab8 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:01:18 +0200
Subject: [PATCH 046/375] Step 4.13: Create view for PartyRemove component

---
 imports/ui/components/partyRemove/partyRemove.html | 1 +
 1 file changed, 1 insertion(+)
 create mode 100644 imports/ui/components/partyRemove/partyRemove.html

diff --git a/imports/ui/components/partyRemove/partyRemove.html b/imports/ui/components/partyRemove/partyRemove.html
new file mode 100644
index 0000000..1295105
--- /dev/null
+++ b/imports/ui/components/partyRemove/partyRemove.html
@@ -0,0 +1 @@
+<button ng-click="partyRemove.remove()">X</button>
-- 
2.7.4


From 8a5378f75638663753bed33d1ac66bb9f5ab2140 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:04:08 +0200
Subject: [PATCH 047/375] Step 4.14: Create PartyRemove component

---
 imports/ui/components/partyRemove/partyRemove.js | 21 +++++++++++++++++++++
 1 file changed, 21 insertions(+)
 create mode 100644 imports/ui/components/partyRemove/partyRemove.js

diff --git a/imports/ui/components/partyRemove/partyRemove.js b/imports/ui/components/partyRemove/partyRemove.js
new file mode 100644
index 0000000..2689076
--- /dev/null
+++ b/imports/ui/components/partyRemove/partyRemove.js
@@ -0,0 +1,21 @@
+import angular from 'angular';
+import angularMeteor from 'angular-meteor';
+
+import './partyRemove.html';
+
+class PartyRemove {
+  remove() {
+    console.log('remove party');
+  }
+}
+
+const name = 'partyRemove';
+
+// create a module
+export default angular.module(name, [
+  angularMeteor
+]).component(name, {
+  templateUrl: `imports/ui/components/${name}/${name}.html`,
+  controllerAs: name,
+  controller: PartyRemove
+});
-- 
2.7.4


From ee16ecb8e923d31cb4db57ab9132a51fa5adeb54 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:05:10 +0200
Subject: [PATCH 048/375] Step 4.15: Add party binding

---
 imports/ui/components/partyRemove/partyRemove.js | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/imports/ui/components/partyRemove/partyRemove.js b/imports/ui/components/partyRemove/partyRemove.js
index 2689076..50f5ca8 100644
--- a/imports/ui/components/partyRemove/partyRemove.js
+++ b/imports/ui/components/partyRemove/partyRemove.js
@@ -16,6 +16,9 @@ export default angular.module(name, [
   angularMeteor
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
+  bindings: {
+    party: '<'
+  },
   controllerAs: name,
   controller: PartyRemove
 });
-- 
2.7.4


From c00d0996ffa5e8ba8a1515f978af1f587a63ce9b Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:06:30 +0200
Subject: [PATCH 049/375] Step 4.16: Remove party from collection

---
 imports/ui/components/partyRemove/partyRemove.js | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partyRemove/partyRemove.js b/imports/ui/components/partyRemove/partyRemove.js
index 50f5ca8..14c5861 100644
--- a/imports/ui/components/partyRemove/partyRemove.js
+++ b/imports/ui/components/partyRemove/partyRemove.js
@@ -2,10 +2,13 @@ import angular from 'angular';
 import angularMeteor from 'angular-meteor';
 
 import './partyRemove.html';
+import { Parties } from '../../../api/parties';
 
 class PartyRemove {
   remove() {
-    console.log('remove party');
+    if (this.party) {
+      Parties.remove(this.party._id);
+    }
   }
 }
 
-- 
2.7.4


From 43f5d46cbc880dc5e7b230662682912ae9cf9c26 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:07:06 +0200
Subject: [PATCH 050/375] Step 4.17: Add PartyRemove

---
 imports/ui/components/partiesList/partiesList.js | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partiesList/partiesList.js b/imports/ui/components/partiesList/partiesList.js
index eba585f..1218977 100644
--- a/imports/ui/components/partiesList/partiesList.js
+++ b/imports/ui/components/partiesList/partiesList.js
@@ -4,6 +4,7 @@ import angularMeteor from 'angular-meteor';
 import './partiesList.html';
 import { Parties } from '../../../api/parties';
 import { name as PartyAdd } from '../partyAdd/partyAdd';
+import { name as PartyRemove } from '../partyRemove/partyRemove';
 
 class PartiesList {
   constructor($scope, $reactive) {
@@ -24,7 +25,8 @@ const name = 'partiesList';
 // create a module
 export default angular.module(name, [
   angularMeteor,
-  PartyAdd
+  PartyAdd,
+  PartyRemove
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
   controllerAs: name,
-- 
2.7.4


From 3961cff0290d35e7412fb6f39b0a6331ac74e9c0 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:08:02 +0200
Subject: [PATCH 051/375] Step 4.18: Implement component

---
 imports/ui/components/partiesList/partiesList.html | 1 +
 1 file changed, 1 insertion(+)

diff --git a/imports/ui/components/partiesList/partiesList.html b/imports/ui/components/partiesList/partiesList.html
index 229908b..24dedb1 100644
--- a/imports/ui/components/partiesList/partiesList.html
+++ b/imports/ui/components/partiesList/partiesList.html
@@ -4,5 +4,6 @@
   <li ng-repeat="party in partiesList.parties">
     {{party.name}}
     <p>{{party.description}}</p>
+    <party-remove party="party"></party-remove>
   </li>
 </ul>
-- 
2.7.4


From 86d54f7c818ec55e438fbc4ecd5ef6edf9b59942 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 14:21:49 +0200
Subject: [PATCH 052/375] Step 4.19: Add `sanjo:jasmine` and reporters

---
 .meteor/packages | 3 +++
 .meteor/versions | 9 +++++++++
 2 files changed, 12 insertions(+)

diff --git a/.meteor/packages b/.meteor/packages
index d74ee49..03a4feb 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -19,3 +19,6 @@ autopublish             # Publish all data to the clients (for prototyping)
 insecure                # Allow all DB writes from clients (for prototyping)
 pbastowski:angular-babel
 angular-templates
+sanjo:jasmine
+velocity:html-reporter
+velocity:console-reporter
diff --git a/.meteor/versions b/.meteor/versions
index 5a2d576..550c9b0 100644
--- a/.meteor/versions
+++ b/.meteor/versions
@@ -1,4 +1,5 @@
 allow-deny@1.0.4
+amplify@1.0.0
 angular-templates@1.0.2
 autopublish@1.0.7
 autoupdate@1.2.8
@@ -33,6 +34,7 @@ id-map@1.0.7
 insecure@1.0.7
 jquery@1.11.8
 launch-screen@1.0.11
+less@2.5.6
 livedata@1.0.18
 logging@1.0.12
 meteor@1.1.14
@@ -52,18 +54,25 @@ ordered-dict@1.0.7
 pbastowski:angular-babel@1.3.2
 promise@0.6.7
 random@1.0.9
+reactive-dict@1.1.5
 reactive-var@1.0.9
 reload@1.1.8
 retry@1.0.7
 routepolicy@1.0.10
+sanjo:jasmine@1.0.1
+session@1.1.3
 spacebars@1.0.11
 spacebars-compiler@1.0.11
 standard-minifier-css@1.0.6
 standard-minifier-js@1.0.6
+templating@1.1.7
 templating-tools@1.0.2
 tracker@1.0.13
 ui@1.0.11
 underscore@1.0.8
 url@1.0.9
+velocity:console-reporter@0.2.1
+velocity:html-reporter@0.10.0
+velocity:reports@1.0.0
 webapp@1.2.8
 webapp-hashing@1.0.9
-- 
2.7.4


From fb4e0344125b5354e6b904a0a2ecdb9e413f4346 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 14:23:16 +0200
Subject: [PATCH 053/375] Step 4.20: Add `test:watch` npm script

---
 package.json | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/package.json b/package.json
index 1fdb919..af9f43d 100644
--- a/package.json
+++ b/package.json
@@ -2,7 +2,8 @@
   "name": "socially",
   "private": true,
   "scripts": {
-    "start": "meteor run"
+    "start": "meteor run",
+    "test:watch": "meteor test --driver-package sanjo:jasmine"
   },
   "dependencies": {
     "angular": "^1.5.3",
-- 
2.7.4


From bb1e6d50727756e1435e36d4c629b3c0265caf19 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 14:24:39 +0200
Subject: [PATCH 054/375] Step 4.21: Install `angular-mocks`

---
 package.json | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/package.json b/package.json
index af9f43d..1555b86 100644
--- a/package.json
+++ b/package.json
@@ -9,5 +9,8 @@
     "angular": "^1.5.3",
     "angular-meteor": "^1.3.9",
     "meteor-node-stubs": "~0.2.0"
+  },
+  "devDependencies": {
+    "angular-mocks": "^1.5.3"
   }
 }
-- 
2.7.4


From fff5bb0ed5cbefac4ba669484a32424ce5266027 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 14:45:42 +0200
Subject: [PATCH 055/375] Step 4.22: Tests of PartyAdd

---
 .../components/partyAdd/client/partyAdd.tests.js   | 53 ++++++++++++++++++++++
 1 file changed, 53 insertions(+)
 create mode 100644 imports/ui/components/partyAdd/client/partyAdd.tests.js

diff --git a/imports/ui/components/partyAdd/client/partyAdd.tests.js b/imports/ui/components/partyAdd/client/partyAdd.tests.js
new file mode 100644
index 0000000..cc1d35e
--- /dev/null
+++ b/imports/ui/components/partyAdd/client/partyAdd.tests.js
@@ -0,0 +1,53 @@
+import { name as PartyAdd } from '../partyAdd';
+import { Parties } from '../../../../api/parties';
+import 'angular-mocks';
+
+describe('PartyAdd', () => {
+  beforeEach(() => {
+    window.module(PartyAdd);
+  });
+
+  describe('controller', () => {
+    let controller;
+    const party = {
+      name: 'Foo',
+      description: 'Birthday of Foo'
+    };
+
+    beforeEach(() => {
+      inject(($rootScope, $componentController) => {
+        controller = $componentController(PartyAdd, {
+          $scope: $rootScope.$new(true)
+        });
+      });
+    });
+
+    describe('reset()', () => {
+      it('should clean up party object', () => {
+        controller.party = party;
+        controller.reset();
+
+        expect(controller.party).toEqual({});
+      });
+    });
+
+    describe('submit()', () => {
+      beforeEach(() => {
+        spyOn(Parties, 'insert');
+        spyOn(controller, 'reset').and.callThrough();
+
+        controller.party = party;
+
+        controller.submit();
+      });
+
+      it('should insert a new party', () => {
+        expect(Parties.insert).toHaveBeenCalledWith(party);
+      });
+
+      it('should call reset()', () => {
+        expect(controller.reset).toHaveBeenCalled();
+      });
+    });
+  });
+});
-- 
2.7.4


From d73405d2705d9f99c4a9381e79763263f53cf7e3 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 14:50:11 +0200
Subject: [PATCH 056/375] Step 4.23: Tests of PartyRemove

---
 .../partyRemove/client/partyRemove.tests.js        | 37 ++++++++++++++++++++++
 1 file changed, 37 insertions(+)
 create mode 100644 imports/ui/components/partyRemove/client/partyRemove.tests.js

diff --git a/imports/ui/components/partyRemove/client/partyRemove.tests.js b/imports/ui/components/partyRemove/client/partyRemove.tests.js
new file mode 100644
index 0000000..e8b6e97
--- /dev/null
+++ b/imports/ui/components/partyRemove/client/partyRemove.tests.js
@@ -0,0 +1,37 @@
+import { name as PartyRemove } from '../partyRemove';
+import { Parties } from '../../../../api/parties';
+import 'angular-mocks';
+
+describe('PartyRemove', () => {
+  beforeEach(() => {
+    window.module(PartyRemove);
+  });
+
+  describe('controller', () => {
+    let controller;
+    const party = {
+      _id: 'partyId'
+    };
+
+    beforeEach(() => {
+      inject(($rootScope, $componentController) => {
+        controller = $componentController(PartyRemove, {
+          $scope: $rootScope.$new(true)
+        }, {
+          party
+        });
+      });
+    });
+
+    describe('remove()', () => {
+      beforeEach(() => {
+        spyOn(Parties, 'remove');
+        controller.remove();
+      });
+
+      it('should remove a party', () => {
+        expect(Parties.remove).toHaveBeenCalledWith(party._id);
+      });
+    });
+  });
+});
-- 
2.7.4


From aecd2d3c772053c96f55fb0dd82af9dba7af3576 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:09:16 +0200
Subject: [PATCH 057/375] Step 5.1: Add ui-router

---
 package.json | 1 +
 1 file changed, 1 insertion(+)

diff --git a/package.json b/package.json
index 1555b86..a9636f0 100644
--- a/package.json
+++ b/package.json
@@ -8,6 +8,7 @@
   "dependencies": {
     "angular": "^1.5.3",
     "angular-meteor": "^1.3.9",
+    "angular-ui-router": "^1.0.0-alpha.4",
     "meteor-node-stubs": "~0.2.0"
   },
   "devDependencies": {
-- 
2.7.4


From 961576d296c0cdc1c7d2188b91f235cb9bfa7c45 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:10:34 +0200
Subject: [PATCH 058/375] Step 5.2: Add uiRouter to Socially

---
 imports/ui/components/socially/socially.js | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/imports/ui/components/socially/socially.js b/imports/ui/components/socially/socially.js
index e436684..3de6e3c 100644
--- a/imports/ui/components/socially/socially.js
+++ b/imports/ui/components/socially/socially.js
@@ -1,5 +1,6 @@
 import angular from 'angular';
 import angularMeteor from 'angular-meteor';
+import uiRouter from 'angular-ui-router';
 
 import './socially.html';
 import { name as PartiesList } from '../partiesList/partiesList';
@@ -11,6 +12,7 @@ const name = 'socially';
 // create a module
 export default angular.module(name, [
   angularMeteor,
+  uiRouter,
   PartiesList
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
-- 
2.7.4


From 09bc4c3c116c556480cca3a6f687ff6a97e7d4e1 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:11:08 +0200
Subject: [PATCH 059/375] Step 5.3: Add base tag to main template

---
 client/index.html | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/client/index.html b/client/index.html
index e6d21ea..806f6ab 100644
--- a/client/index.html
+++ b/client/index.html
@@ -1,3 +1,6 @@
+<head>
+  <base href="/">
+</head>
 <body ng-app="socially" ng-strict-di="">
   <socially></socially>
 </body>
-- 
2.7.4


From b665e002e8a2c14af0d5220f38bf62c425861e0e Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:11:52 +0200
Subject: [PATCH 060/375] Step 5.4: Add uiView to Socially view

---
 imports/ui/components/socially/socially.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/imports/ui/components/socially/socially.html b/imports/ui/components/socially/socially.html
index 5e9673b..19b303a 100644
--- a/imports/ui/components/socially/socially.html
+++ b/imports/ui/components/socially/socially.html
@@ -1 +1 @@
-<parties-list></parties-list>
+<div ui-view=""></div>
-- 
2.7.4


From ebce629fde38d66701dfe3a0b47b11c402e53ca5 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:13:54 +0200
Subject: [PATCH 061/375] Step 5.5: Define `parties` route

---
 imports/ui/components/partiesList/partiesList.js | 14 +++++++++++++-
 1 file changed, 13 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partiesList/partiesList.js b/imports/ui/components/partiesList/partiesList.js
index 1218977..bc00317 100644
--- a/imports/ui/components/partiesList/partiesList.js
+++ b/imports/ui/components/partiesList/partiesList.js
@@ -1,5 +1,6 @@
 import angular from 'angular';
 import angularMeteor from 'angular-meteor';
+import uiRouter from 'angular-ui-router';
 
 import './partiesList.html';
 import { Parties } from '../../../api/parties';
@@ -25,10 +26,21 @@ const name = 'partiesList';
 // create a module
 export default angular.module(name, [
   angularMeteor,
+  uiRouter,
   PartyAdd,
   PartyRemove
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
   controllerAs: name,
   controller: PartiesList
-});
+})
+  .config(config);
+
+function config($stateProvider) {
+  'ngInject';
+  $stateProvider
+    .state('parties', {
+      url: '/parties',
+      template: '<parties-list></parties-list>'
+    });
+}
-- 
2.7.4


From 1ee2bc95b6e9a0b6e38545a247fcc6a3ac55e0f1 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:15:19 +0200
Subject: [PATCH 062/375] Step 5.6: Set html5Mode and `parties` as default
 route

---
 imports/ui/components/socially/socially.js | 11 ++++++++++-
 1 file changed, 10 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/socially/socially.js b/imports/ui/components/socially/socially.js
index 3de6e3c..f902505 100644
--- a/imports/ui/components/socially/socially.js
+++ b/imports/ui/components/socially/socially.js
@@ -18,4 +18,13 @@ export default angular.module(name, [
   templateUrl: `imports/ui/components/${name}/${name}.html`,
   controllerAs: name,
   controller: Socially
-});
+})
+  .config(config);
+
+function config($locationProvider, $urlRouterProvider) {
+  'ngInject';
+
+  $locationProvider.html5Mode(true);
+
+  $urlRouterProvider.otherwise('/parties');
+}
-- 
2.7.4


From 0d66c71a37bb8df53d4801844dfa4b8adb901e3e Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:16:09 +0200
Subject: [PATCH 063/375] Step 5.7: Create view for Navigation component

---
 imports/ui/components/navigation/navigation.html | 3 +++
 1 file changed, 3 insertions(+)
 create mode 100644 imports/ui/components/navigation/navigation.html

diff --git a/imports/ui/components/navigation/navigation.html b/imports/ui/components/navigation/navigation.html
new file mode 100644
index 0000000..def2640
--- /dev/null
+++ b/imports/ui/components/navigation/navigation.html
@@ -0,0 +1,3 @@
+<h1>
+  <a href="/parties">Home</a>
+</h1>
-- 
2.7.4


From e921a09ffea73dd0a25780c8c0a486d9b3b7c38c Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:17:01 +0200
Subject: [PATCH 064/375] Step 5.8: Create Navigation component

---
 imports/ui/components/navigation/navigation.js | 14 ++++++++++++++
 1 file changed, 14 insertions(+)
 create mode 100644 imports/ui/components/navigation/navigation.js

diff --git a/imports/ui/components/navigation/navigation.js b/imports/ui/components/navigation/navigation.js
new file mode 100644
index 0000000..a79d5ec
--- /dev/null
+++ b/imports/ui/components/navigation/navigation.js
@@ -0,0 +1,14 @@
+import angular from 'angular';
+import angularMeteor from 'angular-meteor';
+
+import './navigation.html';
+
+const name = 'navigation';
+
+// create a module
+export default angular.module(name, [
+  angularMeteor
+]).component(name, {
+  templateUrl: `imports/ui/components/${name}/${name}.html`,
+  controllerAs: name
+});
-- 
2.7.4


From ee73bfbacdba3c08ccaee5235dfd431a225fb2b9 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:17:37 +0200
Subject: [PATCH 065/375] Step 5.9: Implement Navigation in the view

---
 imports/ui/components/socially/socially.html | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/imports/ui/components/socially/socially.html b/imports/ui/components/socially/socially.html
index 19b303a..7fdb2de 100644
--- a/imports/ui/components/socially/socially.html
+++ b/imports/ui/components/socially/socially.html
@@ -1 +1,3 @@
+<navigation></navigation>
+
 <div ui-view=""></div>
-- 
2.7.4


From 92d5f9b957bc566406ae3377eb99796c1e46d16e Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:18:12 +0200
Subject: [PATCH 066/375] Step 5.10: Add Navigation to Socially

---
 imports/ui/components/socially/socially.js | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/socially/socially.js b/imports/ui/components/socially/socially.js
index f902505..7ef0d74 100644
--- a/imports/ui/components/socially/socially.js
+++ b/imports/ui/components/socially/socially.js
@@ -4,6 +4,7 @@ import uiRouter from 'angular-ui-router';
 
 import './socially.html';
 import { name as PartiesList } from '../partiesList/partiesList';
+import { name as Navigation } from '../navigation/navigation';
 
 class Socially {}
 
@@ -13,7 +14,8 @@ const name = 'socially';
 export default angular.module(name, [
   angularMeteor,
   uiRouter,
-  PartiesList
+  PartiesList,
+  Navigation
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
   controllerAs: name,
-- 
2.7.4


From 138c128bff97b2c06649e1ec62a94797d6b73e4d Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:19:42 +0200
Subject: [PATCH 067/375] Step 5.11: Create view for the PartyDetails

---
 imports/ui/components/partyDetails/partyDetails.html | 1 +
 1 file changed, 1 insertion(+)
 create mode 100644 imports/ui/components/partyDetails/partyDetails.html

diff --git a/imports/ui/components/partyDetails/partyDetails.html b/imports/ui/components/partyDetails/partyDetails.html
new file mode 100644
index 0000000..3ea8425
--- /dev/null
+++ b/imports/ui/components/partyDetails/partyDetails.html
@@ -0,0 +1 @@
+The party your selected is: {{ partyDetails.partyId }}
-- 
2.7.4


From aec5145ffbc851382147151936a033d23ed1cb34 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:21:42 +0200
Subject: [PATCH 068/375] Step 5.12: Create PartyDetails

---
 imports/ui/components/partyDetails/partyDetails.js | 24 ++++++++++++++++++++++
 1 file changed, 24 insertions(+)
 create mode 100644 imports/ui/components/partyDetails/partyDetails.js

diff --git a/imports/ui/components/partyDetails/partyDetails.js b/imports/ui/components/partyDetails/partyDetails.js
new file mode 100644
index 0000000..555c7c6
--- /dev/null
+++ b/imports/ui/components/partyDetails/partyDetails.js
@@ -0,0 +1,24 @@
+import angular from 'angular';
+import angularMeteor from 'angular-meteor';
+import uiRouter from 'angular-ui-router';
+
+import './partyDetails.html';
+
+class PartyDetails {
+  constructor($stateParams) {
+    'ngInject';
+    
+    this.partyId = $stateParams.partyId;
+  }
+}
+
+const name = 'partyDetails';
+
+// create a module
+export default angular.module(name, [
+  angularMeteor
+]).component(name, {
+  templateUrl: `imports/ui/components/${name}/${name}.html`,
+  controllerAs: name,
+  controller: PartyDetails
+});
-- 
2.7.4


From 55193518848ed72be320b674e9e3ee21f57ccd3a Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:22:56 +0200
Subject: [PATCH 069/375] Step 5.13: Set partyDetails state

---
 imports/ui/components/partyDetails/partyDetails.js | 17 ++++++++++++++---
 1 file changed, 14 insertions(+), 3 deletions(-)

diff --git a/imports/ui/components/partyDetails/partyDetails.js b/imports/ui/components/partyDetails/partyDetails.js
index 555c7c6..41dfe6b 100644
--- a/imports/ui/components/partyDetails/partyDetails.js
+++ b/imports/ui/components/partyDetails/partyDetails.js
@@ -7,7 +7,7 @@ import './partyDetails.html';
 class PartyDetails {
   constructor($stateParams) {
     'ngInject';
-    
+
     this.partyId = $stateParams.partyId;
   }
 }
@@ -16,9 +16,20 @@ const name = 'partyDetails';
 
 // create a module
 export default angular.module(name, [
-  angularMeteor
+  angularMeteor,
+  uiRouter
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
   controllerAs: name,
   controller: PartyDetails
-});
+})
+  .config(config);
+
+function config($stateProvider) {
+  'ngInject';
+
+  $stateProvider.state('partyDetails', {
+    url: '/parties/:partyId',
+    template: '<party-details></party-details>'
+  });
+}
-- 
2.7.4


From 178576b15c3447772887c73d55fec3fd0822f558 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:23:41 +0200
Subject: [PATCH 070/375] Step 5.14: Add PartyDetails to Socially

---
 imports/ui/components/socially/socially.js | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/imports/ui/components/socially/socially.js b/imports/ui/components/socially/socially.js
index 7ef0d74..2a2c103 100644
--- a/imports/ui/components/socially/socially.js
+++ b/imports/ui/components/socially/socially.js
@@ -4,6 +4,7 @@ import uiRouter from 'angular-ui-router';
 
 import './socially.html';
 import { name as PartiesList } from '../partiesList/partiesList';
+import { name as PartyDetails } from '../partyDetails/partyDetails';
 import { name as Navigation } from '../navigation/navigation';
 
 class Socially {}
@@ -15,6 +16,7 @@ export default angular.module(name, [
   angularMeteor,
   uiRouter,
   PartiesList,
+  PartyDetails,
   Navigation
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
-- 
2.7.4


From cd730ac469a04166292b283978b741c12f4e068e Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:25:15 +0200
Subject: [PATCH 071/375] Step 5.15: Add link

---
 imports/ui/components/partiesList/partiesList.html | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partiesList/partiesList.html b/imports/ui/components/partiesList/partiesList.html
index 24dedb1..c1b07e2 100644
--- a/imports/ui/components/partiesList/partiesList.html
+++ b/imports/ui/components/partiesList/partiesList.html
@@ -2,7 +2,9 @@
 
 <ul>
   <li ng-repeat="party in partiesList.parties">
-    {{party.name}}
+    <a ui-sref="partyDetails({ partyId: party._id })">
+      {{party.name}}
+    </a>
     <p>{{party.description}}</p>
     <party-remove party="party"></party-remove>
   </li>
-- 
2.7.4


From 234cd7772c7ed7615ca769b6eeb9c884c1b2dcd9 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:30:15 +0200
Subject: [PATCH 072/375] Step 6.1: Add party helper

---
 imports/ui/components/partyDetails/partyDetails.js | 13 ++++++++++++-
 1 file changed, 12 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partyDetails/partyDetails.js b/imports/ui/components/partyDetails/partyDetails.js
index 41dfe6b..75ad55a 100644
--- a/imports/ui/components/partyDetails/partyDetails.js
+++ b/imports/ui/components/partyDetails/partyDetails.js
@@ -3,12 +3,23 @@ import angularMeteor from 'angular-meteor';
 import uiRouter from 'angular-ui-router';
 
 import './partyDetails.html';
+import { Parties } from '../../../api/parties';
 
 class PartyDetails {
-  constructor($stateParams) {
+  constructor($stateParams, $scope, $reactive) {
     'ngInject';
 
+    $reactive(this).attach($scope);
+
     this.partyId = $stateParams.partyId;
+
+    this.helpers({
+      party() {
+        return Parties.findOne({
+          _id: $stateParams.partyId
+        });
+      }
+    });
   }
 }
 
-- 
2.7.4


From 27c61841593947bd71ea81dac725a552ac122ede Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:33:34 +0200
Subject: [PATCH 073/375] Step 6.2: Add form with the party details to the
 party details page

---
 imports/ui/components/partyDetails/partyDetails.html | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partyDetails/partyDetails.html b/imports/ui/components/partyDetails/partyDetails.html
index 3ea8425..8c1201f 100644
--- a/imports/ui/components/partyDetails/partyDetails.html
+++ b/imports/ui/components/partyDetails/partyDetails.html
@@ -1 +1,5 @@
-The party your selected is: {{ partyDetails.partyId }}
+The party your selected is:
+<form>
+  Party name: <input type="text" ng-model="partyDetails.party.name" />
+  Description: <input type="text" ng-model="partyDetails.party.description" />
+</form>
-- 
2.7.4


From ded721bbf151955392f3257154ff21d6472a1850 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:34:10 +0200
Subject: [PATCH 074/375] Step 6.3: Add save and back buttons to the view

---
 imports/ui/components/partyDetails/partyDetails.html | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/imports/ui/components/partyDetails/partyDetails.html b/imports/ui/components/partyDetails/partyDetails.html
index 8c1201f..b5c939b 100644
--- a/imports/ui/components/partyDetails/partyDetails.html
+++ b/imports/ui/components/partyDetails/partyDetails.html
@@ -2,4 +2,7 @@ The party your selected is:
 <form>
   Party name: <input type="text" ng-model="partyDetails.party.name" />
   Description: <input type="text" ng-model="partyDetails.party.description" />
+  <button ng-click="partyDetails.save()">Save</button>
 </form>
+
+<button ui-sref="parties">Back</button>
-- 
2.7.4


From 655d500f4fcc6b24f1225ddaf16b0390f7ddddc0 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:35:38 +0200
Subject: [PATCH 075/375] Step 6.4: Implement save button on the component
 logic

---
 imports/ui/components/partyDetails/partyDetails.js | 11 +++++++++++
 1 file changed, 11 insertions(+)

diff --git a/imports/ui/components/partyDetails/partyDetails.js b/imports/ui/components/partyDetails/partyDetails.js
index 75ad55a..9e5092e 100644
--- a/imports/ui/components/partyDetails/partyDetails.js
+++ b/imports/ui/components/partyDetails/partyDetails.js
@@ -21,6 +21,17 @@ class PartyDetails {
       }
     });
   }
+
+  save() {
+    Parties.update({
+      _id: this.party._id
+    }, {
+      $set: {
+        name: this.party.name,
+        description: this.party.description
+      }
+    });
+  }
 }
 
 const name = 'partyDetails';
-- 
2.7.4


From a7a40c6b8ddc83950e290fc5a89af1332326fd4b Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:36:24 +0200
Subject: [PATCH 076/375] Step 6.5: Handle success and fail for data actions

---
 imports/ui/components/partyDetails/partyDetails.js | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/imports/ui/components/partyDetails/partyDetails.js b/imports/ui/components/partyDetails/partyDetails.js
index 9e5092e..0916e06 100644
--- a/imports/ui/components/partyDetails/partyDetails.js
+++ b/imports/ui/components/partyDetails/partyDetails.js
@@ -30,6 +30,12 @@ class PartyDetails {
         name: this.party.name,
         description: this.party.description
       }
+    }, (error) => {
+      if (error) {
+        console.log('Oops, unable to update the party...');
+      } else {
+        console.log('Done!');
+      }
     });
   }
 }
-- 
2.7.4


From da1b2c05bb5b3ea91d65270a3b8c81acb7c20d52 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 15:11:57 +0200
Subject: [PATCH 077/375] Step 6.6: Tests of PartyDetails

---
 .../partyDetails/client/partyDetails.tests.js      | 49 ++++++++++++++++++++++
 1 file changed, 49 insertions(+)
 create mode 100644 imports/ui/components/partyDetails/client/partyDetails.tests.js

diff --git a/imports/ui/components/partyDetails/client/partyDetails.tests.js b/imports/ui/components/partyDetails/client/partyDetails.tests.js
new file mode 100644
index 0000000..997304e
--- /dev/null
+++ b/imports/ui/components/partyDetails/client/partyDetails.tests.js
@@ -0,0 +1,49 @@
+import { name as PartyDetails } from '../partyDetails';
+import { Parties } from '../../../../api/parties';
+import 'angular-mocks';
+
+describe('PartyDetails', () => {
+  beforeEach(() => {
+    window.module(PartyDetails);
+  });
+
+  describe('controller', () => {
+    let controller;
+    const party = {
+      _id: 'partyId',
+      name: 'Foo',
+      description: 'Birthday of Foo'
+    };
+
+    beforeEach(() => {
+      inject(($rootScope, $componentController) => {
+        controller = $componentController(PartyDetails, {
+          $scope: $rootScope.$new(true)
+        });
+      });
+    });
+
+    describe('save()', () => {
+      beforeEach(() => {
+        spyOn(Parties, 'update');
+        controller.party = party;
+        controller.save();
+      });
+
+      it('should update a proper party', () => {
+        expect(Parties.update.calls.mostRecent().args[0]).toEqual({
+          _id: party._id
+        });
+      });
+
+      it('should update with proper modifier', () => {
+        expect(Parties.update.calls.mostRecent().args[1]).toEqual({
+          $set: {
+            name: party.name,
+            description: party.description
+          }
+        });
+      });
+    });
+  });
+});
-- 
2.7.4


From 127e682f06684c410a87c106011396877ca1216d Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:38:12 +0200
Subject: [PATCH 078/375] Step 7.1: Move startup to imports

---
 imports/startup/fixtures.js | 21 +++++++++++++++++++++
 1 file changed, 21 insertions(+)
 create mode 100644 imports/startup/fixtures.js

diff --git a/imports/startup/fixtures.js b/imports/startup/fixtures.js
new file mode 100644
index 0000000..d92fb48
--- /dev/null
+++ b/imports/startup/fixtures.js
@@ -0,0 +1,21 @@
+import { Meteor } from 'meteor/meteor';
+import { Parties } from '../api/parties';
+
+Meteor.startup(() => {
+  if (Parties.find().count() === 0) {
+    const parties = [{
+      'name': 'Dubstep-Free Zone',
+      'description': 'Fast just got faster with Nexus S.'
+    }, {
+      'name': 'All dubstep all the time',
+      'description': 'Get it on!'
+    }, {
+      'name': 'Savage lounging',
+      'description': 'Leisure suit required. And only fiercest manners.'
+    }];
+
+    parties.forEach((party) => {
+      Parties.insert(party)
+    });
+  }
+});
-- 
2.7.4


From 73d9c50b726ebe86c2210743944f5f3a016fd1db Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:39:27 +0200
Subject: [PATCH 079/375] Step 7.2: Create main entry point on server-side

---
 server/main.js | 1 +
 1 file changed, 1 insertion(+)
 create mode 100644 server/main.js

diff --git a/server/main.js b/server/main.js
new file mode 100644
index 0000000..40efcd1
--- /dev/null
+++ b/server/main.js
@@ -0,0 +1 @@
+import '../imports/startup/fixtures';
-- 
2.7.4


From 6dd3babaef4705497a7f7e6fefbf493c52e38f2e Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:40:16 +0200
Subject: [PATCH 080/375] Step 7.3: Import Parties on server-side to be
 synchronized

---
 server/main.js | 1 +
 1 file changed, 1 insertion(+)

diff --git a/server/main.js b/server/main.js
index 40efcd1..d4c97f0 100644
--- a/server/main.js
+++ b/server/main.js
@@ -1 +1,2 @@
 import '../imports/startup/fixtures';
+import '../imports/api/parties';
-- 
2.7.4


From a814d40e10909b1c91b7c1c656a7f9887bbe5ed5 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:40:34 +0200
Subject: [PATCH 081/375] Step 7.4: Remove old startup.js

---
 server/startup.js | 21 ---------------------
 1 file changed, 21 deletions(-)
 delete mode 100644 server/startup.js

diff --git a/server/startup.js b/server/startup.js
deleted file mode 100644
index 6ce39cd..0000000
--- a/server/startup.js
+++ /dev/null
@@ -1,21 +0,0 @@
-import { Meteor } from 'meteor/meteor';
-import { Parties } from '../imports/api/parties';
-
-Meteor.startup(() => {
-  if (Parties.find().count() === 0) {
-    const parties = [{
-      'name': 'Dubstep-Free Zone',
-      'description': 'Fast just got faster with Nexus S.'
-    }, {
-      'name': 'All dubstep all the time',
-      'description': 'Get it on!'
-    }, {
-      'name': 'Savage lounging',
-      'description': 'Leisure suit required. And only fiercest manners.'
-    }];
-
-    parties.forEach((party) => {
-      Parties.insert(party)
-    });
-  }
-});
-- 
2.7.4


From a3411d6ff9c22a7650c5e916867ce0c03c818b07 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:41:57 +0200
Subject: [PATCH 082/375] Step 8.1: Remove `insecure` package

---
 .meteor/packages | 1 -
 .meteor/versions | 1 -
 2 files changed, 2 deletions(-)

diff --git a/.meteor/packages b/.meteor/packages
index 03a4feb..7368104 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -16,7 +16,6 @@ standard-minifier-js    # JS minifier run for production mode
 es5-shim                # ECMAScript 5 compatibility for older browsers.
 
 autopublish             # Publish all data to the clients (for prototyping)
-insecure                # Allow all DB writes from clients (for prototyping)
 pbastowski:angular-babel
 angular-templates
 sanjo:jasmine
diff --git a/.meteor/versions b/.meteor/versions
index 550c9b0..34d1d93 100644
--- a/.meteor/versions
+++ b/.meteor/versions
@@ -31,7 +31,6 @@ html-tools@1.0.9
 htmljs@1.0.9
 http@1.1.5
 id-map@1.0.7
-insecure@1.0.7
 jquery@1.11.8
 launch-screen@1.0.11
 less@2.5.6
-- 
2.7.4


From ccc2ca610aa13f793049fc7bdbbd80c366b63162 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:42:53 +0200
Subject: [PATCH 083/375] Step 8.2: Add `accounts-password`

---
 .meteor/packages |  1 +
 .meteor/versions | 10 ++++++++++
 2 files changed, 11 insertions(+)

diff --git a/.meteor/packages b/.meteor/packages
index 7368104..f402f80 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -21,3 +21,4 @@ angular-templates
 sanjo:jasmine
 velocity:html-reporter
 velocity:console-reporter
+accounts-password
diff --git a/.meteor/versions b/.meteor/versions
index 34d1d93..87daa22 100644
--- a/.meteor/versions
+++ b/.meteor/versions
@@ -1,3 +1,5 @@
+accounts-base@1.2.4
+accounts-password@1.1.6
 allow-deny@1.0.4
 amplify@1.0.0
 angular-templates@1.0.2
@@ -17,12 +19,14 @@ check@1.2.1
 ddp@1.2.5
 ddp-client@1.2.5
 ddp-common@1.2.5
+ddp-rate-limiter@1.0.2
 ddp-server@1.2.6
 deps@1.0.12
 diff-sequence@1.0.5
 ecmascript@0.4.3
 ecmascript-runtime@0.2.10
 ejson@1.0.11
+email@1.0.10
 es5-shim@4.5.10
 fastclick@1.0.11
 geojson-utils@1.0.8
@@ -35,6 +39,7 @@ jquery@1.11.8
 launch-screen@1.0.11
 less@2.5.6
 livedata@1.0.18
+localstorage@1.0.7
 logging@1.0.12
 meteor@1.1.14
 meteor-base@1.0.4
@@ -47,6 +52,7 @@ modules@0.6.1
 modules-runtime@0.6.3
 mongo@1.1.7
 mongo-id@1.0.4
+npm-bcrypt@0.7.8_2
 npm-mongo@1.4.43
 observe-sequence@1.0.11
 ordered-dict@1.0.7
@@ -54,14 +60,18 @@ pbastowski:angular-babel@1.3.2
 promise@0.6.7
 random@1.0.9
 reactive-dict@1.1.5
+rate-limit@1.0.2
 reactive-var@1.0.9
 reload@1.1.8
 retry@1.0.7
 routepolicy@1.0.10
 sanjo:jasmine@1.0.1
 session@1.1.3
+service-configuration@1.0.7
+sha@1.0.5
 spacebars@1.0.11
 spacebars-compiler@1.0.11
+srp@1.0.6
 standard-minifier-css@1.0.6
 standard-minifier-js@1.0.6
 templating@1.1.7
-- 
2.7.4


From d41937bb8b44b066239e4d97afa5ebb8c57df365 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:44:10 +0200
Subject: [PATCH 084/375] Step 8.3: Add `dotansimha:accounts-ui-angular`

---
 .meteor/packages | 1 +
 .meteor/versions | 7 +++++++
 2 files changed, 8 insertions(+)

diff --git a/.meteor/packages b/.meteor/packages
index f402f80..cc4586d 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -22,3 +22,4 @@ sanjo:jasmine
 velocity:html-reporter
 velocity:console-reporter
 accounts-password
+dotansimha:accounts-ui-angular
diff --git a/.meteor/versions b/.meteor/versions
index 87daa22..f995f1b 100644
--- a/.meteor/versions
+++ b/.meteor/versions
@@ -1,5 +1,7 @@
 accounts-base@1.2.4
 accounts-password@1.1.6
+accounts-ui@1.1.7
+accounts-ui-unstyled@1.1.10
 allow-deny@1.0.4
 amplify@1.0.0
 angular-templates@1.0.2
@@ -10,6 +12,7 @@ babel-runtime@0.1.8
 base64@1.0.8
 binary-heap@1.0.8
 blaze@2.1.7
+blaze-html-templates@1.0.2
 blaze-tools@1.0.8
 boilerplate-generator@1.0.8
 caching-compiler@1.0.2
@@ -23,6 +26,7 @@ ddp-rate-limiter@1.0.2
 ddp-server@1.2.6
 deps@1.0.12
 diff-sequence@1.0.5
+dotansimha:accounts-ui-angular@0.0.4
 ecmascript@0.4.3
 ecmascript-runtime@0.2.10
 ejson@1.0.11
@@ -61,6 +65,7 @@ promise@0.6.7
 random@1.0.9
 reactive-dict@1.1.5
 rate-limit@1.0.2
+reactive-dict@1.1.5
 reactive-var@1.0.9
 reload@1.1.8
 retry@1.0.7
@@ -68,6 +73,7 @@ routepolicy@1.0.10
 sanjo:jasmine@1.0.1
 session@1.1.3
 service-configuration@1.0.7
+session@1.1.3
 sha@1.0.5
 spacebars@1.0.11
 spacebars-compiler@1.0.11
@@ -76,6 +82,7 @@ standard-minifier-css@1.0.6
 standard-minifier-js@1.0.6
 templating@1.1.7
 templating-tools@1.0.2
+tmeasday:check-npm-versions@0.1.1
 tracker@1.0.13
 ui@1.0.11
 underscore@1.0.8
-- 
2.7.4


From bda3c2aa4bbe28cfcc91deff8be6e8db2c34515f Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:44:45 +0200
Subject: [PATCH 085/375] Step 8.4: Add a dependecy for accounts-ui package

---
 imports/ui/components/socially/socially.js | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/socially/socially.js b/imports/ui/components/socially/socially.js
index 2a2c103..2cc775f 100644
--- a/imports/ui/components/socially/socially.js
+++ b/imports/ui/components/socially/socially.js
@@ -17,7 +17,8 @@ export default angular.module(name, [
   uiRouter,
   PartiesList,
   PartyDetails,
-  Navigation
+  Navigation,
+  'accounts.ui'
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
   controllerAs: name,
-- 
2.7.4


From 6adbd153b4ae38b800dd9cbf7a10e8dd1861fb24 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 11:45:52 +0200
Subject: [PATCH 086/375] Step 8.5: Add usage for login-buttons directive

---
 imports/ui/components/socially/socially.html | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/imports/ui/components/socially/socially.html b/imports/ui/components/socially/socially.html
index 7fdb2de..83c40e7 100644
--- a/imports/ui/components/socially/socially.html
+++ b/imports/ui/components/socially/socially.html
@@ -1,3 +1,5 @@
+<login-buttons></login-buttons>
+
 <navigation></navigation>
 
 <div ui-view=""></div>
-- 
2.7.4


From 9bd4c79a114e18fcf683a04a216d575f50b0c369 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:01:43 +0200
Subject: [PATCH 087/375] Step 8.6: Add allow logic to the model

---
 imports/api/parties.js | 12 ++++++++++++
 1 file changed, 12 insertions(+)

diff --git a/imports/api/parties.js b/imports/api/parties.js
index e308632..3e283c1 100644
--- a/imports/api/parties.js
+++ b/imports/api/parties.js
@@ -1,3 +1,15 @@
 import { Mongo } from 'meteor/mongo';
 
 export const Parties = new Mongo.Collection('parties');
+
+Parties.allow({
+  insert(userId, party) {
+    return userId && party.owner === userId;
+  },
+  update(userId, party, fields, modifier) {
+    return userId && party.owner === userId;
+  },
+  remove(userId, party) {
+    return userId && party.owner === userId;
+  }
+});
-- 
2.7.4


From 97650c17b5184f124b75a5b148dd71f841ca74ec Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:02:37 +0200
Subject: [PATCH 088/375] Step 8.7: Add current user to the new party

---
 imports/ui/components/partyAdd/partyAdd.js | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/imports/ui/components/partyAdd/partyAdd.js b/imports/ui/components/partyAdd/partyAdd.js
index f51f219..5b1ead3 100644
--- a/imports/ui/components/partyAdd/partyAdd.js
+++ b/imports/ui/components/partyAdd/partyAdd.js
@@ -1,6 +1,8 @@
 import angular from 'angular';
 import angularMeteor from 'angular-meteor';
 
+import { Meteor } from 'meteor/meteor';
+
 import './partyAdd.html';
 import { Parties } from '../../../api/parties';
 
@@ -10,6 +12,7 @@ class PartyAdd {
   }
 
   submit() {
+    this.party.owner = Meteor.user()._id;
     Parties.insert(this.party);
     this.reset();
   }
-- 
2.7.4


From 392650d94b84f56535fcf372aaf440ca8175c60e Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:03:33 +0200
Subject: [PATCH 089/375] Step 8.8: Add facebook and twitter

---
 .meteor/packages | 2 ++
 .meteor/versions | 8 ++++++++
 2 files changed, 10 insertions(+)

diff --git a/.meteor/packages b/.meteor/packages
index cc4586d..0af80ec 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -23,3 +23,5 @@ velocity:html-reporter
 velocity:console-reporter
 accounts-password
 dotansimha:accounts-ui-angular
+accounts-facebook
+accounts-twitter
diff --git a/.meteor/versions b/.meteor/versions
index f995f1b..feb6048 100644
--- a/.meteor/versions
+++ b/.meteor/versions
@@ -1,5 +1,8 @@
 accounts-base@1.2.4
+accounts-facebook@1.0.7
+accounts-oauth@1.1.10
 accounts-password@1.1.6
+accounts-twitter@1.0.7
 accounts-ui@1.1.7
 accounts-ui-unstyled@1.1.10
 allow-deny@1.0.4
@@ -32,6 +35,7 @@ ecmascript-runtime@0.2.10
 ejson@1.0.11
 email@1.0.10
 es5-shim@4.5.10
+facebook@1.2.4
 fastclick@1.0.11
 geojson-utils@1.0.8
 hot-code-push@1.0.4
@@ -58,6 +62,9 @@ mongo@1.1.7
 mongo-id@1.0.4
 npm-bcrypt@0.7.8_2
 npm-mongo@1.4.43
+oauth@1.1.8
+oauth1@1.1.7
+oauth2@1.1.7
 observe-sequence@1.0.11
 ordered-dict@1.0.7
 pbastowski:angular-babel@1.3.2
@@ -84,6 +91,7 @@ templating@1.1.7
 templating-tools@1.0.2
 tmeasday:check-npm-versions@0.1.1
 tracker@1.0.13
+twitter@1.1.7
 ui@1.0.11
 underscore@1.0.8
 url@1.0.9
-- 
2.7.4


From 9f243ab1939a0fb06152d3c927e231ce2400f93e Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:05:29 +0200
Subject: [PATCH 090/375] Step 8.9: Add permissions limit to the party details
 page

---
 imports/ui/components/partyDetails/partyDetails.js | 13 ++++++++++++-
 1 file changed, 12 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partyDetails/partyDetails.js b/imports/ui/components/partyDetails/partyDetails.js
index 0916e06..bd71782 100644
--- a/imports/ui/components/partyDetails/partyDetails.js
+++ b/imports/ui/components/partyDetails/partyDetails.js
@@ -2,6 +2,8 @@ import angular from 'angular';
 import angularMeteor from 'angular-meteor';
 import uiRouter from 'angular-ui-router';
 
+import { Meteor } from 'meteor/meteor';
+
 import './partyDetails.html';
 import { Parties } from '../../../api/parties';
 
@@ -58,6 +60,15 @@ function config($stateProvider) {
 
   $stateProvider.state('partyDetails', {
     url: '/parties/:partyId',
-    template: '<party-details></party-details>'
+    template: '<party-details></party-details>',
+    resolve: {
+      currentUser($q) {
+        if (Meteor.userId() === null) {
+          return $q.reject();
+        } else {
+          return $q.resolve();
+        }
+      }
+    }
   });
 }
-- 
2.7.4


From 26735580ca0f7eb842f965cbc3962766cebdc4ed Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:05:59 +0200
Subject: [PATCH 091/375] Step 8.10: Add the reason of rejection

---
 imports/ui/components/partyDetails/partyDetails.js | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/imports/ui/components/partyDetails/partyDetails.js b/imports/ui/components/partyDetails/partyDetails.js
index bd71782..12c05aa 100644
--- a/imports/ui/components/partyDetails/partyDetails.js
+++ b/imports/ui/components/partyDetails/partyDetails.js
@@ -64,7 +64,7 @@ function config($stateProvider) {
     resolve: {
       currentUser($q) {
         if (Meteor.userId() === null) {
-          return $q.reject();
+          return $q.reject('AUTH_REQUIRED');
         } else {
           return $q.resolve();
         }
-- 
2.7.4


From 8fae7a42ceccd8aa9ad05536d471b7657929e59c Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:07:34 +0200
Subject: [PATCH 092/375] Step 8.11: Handle `AUTH_REQUIRED`

---
 imports/ui/components/socially/socially.js | 15 ++++++++++++++-
 1 file changed, 14 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/socially/socially.js b/imports/ui/components/socially/socially.js
index 2cc775f..61c86d1 100644
--- a/imports/ui/components/socially/socially.js
+++ b/imports/ui/components/socially/socially.js
@@ -24,7 +24,8 @@ export default angular.module(name, [
   controllerAs: name,
   controller: Socially
 })
-  .config(config);
+  .config(config)
+  .run(run);
 
 function config($locationProvider, $urlRouterProvider) {
   'ngInject';
@@ -33,3 +34,15 @@ function config($locationProvider, $urlRouterProvider) {
 
   $urlRouterProvider.otherwise('/parties');
 }
+
+function run($rootScope, $state) {
+  'ngInject';
+  
+  $rootScope.$on('$stateChangeError',
+    (event, toState, toParams, fromState, fromParams, error) => {
+      if (error === 'AUTH_REQUIRED') {
+        $state.go('parties');
+      }
+    }
+  );
+}
-- 
2.7.4


From 4931d03fb1fa88b18fb441277afbd42606983f91 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:08:59 +0200
Subject: [PATCH 093/375] Step 9.1: Remove `autopublish`

---
 .meteor/packages | 1 -
 .meteor/versions | 1 -
 2 files changed, 2 deletions(-)

diff --git a/.meteor/packages b/.meteor/packages
index 0af80ec..110dde9 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -15,7 +15,6 @@ standard-minifier-css   # CSS minifier run for production mode
 standard-minifier-js    # JS minifier run for production mode
 es5-shim                # ECMAScript 5 compatibility for older browsers.
 
-autopublish             # Publish all data to the clients (for prototyping)
 pbastowski:angular-babel
 angular-templates
 sanjo:jasmine
diff --git a/.meteor/versions b/.meteor/versions
index feb6048..9607f4c 100644
--- a/.meteor/versions
+++ b/.meteor/versions
@@ -8,7 +8,6 @@ accounts-ui-unstyled@1.1.10
 allow-deny@1.0.4
 amplify@1.0.0
 angular-templates@1.0.2
-autopublish@1.0.7
 autoupdate@1.2.8
 babel-compiler@6.6.4
 babel-runtime@0.1.8
-- 
2.7.4


From 87f9323b1bf05206155db28100ced186d9b25173 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:14:30 +0200
Subject: [PATCH 094/375] Step 9.2: Add the `parties` publication to the server

---
 imports/api/parties/publish.js | 31 +++++++++++++++++++++++++++++++
 1 file changed, 31 insertions(+)
 create mode 100644 imports/api/parties/publish.js

diff --git a/imports/api/parties/publish.js b/imports/api/parties/publish.js
new file mode 100644
index 0000000..590f23b
--- /dev/null
+++ b/imports/api/parties/publish.js
@@ -0,0 +1,31 @@
+import { Meteor } from 'meteor/meteor';
+
+import { Parties } from './collection';
+
+if (Meteor.isServer) {
+  Meteor.publish('parties', function() {
+    const selector = {
+      $or: [{
+        // the public parties
+        $and: [{
+          public: true
+        }, {
+          public: {
+            $exists: true
+          }
+        }]
+      }, {
+        // when logged in user is the owner
+        $and: [{
+          owner: this.userId
+        }, {
+          owner: {
+            $exists: true
+          }
+        }]
+      }]
+    };
+
+    return Parties.find(selector);
+  });
+}
-- 
2.7.4


From 0b926e681e99e94e228e650df075ae8fd50eb001 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:15:16 +0200
Subject: [PATCH 095/375] Step 9.3: Move Parties to collection.js

---
 imports/api/parties/collection.js | 15 +++++++++++++++
 1 file changed, 15 insertions(+)
 create mode 100644 imports/api/parties/collection.js

diff --git a/imports/api/parties/collection.js b/imports/api/parties/collection.js
new file mode 100644
index 0000000..3e283c1
--- /dev/null
+++ b/imports/api/parties/collection.js
@@ -0,0 +1,15 @@
+import { Mongo } from 'meteor/mongo';
+
+export const Parties = new Mongo.Collection('parties');
+
+Parties.allow({
+  insert(userId, party) {
+    return userId && party.owner === userId;
+  },
+  update(userId, party, fields, modifier) {
+    return userId && party.owner === userId;
+  },
+  remove(userId, party) {
+    return userId && party.owner === userId;
+  }
+});
-- 
2.7.4


From 3132bd0cffc6224f457093eeaaaeea737c0d4a5b Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:15:55 +0200
Subject: [PATCH 096/375] Step 9.4: Create entry point for Parties

---
 imports/api/parties/index.js | 3 +++
 1 file changed, 3 insertions(+)
 create mode 100644 imports/api/parties/index.js

diff --git a/imports/api/parties/index.js b/imports/api/parties/index.js
new file mode 100644
index 0000000..5f7ae00
--- /dev/null
+++ b/imports/api/parties/index.js
@@ -0,0 +1,3 @@
+import './publish';
+
+export * from './collection';
-- 
2.7.4


From 1f4bde85a178202d2d78f602d23242bb8f30137a Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:16:11 +0200
Subject: [PATCH 097/375] Step 9.5: Remove old parties.js

---
 imports/api/parties.js | 15 ---------------
 1 file changed, 15 deletions(-)
 delete mode 100644 imports/api/parties.js

diff --git a/imports/api/parties.js b/imports/api/parties.js
deleted file mode 100644
index 3e283c1..0000000
--- a/imports/api/parties.js
+++ /dev/null
@@ -1,15 +0,0 @@
-import { Mongo } from 'meteor/mongo';
-
-export const Parties = new Mongo.Collection('parties');
-
-Parties.allow({
-  insert(userId, party) {
-    return userId && party.owner === userId;
-  },
-  update(userId, party, fields, modifier) {
-    return userId && party.owner === userId;
-  },
-  remove(userId, party) {
-    return userId && party.owner === userId;
-  }
-});
-- 
2.7.4


From e652e34a5149677479a7e8189c0b66656c5ba537 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:18:56 +0200
Subject: [PATCH 098/375] Step 9.6: Add the `parties` subscription

---
 imports/ui/components/partiesList/partiesList.js | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/imports/ui/components/partiesList/partiesList.js b/imports/ui/components/partiesList/partiesList.js
index bc00317..9f51859 100644
--- a/imports/ui/components/partiesList/partiesList.js
+++ b/imports/ui/components/partiesList/partiesList.js
@@ -13,6 +13,8 @@ class PartiesList {
 
     $reactive(this).attach($scope);
 
+    this.subscribe('parties');
+
     this.helpers({
       parties() {
         return Parties.find({});
-- 
2.7.4


From 97e47cce84c3231c0fb7fe1a20de91c716645715 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:20:20 +0200
Subject: [PATCH 099/375] Step 9.7: Add public party checkbox to the add new
 party form

---
 imports/ui/components/partyAdd/partyAdd.html | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/imports/ui/components/partyAdd/partyAdd.html b/imports/ui/components/partyAdd/partyAdd.html
index 3508bef..4db1888 100644
--- a/imports/ui/components/partyAdd/partyAdd.html
+++ b/imports/ui/components/partyAdd/partyAdd.html
@@ -7,5 +7,9 @@
     Description:
   </label>
   <input type="text" ng-model="partyAdd.party.description" />
+  <label>
+    Public Party?
+  </label>
+  <input type="checkbox" ng-model="partyAdd.party.public">
   <button ng-click="partyAdd.submit()">Add Party!</button>
 </form>
-- 
2.7.4


From 1665eccc6eb822bbb09da0d2d667d37936169a3f Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:20:49 +0200
Subject: [PATCH 100/375] Step 9.8: Add is public checkbox to the party details
 view

---
 imports/ui/components/partyDetails/partyDetails.html | 1 +
 1 file changed, 1 insertion(+)

diff --git a/imports/ui/components/partyDetails/partyDetails.html b/imports/ui/components/partyDetails/partyDetails.html
index b5c939b..4e0cc68 100644
--- a/imports/ui/components/partyDetails/partyDetails.html
+++ b/imports/ui/components/partyDetails/partyDetails.html
@@ -2,6 +2,7 @@ The party your selected is:
 <form>
   Party name: <input type="text" ng-model="partyDetails.party.name" />
   Description: <input type="text" ng-model="partyDetails.party.description" />
+  Public Party? <input type="checkbox" ng-model="partyDetails.party.public">
   <button ng-click="partyDetails.save()">Save</button>
 </form>
 
-- 
2.7.4


From 27acc8672ab01fe367984548ffe020e521728054 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:21:31 +0200
Subject: [PATCH 101/375] Step 9.9: Add is public checkbox to the party details
 component

---
 imports/ui/components/partyDetails/partyDetails.js | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partyDetails/partyDetails.js b/imports/ui/components/partyDetails/partyDetails.js
index 12c05aa..678df71 100644
--- a/imports/ui/components/partyDetails/partyDetails.js
+++ b/imports/ui/components/partyDetails/partyDetails.js
@@ -30,7 +30,8 @@ class PartyDetails {
     }, {
       $set: {
         name: this.party.name,
-        description: this.party.description
+        description: this.party.description,
+        public: this.party.public
       }
     }, (error) => {
       if (error) {
-- 
2.7.4


From 531dd7747dc5fe05f1e91c2e675c093c5770bb5b Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:22:34 +0200
Subject: [PATCH 102/375] Step 9.10: Add `parties` subscription to the
 PartyDetails

---
 imports/ui/components/partyDetails/partyDetails.js | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/imports/ui/components/partyDetails/partyDetails.js b/imports/ui/components/partyDetails/partyDetails.js
index 678df71..c11b395 100644
--- a/imports/ui/components/partyDetails/partyDetails.js
+++ b/imports/ui/components/partyDetails/partyDetails.js
@@ -15,6 +15,8 @@ class PartyDetails {
 
     this.partyId = $stateParams.partyId;
 
+    this.subscribe('parties');
+
     this.helpers({
       party() {
         return Parties.findOne({
-- 
2.7.4


From d152186ab2216a9adffbb81bc4066f6620642eed Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:24:09 +0200
Subject: [PATCH 103/375] Step 9.11: Create the users publication

---
 imports/api/users.js | 12 ++++++++++++
 1 file changed, 12 insertions(+)
 create mode 100644 imports/api/users.js

diff --git a/imports/api/users.js b/imports/api/users.js
new file mode 100644
index 0000000..4c9fee9
--- /dev/null
+++ b/imports/api/users.js
@@ -0,0 +1,12 @@
+import { Meteor } from 'meteor/meteor';
+
+if (Meteor.isServer) {
+  Meteor.publish('users', function() {
+    return Meteor.users.find({}, {
+      fields: {
+        emails: 1,
+        profile: 1
+      }
+    });
+  });
+}
-- 
2.7.4


From 3d7e40b07611a2e369dc4c5b0879b0b41a86f32d Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:24:32 +0200
Subject: [PATCH 104/375] Step 9.12: Add `users` publication to the server-side

---
 server/main.js | 1 +
 1 file changed, 1 insertion(+)

diff --git a/server/main.js b/server/main.js
index d4c97f0..1acdc6c 100644
--- a/server/main.js
+++ b/server/main.js
@@ -1,2 +1,3 @@
 import '../imports/startup/fixtures';
 import '../imports/api/parties';
+import '../imports/api/users';
-- 
2.7.4


From d5da26d1c7425bf481a564a376f11ac08d29135b Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:26:29 +0200
Subject: [PATCH 105/375] Step 9.13: Add `users` subscription and helper

---
 imports/ui/components/partyDetails/partyDetails.js | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/imports/ui/components/partyDetails/partyDetails.js b/imports/ui/components/partyDetails/partyDetails.js
index c11b395..bbaa7d7 100644
--- a/imports/ui/components/partyDetails/partyDetails.js
+++ b/imports/ui/components/partyDetails/partyDetails.js
@@ -16,12 +16,16 @@ class PartyDetails {
     this.partyId = $stateParams.partyId;
 
     this.subscribe('parties');
+    this.subscribe('users');
 
     this.helpers({
       party() {
         return Parties.findOne({
           _id: $stateParams.partyId
         });
+      },
+      users() {
+        return Meteor.users.find({});
       }
     });
   }
-- 
2.7.4


From 3dc4c2e03364f69212812d9258a85dbbe2462433 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:27:20 +0200
Subject: [PATCH 106/375] Step 9.14: Add the users list to the party details
 view

---
 imports/ui/components/partyDetails/partyDetails.html | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/imports/ui/components/partyDetails/partyDetails.html b/imports/ui/components/partyDetails/partyDetails.html
index 4e0cc68..99de077 100644
--- a/imports/ui/components/partyDetails/partyDetails.html
+++ b/imports/ui/components/partyDetails/partyDetails.html
@@ -7,3 +7,10 @@ The party your selected is:
 </form>
 
 <button ui-sref="parties">Back</button>
+
+<ul>
+  Users:
+  <li ng-repeat="user in partyDetails.users">
+    <div>{{ user.emails[0].address }}</div>
+  </li>
+</ul>
-- 
2.7.4


From 7e6f3db4ae00111b0ed64ec99385e678fb07af9b Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 15:44:26 +0200
Subject: [PATCH 107/375] Step 9.15: Update tests of PartyAdd

---
 imports/ui/components/partyAdd/client/partyAdd.tests.js | 16 ++++++++++++++--
 1 file changed, 14 insertions(+), 2 deletions(-)

diff --git a/imports/ui/components/partyAdd/client/partyAdd.tests.js b/imports/ui/components/partyAdd/client/partyAdd.tests.js
index cc1d35e..3d27875 100644
--- a/imports/ui/components/partyAdd/client/partyAdd.tests.js
+++ b/imports/ui/components/partyAdd/client/partyAdd.tests.js
@@ -1,3 +1,4 @@
+import { Meteor } from 'meteor/meteor';
 import { name as PartyAdd } from '../partyAdd';
 import { Parties } from '../../../../api/parties';
 import 'angular-mocks';
@@ -11,7 +12,11 @@ describe('PartyAdd', () => {
     let controller;
     const party = {
       name: 'Foo',
-      description: 'Birthday of Foo'
+      description: 'Birthday of Foo',
+      public: true
+    };
+    const user = {
+      _id: 'userId'
     };
 
     beforeEach(() => {
@@ -20,6 +25,8 @@ describe('PartyAdd', () => {
           $scope: $rootScope.$new(true)
         });
       });
+
+      spyOn(Meteor, 'user').and.returnValue(user);
     });
 
     describe('reset()', () => {
@@ -42,7 +49,12 @@ describe('PartyAdd', () => {
       });
 
       it('should insert a new party', () => {
-        expect(Parties.insert).toHaveBeenCalledWith(party);
+        expect(Parties.insert).toHaveBeenCalledWith({
+          name: party.name,
+          description: party.description,
+          public: party.public,
+          owner: user._id
+        });
       });
 
       it('should call reset()', () => {
-- 
2.7.4


From 34865613f1247bd9a1b54b3df1cc3e2775a69a36 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 15:45:37 +0200
Subject: [PATCH 108/375] Step 9.16: Update tests of PartyDetails

---
 imports/ui/components/partyDetails/client/partyDetails.tests.js | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/imports/ui/components/partyDetails/client/partyDetails.tests.js b/imports/ui/components/partyDetails/client/partyDetails.tests.js
index 997304e..0f3aa3b 100644
--- a/imports/ui/components/partyDetails/client/partyDetails.tests.js
+++ b/imports/ui/components/partyDetails/client/partyDetails.tests.js
@@ -12,7 +12,8 @@ describe('PartyDetails', () => {
     const party = {
       _id: 'partyId',
       name: 'Foo',
-      description: 'Birthday of Foo'
+      description: 'Birthday of Foo',
+      public: true
     };
 
     beforeEach(() => {
@@ -40,7 +41,8 @@ describe('PartyDetails', () => {
         expect(Parties.update.calls.mostRecent().args[1]).toEqual({
           $set: {
             name: party.name,
-            description: party.description
+            description: party.description,
+            public: party.public
           }
         });
       });
-- 
2.7.4


From 7226ae4ba8a242ace589e790fc628ea830d9da67 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:29:01 +0200
Subject: [PATCH 109/375] Step 11.1: Update the module initialization

---
 client/main.js | 17 ++++++++++++++++-
 1 file changed, 16 insertions(+), 1 deletion(-)

diff --git a/client/main.js b/client/main.js
index 212f992..06731e1 100644
--- a/client/main.js
+++ b/client/main.js
@@ -1,4 +1,19 @@
 import angular from 'angular';
-import angularMeteor from 'angular-meteor';
+
+import { Meteor } from 'meteor/meteor';
 
 import { name as Socially } from '../imports/ui/components/socially/socially';
+
+function onReady() {
+  angular.bootstrap(document, [
+    Socially
+  ], {
+    strictDi: true
+  });
+}
+
+if (Meteor.isCordova) {
+  angular.element(document).on('deviceready', onReady);
+} else {
+  angular.element(document).ready(onReady);
+}
-- 
2.7.4


From dab953a2d64105f06c2f7eb644d72ae98c2b5537 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:29:45 +0200
Subject: [PATCH 110/375] Step 11.2: Remove the ngApp and ngStrictDi

---
 client/index.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/client/index.html b/client/index.html
index 806f6ab..0a26426 100644
--- a/client/index.html
+++ b/client/index.html
@@ -1,6 +1,6 @@
 <head>
   <base href="/">
 </head>
-<body ng-app="socially" ng-strict-di="">
+<body>
   <socially></socially>
 </body>
-- 
2.7.4


From 897c97b6a4344a1ef773d52572eac5813f6a9eb6 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:32:51 +0200
Subject: [PATCH 111/375] Step 12.1: Add options to the parties publish

---
 imports/api/parties/publish.js | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/imports/api/parties/publish.js b/imports/api/parties/publish.js
index 590f23b..65b8f38 100644
--- a/imports/api/parties/publish.js
+++ b/imports/api/parties/publish.js
@@ -3,7 +3,7 @@ import { Meteor } from 'meteor/meteor';
 import { Parties } from './collection';
 
 if (Meteor.isServer) {
-  Meteor.publish('parties', function() {
+  Meteor.publish('parties', function(options) {
     const selector = {
       $or: [{
         // the public parties
@@ -26,6 +26,6 @@ if (Meteor.isServer) {
       }]
     };
 
-    return Parties.find(selector);
+    return Parties.find(selector, options);
   });
 }
-- 
2.7.4


From 6144ecd19f533c76f4cbe406e92b9c31b5f05eff Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:33:40 +0200
Subject: [PATCH 112/375] Step 12.2: Add the pagination default params

---
 imports/ui/components/partiesList/partiesList.js | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/imports/ui/components/partiesList/partiesList.js b/imports/ui/components/partiesList/partiesList.js
index 9f51859..a7a24ef 100644
--- a/imports/ui/components/partiesList/partiesList.js
+++ b/imports/ui/components/partiesList/partiesList.js
@@ -13,6 +13,12 @@ class PartiesList {
 
     $reactive(this).attach($scope);
 
+    this.perPage = 3;
+    this.page = 1;
+    this.sort = {
+      name: 1
+    };
+
     this.subscribe('parties');
 
     this.helpers({
-- 
2.7.4


From 4012e7ea5c0dd908cdad7789fc0c2ad19b5b3014 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:35:13 +0200
Subject: [PATCH 113/375] Step 12.3: Add the params to the subscription

---
 imports/ui/components/partiesList/partiesList.js | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partiesList/partiesList.js b/imports/ui/components/partiesList/partiesList.js
index a7a24ef..f7c9a84 100644
--- a/imports/ui/components/partiesList/partiesList.js
+++ b/imports/ui/components/partiesList/partiesList.js
@@ -19,7 +19,11 @@ class PartiesList {
       name: 1
     };
 
-    this.subscribe('parties');
+    this.subscribe('parties', () => [{
+      limit: parseInt(this.perPage),
+      skip: parseInt((this.getReactively('page') - 1) * this.perPage),
+      sort: this.getReactively('sort')}
+    ]);
 
     this.helpers({
       parties() {
-- 
2.7.4


From aa22cf6fc337915835d1d758295f23cb18eff1db Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:36:07 +0200
Subject: [PATCH 114/375] Step 12.4: Add the sort parameter to the collection
 helper

---
 imports/ui/components/partiesList/partiesList.js | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partiesList/partiesList.js b/imports/ui/components/partiesList/partiesList.js
index f7c9a84..8902025 100644
--- a/imports/ui/components/partiesList/partiesList.js
+++ b/imports/ui/components/partiesList/partiesList.js
@@ -27,7 +27,9 @@ class PartiesList {
 
     this.helpers({
       parties() {
-        return Parties.find({});
+        return Parties.find({}, {
+          sort : this.getReactively('sort')
+        });
       }
     });
   }
-- 
2.7.4


From 5cd857d72e64347e8a10c9cc8be8fea22b1a88cb Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:37:39 +0200
Subject: [PATCH 115/375] Step 12.5: Install `angular-utils-pagination`

---
 package.json | 1 +
 1 file changed, 1 insertion(+)

diff --git a/package.json b/package.json
index a9636f0..227b0f3 100644
--- a/package.json
+++ b/package.json
@@ -9,6 +9,7 @@
     "angular": "^1.5.3",
     "angular-meteor": "^1.3.9",
     "angular-ui-router": "^1.0.0-alpha.4",
+    "angular-utils-pagination": "^0.11.1",
     "meteor-node-stubs": "~0.2.0"
   },
   "devDependencies": {
-- 
2.7.4


From 455c2b377ac7e9457c34c0fde43d9b9c6dc896b3 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:38:35 +0200
Subject: [PATCH 116/375] Step 12.6: Add new dependency

---
 imports/ui/components/partiesList/partiesList.js | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/imports/ui/components/partiesList/partiesList.js b/imports/ui/components/partiesList/partiesList.js
index 8902025..cc5358a 100644
--- a/imports/ui/components/partiesList/partiesList.js
+++ b/imports/ui/components/partiesList/partiesList.js
@@ -1,6 +1,7 @@
 import angular from 'angular';
 import angularMeteor from 'angular-meteor';
 import uiRouter from 'angular-ui-router';
+import utilsPagination from 'angular-utils-pagination';
 
 import './partiesList.html';
 import { Parties } from '../../../api/parties';
@@ -41,6 +42,7 @@ const name = 'partiesList';
 export default angular.module(name, [
   angularMeteor,
   uiRouter,
+  utilsPagination,
   PartyAdd,
   PartyRemove
 ]).component(name, {
-- 
2.7.4


From dea3327a92091fccfba8c6ed2d8b1a04cd33e41a Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:39:32 +0200
Subject: [PATCH 117/375] Step 12.7: Add usage to the dir-pagination directive

---
 imports/ui/components/partiesList/partiesList.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/imports/ui/components/partiesList/partiesList.html b/imports/ui/components/partiesList/partiesList.html
index c1b07e2..71b36ae 100644
--- a/imports/ui/components/partiesList/partiesList.html
+++ b/imports/ui/components/partiesList/partiesList.html
@@ -1,7 +1,7 @@
 <party-add></party-add>
 
 <ul>
-  <li ng-repeat="party in partiesList.parties">
+  <li dir-paginate="party in partiesList.parties | itemsPerPage: partiesList.perPage" total-items="partiesList.partiesCount">
     <a ui-sref="partyDetails({ partyId: party._id })">
       {{party.name}}
     </a>
-- 
2.7.4


From 20c8c9e82de0a51f3e76842f946718bbdb6cf719 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:39:54 +0200
Subject: [PATCH 118/375] Step 12.8: Add the pagination controls to the view

---
 imports/ui/components/partiesList/partiesList.html | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/imports/ui/components/partiesList/partiesList.html b/imports/ui/components/partiesList/partiesList.html
index 71b36ae..d4206d6 100644
--- a/imports/ui/components/partiesList/partiesList.html
+++ b/imports/ui/components/partiesList/partiesList.html
@@ -9,3 +9,5 @@
     <party-remove party="party"></party-remove>
   </li>
 </ul>
+
+<dir-pagination-controls on-page-change="partiesList.pageChanged(newPageNumber)"></dir-pagination-controls>
-- 
2.7.4


From 29c462c7b884c1cac596e3416df7d3357b92fc19 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:40:29 +0200
Subject: [PATCH 119/375] Step 12.9: Add the pageChanged method to the
 component

---
 imports/ui/components/partiesList/partiesList.js | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/imports/ui/components/partiesList/partiesList.js b/imports/ui/components/partiesList/partiesList.js
index cc5358a..588727e 100644
--- a/imports/ui/components/partiesList/partiesList.js
+++ b/imports/ui/components/partiesList/partiesList.js
@@ -34,6 +34,10 @@ class PartiesList {
       }
     });
   }
+
+  pageChanged(newPage) {
+    this.page = newPage;
+  }
 }
 
 const name = 'partiesList';
-- 
2.7.4


From cc5968285d9eeeb3d0e6df7c7519ef722ace1873 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:41:20 +0200
Subject: [PATCH 120/375] Step 12.10: Add `tmeasday:publish-counts`

---
 .meteor/packages | 1 +
 .meteor/versions | 1 +
 2 files changed, 2 insertions(+)

diff --git a/.meteor/packages b/.meteor/packages
index 110dde9..2525c04 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -24,3 +24,4 @@ accounts-password
 dotansimha:accounts-ui-angular
 accounts-facebook
 accounts-twitter
+tmeasday:publish-counts
diff --git a/.meteor/versions b/.meteor/versions
index 9607f4c..7995fa7 100644
--- a/.meteor/versions
+++ b/.meteor/versions
@@ -89,6 +89,7 @@ standard-minifier-js@1.0.6
 templating@1.1.7
 templating-tools@1.0.2
 tmeasday:check-npm-versions@0.1.1
+tmeasday:publish-counts@0.7.3
 tracker@1.0.13
 twitter@1.1.7
 ui@1.0.11
-- 
2.7.4


From f3821ed0fd0e694d1f6257e00887ae12620d122c Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:42:27 +0200
Subject: [PATCH 121/375] Step 12.11: Add usage of Counts

---
 imports/api/parties/publish.js | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/imports/api/parties/publish.js b/imports/api/parties/publish.js
index 65b8f38..4932df2 100644
--- a/imports/api/parties/publish.js
+++ b/imports/api/parties/publish.js
@@ -1,4 +1,5 @@
 import { Meteor } from 'meteor/meteor';
+import { Counts } from 'meteor/tmeasday:publish-counts';
 
 import { Parties } from './collection';
 
@@ -26,6 +27,10 @@ if (Meteor.isServer) {
       }]
     };
 
+    Counts.publish(this, 'numberOfParties', Parties.find(selector), {
+      noReady: true
+    });
+
     return Parties.find(selector, options);
   });
 }
-- 
2.7.4


From 39a5bd0e0b699bd832dc5428b052d629b6ccc647 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:44:44 +0200
Subject: [PATCH 122/375] Step 12.12: Add the Count usage in the component

---
 imports/ui/components/partiesList/partiesList.js | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/imports/ui/components/partiesList/partiesList.js b/imports/ui/components/partiesList/partiesList.js
index 588727e..f0e20e8 100644
--- a/imports/ui/components/partiesList/partiesList.js
+++ b/imports/ui/components/partiesList/partiesList.js
@@ -3,6 +3,8 @@ import angularMeteor from 'angular-meteor';
 import uiRouter from 'angular-ui-router';
 import utilsPagination from 'angular-utils-pagination';
 
+import { Counts } from 'meteor/tmeasday:publish-counts';
+
 import './partiesList.html';
 import { Parties } from '../../../api/parties';
 import { name as PartyAdd } from '../partyAdd/partyAdd';
@@ -31,6 +33,9 @@ class PartiesList {
         return Parties.find({}, {
           sort : this.getReactively('sort')
         });
+      },
+      partiesCount() {
+        return Counts.get('numberOfParties');
       }
     });
   }
-- 
2.7.4


From 4eda9d990599b78dcd1310d2b37b25f5c868ae84 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:47:04 +0200
Subject: [PATCH 123/375] Step 12.13: Create view for PartiesSort component

---
 imports/ui/components/partiesSort/partiesSort.html | 6 ++++++
 1 file changed, 6 insertions(+)
 create mode 100644 imports/ui/components/partiesSort/partiesSort.html

diff --git a/imports/ui/components/partiesSort/partiesSort.html b/imports/ui/components/partiesSort/partiesSort.html
new file mode 100644
index 0000000..cf2102b
--- /dev/null
+++ b/imports/ui/components/partiesSort/partiesSort.html
@@ -0,0 +1,6 @@
+<div>
+  <select ng-model="partiesSort.order" ng-change="partiesSort.changed()">
+    <option value="1">Ascending</option>
+    <option value="-1">Descending</option>
+  </select>
+</div>
-- 
2.7.4


From f0beb09eda0071e5b460db1c1dff851a55df12ed Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:48:25 +0200
Subject: [PATCH 124/375] Step 12.14: Create PartiesSort component

---
 imports/ui/components/partiesSort/partiesSort.js | 34 ++++++++++++++++++++++++
 1 file changed, 34 insertions(+)
 create mode 100644 imports/ui/components/partiesSort/partiesSort.js

diff --git a/imports/ui/components/partiesSort/partiesSort.js b/imports/ui/components/partiesSort/partiesSort.js
new file mode 100644
index 0000000..f18b84d
--- /dev/null
+++ b/imports/ui/components/partiesSort/partiesSort.js
@@ -0,0 +1,34 @@
+import angular from 'angular';
+import angularMeteor from 'angular-meteor';
+
+import './partiesSort.html';
+
+class PartiesSort {
+  constructor() {
+    this.changed();
+  }
+
+  changed() {
+    this.onChange({
+      sort: {
+        [this.property]: parseInt(this.order)
+      }
+    });
+  }
+}
+
+const name = 'partiesSort';
+
+// create a module
+export default angular.module(name, [
+  angularMeteor
+]).component(name, {
+  templateUrl: `imports/ui/components/${name}/${name}.html`,
+  bindings: {
+    onChange: '&',
+    property: '@',
+    order: '@'
+  },
+  controllerAs: name,
+  controller: PartiesSort
+});
-- 
2.7.4


From 5e63e0fca0da35143a72704f19f815dee2e4f5f9 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:49:26 +0200
Subject: [PATCH 125/375] Step 12.15: Add as a dependency

---
 imports/ui/components/partiesList/partiesList.js | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/imports/ui/components/partiesList/partiesList.js b/imports/ui/components/partiesList/partiesList.js
index f0e20e8..9d9f1bf 100644
--- a/imports/ui/components/partiesList/partiesList.js
+++ b/imports/ui/components/partiesList/partiesList.js
@@ -7,6 +7,7 @@ import { Counts } from 'meteor/tmeasday:publish-counts';
 
 import './partiesList.html';
 import { Parties } from '../../../api/parties';
+import { name as PartiesSort } from '../partiesSort/partiesSort';
 import { name as PartyAdd } from '../partyAdd/partyAdd';
 import { name as PartyRemove } from '../partyRemove/partyRemove';
 
@@ -52,6 +53,7 @@ export default angular.module(name, [
   angularMeteor,
   uiRouter,
   utilsPagination,
+  PartiesSort,
   PartyAdd,
   PartyRemove
 ]).component(name, {
-- 
2.7.4


From 7c777ade805e40d566bf7fecb2919699dc60d05c Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:50:20 +0200
Subject: [PATCH 126/375] Step 12.16: Implement component

---
 imports/ui/components/partiesList/partiesList.html | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/imports/ui/components/partiesList/partiesList.html b/imports/ui/components/partiesList/partiesList.html
index d4206d6..0fe847e 100644
--- a/imports/ui/components/partiesList/partiesList.html
+++ b/imports/ui/components/partiesList/partiesList.html
@@ -1,5 +1,7 @@
 <party-add></party-add>
 
+<parties-sort on-change="partiesList.sortChanged(sort)" property="name" order="1"></parties-sort>
+
 <ul>
   <li dir-paginate="party in partiesList.parties | itemsPerPage: partiesList.perPage" total-items="partiesList.partiesCount">
     <a ui-sref="partyDetails({ partyId: party._id })">
-- 
2.7.4


From a92c32e04e0f8e48f404c6794da87ff858e2c8d2 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 12:51:09 +0200
Subject: [PATCH 127/375] Step 12.17: Handle sort changes

---
 imports/ui/components/partiesList/partiesList.js | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/imports/ui/components/partiesList/partiesList.js b/imports/ui/components/partiesList/partiesList.js
index 9d9f1bf..b222c3a 100644
--- a/imports/ui/components/partiesList/partiesList.js
+++ b/imports/ui/components/partiesList/partiesList.js
@@ -44,6 +44,10 @@ class PartiesList {
   pageChanged(newPage) {
     this.page = newPage;
   }
+
+  sortChanged(sort) {
+    this.sort = sort;
+  }
 }
 
 const name = 'partiesList';
-- 
2.7.4


From b22ea87bcef55fb7ef20e98ec23c108885e5fd4b Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 16:12:35 +0200
Subject: [PATCH 128/375] Step 12.18: Add searchString to `parties` publication

---
 imports/api/parties/publish.js | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

diff --git a/imports/api/parties/publish.js b/imports/api/parties/publish.js
index 4932df2..67c9bdb 100644
--- a/imports/api/parties/publish.js
+++ b/imports/api/parties/publish.js
@@ -4,7 +4,7 @@ import { Counts } from 'meteor/tmeasday:publish-counts';
 import { Parties } from './collection';
 
 if (Meteor.isServer) {
-  Meteor.publish('parties', function(options) {
+  Meteor.publish('parties', function(options, searchString) {
     const selector = {
       $or: [{
         // the public parties
@@ -27,6 +27,13 @@ if (Meteor.isServer) {
       }]
     };
 
+    if (typeof searchString === 'string' && searchString.length) {
+      selector.name = {
+        $regex: `.*${searchString}.*`,
+        $options : 'i'
+      };
+    }
+
     Counts.publish(this, 'numberOfParties', Parties.find(selector), {
       noReady: true
     });
-- 
2.7.4


From 176db530dac67b41161baa3f7f89b192fa4c1542 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 16:15:46 +0200
Subject: [PATCH 129/375] Step 12.19: Add searchText to subscription

---
 imports/ui/components/partiesList/partiesList.js | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

diff --git a/imports/ui/components/partiesList/partiesList.js b/imports/ui/components/partiesList/partiesList.js
index b222c3a..ee2dc70 100644
--- a/imports/ui/components/partiesList/partiesList.js
+++ b/imports/ui/components/partiesList/partiesList.js
@@ -22,11 +22,13 @@ class PartiesList {
     this.sort = {
       name: 1
     };
+    this.searchText = '';
 
     this.subscribe('parties', () => [{
-      limit: parseInt(this.perPage),
-      skip: parseInt((this.getReactively('page') - 1) * this.perPage),
-      sort: this.getReactively('sort')}
+        limit: parseInt(this.perPage),
+        skip: parseInt((this.getReactively('page') - 1) * this.perPage),
+        sort: this.getReactively('sort')
+      }, this.getReactively('searchText')
     ]);
 
     this.helpers({
-- 
2.7.4


From 2483030797e3fbfa0f31aa11a8d27279d75aaec0 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 16:16:30 +0200
Subject: [PATCH 130/375] Step 12.20: Add input with searchText as ngModel

---
 imports/ui/components/partiesList/partiesList.html | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/imports/ui/components/partiesList/partiesList.html b/imports/ui/components/partiesList/partiesList.html
index 0fe847e..3c411fe 100644
--- a/imports/ui/components/partiesList/partiesList.html
+++ b/imports/ui/components/partiesList/partiesList.html
@@ -1,5 +1,7 @@
 <party-add></party-add>
 
+<input type="search" ng-model="partiesList.searchText" placeholder="Search" />
+
 <parties-sort on-change="partiesList.sortChanged(sort)" property="name" order="1"></parties-sort>
 
 <ul>
-- 
2.7.4


From 5dad31b9337f3b2f0f583156c1a616ff7a5effb6 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 15:59:07 +0200
Subject: [PATCH 131/375] Step 12.21: Tests of PartiesSort

---
 .../partiesSort/client/partiesSort.tests.js        | 54 ++++++++++++++++++++++
 1 file changed, 54 insertions(+)
 create mode 100644 imports/ui/components/partiesSort/client/partiesSort.tests.js

diff --git a/imports/ui/components/partiesSort/client/partiesSort.tests.js b/imports/ui/components/partiesSort/client/partiesSort.tests.js
new file mode 100644
index 0000000..09d81b4
--- /dev/null
+++ b/imports/ui/components/partiesSort/client/partiesSort.tests.js
@@ -0,0 +1,54 @@
+import { name as PartiesSort } from '../partiesSort';
+import 'angular-mocks';
+
+describe('PartiesSort', () => {
+  beforeEach(() => {
+    window.module(PartiesSort);
+  });
+
+  describe('controller', () => {
+    let controller;
+    const onChange = function() {};
+    const property = 'name';
+    const order = -1;
+
+
+    beforeEach(() => {
+      inject(($rootScope, $componentController) => {
+        controller = $componentController(PartiesSort, {
+          $scope: $rootScope.$new(true)
+        }, {
+          onChange,
+          property,
+          order
+        });
+      });
+    });
+
+    it('should set property', () => {
+      expect(controller.property).toEqual(property);
+    });
+
+    it('should set order', () => {
+      expect(controller.order).toEqual(order);
+    });
+
+    it('should set onChange', () => {
+      expect(controller.onChange).toBe(onChange);
+    });
+
+    describe('changed()', () => {
+      it('should call onChange expression', () => {
+        spyOn(controller, 'onChange');
+
+        controller.changed();
+
+        expect(controller.onChange).toHaveBeenCalledWith({
+          sort: {
+            [property]: order
+          }
+        });
+      });
+    });
+  });
+});
-- 
2.7.4


From f5813f1eab3e8849780d6fa1d69a8aa277a10a06 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 16:07:14 +0200
Subject: [PATCH 132/375] Step 12.22: Tests of PartiesList

---
 .../partiesList/client/partiesList.tests.js        | 50 ++++++++++++++++++++++
 1 file changed, 50 insertions(+)
 create mode 100644 imports/ui/components/partiesList/client/partiesList.tests.js

diff --git a/imports/ui/components/partiesList/client/partiesList.tests.js b/imports/ui/components/partiesList/client/partiesList.tests.js
new file mode 100644
index 0000000..176da85
--- /dev/null
+++ b/imports/ui/components/partiesList/client/partiesList.tests.js
@@ -0,0 +1,50 @@
+import { name as PartiesList } from '../partiesList';
+import 'angular-mocks';
+
+describe('PartiesList', () => {
+  beforeEach(() => {
+    window.module(PartiesList);
+  });
+
+  describe('controller', () => {
+    let controller;
+
+    beforeEach(() => {
+      inject(($rootScope, $componentController) => {
+        controller = $componentController(PartiesList, {
+          $scope: $rootScope.$new(true)
+        });
+      });
+    });
+
+    it('should have perPage that equals 3 by default', () => {
+      expect(controller.perPage).toEqual(3);
+    });
+
+    it('should have page that equals 1 by default', () => {
+      expect(controller.page).toEqual(1);
+    });
+
+    it('should sort by name - ASC', () => {
+      expect(controller.sort).toEqual({
+        name: 1
+      });
+    });
+
+    it('should be able to change sorting', () => {
+      controller.sortChanged({
+        name: -1
+      });
+
+      expect(controller.sort).toEqual({
+        name: -1
+      });
+    });
+
+    it('should be able to change page', () => {
+      controller.pageChanged(2);
+
+      expect(controller.page).toEqual(2);
+    });
+  });
+});
-- 
2.7.4


From 4535e8f1e666d2d0b5ef314a376773e9c571742c Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 16:23:07 +0200
Subject: [PATCH 133/375] Step 13.1: Create UninvitedFilter

---
 imports/ui/filters/uninvitedFilter.js | 20 ++++++++++++++++++++
 1 file changed, 20 insertions(+)
 create mode 100644 imports/ui/filters/uninvitedFilter.js

diff --git a/imports/ui/filters/uninvitedFilter.js b/imports/ui/filters/uninvitedFilter.js
new file mode 100644
index 0000000..77528fc
--- /dev/null
+++ b/imports/ui/filters/uninvitedFilter.js
@@ -0,0 +1,20 @@
+import angular from 'angular';
+
+const name = 'uninvitedFilter';
+
+function UninvitedFilter(users, party) {
+  if (!party) {
+    return false;
+  }
+
+  return users.filter((user) => {
+    // if not the owner and not invited
+    return user._id !== party.owner && (party.invited || []).indexOf(user._id) === -1;
+  });
+}
+
+// create a module
+export default angular.module(name, [])
+  .filter(name, () => {
+    return UninvitedFilter;
+  });
-- 
2.7.4


From a6daa0d945527a34bf4e5dc2c33ade9414e7f1ee Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 16:24:04 +0200
Subject: [PATCH 134/375] Step 13.2: Install `underscore`

---
 package.json | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/package.json b/package.json
index 227b0f3..6d220f0 100644
--- a/package.json
+++ b/package.json
@@ -10,7 +10,8 @@
     "angular-meteor": "^1.3.9",
     "angular-ui-router": "^1.0.0-alpha.4",
     "angular-utils-pagination": "^0.11.1",
-    "meteor-node-stubs": "~0.2.0"
+    "meteor-node-stubs": "~0.2.0",
+    "underscore": "^1.8.3"
   },
   "devDependencies": {
     "angular-mocks": "^1.5.3"
-- 
2.7.4


From ed60f469e1bb4305efb7054e30033ed7980afaf0 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 16:24:21 +0200
Subject: [PATCH 135/375] Step 13.3: Use underscore

---
 imports/ui/filters/uninvitedFilter.js | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/imports/ui/filters/uninvitedFilter.js b/imports/ui/filters/uninvitedFilter.js
index 77528fc..cfe8d2d 100644
--- a/imports/ui/filters/uninvitedFilter.js
+++ b/imports/ui/filters/uninvitedFilter.js
@@ -1,4 +1,5 @@
 import angular from 'angular';
+import _ from 'underscore';
 
 const name = 'uninvitedFilter';
 
@@ -9,7 +10,7 @@ function UninvitedFilter(users, party) {
 
   return users.filter((user) => {
     // if not the owner and not invited
-    return user._id !== party.owner && (party.invited || []).indexOf(user._id) === -1;
+    return user._id !== party.owner && !_.contains(party.invited, user._id);
   });
 }
 
-- 
2.7.4


From c4cb20d62705f4ecac8c3e55b3e6bb1ca4f9f664 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 16:26:20 +0200
Subject: [PATCH 136/375] Step 13.4: Move list of users to separate component

---
 imports/ui/components/partyUninvited/partyUninvited.html | 6 ++++++
 1 file changed, 6 insertions(+)
 create mode 100644 imports/ui/components/partyUninvited/partyUninvited.html

diff --git a/imports/ui/components/partyUninvited/partyUninvited.html b/imports/ui/components/partyUninvited/partyUninvited.html
new file mode 100644
index 0000000..ac0bbc7
--- /dev/null
+++ b/imports/ui/components/partyUninvited/partyUninvited.html
@@ -0,0 +1,6 @@
+<ul>
+  Users:
+  <li ng-repeat="user in partyUninvited.users">
+    <div>{{ user.emails[0].address }}</div>
+  </li>
+</ul>
-- 
2.7.4


From fc51ef7ec6be774e328486234dd6b181832f5683 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 16:30:02 +0200
Subject: [PATCH 137/375] Step 13.5: Create PartyUninvited component

---
 .../ui/components/partyUninvited/partyUninvited.js | 34 ++++++++++++++++++++++
 1 file changed, 34 insertions(+)
 create mode 100644 imports/ui/components/partyUninvited/partyUninvited.js

diff --git a/imports/ui/components/partyUninvited/partyUninvited.js b/imports/ui/components/partyUninvited/partyUninvited.js
new file mode 100644
index 0000000..36c99df
--- /dev/null
+++ b/imports/ui/components/partyUninvited/partyUninvited.js
@@ -0,0 +1,34 @@
+import angular from 'angular';
+import angularMeteor from 'angular-meteor';
+
+import { Meteor } from 'meteor/meteor';
+
+import './partyUninvited.html';
+
+class PartyUninvited {
+  constructor($scope) {
+    'ngInject';
+
+    $scope.viewModel(this);
+
+    this.helpers({
+      users() {
+        return Meteor.users.find({});
+      }
+    });
+  }
+}
+
+const name = 'partyUninvited';
+
+// create a module
+export default angular.module(name, [
+  angularMeteor
+]).component(name, {
+  templateUrl: `imports/ui/components/${name}/${name}.html`,
+  controllerAs: name,
+  bindings: {
+    party: '<'
+  },
+  controller: PartyUninvited
+});
-- 
2.7.4


From cc94b76e87eea6a53b04abafc185c911a78bda4b Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 16:30:46 +0200
Subject: [PATCH 138/375] Step 13.6: Add UninvitedFilter

---
 imports/ui/components/partyUninvited/partyUninvited.js | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partyUninvited/partyUninvited.js b/imports/ui/components/partyUninvited/partyUninvited.js
index 36c99df..caba948 100644
--- a/imports/ui/components/partyUninvited/partyUninvited.js
+++ b/imports/ui/components/partyUninvited/partyUninvited.js
@@ -4,6 +4,7 @@ import angularMeteor from 'angular-meteor';
 import { Meteor } from 'meteor/meteor';
 
 import './partyUninvited.html';
+import { name as UninvitedFilter } from '../../filters/uninvitedFilter';
 
 class PartyUninvited {
   constructor($scope) {
@@ -23,7 +24,8 @@ const name = 'partyUninvited';
 
 // create a module
 export default angular.module(name, [
-  angularMeteor
+  angularMeteor,
+  UninvitedFilter
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
   controllerAs: name,
-- 
2.7.4


From e68dcbb33547ace7ade9011f558a96d6f910edb5 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 16:31:26 +0200
Subject: [PATCH 139/375] Step 13.7: Implement filter

---
 imports/ui/components/partyUninvited/partyUninvited.html | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/imports/ui/components/partyUninvited/partyUninvited.html b/imports/ui/components/partyUninvited/partyUninvited.html
index ac0bbc7..c1ccda5 100644
--- a/imports/ui/components/partyUninvited/partyUninvited.html
+++ b/imports/ui/components/partyUninvited/partyUninvited.html
@@ -1,6 +1,6 @@
 <ul>
-  Users:
-  <li ng-repeat="user in partyUninvited.users">
+  Users to invite:
+  <li ng-repeat="user in partyUninvited.users | uninvitedFilter:partyUninvited.party">
     <div>{{ user.emails[0].address }}</div>
   </li>
 </ul>
-- 
2.7.4


From 532552e96e837bfcf7cc8c00910c1512cf3ed3a8 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 16:32:22 +0200
Subject: [PATCH 140/375] Step 13.8: Implement component in PartyDetails view

---
 imports/ui/components/partyDetails/partyDetails.html | 7 +------
 1 file changed, 1 insertion(+), 6 deletions(-)

diff --git a/imports/ui/components/partyDetails/partyDetails.html b/imports/ui/components/partyDetails/partyDetails.html
index 99de077..916f23e 100644
--- a/imports/ui/components/partyDetails/partyDetails.html
+++ b/imports/ui/components/partyDetails/partyDetails.html
@@ -8,9 +8,4 @@ The party your selected is:
 
 <button ui-sref="parties">Back</button>
 
-<ul>
-  Users:
-  <li ng-repeat="user in partyDetails.users">
-    <div>{{ user.emails[0].address }}</div>
-  </li>
-</ul>
+<party-uninvited party="partyDetails.party"></party-uninvited>
-- 
2.7.4


From 70b4b2d47ab707296c1868b264b825f9447772d5 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 16:33:20 +0200
Subject: [PATCH 141/375] Step 13.9: Add to dependencies

---
 imports/ui/components/partyDetails/partyDetails.js | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partyDetails/partyDetails.js b/imports/ui/components/partyDetails/partyDetails.js
index bbaa7d7..21bf1a3 100644
--- a/imports/ui/components/partyDetails/partyDetails.js
+++ b/imports/ui/components/partyDetails/partyDetails.js
@@ -6,6 +6,7 @@ import { Meteor } from 'meteor/meteor';
 
 import './partyDetails.html';
 import { Parties } from '../../../api/parties';
+import { name as PartyUninvited } from '../partyUninvited/partyUninvited';
 
 class PartyDetails {
   constructor($stateParams, $scope, $reactive) {
@@ -54,7 +55,8 @@ const name = 'partyDetails';
 // create a module
 export default angular.module(name, [
   angularMeteor,
-  uiRouter
+  uiRouter,
+  PartyUninvited
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
   controllerAs: name,
-- 
2.7.4


From 7ac25689afaffd97ef95873926f5fc8b17ad4186 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 16:40:30 +0200
Subject: [PATCH 142/375] Step 13.10: Create DisplayNameFilter

---
 imports/ui/filters/displayNameFilter.js | 25 +++++++++++++++++++++++++
 1 file changed, 25 insertions(+)
 create mode 100644 imports/ui/filters/displayNameFilter.js

diff --git a/imports/ui/filters/displayNameFilter.js b/imports/ui/filters/displayNameFilter.js
new file mode 100644
index 0000000..57d9250
--- /dev/null
+++ b/imports/ui/filters/displayNameFilter.js
@@ -0,0 +1,25 @@
+import angular from 'angular';
+
+const name = 'displayNameFilter';
+
+function DisplayNameFilter(user) {
+  if (!user) {
+    return '';
+  }
+
+  if (user.profile && user.profile.name) {
+    return user.profile.name;
+  }
+
+  if (user.emails) {
+    return user.emails[0].address;
+  }
+
+  return user;
+}
+
+// create a module
+export default angular.module(name, [])
+  .filter(name, () => {
+    return DisplayNameFilter;
+  });
-- 
2.7.4


From 3b171041174de7a139764e9dd415faef8d74c46e Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 16:41:15 +0200
Subject: [PATCH 143/375] Step 13.11: Add as a dependency

---
 imports/ui/components/partyUninvited/partyUninvited.js | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partyUninvited/partyUninvited.js b/imports/ui/components/partyUninvited/partyUninvited.js
index caba948..4ec5ade 100644
--- a/imports/ui/components/partyUninvited/partyUninvited.js
+++ b/imports/ui/components/partyUninvited/partyUninvited.js
@@ -5,6 +5,7 @@ import { Meteor } from 'meteor/meteor';
 
 import './partyUninvited.html';
 import { name as UninvitedFilter } from '../../filters/uninvitedFilter';
+import { name as DisplayNameFilter } from '../../filters/displayNameFilter';
 
 class PartyUninvited {
   constructor($scope) {
@@ -25,7 +26,8 @@ const name = 'partyUninvited';
 // create a module
 export default angular.module(name, [
   angularMeteor,
-  UninvitedFilter
+  UninvitedFilter,
+  DisplayNameFilter
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
   controllerAs: name,
-- 
2.7.4


From d167591e6e20ff6f5a8fe468b4f9777a4241b104 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 16:41:54 +0200
Subject: [PATCH 144/375] Step 13.12: Use filter

---
 imports/ui/components/partyUninvited/partyUninvited.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/imports/ui/components/partyUninvited/partyUninvited.html b/imports/ui/components/partyUninvited/partyUninvited.html
index c1ccda5..9603f3a 100644
--- a/imports/ui/components/partyUninvited/partyUninvited.html
+++ b/imports/ui/components/partyUninvited/partyUninvited.html
@@ -1,6 +1,6 @@
 <ul>
   Users to invite:
   <li ng-repeat="user in partyUninvited.users | uninvitedFilter:partyUninvited.party">
-    <div>{{ user.emails[0].address }}</div>
+    <div>{{ user | displayNameFilter }}</div>
   </li>
 </ul>
-- 
2.7.4


From 7c097b6ae92400269c8051895fb98911684c9383 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 16:45:34 +0200
Subject: [PATCH 145/375] Step 13.13: Create template for PartyCreator
 component

---
 imports/ui/components/partyCreator/partyCreator.html | 5 +++++
 1 file changed, 5 insertions(+)
 create mode 100644 imports/ui/components/partyCreator/partyCreator.html

diff --git a/imports/ui/components/partyCreator/partyCreator.html b/imports/ui/components/partyCreator/partyCreator.html
new file mode 100644
index 0000000..de986fb
--- /dev/null
+++ b/imports/ui/components/partyCreator/partyCreator.html
@@ -0,0 +1,5 @@
+<p>
+  <small>
+    Posted by {{ partyCreator.creator | displayNameFilter }}
+  </small>
+</p>
-- 
2.7.4


From 0c7da8f2d8d3a1f678ac1eabcef9ae199a131e17 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 16:45:54 +0200
Subject: [PATCH 146/375] Step 13.14: Create PartyCreator component

---
 imports/ui/components/partyCreator/partyCreator.js | 49 ++++++++++++++++++++++
 1 file changed, 49 insertions(+)
 create mode 100644 imports/ui/components/partyCreator/partyCreator.js

diff --git a/imports/ui/components/partyCreator/partyCreator.js b/imports/ui/components/partyCreator/partyCreator.js
new file mode 100644
index 0000000..4f764b0
--- /dev/null
+++ b/imports/ui/components/partyCreator/partyCreator.js
@@ -0,0 +1,49 @@
+import angular from 'angular';
+import angularMeteor from 'angular-meteor';
+
+import { Meteor } from 'meteor/meteor';
+
+import './partyCreator.html';
+import { name as DisplayNameFilter } from '../../filters/displayNameFilter';
+
+/**
+ * PartyCreator component
+ */
+class PartyCreator {
+  constructor($scope) {
+    'ngInject';
+
+    $scope.viewModel(this);
+
+    this.helpers({
+      creator() {
+        if (!this.party) {
+          return '';
+        }
+
+        const owner = this.party.owner;
+
+        if (Meteor.userId() !== null && owner === Meteor.userId()) {
+          return 'me';
+        }
+
+        return Meteor.users.findOne(owner) || 'nobody';
+      }
+    });
+  }
+}
+
+const name = 'partyCreator';
+
+// create a module
+export default angular.module(name, [
+  angularMeteor,
+  DisplayNameFilter
+]).component(name, {
+  templateUrl: `imports/ui/components/${name}/${name}.html`,
+  controllerAs: name,
+  bindings: {
+    party: '<'
+  },
+  controller: PartyCreator
+});
-- 
2.7.4


From f4d27a8d6cf4e83248d2e5c94562ddfbafd5d3b9 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 16:46:14 +0200
Subject: [PATCH 147/375] Step 13.15: Implement component

---
 imports/ui/components/partiesList/partiesList.html | 1 +
 1 file changed, 1 insertion(+)

diff --git a/imports/ui/components/partiesList/partiesList.html b/imports/ui/components/partiesList/partiesList.html
index 3c411fe..2b18723 100644
--- a/imports/ui/components/partiesList/partiesList.html
+++ b/imports/ui/components/partiesList/partiesList.html
@@ -11,6 +11,7 @@
     </a>
     <p>{{party.description}}</p>
     <party-remove party="party"></party-remove>
+    <party-creator party="party"></party-creator>
   </li>
 </ul>
 
-- 
2.7.4


From d85936bc14cfc14e2a1d3ee95afc180772edb9bc Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 16:46:39 +0200
Subject: [PATCH 148/375] Step 13.16: Add as a dependency

---
 imports/ui/components/partiesList/partiesList.js | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partiesList/partiesList.js b/imports/ui/components/partiesList/partiesList.js
index ee2dc70..b84a560 100644
--- a/imports/ui/components/partiesList/partiesList.js
+++ b/imports/ui/components/partiesList/partiesList.js
@@ -10,6 +10,7 @@ import { Parties } from '../../../api/parties';
 import { name as PartiesSort } from '../partiesSort/partiesSort';
 import { name as PartyAdd } from '../partyAdd/partyAdd';
 import { name as PartyRemove } from '../partyRemove/partyRemove';
+import { name as PartyCreator } from '../partyCreator/partyCreator';
 
 class PartiesList {
   constructor($scope, $reactive) {
@@ -61,7 +62,8 @@ export default angular.module(name, [
   utilsPagination,
   PartiesSort,
   PartyAdd,
-  PartyRemove
+  PartyRemove,
+  PartyCreator
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
   controllerAs: name,
-- 
2.7.4


From f329308d1ea845dcd59006f9d5c9487635b70e20 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 17:06:21 +0200
Subject: [PATCH 149/375] Step 13.17: Tests of PartyCreator

---
 .../partyCreator/client/partyCreator.tests.js      | 81 ++++++++++++++++++++++
 1 file changed, 81 insertions(+)
 create mode 100644 imports/ui/components/partyCreator/client/partyCreator.tests.js

diff --git a/imports/ui/components/partyCreator/client/partyCreator.tests.js b/imports/ui/components/partyCreator/client/partyCreator.tests.js
new file mode 100644
index 0000000..dabb0b5
--- /dev/null
+++ b/imports/ui/components/partyCreator/client/partyCreator.tests.js
@@ -0,0 +1,81 @@
+import { name as PartyCreator } from '../partyCreator';
+import { Meteor } from 'meteor/meteor';
+import 'angular-mocks';
+
+describe('PartyCreator', () => {
+  beforeEach(() => {
+    window.module(PartyCreator);
+  });
+
+  describe('controller', () => {
+    let $rootScope;
+    let $componentController;
+    const party = {
+      _id: 'partyId'
+    };
+
+    beforeEach(() => {
+      inject((_$rootScope_, _$componentController_) => {
+        $rootScope = _$rootScope_;
+        $componentController = _$componentController_;
+      });
+    });
+
+    function component(bindings) {
+      return $componentController(PartyCreator, {
+        $scope: $rootScope.$new(true)
+      }, bindings);
+    }
+
+    it('should return an empty string if there is no party', () => {
+      const controller = component({
+        party: undefined
+      });
+
+      expect(controller.creator).toEqual('');
+    });
+
+    it('should say `me` if logged in is the owner', () => {
+      const owner = 'userId';
+      // logged in
+      spyOn(Meteor, 'userId').and.returnValue(owner);
+      const controller = component({
+        party: {
+          owner
+        }
+      });
+
+      expect(controller.creator).toEqual('me');
+    });
+
+    it('should say `nobody` if user does not exist', () => {
+      const owner = 'userId';
+      // not logged in
+      spyOn(Meteor, 'userId').and.returnValue(null);
+      // no user found
+      spyOn(Meteor.users, 'findOne').and.returnValue(undefined);
+      const controller = component({
+        party: {
+          owner
+        }
+      });
+
+      expect(controller.creator).toEqual('nobody');
+    });
+
+    it('should return user data if user exists and it is not logged one', () => {
+      const owner = 'userId';
+      // not logged in
+      spyOn(Meteor, 'userId').and.returnValue(null);
+      // user found
+      spyOn(Meteor.users, 'findOne').and.returnValue('found');
+      const controller = component({
+        party: {
+          owner
+        }
+      });
+
+      expect(controller.creator).toEqual('found');
+    });
+  });
+});
-- 
2.7.4


From fd214335a745339412ee8aa44ff301a023799631 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 17:18:32 +0200
Subject: [PATCH 150/375] Step 14.1: Add `check` package

---
 .meteor/packages | 1 +
 1 file changed, 1 insertion(+)

diff --git a/.meteor/packages b/.meteor/packages
index 2525c04..3545268 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -25,3 +25,4 @@ dotansimha:accounts-ui-angular
 accounts-facebook
 accounts-twitter
 tmeasday:publish-counts
+check
-- 
2.7.4


From 1cb87009c72917be3ca52240585bbe9330e6d1e7 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 17:21:04 +0200
Subject: [PATCH 151/375] Step 14.2: Create invite method

---
 imports/api/parties/methods.js | 66 ++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 66 insertions(+)
 create mode 100644 imports/api/parties/methods.js

diff --git a/imports/api/parties/methods.js b/imports/api/parties/methods.js
new file mode 100644
index 0000000..dd75692
--- /dev/null
+++ b/imports/api/parties/methods.js
@@ -0,0 +1,66 @@
+import _ from 'underscore';
+import { Meteor } from 'meteor/meteor';
+import { check } from 'meteor/check';
+
+import { Parties } from './collection';
+
+function getContactEmail(user) {
+  if (user.emails && user.emails.length)
+    return user.emails[0].address;
+
+  if (user.services && user.services.facebook && user.services.facebook.email)
+    return user.services.facebook.email;
+
+  return null;
+}
+
+export function invite(partyId, userId) {
+  check(partyId, String);
+  check(userId, String);
+
+  if (!this.userId) {
+    throw new Meteor.Error(400, 'You have to be logged in!');
+  }
+
+  const party = Parties.findOne(partyId);
+
+  if (!party) {
+    throw new Meteor.Error(404, 'No such party!');
+  }
+
+  if (party.owner !== this.userId) {
+    throw new Meteor.Error(404, 'No permissions!');
+  }
+
+  if (party.public) {
+    throw new Meteor.Error(400, 'That party is public. No need to invite people.');
+  }
+
+  if (userId !== party.owner && ! _.contains(party.invited, userId)) {
+    Parties.update(partyId, {
+      $addToSet: {
+        invited: userId
+      }
+    });
+
+    const replyTo = getContactEmail(Meteor.users.findOne(this.userId));
+    const to = getContactEmail(Meteor.users.findOne(userId));
+
+    if (Meteor.isServer && to) {
+      Email.send({
+        to,
+        replyTo,
+        from: 'noreply@socially.com',
+        subject: `PARTY: ${party.title}`,
+        text: `
+          Hey, I just invited you to ${party.title} on Socially.
+          Come check it out: ${Meteor.absoluteUrl()}
+        `
+      });
+    }
+  }
+}
+
+Meteor.methods({
+  invite
+});
-- 
2.7.4


From 8e9437e650c7c5d11790c77394ac7f5a68e3230c Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 17:21:28 +0200
Subject: [PATCH 152/375] Step 14.3: Import methods

---
 imports/api/parties/index.js | 1 +
 1 file changed, 1 insertion(+)

diff --git a/imports/api/parties/index.js b/imports/api/parties/index.js
index 5f7ae00..96b72b2 100644
--- a/imports/api/parties/index.js
+++ b/imports/api/parties/index.js
@@ -1,3 +1,4 @@
 import './publish';
+import './methods';
 
 export * from './collection';
-- 
2.7.4


From 6caa2ca71abd92490db0ec14221fefabafc6e9dd Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 17:23:05 +0200
Subject: [PATCH 153/375] Step 14.4: Add `email` package

---
 .meteor/packages | 1 +
 1 file changed, 1 insertion(+)

diff --git a/.meteor/packages b/.meteor/packages
index 3545268..53045cd 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -26,3 +26,4 @@ accounts-facebook
 accounts-twitter
 tmeasday:publish-counts
 check
+email
-- 
2.7.4


From d852c0c244b5bdf5d180bf0fac6dab5127bdc4bb Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 17:23:49 +0200
Subject: [PATCH 154/375] Step 14.5: Import email from module

---
 imports/api/parties/methods.js | 1 +
 1 file changed, 1 insertion(+)

diff --git a/imports/api/parties/methods.js b/imports/api/parties/methods.js
index dd75692..054b42a 100644
--- a/imports/api/parties/methods.js
+++ b/imports/api/parties/methods.js
@@ -1,6 +1,7 @@
 import _ from 'underscore';
 import { Meteor } from 'meteor/meteor';
 import { check } from 'meteor/check';
+import { Email } from 'meteor/email';
 
 import { Parties } from './collection';
 
-- 
2.7.4


From cd3e6659837fab2f7e0f48cfbabcb450a668b0dd Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 17:25:59 +0200
Subject: [PATCH 155/375] Step 14.6: Add invite method to PartyUninvited

---
 imports/ui/components/partyUninvited/partyUninvited.js | 12 ++++++++++++
 1 file changed, 12 insertions(+)

diff --git a/imports/ui/components/partyUninvited/partyUninvited.js b/imports/ui/components/partyUninvited/partyUninvited.js
index 4ec5ade..d941e40 100644
--- a/imports/ui/components/partyUninvited/partyUninvited.js
+++ b/imports/ui/components/partyUninvited/partyUninvited.js
@@ -19,6 +19,18 @@ class PartyUninvited {
       }
     });
   }
+
+  invite(user) {
+    Meteor.call('invite', this.party._id, user._id,
+      (error) => {
+        if (error) {
+          console.log('Oops, unable to invite!');
+        } else {
+          console.log('Invited!');
+        }
+      }
+    );
+  }
 }
 
 const name = 'partyUninvited';
-- 
2.7.4


From 95ce4db4fe8547eefd553078ac7deb9da90e5c42 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 17:26:36 +0200
Subject: [PATCH 156/375] Step 14.7: Add invite button

---
 imports/ui/components/partyUninvited/partyUninvited.html | 1 +
 1 file changed, 1 insertion(+)

diff --git a/imports/ui/components/partyUninvited/partyUninvited.html b/imports/ui/components/partyUninvited/partyUninvited.html
index 9603f3a..0cbb435 100644
--- a/imports/ui/components/partyUninvited/partyUninvited.html
+++ b/imports/ui/components/partyUninvited/partyUninvited.html
@@ -2,5 +2,6 @@
   Users to invite:
   <li ng-repeat="user in partyUninvited.users | uninvitedFilter:partyUninvited.party">
     <div>{{ user | displayNameFilter }}</div>
+    <button ng-click="partyUninvited.invite(user)">Invite</button>
   </li>
 </ul>
-- 
2.7.4


From 9272cc631302f047478674c942945f7a7937069f Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 17:28:47 +0200
Subject: [PATCH 157/375] Step 14.8: Update the parties subscription to include
 invited

---
 imports/api/parties/publish.js | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/imports/api/parties/publish.js b/imports/api/parties/publish.js
index 67c9bdb..0d4d340 100644
--- a/imports/api/parties/publish.js
+++ b/imports/api/parties/publish.js
@@ -24,6 +24,15 @@ if (Meteor.isServer) {
             $exists: true
           }
         }]
+      }, {
+        // when logged in user is one of invited
+        $and: [{
+          invited: this.userId
+        }, {
+          invited: {
+            $exists: true
+          }
+        }]
       }]
     };
 
-- 
2.7.4


From a67383b0afc893ad3efaf3d77a3a46df4e80d1f5 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 17:42:35 +0200
Subject: [PATCH 158/375] Step 14.9: Add rsvp method

---
 imports/api/parties/methods.js | 79 +++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 78 insertions(+), 1 deletion(-)

diff --git a/imports/api/parties/methods.js b/imports/api/parties/methods.js
index 054b42a..e8aa1ad 100644
--- a/imports/api/parties/methods.js
+++ b/imports/api/parties/methods.js
@@ -62,6 +62,83 @@ export function invite(partyId, userId) {
   }
 }
 
+export function rsvp(partyId, rsvp) {
+  check(partyId, String);
+  check(rsvp, String);
+
+  if (!this.userId) {
+    throw new Meteor.Error(403, 'You must be logged in to RSVP');
+  }
+
+  if (!_.contains(['yes', 'no', 'maybe'], rsvp)) {
+    throw new Meteor.Error(400, 'Invalid RSVP');
+  }
+
+  const party = Parties.findOne({
+    _id: partyId,
+    $or: [{
+      // is public
+      $and: [{
+        public: true
+      }, {
+        public: {
+          $exists: true
+        }
+      }]
+    },{
+      // is owner
+      $and: [{
+        owner: this.userId
+      }, {
+        owner: {
+          $exists: true
+        }
+      }]
+    }, {
+      // is invited
+      $and: [{
+        invited: this.userId
+      }, {
+        invited: {
+          $exists: true
+        }
+      }]
+    }]
+  });
+
+  if (!party) {
+    throw new Meteor.Error(404, 'No such party');
+  }
+
+  const hasUserRsvp = _.findWhere(party.rsvps, {
+    user: this.userId
+  });
+
+  if (!hasUserRsvp) {
+    // add new rsvp entry
+    Parties.update(partyId, {
+      $push: {
+        rsvps: {
+          rsvp,
+          user: this.userId
+        }
+      }
+    });
+  } else {
+    // update rsvp entry
+    const userId = this.userId;
+    Parties.update({
+      _id: partyId,
+      'rsvps.user': userId
+    }, {
+      $set: {
+        'rsvps.$.rsvp': rsvp
+      }
+    });
+  }
+}
+
 Meteor.methods({
-  invite
+  invite,
+  rsvp
 });
-- 
2.7.4


From d0527bc3db25f95ece67b6a8ceadec68b1f79a42 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 17:45:36 +0200
Subject: [PATCH 159/375] Step 14.10: Create PartyRsvp component

---
 imports/ui/components/partyRsvp/partyRsvp.js | 44 ++++++++++++++++++++++++++++
 1 file changed, 44 insertions(+)
 create mode 100644 imports/ui/components/partyRsvp/partyRsvp.js

diff --git a/imports/ui/components/partyRsvp/partyRsvp.js b/imports/ui/components/partyRsvp/partyRsvp.js
new file mode 100644
index 0000000..e5907b2
--- /dev/null
+++ b/imports/ui/components/partyRsvp/partyRsvp.js
@@ -0,0 +1,44 @@
+import angular from 'angular';
+import angularMeteor from 'angular-meteor';
+
+import { Meteor } from 'meteor/meteor';
+
+import './partyRsvp.html';
+
+class PartyRsvp {
+  yes() {
+    this.answer('yes');
+  }
+
+  maybe() {
+    this.answer('maybe');
+  }
+
+  no() {
+    this.answer('no');
+  }
+
+  answer(answer) {
+    Meteor.call('rsvp', this.party._id, answer, (error) => {
+      if (error) {
+        console.error('Oops, unable to rsvp!');
+      } else {
+        console.log('RSVP done!')
+      }
+    });
+  }
+}
+
+const name = 'partyRsvp';
+
+// create a module
+export default angular.module(name, [
+  angularMeteor
+]).component(name, {
+  templateUrl: `imports/ui/components/${name}/${name}.html`,
+  controllerAs: name,
+  bindings: {
+    party: '<'
+  },
+  controller: PartyRsvp
+});
-- 
2.7.4


From 1da338dbc3a3508af21c44fdc51e39c7a6026703 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 17:46:38 +0200
Subject: [PATCH 160/375] Step 14.11: Create template

---
 imports/ui/components/partyRsvp/partyRsvp.html | 3 +++
 1 file changed, 3 insertions(+)
 create mode 100644 imports/ui/components/partyRsvp/partyRsvp.html

diff --git a/imports/ui/components/partyRsvp/partyRsvp.html b/imports/ui/components/partyRsvp/partyRsvp.html
new file mode 100644
index 0000000..ca15260
--- /dev/null
+++ b/imports/ui/components/partyRsvp/partyRsvp.html
@@ -0,0 +1,3 @@
+<input type="button" value="I'm going!" ng-click="partyRsvp.yes()"/>
+<input type="button" value="Maybe" ng-click="partyRsvp.maybe()"/>
+<input type="button" value="No" ng-click="partyRsvp.no()"/>
-- 
2.7.4


From ca63a2f310cde6f0319cc2dc0ebaf8ce36298b10 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 17:48:22 +0200
Subject: [PATCH 161/375] Step 14.12: Add component to the view

---
 imports/ui/components/partiesList/partiesList.html | 1 +
 1 file changed, 1 insertion(+)

diff --git a/imports/ui/components/partiesList/partiesList.html b/imports/ui/components/partiesList/partiesList.html
index 2b18723..bced521 100644
--- a/imports/ui/components/partiesList/partiesList.html
+++ b/imports/ui/components/partiesList/partiesList.html
@@ -11,6 +11,7 @@
     </a>
     <p>{{party.description}}</p>
     <party-remove party="party"></party-remove>
+    <party-rsvp party="party"></party-rsvp>
     <party-creator party="party"></party-creator>
   </li>
 </ul>
-- 
2.7.4


From 9e3e09f2f8c99855da8f7f008ce4a05a42276588 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 17:48:36 +0200
Subject: [PATCH 162/375] Step 14.13: Add as a dependency

---
 imports/ui/components/partiesList/partiesList.js | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partiesList/partiesList.js b/imports/ui/components/partiesList/partiesList.js
index b84a560..3ef39cd 100644
--- a/imports/ui/components/partiesList/partiesList.js
+++ b/imports/ui/components/partiesList/partiesList.js
@@ -11,6 +11,7 @@ import { name as PartiesSort } from '../partiesSort/partiesSort';
 import { name as PartyAdd } from '../partyAdd/partyAdd';
 import { name as PartyRemove } from '../partyRemove/partyRemove';
 import { name as PartyCreator } from '../partyCreator/partyCreator';
+import { name as PartyRsvp } from '../partyRsvp/partyRsvp';
 
 class PartiesList {
   constructor($scope, $reactive) {
@@ -63,7 +64,8 @@ export default angular.module(name, [
   PartiesSort,
   PartyAdd,
   PartyRemove,
-  PartyCreator
+  PartyCreator,
+  PartyRsvp
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
   controllerAs: name,
-- 
2.7.4


From 3ada22be9a1409a3fd618e9df74945e0418bb871 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 17:53:02 +0200
Subject: [PATCH 163/375] Step 14.14: Create view for PartyRsvpsList component

---
 imports/ui/components/partyRsvpsList/partyRsvpsList.html | 6 ++++++
 1 file changed, 6 insertions(+)
 create mode 100644 imports/ui/components/partyRsvpsList/partyRsvpsList.html

diff --git a/imports/ui/components/partyRsvpsList/partyRsvpsList.html b/imports/ui/components/partyRsvpsList/partyRsvpsList.html
new file mode 100644
index 0000000..efc38ed
--- /dev/null
+++ b/imports/ui/components/partyRsvpsList/partyRsvpsList.html
@@ -0,0 +1,6 @@
+Who is coming: Yes -
+{{ (partyRsvpsList.rsvps | filter:{rsvp:'yes'}).length }}
+Maybe -
+{{ (partyRsvpsList.rsvps | filter:{rsvp:'maybe'}).length }}
+No -
+{{ (partyRsvpsList.rsvps | filter:{rsvp:'no'}).length }}
-- 
2.7.4


From 326d493cce24a909bce10c4c2cf77f7c97127cb9 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 17:53:16 +0200
Subject: [PATCH 164/375] Step 14.15: Create component

---
 .../ui/components/partyRsvpsList/partyRsvpsList.js   | 20 ++++++++++++++++++++
 1 file changed, 20 insertions(+)
 create mode 100644 imports/ui/components/partyRsvpsList/partyRsvpsList.js

diff --git a/imports/ui/components/partyRsvpsList/partyRsvpsList.js b/imports/ui/components/partyRsvpsList/partyRsvpsList.js
new file mode 100644
index 0000000..4e6e752
--- /dev/null
+++ b/imports/ui/components/partyRsvpsList/partyRsvpsList.js
@@ -0,0 +1,20 @@
+import angular from 'angular';
+import angularMeteor from 'angular-meteor';
+
+import './partyRsvpsList.html';
+
+class PartyRsvpsList { }
+
+const name = 'partyRsvpsList';
+
+// create a module
+export default angular.module(name, [
+  angularMeteor
+]).component(name, {
+  templateUrl: `imports/ui/components/${name}/${name}.html`,
+  controllerAs: name,
+  bindings: {
+    rsvps: '<'
+  },
+  controller: PartyRsvpsList
+});
-- 
2.7.4


From 03451e144daf8aa9e340c99450144256d849555a Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 17:53:32 +0200
Subject: [PATCH 165/375] Step 14.16: Add to the view

---
 imports/ui/components/partiesList/partiesList.html | 1 +
 1 file changed, 1 insertion(+)

diff --git a/imports/ui/components/partiesList/partiesList.html b/imports/ui/components/partiesList/partiesList.html
index bced521..60dbea3 100644
--- a/imports/ui/components/partiesList/partiesList.html
+++ b/imports/ui/components/partiesList/partiesList.html
@@ -12,6 +12,7 @@
     <p>{{party.description}}</p>
     <party-remove party="party"></party-remove>
     <party-rsvp party="party"></party-rsvp>
+    <party-rsvps-list rsvps="party.rsvps"></party-rsvps-list>
     <party-creator party="party"></party-creator>
   </li>
 </ul>
-- 
2.7.4


From 7569f70277f97d96625f27debc427e9932d16c7b Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 17:53:47 +0200
Subject: [PATCH 166/375] Step 14.17: Also as a dependency

---
 imports/ui/components/partiesList/partiesList.js | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partiesList/partiesList.js b/imports/ui/components/partiesList/partiesList.js
index 3ef39cd..2d27cfd 100644
--- a/imports/ui/components/partiesList/partiesList.js
+++ b/imports/ui/components/partiesList/partiesList.js
@@ -12,6 +12,7 @@ import { name as PartyAdd } from '../partyAdd/partyAdd';
 import { name as PartyRemove } from '../partyRemove/partyRemove';
 import { name as PartyCreator } from '../partyCreator/partyCreator';
 import { name as PartyRsvp } from '../partyRsvp/partyRsvp';
+import { name as PartyRsvpsList } from '../partyRsvpsList/partyRsvpsList';
 
 class PartiesList {
   constructor($scope, $reactive) {
@@ -65,7 +66,8 @@ export default angular.module(name, [
   PartyAdd,
   PartyRemove,
   PartyCreator,
-  PartyRsvp
+  PartyRsvp,
+  PartyRsvpsList
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
   controllerAs: name,
-- 
2.7.4


From ca87ae25518c715f4cfc3af607becfcd4e1df794 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 17:57:13 +0200
Subject: [PATCH 167/375] Step 14.18: Create view for PartyRsvpUsers component

---
 imports/ui/components/partyRsvpUsers/partyRsvpUsers.html | 5 +++++
 1 file changed, 5 insertions(+)
 create mode 100644 imports/ui/components/partyRsvpUsers/partyRsvpUsers.html

diff --git a/imports/ui/components/partyRsvpUsers/partyRsvpUsers.html b/imports/ui/components/partyRsvpUsers/partyRsvpUsers.html
new file mode 100644
index 0000000..445d426
--- /dev/null
+++ b/imports/ui/components/partyRsvpUsers/partyRsvpUsers.html
@@ -0,0 +1,5 @@
+<div ng-repeat="rsvp in partyRsvpUsers.rsvps | filter:{ rsvp: partyRsvpUsers.type }">
+  {{ partyRsvpUsers.getUserById(rsvp.user) | displayNameFilter }}
+  -
+  {{ partyRsvpUsers.type }}
+</div>
-- 
2.7.4


From 458ac13b3210461bcf11b86aa91352521d13c20e Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 17:57:30 +0200
Subject: [PATCH 168/375] Step 14.19: Create component

---
 .../ui/components/partyRsvpUsers/partyRsvpUsers.js | 29 ++++++++++++++++++++++
 1 file changed, 29 insertions(+)
 create mode 100644 imports/ui/components/partyRsvpUsers/partyRsvpUsers.js

diff --git a/imports/ui/components/partyRsvpUsers/partyRsvpUsers.js b/imports/ui/components/partyRsvpUsers/partyRsvpUsers.js
new file mode 100644
index 0000000..f94eb18
--- /dev/null
+++ b/imports/ui/components/partyRsvpUsers/partyRsvpUsers.js
@@ -0,0 +1,29 @@
+import angular from 'angular';
+import angularMeteor from 'angular-meteor';
+
+import { Meteor } from 'meteor/meteor';
+
+import './partyRsvpUsers.html';
+import { name as DisplayNameFilter } from '../../filters/displayNameFilter';
+
+class PartyRsvpUsers {
+  getUserById(userId) {
+    return Meteor.users.findOne(userId);
+  }
+}
+
+const name = 'partyRsvpUsers';
+
+// create a module
+export default angular.module(name, [
+  angularMeteor,
+  DisplayNameFilter
+]).component(name, {
+  templateUrl: `imports/ui/components/${name}/${name}.html`,
+  controllerAs: name,
+  bindings: {
+    rsvps: '<',
+    type: '@'
+  },
+  controller: PartyRsvpUsers
+});
-- 
2.7.4


From f6e4b922f4b1a43293f36a13ed92ad707f03445a Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 17:57:56 +0200
Subject: [PATCH 169/375] Step 14.20: Use recently created component

---
 imports/ui/components/partyRsvpsList/partyRsvpsList.html | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/imports/ui/components/partyRsvpsList/partyRsvpsList.html b/imports/ui/components/partyRsvpsList/partyRsvpsList.html
index efc38ed..2e1749d 100644
--- a/imports/ui/components/partyRsvpsList/partyRsvpsList.html
+++ b/imports/ui/components/partyRsvpsList/partyRsvpsList.html
@@ -4,3 +4,7 @@ Maybe -
 {{ (partyRsvpsList.rsvps | filter:{rsvp:'maybe'}).length }}
 No -
 {{ (partyRsvpsList.rsvps | filter:{rsvp:'no'}).length }}
+
+<party-rsvp-users rsvps="partyRsvpsList.rsvps" type="yes"></party-rsvp-users>
+<party-rsvp-users rsvps="partyRsvpsList.rsvps" type="maybe"></party-rsvp-users>
+<party-rsvp-users rsvps="partyRsvpsList.rsvps" type="no"></party-rsvp-users>
-- 
2.7.4


From 1c1cf4c496310e3db17185732d909f043509934d Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 17:58:15 +0200
Subject: [PATCH 170/375] Step 14.21: Add as a dependency

---
 imports/ui/components/partyRsvpsList/partyRsvpsList.js | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partyRsvpsList/partyRsvpsList.js b/imports/ui/components/partyRsvpsList/partyRsvpsList.js
index 4e6e752..1150a47 100644
--- a/imports/ui/components/partyRsvpsList/partyRsvpsList.js
+++ b/imports/ui/components/partyRsvpsList/partyRsvpsList.js
@@ -2,6 +2,7 @@ import angular from 'angular';
 import angularMeteor from 'angular-meteor';
 
 import './partyRsvpsList.html';
+import { name as PartyRsvpUsers } from '../partyRsvpUsers/partyRsvpUsers';
 
 class PartyRsvpsList { }
 
@@ -9,7 +10,8 @@ const name = 'partyRsvpsList';
 
 // create a module
 export default angular.module(name, [
-  angularMeteor
+  angularMeteor,
+  PartyRsvpUsers
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
   controllerAs: name,
-- 
2.7.4


From e6f2393bd1919ddbfb4b212e397e634707fbeacb Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 17:59:25 +0200
Subject: [PATCH 171/375] Step 14.22: Create view for PartyUnanswered

---
 imports/ui/components/partyUnanswered/partyUnanswered.html | 5 +++++
 1 file changed, 5 insertions(+)
 create mode 100644 imports/ui/components/partyUnanswered/partyUnanswered.html

diff --git a/imports/ui/components/partyUnanswered/partyUnanswered.html b/imports/ui/components/partyUnanswered/partyUnanswered.html
new file mode 100644
index 0000000..ecc1b45
--- /dev/null
+++ b/imports/ui/components/partyUnanswered/partyUnanswered.html
@@ -0,0 +1,5 @@
+<ul>
+  <li ng-repeat="invitedUser in partyUnanswered.getUnanswered()">
+    {{ partyUnanswered.getUserById(invitedUser) | displayNameFilter }}
+  </li>
+</ul>
-- 
2.7.4


From b417515e413906b5fd1081a6d0ccca87ada378a3 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 18:02:22 +0200
Subject: [PATCH 172/375] Step 14.23: Create component

---
 .../components/partyUnanswered/partyUnanswered.js  | 39 ++++++++++++++++++++++
 1 file changed, 39 insertions(+)
 create mode 100644 imports/ui/components/partyUnanswered/partyUnanswered.js

diff --git a/imports/ui/components/partyUnanswered/partyUnanswered.js b/imports/ui/components/partyUnanswered/partyUnanswered.js
new file mode 100644
index 0000000..d6eaf46
--- /dev/null
+++ b/imports/ui/components/partyUnanswered/partyUnanswered.js
@@ -0,0 +1,39 @@
+import angular from 'angular';
+import angularMeteor from 'angular-meteor';
+import _ from 'underscore';
+
+import { Meteor } from 'meteor/meteor';
+
+import './partyUnanswered.html';
+import { name as DisplayNameFilter } from '../../filters/displayNameFilter';
+
+class PartyUnanswered {
+  getUnanswered() {
+    if (!this.party || !this.party.invited) {
+      return;
+    }
+
+    return this.party.invited.filter((user) => {
+      return !_.findWhere(this.party.rsvps, { user });
+    });
+  }
+
+  getUserById(userId) {
+    return Meteor.users.findOne(userId)
+  }
+}
+
+const name = 'partyUnanswered';
+
+// create a module
+export default angular.module(name, [
+  angularMeteor,
+  DisplayNameFilter
+]).component(name, {
+  templateUrl: `imports/ui/components/${name}/${name}.html`,
+  controllerAs: name,
+  bindings: {
+    party: '<'
+  },
+  controller: PartyUnanswered
+});
-- 
2.7.4


From e1b38439a815a8070e1b39b0c966a3c7fee7267a Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 18:02:52 +0200
Subject: [PATCH 173/375] Step 14.24: Use recently created component

---
 imports/ui/components/partiesList/partiesList.html | 1 +
 1 file changed, 1 insertion(+)

diff --git a/imports/ui/components/partiesList/partiesList.html b/imports/ui/components/partiesList/partiesList.html
index 60dbea3..4881e5c 100644
--- a/imports/ui/components/partiesList/partiesList.html
+++ b/imports/ui/components/partiesList/partiesList.html
@@ -13,6 +13,7 @@
     <party-remove party="party"></party-remove>
     <party-rsvp party="party"></party-rsvp>
     <party-rsvps-list rsvps="party.rsvps"></party-rsvps-list>
+    <party-unanswered party="party"></party-unanswered>
     <party-creator party="party"></party-creator>
   </li>
 </ul>
-- 
2.7.4


From ff2ae029c48b8467f16412ceffab43ca15e6a29c Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 18:03:12 +0200
Subject: [PATCH 174/375] Step 14.25: Add as a dependency

---
 imports/ui/components/partiesList/partiesList.js | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partiesList/partiesList.js b/imports/ui/components/partiesList/partiesList.js
index 2d27cfd..bc983e5 100644
--- a/imports/ui/components/partiesList/partiesList.js
+++ b/imports/ui/components/partiesList/partiesList.js
@@ -13,6 +13,7 @@ import { name as PartyRemove } from '../partyRemove/partyRemove';
 import { name as PartyCreator } from '../partyCreator/partyCreator';
 import { name as PartyRsvp } from '../partyRsvp/partyRsvp';
 import { name as PartyRsvpsList } from '../partyRsvpsList/partyRsvpsList';
+import { name as PartyUnanswered } from '../partyUnanswered/partyUnanswered';
 
 class PartiesList {
   constructor($scope, $reactive) {
@@ -67,7 +68,8 @@ export default angular.module(name, [
   PartyRemove,
   PartyCreator,
   PartyRsvp,
-  PartyRsvpsList
+  PartyRsvpsList,
+  PartyUnanswered
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
   controllerAs: name,
-- 
2.7.4


From 649fe852ee617e717642f9afb198b3caed73add0 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 18:03:38 +0200
Subject: [PATCH 175/375] Step 14.26: Subscribe `users`

---
 imports/ui/components/partiesList/partiesList.js | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/imports/ui/components/partiesList/partiesList.js b/imports/ui/components/partiesList/partiesList.js
index bc983e5..5a10136 100644
--- a/imports/ui/components/partiesList/partiesList.js
+++ b/imports/ui/components/partiesList/partiesList.js
@@ -35,6 +35,8 @@ class PartiesList {
       }, this.getReactively('searchText')
     ]);
 
+    this.subscribe('users');
+
     this.helpers({
       parties() {
         return Parties.find({}, {
-- 
2.7.4


From b7cac8b6555953f86a2c95e781a80787c92e3983 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 19:50:23 +0200
Subject: [PATCH 176/375] Step 14.27: Tests of invite method

---
 imports/api/parties/methods.tests.js | 126 +++++++++++++++++++++++++++++++++++
 1 file changed, 126 insertions(+)
 create mode 100644 imports/api/parties/methods.tests.js

diff --git a/imports/api/parties/methods.tests.js b/imports/api/parties/methods.tests.js
new file mode 100644
index 0000000..56e770c
--- /dev/null
+++ b/imports/api/parties/methods.tests.js
@@ -0,0 +1,126 @@
+import { invite } from './methods';
+import { Parties } from './collection';
+
+import { Meteor } from 'meteor/meteor';
+
+if (Meteor.isServer) {
+  describe('Parties / Methods', () => {
+    describe('invite', () => {
+      function loggedIn(userId = 'userId') {
+        return {
+          userId
+        };
+      }
+
+      it('should be called from Method', () => {
+        spyOn(invite, 'apply');
+
+        try {
+          Meteor.call('invite');
+        } catch (e) {}
+
+        expect(invite.apply).toHaveBeenCalled();
+      });
+
+      it('should fail on missing partyId', () => {
+        expect(() => {
+          invite.call({});
+        }).toThrowError();
+      });
+
+      it('should fail on missing userId', () => {
+        expect(() => {
+          invite.call({}, 'partyId');
+        }).toThrowError();
+      });
+
+      it('should fail on not logged in', () => {
+        expect(() => {
+          invite.call({}, 'partyId', 'userId');
+        }).toThrowError(/logged in/i);
+      });
+
+      it('should look for a party', () => {
+        const partyId = 'partyId';
+        spyOn(Parties, 'findOne');
+
+        try {
+          invite.call(loggedIn(), partyId, 'userId');
+        } catch (e) {}
+
+        expect(Parties.findOne).toHaveBeenCalledWith(partyId);
+      });
+
+      it('should fail if party does not exist', () => {
+        spyOn(Parties, 'findOne').and.returnValue(undefined);
+
+        expect(() => {
+          invite.call(loggedIn(), 'partyId', 'userId');
+        }).toThrowError(/404/);
+      });
+
+      it('should fail if logged in user is not the owner', () => {
+        spyOn(Parties, 'findOne').and.returnValue({
+          owner: 'notUserId'
+        });
+
+        expect(() => {
+          invite.call(loggedIn(), 'partyId', 'userId');
+        }).toThrowError(/404/);
+      });
+
+      it('should fail on public party', () => {
+        spyOn(Parties, 'findOne').and.returnValue({
+          owner: 'userId',
+          public: true
+        });
+
+        expect(() => {
+          invite.call(loggedIn(), 'partyId', 'userId');
+        }).toThrowError(/400/);
+      });
+
+      it('should NOT invite user who is the owner', () => {
+        spyOn(Parties, 'findOne').and.returnValue({
+          owner: 'userId'
+        });
+        spyOn(Parties, 'update');
+
+        invite.call(loggedIn(), 'partyId', 'userId');
+
+        expect(Parties.update).not.toHaveBeenCalled();
+      });
+
+      it('should NOT invite user who has been already invited', () => {
+        spyOn(Parties, 'findOne').and.returnValue({
+          owner: 'userId',
+          invited: ['invitedId']
+        });
+        spyOn(Parties, 'update');
+
+        invite.call(loggedIn(), 'partyId', 'invitedId');
+
+        expect(Parties.update).not.toHaveBeenCalled();
+      });
+
+      it('should invite user who has not been invited and is not the owner', () => {
+        const partyId = 'partyId';
+        const userId = 'notInvitedId';
+        spyOn(Parties, 'findOne').and.returnValue({
+          owner: 'userId',
+          invited: ['invitedId']
+        });
+        spyOn(Parties, 'update');
+        spyOn(Meteor.users, 'findOne').and.returnValue({});
+
+        invite.call(loggedIn(), partyId, userId);
+
+        expect(Parties.update).toHaveBeenCalledWith(partyId, {
+          $addToSet: {
+            invited: userId
+          }
+        });
+      });
+    });
+  });
+}
-- 
2.7.4


From 27d369388cccb559ae0510ec5d5164dbd92620ab Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 20:00:03 +0200
Subject: [PATCH 177/375] Step 14.28: Tests of rsvp Method

---
 imports/api/parties/methods.tests.js | 54 +++++++++++++++++++++++++++++++++++-
 1 file changed, 53 insertions(+), 1 deletion(-)

diff --git a/imports/api/parties/methods.tests.js b/imports/api/parties/methods.tests.js
index 56e770c..536a2b0 100644
--- a/imports/api/parties/methods.tests.js
+++ b/imports/api/parties/methods.tests.js
@@ -1,4 +1,4 @@
-import { invite } from './methods';
+import { invite, rsvp } from './methods';
 import { Parties } from './collection';
 
 import { Meteor } from 'meteor/meteor';
@@ -122,5 +122,57 @@ if (Meteor.isServer) {
         });
       });
     });
+
+    describe('rsvp', () => {
+      function loggedIn(userId = 'userId') {
+        return {
+          userId
+        };
+      }
+
+      it('should be called from Method', () => {
+        spyOn(rsvp, 'apply');
+
+        try {
+          Meteor.call('rsvp');
+        } catch (e) {}
+
+        expect(rsvp.apply).toHaveBeenCalled();
+      });
+
+      it('should fail on missing partyId', () => {
+        expect(() => {
+          rsvp.call({});
+        }).toThrowError();
+      });
+
+      it('should fail on missing rsvp', () => {
+        expect(() => {
+          rsvp.call({}, 'partyId');
+        }).toThrowError();
+      });
+
+      it('should fail if not logged in', () => {
+        expect(() => {
+          rsvp.call({}, 'partyId', 'rsvp');
+        }).toThrowError(/403/);
+      });
+
+      it('should fail on wrong answer', () => {
+        expect(() => {
+          rsvp.call(loggedIn(), 'partyId', 'wrong');
+        }).toThrowError(/400/);
+      });
+
+      ['yes', 'maybe', 'no'].forEach((answer) => {
+        it(`should pass on '${answer}'`, () => {
+          expect(() => {
+            rsvp.call(loggedIn(), 'partyId', answer);
+          }).not.toThrowError(/400/);
+        });
+      });
+
+      // TODO: more tests  
+    });
   });
 }
-- 
2.7.4


From 060ddb85d11ea0be713bda2a6f42e2c0d1e225bc Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 20:07:36 +0200
Subject: [PATCH 178/375] Step 15.1: Add ngShow to PartyAdd

---
 imports/ui/components/partiesList/partiesList.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/imports/ui/components/partiesList/partiesList.html b/imports/ui/components/partiesList/partiesList.html
index 4881e5c..d6d4c83 100644
--- a/imports/ui/components/partiesList/partiesList.html
+++ b/imports/ui/components/partiesList/partiesList.html
@@ -1,4 +1,4 @@
-<party-add></party-add>
+<party-add ng-show="partiesList.isLoggedIn"></party-add>
 
 <input type="search" ng-model="partiesList.searchText" placeholder="Search" />
 
-- 
2.7.4


From c1d304e1a1a78eaccb8e0ab75c8390f44cf777f7 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 20:09:16 +0200
Subject: [PATCH 179/375] Step 15.2: Add isLoggedIn helper

---
 imports/ui/components/partiesList/partiesList.js | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/imports/ui/components/partiesList/partiesList.js b/imports/ui/components/partiesList/partiesList.js
index 5a10136..5f779e0 100644
--- a/imports/ui/components/partiesList/partiesList.js
+++ b/imports/ui/components/partiesList/partiesList.js
@@ -45,6 +45,9 @@ class PartiesList {
       },
       partiesCount() {
         return Counts.get('numberOfParties');
+      },
+      isLoggedIn() {
+        return !!Meteor.userId();
       }
     });
   }
-- 
2.7.4


From aac2548fc156b3065bbbb4b99e64f19f223c7b50 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 20:09:45 +0200
Subject: [PATCH 180/375] Step 15.3: Add usage for ng-hide

---
 imports/ui/components/partiesList/partiesList.html | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/imports/ui/components/partiesList/partiesList.html b/imports/ui/components/partiesList/partiesList.html
index d6d4c83..c3006d3 100644
--- a/imports/ui/components/partiesList/partiesList.html
+++ b/imports/ui/components/partiesList/partiesList.html
@@ -1,4 +1,7 @@
 <party-add ng-show="partiesList.isLoggedIn"></party-add>
+<div ng-hide="partiesList.isLoggedIn">
+  Log in to create a party!
+</div>
 
 <input type="search" ng-model="partiesList.searchText" placeholder="Search" />
 
-- 
2.7.4


From 7188447bdb64d5c0a73efe92105361e4bf5336dc Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 20:10:23 +0200
Subject: [PATCH 181/375] Step 15.4: Add ngShow to PartyRsvp

---
 imports/ui/components/partiesList/partiesList.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/imports/ui/components/partiesList/partiesList.html b/imports/ui/components/partiesList/partiesList.html
index c3006d3..07d331f 100644
--- a/imports/ui/components/partiesList/partiesList.html
+++ b/imports/ui/components/partiesList/partiesList.html
@@ -14,7 +14,7 @@
     </a>
     <p>{{party.description}}</p>
     <party-remove party="party"></party-remove>
-    <party-rsvp party="party"></party-rsvp>
+    <party-rsvp party="party" ng-show="partiesList.isLoggedIn"></party-rsvp>
     <party-rsvps-list rsvps="party.rsvps"></party-rsvps-list>
     <party-unanswered party="party"></party-unanswered>
     <party-creator party="party"></party-creator>
-- 
2.7.4


From 3fa3de7a04feb10afa5f4e21c5e38db44b6e7144 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 20:10:48 +0200
Subject: [PATCH 182/375] Step 15.5: Add message for not-logged in users on the
 RSVP buttons

---
 imports/ui/components/partiesList/partiesList.html | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/imports/ui/components/partiesList/partiesList.html b/imports/ui/components/partiesList/partiesList.html
index 07d331f..3b4a085 100644
--- a/imports/ui/components/partiesList/partiesList.html
+++ b/imports/ui/components/partiesList/partiesList.html
@@ -15,6 +15,10 @@
     <p>{{party.description}}</p>
     <party-remove party="party"></party-remove>
     <party-rsvp party="party" ng-show="partiesList.isLoggedIn"></party-rsvp>
+    <div ng-hide="partiesList.isLoggedIn">
+      <i>Sign in to RSVP for this party.</i>
+    </div>
+    
     <party-rsvps-list rsvps="party.rsvps"></party-rsvps-list>
     <party-unanswered party="party"></party-unanswered>
     <party-creator party="party"></party-creator>
-- 
2.7.4


From 66b6605856829b8826c07d8b8ddcbedf03451c14 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 20:12:56 +0200
Subject: [PATCH 183/375] Step 15.6: Add isOwner method

---
 imports/ui/components/partiesList/partiesList.js | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/imports/ui/components/partiesList/partiesList.js b/imports/ui/components/partiesList/partiesList.js
index 5f779e0..f139a7a 100644
--- a/imports/ui/components/partiesList/partiesList.js
+++ b/imports/ui/components/partiesList/partiesList.js
@@ -48,10 +48,17 @@ class PartiesList {
       },
       isLoggedIn() {
         return !!Meteor.userId();
+      },
+      currentUserId() {
+        return Meteor.userId();
       }
     });
   }
 
+  isOwner(party) {
+    return this.isLoggedIn && party.owner === this.currentUserId;
+  }
+
   pageChanged(newPage) {
     this.page = newPage;
   }
-- 
2.7.4


From d1daa29b4daa38592519f2a8b1a359021e3279f2 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 20:13:51 +0200
Subject: [PATCH 184/375] Step 15.7: Add ngShow to PartyRemove

---
 imports/ui/components/partiesList/partiesList.html | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/imports/ui/components/partiesList/partiesList.html b/imports/ui/components/partiesList/partiesList.html
index 3b4a085..fbc61a9 100644
--- a/imports/ui/components/partiesList/partiesList.html
+++ b/imports/ui/components/partiesList/partiesList.html
@@ -13,12 +13,12 @@
       {{party.name}}
     </a>
     <p>{{party.description}}</p>
-    <party-remove party="party"></party-remove>
+    <party-remove party="party" ng-show="partiesList.isOwner(party)"></party-remove>
     <party-rsvp party="party" ng-show="partiesList.isLoggedIn"></party-rsvp>
     <div ng-hide="partiesList.isLoggedIn">
       <i>Sign in to RSVP for this party.</i>
     </div>
-    
+
     <party-rsvps-list rsvps="party.rsvps"></party-rsvps-list>
     <party-unanswered party="party"></party-unanswered>
     <party-creator party="party"></party-creator>
-- 
2.7.4


From 74c0388d11a7900081143006834719a005c38031 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 20:15:08 +0200
Subject: [PATCH 185/375] Step 15.8: Add ngIf to PartyUnanswered

---
 imports/ui/components/partiesList/partiesList.html | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partiesList/partiesList.html b/imports/ui/components/partiesList/partiesList.html
index fbc61a9..c4cc2c1 100644
--- a/imports/ui/components/partiesList/partiesList.html
+++ b/imports/ui/components/partiesList/partiesList.html
@@ -20,7 +20,12 @@
     </div>
 
     <party-rsvps-list rsvps="party.rsvps"></party-rsvps-list>
-    <party-unanswered party="party"></party-unanswered>
+
+    <party-unanswered party="party" ng-if="!party.public"></party-unanswered>
+    <div ng-if="party.public">
+      Everyone is invited
+    </div>
+
     <party-creator party="party"></party-creator>
   </li>
 </ul>
-- 
2.7.4


From d0760639220cc17b69cc0e6a7f88754bcaf2f8e2 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 20:16:17 +0200
Subject: [PATCH 186/375] Step 15.9: Add canInvite method to the component

---
 imports/ui/components/partyDetails/partyDetails.js | 8 ++++++++
 1 file changed, 8 insertions(+)

diff --git a/imports/ui/components/partyDetails/partyDetails.js b/imports/ui/components/partyDetails/partyDetails.js
index 21bf1a3..db84949 100644
--- a/imports/ui/components/partyDetails/partyDetails.js
+++ b/imports/ui/components/partyDetails/partyDetails.js
@@ -31,6 +31,14 @@ class PartyDetails {
     });
   }
 
+  canInvite() {
+    if (!this.party) {
+      return false;
+    }
+
+    return !this.party.public && this.party.owner === Meteor.userId();
+  }
+
   save() {
     Parties.update({
       _id: this.party._id
-- 
2.7.4


From 857eba85b59115010ca6baa224b3e4d414041780 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 20:18:07 +0200
Subject: [PATCH 187/375] Step 15.10: Add ngShow to PartyUninvited

---
 imports/ui/components/partyDetails/partyDetails.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/imports/ui/components/partyDetails/partyDetails.html b/imports/ui/components/partyDetails/partyDetails.html
index 916f23e..ab7abd9 100644
--- a/imports/ui/components/partyDetails/partyDetails.html
+++ b/imports/ui/components/partyDetails/partyDetails.html
@@ -8,4 +8,4 @@ The party your selected is:
 
 <button ui-sref="parties">Back</button>
 
-<party-uninvited party="partyDetails.party"></party-uninvited>
+<party-uninvited party="partyDetails.party" ng-show="partyDetails.canInvite()"></party-uninvited>
-- 
2.7.4


From cf1f43afc35a5760d39b3f42d53ddaa4d9bdbc7c Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 20:18:54 +0200
Subject: [PATCH 188/375] Step 15.11: Add info that everyone are already
 invited

---
 imports/ui/components/partyUninvited/partyUninvited.html | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/imports/ui/components/partyUninvited/partyUninvited.html b/imports/ui/components/partyUninvited/partyUninvited.html
index 0cbb435..86d2519 100644
--- a/imports/ui/components/partyUninvited/partyUninvited.html
+++ b/imports/ui/components/partyUninvited/partyUninvited.html
@@ -4,4 +4,7 @@
     <div>{{ user | displayNameFilter }}</div>
     <button ng-click="partyUninvited.invite(user)">Invite</button>
   </li>
+  <li ng-if="(partyUninvited.users | uninvitedFilter:partyUninvited.party).length <= 0">
+    Everyone are already invited.
+  </li>
 </ul>
-- 
2.7.4


From 141ef0099224b30b1e6176fa9f40637a24456e62 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 20:19:54 +0200
Subject: [PATCH 189/375] Step 15.12: Add isLoggedIn helper to the party
 details component

---
 imports/ui/components/partyDetails/partyDetails.js | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/imports/ui/components/partyDetails/partyDetails.js b/imports/ui/components/partyDetails/partyDetails.js
index db84949..b922b82 100644
--- a/imports/ui/components/partyDetails/partyDetails.js
+++ b/imports/ui/components/partyDetails/partyDetails.js
@@ -27,6 +27,9 @@ class PartyDetails {
       },
       users() {
         return Meteor.users.find({});
+      },
+      isLoggedIn() {
+        return !!Meteor.userId();
       }
     });
   }
-- 
2.7.4


From b8e70029dab9f5b44534e1e2c6b9008ba8fdee92 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 20:20:39 +0200
Subject: [PATCH 190/375] Step 15.13: Add usage for ng-disabled

---
 imports/ui/components/partyDetails/partyDetails.html | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/imports/ui/components/partyDetails/partyDetails.html b/imports/ui/components/partyDetails/partyDetails.html
index ab7abd9..e53812d 100644
--- a/imports/ui/components/partyDetails/partyDetails.html
+++ b/imports/ui/components/partyDetails/partyDetails.html
@@ -1,8 +1,8 @@
 The party your selected is:
 <form>
-  Party name: <input type="text" ng-model="partyDetails.party.name" />
-  Description: <input type="text" ng-model="partyDetails.party.description" />
-  Public Party? <input type="checkbox" ng-model="partyDetails.party.public">
+  Party name: <input type="text" ng-model="partyDetails.party.name" ng-disabled="!partyDetails.isLoggedIn"/>
+  Description: <input type="text" ng-model="partyDetails.party.description" ng-disabled="!partyDetails.isLoggedIn"/>
+  Public Party? <input type="checkbox" ng-model="partyDetails.party.public" ng-disabled="!partyDetails.isLoggedIn"/>
   <button ng-click="partyDetails.save()">Save</button>
 </form>
 
-- 
2.7.4


From 014fc16079f6be5e7117276dc1d442c5448f9605 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 20:22:55 +0200
Subject: [PATCH 191/375] Step 16.1: Install `angular-google-maps`

---
 package.json | 1 +
 1 file changed, 1 insertion(+)

diff --git a/package.json b/package.json
index 6d220f0..2a644d9 100644
--- a/package.json
+++ b/package.json
@@ -7,6 +7,7 @@
   },
   "dependencies": {
     "angular": "^1.5.3",
+    "angular-google-maps": "^2.3.2",
     "angular-meteor": "^1.3.9",
     "angular-ui-router": "^1.0.0-alpha.4",
     "angular-utils-pagination": "^0.11.1",
-- 
2.7.4


From d2c845b58e52e2b666376e491316da86857d9ff3 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 20:23:36 +0200
Subject: [PATCH 192/375] Step 16.2: Install `angular-simple-logger`

---
 package.json | 1 +
 1 file changed, 1 insertion(+)

diff --git a/package.json b/package.json
index 2a644d9..1bb773a 100644
--- a/package.json
+++ b/package.json
@@ -9,6 +9,7 @@
     "angular": "^1.5.3",
     "angular-google-maps": "^2.3.2",
     "angular-meteor": "^1.3.9",
+    "angular-simple-logger": "^0.1.7",
     "angular-ui-router": "^1.0.0-alpha.4",
     "angular-utils-pagination": "^0.11.1",
     "meteor-node-stubs": "~0.2.0",
-- 
2.7.4


From 81f79489d2bb9a6090a789047e2806c3155564dd Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 20:24:57 +0200
Subject: [PATCH 193/375] Step 16.3: Create template for PartyMap

---
 imports/ui/components/partyMap/partyMap.html | 5 +++++
 1 file changed, 5 insertions(+)
 create mode 100644 imports/ui/components/partyMap/partyMap.html

diff --git a/imports/ui/components/partyMap/partyMap.html b/imports/ui/components/partyMap/partyMap.html
new file mode 100644
index 0000000..e590420
--- /dev/null
+++ b/imports/ui/components/partyMap/partyMap.html
@@ -0,0 +1,5 @@
+<div class="angular-google-map-container">
+  <ui-gmap-google-map center="partyMap.location || partyMap.map.center" events="partyMap.map.events" zoom="partyMap.map.zoom">
+    <ui-gmap-marker coords="partyMap.location" options="partyMap.marker.options" events="partyMapmarker.events" idKey="party-location"></ui-gmap-marker>
+  </ui-gmap-google-map>
+</div>
-- 
2.7.4


From e61cda175ad1eecb0811fd4b48eb49846ce6235f Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 20:25:56 +0200
Subject: [PATCH 194/375] Step 16.4: Create component

---
 imports/ui/components/partyMap/partyMap.js | 44 ++++++++++++++++++++++++++++++
 1 file changed, 44 insertions(+)
 create mode 100644 imports/ui/components/partyMap/partyMap.js

diff --git a/imports/ui/components/partyMap/partyMap.js b/imports/ui/components/partyMap/partyMap.js
new file mode 100644
index 0000000..73c6163
--- /dev/null
+++ b/imports/ui/components/partyMap/partyMap.js
@@ -0,0 +1,44 @@
+import angular from 'angular';
+import angularMeteor from 'angular-meteor';
+import 'angular-simple-logger';
+import 'angular-google-maps';
+
+import './partyMap.html';
+
+class PartyMap {
+  constructor($scope) {
+    'ngInject';
+
+    this.map = {
+      center: {
+        latitude: 45,
+        longitude: -73
+      },
+      zoom: 8,
+      events: {}
+    };
+
+    this.marker = {
+      options: {
+        draggable: true
+      },
+      events: {}
+    };
+  }
+}
+
+const name = 'partyMap';
+
+// create a module
+export default angular.module(name, [
+  angularMeteor,
+  'nemLogging', // https://github.com/angular-ui/angular-google-maps/issues/1633
+  'uiGmapgoogle-maps'
+]).component(name, {
+  templateUrl: `imports/ui/components/${name}/${name}.html`,
+  controllerAs: name,
+  bindings: {
+    location: '='
+  },
+  controller: PartyMap
+});
-- 
2.7.4


From e4c1b97ffb135dd34348a132bd49cdaaf39bc4d8 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 20:27:32 +0200
Subject: [PATCH 195/375] Step 16.5: Add some class

---
 imports/ui/components/partyMap/partyMap.css | 4 ++++
 1 file changed, 4 insertions(+)
 create mode 100644 imports/ui/components/partyMap/partyMap.css

diff --git a/imports/ui/components/partyMap/partyMap.css b/imports/ui/components/partyMap/partyMap.css
new file mode 100644
index 0000000..f4b49f5
--- /dev/null
+++ b/imports/ui/components/partyMap/partyMap.css
@@ -0,0 +1,4 @@
+.angular-google-map-container {
+  height: 400px;
+  width: 400px;
+}
-- 
2.7.4


From 6db5b2cd5e4d6c7bcf76285939d59449f54778c8 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 20:28:08 +0200
Subject: [PATCH 196/375] Step 16.6: Import styles

---
 imports/ui/components/partyMap/partyMap.js | 1 +
 1 file changed, 1 insertion(+)

diff --git a/imports/ui/components/partyMap/partyMap.js b/imports/ui/components/partyMap/partyMap.js
index 73c6163..393fc10 100644
--- a/imports/ui/components/partyMap/partyMap.js
+++ b/imports/ui/components/partyMap/partyMap.js
@@ -3,6 +3,7 @@ import angularMeteor from 'angular-meteor';
 import 'angular-simple-logger';
 import 'angular-google-maps';
 
+import './partyMap.css';
 import './partyMap.html';
 
 class PartyMap {
-- 
2.7.4


From 974bb391ae9433d634e1106b11bad33dc76053a8 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 20:29:34 +0200
Subject: [PATCH 197/375] Step 16.7: Add as a dependency to PartyDetails

---
 imports/ui/components/partyDetails/partyDetails.js | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partyDetails/partyDetails.js b/imports/ui/components/partyDetails/partyDetails.js
index b922b82..0d125cc 100644
--- a/imports/ui/components/partyDetails/partyDetails.js
+++ b/imports/ui/components/partyDetails/partyDetails.js
@@ -7,6 +7,7 @@ import { Meteor } from 'meteor/meteor';
 import './partyDetails.html';
 import { Parties } from '../../../api/parties';
 import { name as PartyUninvited } from '../partyUninvited/partyUninvited';
+import { name as PartyMap } from '../partyMap/partyMap';
 
 class PartyDetails {
   constructor($stateParams, $scope, $reactive) {
@@ -67,7 +68,8 @@ const name = 'partyDetails';
 export default angular.module(name, [
   angularMeteor,
   uiRouter,
-  PartyUninvited
+  PartyUninvited,
+  PartyMap
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
   controllerAs: name,
-- 
2.7.4


From ac1e6ca5834dfe98d0685be7438ccaaae407248e Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 20:42:54 +0200
Subject: [PATCH 198/375] Step 16.8: Use in the view

---
 imports/ui/components/partyDetails/partyDetails.html | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/imports/ui/components/partyDetails/partyDetails.html b/imports/ui/components/partyDetails/partyDetails.html
index e53812d..7354dd6 100644
--- a/imports/ui/components/partyDetails/partyDetails.html
+++ b/imports/ui/components/partyDetails/partyDetails.html
@@ -9,3 +9,5 @@ The party your selected is:
 <button ui-sref="parties">Back</button>
 
 <party-uninvited party="partyDetails.party" ng-show="partyDetails.canInvite()"></party-uninvited>
+
+<party-map location="partyDetails.party.location"></party-map>
-- 
2.7.4


From dfa72ffc522f887031e899631851c758aa2011e6 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 20:44:36 +0200
Subject: [PATCH 199/375] Step 16.9: Add actions

---
 imports/ui/components/partyMap/partyMap.js | 21 +++++++++++++++++++--
 1 file changed, 19 insertions(+), 2 deletions(-)

diff --git a/imports/ui/components/partyMap/partyMap.js b/imports/ui/components/partyMap/partyMap.js
index 393fc10..5fe2dfa 100644
--- a/imports/ui/components/partyMap/partyMap.js
+++ b/imports/ui/components/partyMap/partyMap.js
@@ -16,14 +16,31 @@ class PartyMap {
         longitude: -73
       },
       zoom: 8,
-      events: {}
+      events: {
+        click: (mapModel, eventName, originalEventArgs) => {
+          this.setLocation(originalEventArgs[0].latLng.lat(), originalEventArgs[0].latLng.lng());
+          $scope.$apply();
+        }
+      }
     };
 
     this.marker = {
       options: {
         draggable: true
       },
-      events: {}
+      events: {
+        dragend: (marker, eventName, args) => {
+          this.setLocation(marker.getPosition().lat(), marker.getPosition().lng());
+          $scope.$apply();
+        }
+      }
+    };
+  }
+
+  setLocation(latitude, longitude) {
+    this.location = {
+      latitude,
+      longitude
     };
   }
 }
-- 
2.7.4


From e497e3fca63c730e6e2a78ae336c8231f8c0b380 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 20:45:34 +0200
Subject: [PATCH 200/375] Step 16.10: Add location to be updated with a party

---
 imports/ui/components/partyDetails/partyDetails.js | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partyDetails/partyDetails.js b/imports/ui/components/partyDetails/partyDetails.js
index 0d125cc..259012b 100644
--- a/imports/ui/components/partyDetails/partyDetails.js
+++ b/imports/ui/components/partyDetails/partyDetails.js
@@ -50,7 +50,8 @@ class PartyDetails {
       $set: {
         name: this.party.name,
         description: this.party.description,
-        public: this.party.public
+        public: this.party.public,
+        location: this.party.location
       }
     }, (error) => {
       if (error) {
-- 
2.7.4


From 95d7dd2864dd704d638d4dd9500b3d6a21ac9218 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 20:49:27 +0200
Subject: [PATCH 201/375] Step 16.11: Create view for PartiesMap

---
 imports/ui/components/partiesMap/partiesMap.html | 5 +++++
 1 file changed, 5 insertions(+)
 create mode 100644 imports/ui/components/partiesMap/partiesMap.html

diff --git a/imports/ui/components/partiesMap/partiesMap.html b/imports/ui/components/partiesMap/partiesMap.html
new file mode 100644
index 0000000..a488738
--- /dev/null
+++ b/imports/ui/components/partiesMap/partiesMap.html
@@ -0,0 +1,5 @@
+<div class="angular-google-map-container">
+  <ui-gmap-google-map center="partiesMap.map.center" zoom="partiesMap.map.zoom">
+    <ui-gmap-markers models="partiesMap.parties" coords="'location'" fit="true" idkey="'_id'" doRebuildAll="true"></ui-gmap-markers>
+  </ui-gmap-google-map>
+</div>
-- 
2.7.4


From e954a51a919f9e400822ac0dea3ec9db79e0e329 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 20:49:42 +0200
Subject: [PATCH 202/375] Step 16.12: Create component

---
 imports/ui/components/partiesMap/partiesMap.js | 37 ++++++++++++++++++++++++++
 1 file changed, 37 insertions(+)
 create mode 100644 imports/ui/components/partiesMap/partiesMap.js

diff --git a/imports/ui/components/partiesMap/partiesMap.js b/imports/ui/components/partiesMap/partiesMap.js
new file mode 100644
index 0000000..6759672
--- /dev/null
+++ b/imports/ui/components/partiesMap/partiesMap.js
@@ -0,0 +1,37 @@
+import angular from 'angular';
+import angularMeteor from 'angular-meteor';
+import 'angular-simple-logger';
+import 'angular-google-maps';
+
+import './partiesMap.html';
+
+/**
+ * PartiesMap component
+ */
+class PartiesMap {
+  constructor() {
+    this.map = {
+      center: {
+        latitude: 45,
+        longitude: -73
+      },
+      zoom: 8
+    };
+  }
+}
+
+const name = 'partiesMap';
+
+// create a module
+export default angular.module(name, [
+  angularMeteor,
+  'nemLogging', // https://github.com/angular-ui/angular-google-maps/issues/1633
+  'uiGmapgoogle-maps'
+]).component(name, {
+  templateUrl: `imports/ui/components/${name}/${name}.html`,
+  controllerAs: name,
+  bindings: {
+    parties: '='
+  },
+  controller: PartiesMap
+});
-- 
2.7.4


From 313e6ac22606c74ced3c6c36a103621ad71b87a4 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 20:49:56 +0200
Subject: [PATCH 203/375] Step 16.13: Add as a dependency

---
 imports/ui/components/partiesList/partiesList.js | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/imports/ui/components/partiesList/partiesList.js b/imports/ui/components/partiesList/partiesList.js
index f139a7a..9a1811b 100644
--- a/imports/ui/components/partiesList/partiesList.js
+++ b/imports/ui/components/partiesList/partiesList.js
@@ -8,6 +8,7 @@ import { Counts } from 'meteor/tmeasday:publish-counts';
 import './partiesList.html';
 import { Parties } from '../../../api/parties';
 import { name as PartiesSort } from '../partiesSort/partiesSort';
+import { name as PartiesMap } from '../partiesMap/partiesMap';
 import { name as PartyAdd } from '../partyAdd/partyAdd';
 import { name as PartyRemove } from '../partyRemove/partyRemove';
 import { name as PartyCreator } from '../partyCreator/partyCreator';
@@ -76,6 +77,7 @@ export default angular.module(name, [
   uiRouter,
   utilsPagination,
   PartiesSort,
+  PartiesMap,
   PartyAdd,
   PartyRemove,
   PartyCreator,
-- 
2.7.4


From 08aaac5205bdc8dcd6d62885b51ea7491ad0e03d Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 7 Apr 2016 20:50:10 +0200
Subject: [PATCH 204/375] Step 16.14: Implement in the view

---
 imports/ui/components/partiesList/partiesList.html | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/imports/ui/components/partiesList/partiesList.html b/imports/ui/components/partiesList/partiesList.html
index c4cc2c1..a7984f6 100644
--- a/imports/ui/components/partiesList/partiesList.html
+++ b/imports/ui/components/partiesList/partiesList.html
@@ -31,3 +31,6 @@
 </ul>
 
 <dir-pagination-controls on-page-change="partiesList.pageChanged(newPageNumber)"></dir-pagination-controls>
+
+
+<parties-map parties="partiesList.parties"></parties-map>
-- 
2.7.4


From 5f9699297201e8a797394abaa343d00c23205773 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 00:31:49 +0200
Subject: [PATCH 205/375] Step 17.1: Install `bootstrap`

---
 package.json | 1 +
 1 file changed, 1 insertion(+)

diff --git a/package.json b/package.json
index 1bb773a..9f874c7 100644
--- a/package.json
+++ b/package.json
@@ -12,6 +12,7 @@
     "angular-simple-logger": "^0.1.7",
     "angular-ui-router": "^1.0.0-alpha.4",
     "angular-utils-pagination": "^0.11.1",
+    "bootstrap": "^4.0.0-alpha.2",
     "meteor-node-stubs": "~0.2.0",
     "underscore": "^1.8.3"
   },
-- 
2.7.4


From dd50a78fc970c4e9128c82e08e86b74ccc4a8b54 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 00:32:37 +0200
Subject: [PATCH 206/375] Step 17.2: Add `less` package

---
 .meteor/packages | 1 +
 1 file changed, 1 insertion(+)

diff --git a/.meteor/packages b/.meteor/packages
index 53045cd..1b86693 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -27,3 +27,4 @@ accounts-twitter
 tmeasday:publish-counts
 check
 email
+less
-- 
2.7.4


From f6cb24187d1623f44f4c360bab8af7ab854fa0ff Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 00:34:27 +0200
Subject: [PATCH 207/375] Step 17.3: Add main.less

---
 client/main.less | 3 +++
 1 file changed, 3 insertions(+)
 create mode 100644 client/main.less

diff --git a/client/main.less b/client/main.less
new file mode 100644
index 0000000..1c1bc90
--- /dev/null
+++ b/client/main.less
@@ -0,0 +1,3 @@
+body {
+  background-color: #f9f9f9;
+}
-- 
2.7.4


From 39aa99926d21bcf813d1b3f4bf3db58ce4e06eaa Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:03:30 +0200
Subject: [PATCH 208/375] Step 17.4: Import bootstrap

---
 client/main.js | 1 +
 1 file changed, 1 insertion(+)

diff --git a/client/main.js b/client/main.js
index 06731e1..52cb827 100644
--- a/client/main.js
+++ b/client/main.js
@@ -1,4 +1,5 @@
 import angular from 'angular';
+import 'bootstrap/dist/css/bootstrap.css';
 
 import { Meteor } from 'meteor/meteor';
 
-- 
2.7.4


From 69d8e4fa6fc5923f20d14b90d108d358b55d3bb4 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:04:28 +0200
Subject: [PATCH 209/375] Step 17.5: Import future Socially less file

---
 client/main.less | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/client/main.less b/client/main.less
index 1c1bc90..4368004 100644
--- a/client/main.less
+++ b/client/main.less
@@ -1,3 +1,5 @@
 body {
   background-color: #f9f9f9;
 }
+
+@import "../imports/ui/components/socially/socially.less";
-- 
2.7.4


From df256812b394f048c7987012dc6474e0d4b77579 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:05:42 +0200
Subject: [PATCH 210/375] Step 17.6: Refactor Socially

---
 imports/ui/components/socially/socially.html | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

diff --git a/imports/ui/components/socially/socially.html b/imports/ui/components/socially/socially.html
index 83c40e7..2e91050 100644
--- a/imports/ui/components/socially/socially.html
+++ b/imports/ui/components/socially/socially.html
@@ -1,5 +1,3 @@
-<login-buttons></login-buttons>
+<navigation class="navbar navbar-static-top navbar-dark bg-inverse"></navigation>
 
-<navigation></navigation>
-
-<div ui-view=""></div>
+<div ui-view="" class="container-fluid"></div>
-- 
2.7.4


From cb28a5506ab485e8308a94c6af017a5fc5c87109 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:06:24 +0200
Subject: [PATCH 211/375] Step 17.7: Styles for Socially

---
 imports/ui/components/socially/socially.less | 3 +++
 1 file changed, 3 insertions(+)
 create mode 100644 imports/ui/components/socially/socially.less

diff --git a/imports/ui/components/socially/socially.less b/imports/ui/components/socially/socially.less
new file mode 100644
index 0000000..eec0480
--- /dev/null
+++ b/imports/ui/components/socially/socially.less
@@ -0,0 +1,3 @@
+socially {
+  display: block;
+}
-- 
2.7.4


From b79c14a9ce8a93db157d41d22fbd2554a274abad Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:06:51 +0200
Subject: [PATCH 212/375] Step 17.8: Refactor index.html

---
 client/index.html | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/client/index.html b/client/index.html
index 0a26426..d4505ca 100644
--- a/client/index.html
+++ b/client/index.html
@@ -1,5 +1,10 @@
 <head>
+  <meta charset="utf-8">
+  <meta http-equiv="X-UA-Compatible" content="IE=edge">
+  <meta name="viewport" content="width=device-width, initial-scale=1">
   <base href="/">
+  <title>Socially</title>
+  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
 </head>
 <body>
   <socially></socially>
-- 
2.7.4


From 13e72e57e4772781f063e97a01a436cd5689a96b Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:07:16 +0200
Subject: [PATCH 213/375] Step 17.9: Refactor Navigation

---
 imports/ui/components/navigation/navigation.html | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

diff --git a/imports/ui/components/navigation/navigation.html b/imports/ui/components/navigation/navigation.html
index def2640..2bcae64 100644
--- a/imports/ui/components/navigation/navigation.html
+++ b/imports/ui/components/navigation/navigation.html
@@ -1,3 +1,6 @@
-<h1>
-  <a href="/parties">Home</a>
-</h1>
+<div class="fluid-container">
+  <div class="navbar-header">
+    <a href="/parties" class="navbar-brand">Socially</a>
+    <login-buttons class="navbar-brand"></login-buttons>
+  </div>
+</div>
-- 
2.7.4


From 6960b5053ed50202999b328adf27c3b0737db83e Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:08:18 +0200
Subject: [PATCH 214/375] Step 17.10: Styles for Navigation

---
 imports/ui/components/navigation/navigation.less | 3 +++
 1 file changed, 3 insertions(+)
 create mode 100644 imports/ui/components/navigation/navigation.less

diff --git a/imports/ui/components/navigation/navigation.less b/imports/ui/components/navigation/navigation.less
new file mode 100644
index 0000000..4035b7b
--- /dev/null
+++ b/imports/ui/components/navigation/navigation.less
@@ -0,0 +1,3 @@
+navigation {
+  display: block;
+}
-- 
2.7.4


From 08a7d564af4af836d8d212c18049e912724d5569 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:08:50 +0200
Subject: [PATCH 215/375] Step 17.11: Refactor PartiesList

---
 imports/ui/components/partiesList/partiesList.html | 94 ++++++++++++++--------
 1 file changed, 62 insertions(+), 32 deletions(-)

diff --git a/imports/ui/components/partiesList/partiesList.html b/imports/ui/components/partiesList/partiesList.html
index a7984f6..29c4c69 100644
--- a/imports/ui/components/partiesList/partiesList.html
+++ b/imports/ui/components/partiesList/partiesList.html
@@ -1,36 +1,66 @@
-<party-add ng-show="partiesList.isLoggedIn"></party-add>
-<div ng-hide="partiesList.isLoggedIn">
-  Log in to create a party!
-</div>
-
-<input type="search" ng-model="partiesList.searchText" placeholder="Search" />
-
-<parties-sort on-change="partiesList.sortChanged(sort)" property="name" order="1"></parties-sort>
+<div class="container-fluid">
+  <div class="row">
+    <div class="col-md-12">
+      <party-add ng-show="partiesList.isLoggedIn"></party-add>
 
-<ul>
-  <li dir-paginate="party in partiesList.parties | itemsPerPage: partiesList.perPage" total-items="partiesList.partiesCount">
-    <a ui-sref="partyDetails({ partyId: party._id })">
-      {{party.name}}
-    </a>
-    <p>{{party.description}}</p>
-    <party-remove party="party" ng-show="partiesList.isOwner(party)"></party-remove>
-    <party-rsvp party="party" ng-show="partiesList.isLoggedIn"></party-rsvp>
-    <div ng-hide="partiesList.isLoggedIn">
-      <i>Sign in to RSVP for this party.</i>
+      <div class="alert alert-warning" role="alert" ng-hide="partiesList.isLoggedIn">
+        <strong>Warning!</strong>
+        Log in to create a party!
+      </div>
     </div>
-
-    <party-rsvps-list rsvps="party.rsvps"></party-rsvps-list>
-
-    <party-unanswered party="party" ng-if="!party.public"></party-unanswered>
-    <div ng-if="party.public">
-      Everyone is invited
+  </div>
+  <div class="row">
+    <div class="col-md-12">
+      <h2>List of parties:</h2>
+      <form class="form-inline">
+        <div class="form-group">
+          <input type="search" ng-model="partiesList.searchText" placeholder="Search" class="form-control"/>
+        </div>
+        <parties-sort class="form-group" on-change="partiesList.sortChanged(sort)" property="name" order="1"></parties-sort>
+      </form>
     </div>
+  </div>
+  <div class="row">
+    <div class="col-md-6">
+      <ul class="parties">
+        <li dir-paginate="party in partiesList.parties | itemsPerPage: partiesList.perPage" total-items="partiesList.partiesCount">
+          <div class="row">
+            <div class="col-sm-8">
+              <h3 class="party-name">
+                <a ui-sref="partyDetails({ partyId: party._id })">{{party.name}}</a>
+              </h3>
+              <p class="party-description">
+                {{party.description}}
+              </p>
+            </div>
+            <div class="col-sm-4">
+              <party-remove party="party" ng-show="partiesList.isOwner(party)"></party-remove>
+            </div>
+          </div>
+          <div class="row">
+            <div class="col-md-12">
+              <party-rsvp party="party" ng-show="partiesList.isLoggedIn"></party-rsvp>
+              <div class="alert alert-warning" role="alert" ng-hide="partiesList.isLoggedIn">
+                <strong>Warning!</strong>
+                <i>Sign in to RSVP for this party.</i>
+              </div>
+            </div>
+          </div>
+          <div class="row">
+            <div class="col-md-4">
+              <party-creator party="party"></party-creator>
+            </div>
+            <div class="col-md-8">
+              <party-rsvps-list rsvps="party.rsvps"></party-rsvps-list>
+            </div>
+          </div>
+        </li>
+      </ul>
 
-    <party-creator party="party"></party-creator>
-  </li>
-</ul>
-
-<dir-pagination-controls on-page-change="partiesList.pageChanged(newPageNumber)"></dir-pagination-controls>
-
-
-<parties-map parties="partiesList.parties"></parties-map>
+      <dir-pagination-controls on-page-change="partiesList.pageChanged(newPageNumber)"></dir-pagination-controls>
+    </div>
+    <div class="col-md-6">
+      <parties-map parties="partiesList.parties"></parties-map>
+    </div>
+  </div>
+</div>
-- 
2.7.4


From 26e8dc045997392ce3588f6636ac4f404f5b41ba Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:09:21 +0200
Subject: [PATCH 216/375] Step 17.12: Styles for PartiesList

---
 imports/ui/components/partiesList/partiesList.less | 30 ++++++++++++++++++++++
 1 file changed, 30 insertions(+)
 create mode 100644 imports/ui/components/partiesList/partiesList.less

diff --git a/imports/ui/components/partiesList/partiesList.less b/imports/ui/components/partiesList/partiesList.less
new file mode 100644
index 0000000..6cd14df
--- /dev/null
+++ b/imports/ui/components/partiesList/partiesList.less
@@ -0,0 +1,30 @@
+parties-list {
+  display: block;
+  padding: 25px 0;
+
+  ul.parties {
+    padding-left: 0;
+    list-style-type: none;
+
+    > li {
+      padding: 15px;
+      background-color: #fff;
+      margin: 15px 0;
+      border: 3px solid #eaeaea;
+
+     .party-name {
+       margin-top: 0px;
+       margin-bottom: 20px;
+       a {
+         text-decoration: none !important;
+         font-weight: 400;
+       }
+     }
+     .party-description {
+       font-weight: 300;
+       padding-left: 18px;
+       font-size: 14px;
+     }
+    }
+  }
+}
-- 
2.7.4


From e6b72d3491084e963de970696a19d84da2a6c0e6 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:09:54 +0200
Subject: [PATCH 217/375] Step 17.13: Refactor PartyAdd

---
 imports/ui/components/partyAdd/partyAdd.html | 31 ++++++++++++++++------------
 1 file changed, 18 insertions(+), 13 deletions(-)

diff --git a/imports/ui/components/partyAdd/partyAdd.html b/imports/ui/components/partyAdd/partyAdd.html
index 4db1888..7c4d284 100644
--- a/imports/ui/components/partyAdd/partyAdd.html
+++ b/imports/ui/components/partyAdd/partyAdd.html
@@ -1,15 +1,20 @@
 <form>
-  <label>
-    Party Name:
-  </label>
-  <input type="text" ng-model="partyAdd.party.name" />
-  <label>
-    Description:
-  </label>
-  <input type="text" ng-model="partyAdd.party.description" />
-  <label>
-    Public Party?
-  </label>
-  <input type="checkbox" ng-model="partyAdd.party.public">
-  <button ng-click="partyAdd.submit()">Add Party!</button>
+  <div class="form-group">
+    <label>
+      Party Name:
+    </label>
+    <input type="text" ng-model="partyAdd.party.name" class="form-control"/>
+  </div>
+  <div class="form-group">
+    <label>
+      Description:
+    </label>
+    <input type="text" ng-model="partyAdd.party.description" class="form-control"/>
+  </div>
+  <div class="checkbox">
+    <label>
+      <input type="checkbox" ng-model="partyAdd.party.public"/> Public Party?
+    </label>
+  </div>
+  <button ng-click="partyAdd.submit()" class="btn btn-success">Add Party!</button>
 </form>
-- 
2.7.4


From 9743ab59861453d89bf767a9509cb71687c5a712 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:10:22 +0200
Subject: [PATCH 218/375] Step 17.14: Styles for PartyAdd

---
 imports/ui/components/partyAdd/partyAdd.less | 10 ++++++++++
 1 file changed, 10 insertions(+)
 create mode 100644 imports/ui/components/partyAdd/partyAdd.less

diff --git a/imports/ui/components/partyAdd/partyAdd.less b/imports/ui/components/partyAdd/partyAdd.less
new file mode 100644
index 0000000..90b24c1
--- /dev/null
+++ b/imports/ui/components/partyAdd/partyAdd.less
@@ -0,0 +1,10 @@
+party-add {
+  display: block;
+}
+
+party-add > form {
+  padding: 15px;
+  margin-bottom: 25px;
+  background-color: #fff;
+  border: 3px solid #EAEAEC;
+}
-- 
2.7.4


From 9f84f46b1720e67b4a25925b107983d14ec61bc9 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:11:05 +0200
Subject: [PATCH 219/375] Step 17.15: Import PartyAdd

---
 imports/ui/components/partiesList/partiesList.less | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/imports/ui/components/partiesList/partiesList.less b/imports/ui/components/partiesList/partiesList.less
index 6cd14df..645d165 100644
--- a/imports/ui/components/partiesList/partiesList.less
+++ b/imports/ui/components/partiesList/partiesList.less
@@ -28,3 +28,5 @@ parties-list {
     }
   }
 }
+
+@import "../partyAdd/partyAdd.less";
-- 
2.7.4


From 2bbf616d3da4f8d7dda7b2cd1b7dba56727a6fec Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:11:45 +0200
Subject: [PATCH 220/375] Step 17.16: Refactor PartiesMap

---
 imports/ui/components/partiesMap/partiesMap.html | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/imports/ui/components/partiesMap/partiesMap.html b/imports/ui/components/partiesMap/partiesMap.html
index a488738..870b2f7 100644
--- a/imports/ui/components/partiesMap/partiesMap.html
+++ b/imports/ui/components/partiesMap/partiesMap.html
@@ -1,3 +1,6 @@
+<h4>
+  See all the parties:
+</h4>
 <div class="angular-google-map-container">
   <ui-gmap-google-map center="partiesMap.map.center" zoom="partiesMap.map.zoom">
     <ui-gmap-markers models="partiesMap.parties" coords="'location'" fit="true" idkey="'_id'" doRebuildAll="true"></ui-gmap-markers>
-- 
2.7.4


From 2c2b41713f75b707e2f6c51baac09141277483f5 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:12:13 +0200
Subject: [PATCH 221/375] Step 17.17: Styles for PartiesMap

---
 imports/ui/components/partiesMap/partiesMap.less | 9 +++++++++
 1 file changed, 9 insertions(+)
 create mode 100644 imports/ui/components/partiesMap/partiesMap.less

diff --git a/imports/ui/components/partiesMap/partiesMap.less b/imports/ui/components/partiesMap/partiesMap.less
new file mode 100644
index 0000000..020e970
--- /dev/null
+++ b/imports/ui/components/partiesMap/partiesMap.less
@@ -0,0 +1,9 @@
+parties-map {
+  display: block;
+  margin: 15px 5px;
+
+  .angular-google-map-container {
+    width: 100%;
+    height: 400px;
+  }
+}
-- 
2.7.4


From 2d9c9f51f51af6d4394adf9cccfc3d9be4bcb3ff Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:12:38 +0200
Subject: [PATCH 222/375] Step 17.18: Import PartiesMap

---
 imports/ui/components/partiesList/partiesList.less | 1 +
 1 file changed, 1 insertion(+)

diff --git a/imports/ui/components/partiesList/partiesList.less b/imports/ui/components/partiesList/partiesList.less
index 645d165..374d741 100644
--- a/imports/ui/components/partiesList/partiesList.less
+++ b/imports/ui/components/partiesList/partiesList.less
@@ -30,3 +30,4 @@ parties-list {
 }
 
 @import "../partyAdd/partyAdd.less";
+@import "../partiesMap/partiesMap.less";
-- 
2.7.4


From 13973d9ba0b5e9453f1e8555ef1a47ceda67d6c5 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:13:05 +0200
Subject: [PATCH 223/375] Step 17.19: Refactor PartiesSort

---
 imports/ui/components/partiesSort/partiesSort.html | 10 ++++------
 1 file changed, 4 insertions(+), 6 deletions(-)

diff --git a/imports/ui/components/partiesSort/partiesSort.html b/imports/ui/components/partiesSort/partiesSort.html
index cf2102b..b2a52b3 100644
--- a/imports/ui/components/partiesSort/partiesSort.html
+++ b/imports/ui/components/partiesSort/partiesSort.html
@@ -1,6 +1,4 @@
-<div>
-  <select ng-model="partiesSort.order" ng-change="partiesSort.changed()">
-    <option value="1">Ascending</option>
-    <option value="-1">Descending</option>
-  </select>
-</div>
+<select ng-model="partiesSort.order" ng-change="partiesSort.changed()" class="form-control">
+  <option value="1">Ascending</option>
+  <option value="-1">Descending</option>
+</select>
-- 
2.7.4


From d3c1541b1455a50cec3677c34b3a062be636a351 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:13:38 +0200
Subject: [PATCH 224/375] Step 17.20: Refactor PartyCreator

---
 imports/ui/components/partyCreator/partyCreator.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/imports/ui/components/partyCreator/partyCreator.html b/imports/ui/components/partyCreator/partyCreator.html
index de986fb..077739d 100644
--- a/imports/ui/components/partyCreator/partyCreator.html
+++ b/imports/ui/components/partyCreator/partyCreator.html
@@ -1,5 +1,5 @@
 <p>
   <small>
-    Posted by {{ partyCreator.creator | displayNameFilter }}
+    <i class="fa fa-user fa-lg"></i> {{ partyCreator.creator | displayNameFilter }}
   </small>
 </p>
-- 
2.7.4


From 28fee9ddeaf57d220305c3922007049be57bb052 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:14:04 +0200
Subject: [PATCH 225/375] Step 17.21: Styles for PartyCreator

---
 imports/ui/components/partyCreator/partyCreator.less | 6 ++++++
 1 file changed, 6 insertions(+)
 create mode 100644 imports/ui/components/partyCreator/partyCreator.less

diff --git a/imports/ui/components/partyCreator/partyCreator.less b/imports/ui/components/partyCreator/partyCreator.less
new file mode 100644
index 0000000..4679f1f
--- /dev/null
+++ b/imports/ui/components/partyCreator/partyCreator.less
@@ -0,0 +1,6 @@
+party-creator {
+  i.fa {
+    margin-left: 5px;
+    margin-right: 10px;
+  }
+}
-- 
2.7.4


From ba9cc32354a4cc1ce3d2cc15df5db62c8e7628f0 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:14:40 +0200
Subject: [PATCH 226/375] Step 17.22: Import PartyCreator

---
 imports/ui/components/partiesList/partiesList.less | 1 +
 1 file changed, 1 insertion(+)

diff --git a/imports/ui/components/partiesList/partiesList.less b/imports/ui/components/partiesList/partiesList.less
index 374d741..e73e928 100644
--- a/imports/ui/components/partiesList/partiesList.less
+++ b/imports/ui/components/partiesList/partiesList.less
@@ -31,3 +31,4 @@ parties-list {
 
 @import "../partyAdd/partyAdd.less";
 @import "../partiesMap/partiesMap.less";
+@import "../partyCreator/partyCreator.less";
-- 
2.7.4


From 5b8271b0d743ec9a59f141c8d229a300f458de9e Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:15:08 +0200
Subject: [PATCH 227/375] Step 17.23: Refactor PartyRemove

---
 imports/ui/components/partyRemove/partyRemove.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/imports/ui/components/partyRemove/partyRemove.html b/imports/ui/components/partyRemove/partyRemove.html
index 1295105..ebe46ea 100644
--- a/imports/ui/components/partyRemove/partyRemove.html
+++ b/imports/ui/components/partyRemove/partyRemove.html
@@ -1 +1 @@
-<button ng-click="partyRemove.remove()">X</button>
+<button type="button" class="close" aria-label="Close" ng-click="partyRemove.remove()"><span aria-hidden="true">&times;</span></button>
-- 
2.7.4


From cc7b236f59071140656135041c6980456834a744 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:15:48 +0200
Subject: [PATCH 228/375] Step 17.24: Refactor PartyRsvp

---
 imports/ui/components/partyRsvp/partyRsvp.html | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/imports/ui/components/partyRsvp/partyRsvp.html b/imports/ui/components/partyRsvp/partyRsvp.html
index ca15260..e4c078c 100644
--- a/imports/ui/components/partyRsvp/partyRsvp.html
+++ b/imports/ui/components/partyRsvp/partyRsvp.html
@@ -1,3 +1,3 @@
-<input type="button" value="I'm going!" ng-click="partyRsvp.yes()"/>
-<input type="button" value="Maybe" ng-click="partyRsvp.maybe()"/>
-<input type="button" value="No" ng-click="partyRsvp.no()"/>
+<input type="button" value="I'm going!" ng-click="partyRsvp.yes()" class="btn btn-default" ng-class="{'btn-primary' : partyRsvp.isYes()}"/>
+<input type="button" value="Maybe" ng-click="partyRsvp.maybe()" class="btn btn-default" ng-class="{'btn-primary' : partyRsvp.isMaybe()}"/>
+<input type="button" value="No" ng-click="partyRsvp.no()" class="btn btn-default" ng-class="{'btn-primary' : partyRsvp.isNo()}"/>
-- 
2.7.4


From 6f162864ba4a98c41650b0d580df8e28c203d4e6 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:16:13 +0200
Subject: [PATCH 229/375] Step 17.25: Styles for PartyRsvp

---
 imports/ui/components/partyRsvp/partyRsvp.less | 4 ++++
 1 file changed, 4 insertions(+)
 create mode 100644 imports/ui/components/partyRsvp/partyRsvp.less

diff --git a/imports/ui/components/partyRsvp/partyRsvp.less b/imports/ui/components/partyRsvp/partyRsvp.less
new file mode 100644
index 0000000..be52d51
--- /dev/null
+++ b/imports/ui/components/partyRsvp/partyRsvp.less
@@ -0,0 +1,4 @@
+party-rsvp {
+  display: block;
+  margin: 15px 0;
+}
-- 
2.7.4


From de27ef659be74dbc10f6a18969a3fae6f4a29886 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:17:04 +0200
Subject: [PATCH 230/375] Step 17.26: Import PartyRsvp

---
 imports/ui/components/partiesList/partiesList.less | 1 +
 1 file changed, 1 insertion(+)

diff --git a/imports/ui/components/partiesList/partiesList.less b/imports/ui/components/partiesList/partiesList.less
index e73e928..be384ba 100644
--- a/imports/ui/components/partiesList/partiesList.less
+++ b/imports/ui/components/partiesList/partiesList.less
@@ -32,3 +32,4 @@ parties-list {
 @import "../partyAdd/partyAdd.less";
 @import "../partiesMap/partiesMap.less";
 @import "../partyCreator/partyCreator.less";
+@import "../partyRsvp/partyRsvp.less";
-- 
2.7.4


From ee3a06a96bef54a9804099cd702b4d9c28cdef5b Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:17:32 +0200
Subject: [PATCH 231/375] Step 17.27: Refactor PartyRsvpsList

---
 .../components/partyRsvpsList/partyRsvpsList.html  | 36 ++++++++++++++++------
 1 file changed, 26 insertions(+), 10 deletions(-)

diff --git a/imports/ui/components/partyRsvpsList/partyRsvpsList.html b/imports/ui/components/partyRsvpsList/partyRsvpsList.html
index 2e1749d..5c24b02 100644
--- a/imports/ui/components/partyRsvpsList/partyRsvpsList.html
+++ b/imports/ui/components/partyRsvpsList/partyRsvpsList.html
@@ -1,10 +1,26 @@
-Who is coming: Yes -
-{{ (partyRsvpsList.rsvps | filter:{rsvp:'yes'}).length }}
-Maybe -
-{{ (partyRsvpsList.rsvps | filter:{rsvp:'maybe'}).length }}
-No -
-{{ (partyRsvpsList.rsvps | filter:{rsvp:'no'}).length }}
-
-<party-rsvp-users rsvps="partyRsvpsList.rsvps" type="yes"></party-rsvp-users>
-<party-rsvp-users rsvps="partyRsvpsList.rsvps" type="maybe"></party-rsvp-users>
-<party-rsvp-users rsvps="partyRsvpsList.rsvps" type="no"></party-rsvp-users>
+<div class="rsvp-sum">
+  <div class="rsvp-amount">
+    <div class="amount">
+      {{ (partyRsvpsList.rsvps | filter:{rsvp:'yes'}).length || 0 }}
+    </div>
+    <div class="rsvp-title">
+      YES
+    </div>
+  </div>
+  <div class="rsvp-amount">
+    <div class="amount">
+      {{ (partyRsvpsList.rsvps | filter:{rsvp:'maybe'}).length || 0 }}
+    </div>
+    <div class="rsvp-title">
+      MAYBE
+    </div>
+  </div>
+  <div class="rsvp-amount">
+    <div class="amount">
+      {{ (partyRsvpsList.rsvps | filter:{rsvp:'no'}).length || 0 }}
+    </div>
+    <div class="rsvp-title">
+      NO
+    </div>
+  </div>
+</div>
-- 
2.7.4


From fdb177481197456cb8a5395a21ea1d8d9a8cd9ff Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:17:59 +0200
Subject: [PATCH 232/375] Step 17.28: Styles for PartyRsvpsList

---
 .../components/partyRsvpsList/partyRsvpsList.less  | 24 ++++++++++++++++++++++
 1 file changed, 24 insertions(+)
 create mode 100644 imports/ui/components/partyRsvpsList/partyRsvpsList.less

diff --git a/imports/ui/components/partyRsvpsList/partyRsvpsList.less b/imports/ui/components/partyRsvpsList/partyRsvpsList.less
new file mode 100644
index 0000000..ca24446
--- /dev/null
+++ b/imports/ui/components/partyRsvpsList/partyRsvpsList.less
@@ -0,0 +1,24 @@
+.rsvp-sum {
+  width: 160px;
+  @media (min-width: 400px) {
+    float: right;
+  }
+  @media (max-width: 400px) {
+    margin: 0 auto;
+  }
+  > .rsvp-amount {
+    display: inline-block;
+    text-align: center;
+    width: 50px;
+
+    > .amount {
+      font-weight: bold;
+      font-size: 20px;
+    }
+    > .rsvp-title {
+      font-size: 11px;
+      color: #aaa;
+      text-transform: uppercase;
+    }
+  }
+}
-- 
2.7.4


From 761079e6f2b53848b141f6c72be879b1879296ce Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:18:30 +0200
Subject: [PATCH 233/375] Step 17.29: Import PartyRsvpsList

---
 imports/ui/components/partiesList/partiesList.less | 1 +
 1 file changed, 1 insertion(+)

diff --git a/imports/ui/components/partiesList/partiesList.less b/imports/ui/components/partiesList/partiesList.less
index be384ba..a1eac5c 100644
--- a/imports/ui/components/partiesList/partiesList.less
+++ b/imports/ui/components/partiesList/partiesList.less
@@ -33,3 +33,4 @@ parties-list {
 @import "../partiesMap/partiesMap.less";
 @import "../partyCreator/partyCreator.less";
 @import "../partyRsvp/partyRsvp.less";
+@import "../partyRsvpsList/partyRsvpsList.less";
-- 
2.7.4


From c9ac77bf2b37f7eff28b3413db1c90401ff85f11 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:19:03 +0200
Subject: [PATCH 234/375] Step 17.30: Refactor PartyUninvited

---
 imports/ui/components/partyUninvited/partyUninvited.html | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

diff --git a/imports/ui/components/partyUninvited/partyUninvited.html b/imports/ui/components/partyUninvited/partyUninvited.html
index 86d2519..e9f9e1c 100644
--- a/imports/ui/components/partyUninvited/partyUninvited.html
+++ b/imports/ui/components/partyUninvited/partyUninvited.html
@@ -1,10 +1,10 @@
+<h4>Users to invite:</h4>
 <ul>
-  Users to invite:
   <li ng-repeat="user in partyUninvited.users | uninvitedFilter:partyUninvited.party">
-    <div>{{ user | displayNameFilter }}</div>
-    <button ng-click="partyUninvited.invite(user)">Invite</button>
-  </li>
-  <li ng-if="(partyUninvited.users | uninvitedFilter:partyUninvited.party).length <= 0">
-    Everyone are already invited.
+    <button ng-click="partyUninvited.invite(user)" class="btn btn-primary-outline">Invite</button>
+    {{ user | displayNameFilter }}
   </li>
 </ul>
+<div class="alert alert-success" role="alert" ng-if="(partyUninvited.users | uninvitedFilter:partyUninvited.party).length <= 0">
+  Everyone are already invited.
+</div>
-- 
2.7.4


From d8a966de799806dc61f15a95ad296a04316ca140 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:26:22 +0200
Subject: [PATCH 235/375] Step 17.31: Styles for PartyUninvited

---
 imports/ui/components/partyUninvited/partyUninvited.less | 8 ++++++++
 1 file changed, 8 insertions(+)
 create mode 100644 imports/ui/components/partyUninvited/partyUninvited.less

diff --git a/imports/ui/components/partyUninvited/partyUninvited.less b/imports/ui/components/partyUninvited/partyUninvited.less
new file mode 100644
index 0000000..52b27fe
--- /dev/null
+++ b/imports/ui/components/partyUninvited/partyUninvited.less
@@ -0,0 +1,8 @@
+party-uninvited {
+  display: block;
+
+  ul {
+    padding-left: 0;
+    list-style-type: none;
+  }
+}
-- 
2.7.4


From f3ee03e6b2362803efc46e2e27f511867cfcbd01 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:19:41 +0200
Subject: [PATCH 236/375] Step 17.32: Refactor PartyDetails

---
 .../ui/components/partyDetails/partyDetails.html   | 42 ++++++++++++++++------
 1 file changed, 32 insertions(+), 10 deletions(-)

diff --git a/imports/ui/components/partyDetails/partyDetails.html b/imports/ui/components/partyDetails/partyDetails.html
index 7354dd6..4023174 100644
--- a/imports/ui/components/partyDetails/partyDetails.html
+++ b/imports/ui/components/partyDetails/partyDetails.html
@@ -1,13 +1,35 @@
-The party your selected is:
-<form>
-  Party name: <input type="text" ng-model="partyDetails.party.name" ng-disabled="!partyDetails.isLoggedIn"/>
-  Description: <input type="text" ng-model="partyDetails.party.description" ng-disabled="!partyDetails.isLoggedIn"/>
-  Public Party? <input type="checkbox" ng-model="partyDetails.party.public" ng-disabled="!partyDetails.isLoggedIn"/>
-  <button ng-click="partyDetails.save()">Save</button>
-</form>
+<div class="container-fluid">
+  <div class="row">
+    <div class="col-md-6">
+      <form>
+        <fieldset class="form-group">
+          <label>Party name</label>
+          <input type="text" ng-model="partyDetails.party.name" ng-disabled="!partyDetails.isLoggedIn" class="form-control"/>
+        </fieldset>
 
-<button ui-sref="parties">Back</button>
+        <fieldset class="form-group">
+          <label>Description</label>
+          <input type="text" ng-model="partyDetails.party.name" ng-disabled="!partyDetails.isLoggedIn" class="form-control"/>
+        </fieldset>
 
-<party-uninvited party="partyDetails.party" ng-show="partyDetails.canInvite()"></party-uninvited>
+        <div class="checkbox">
+          <label>
+            <input type="checkbox" ng-model="partyDetails.party.public" ng-disabled="!partyDetails.isLoggedIn"/>
+            Public Party?
+          </label>
+        </div>
 
-<party-map location="partyDetails.party.location"></party-map>
+        <button ng-click="partyDetails.save()" type="submit" class="btn btn-primary">Save</button>
+      </form>
+    </div>
+    <div class="col-md-6">
+      <party-map location="partyDetails.party.location"></party-map>
+    </div>
+  </div>
+
+  <div class="row">
+    <div class="col-md-6">
+      <party-uninvited party="partyDetails.party" ng-show="partyDetails.canInvite()"></party-uninvited>
+    </div>
+  </div>
+</div>
-- 
2.7.4


From 5438662929227f82e692f18c9767b0d66ac74096 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:20:17 +0200
Subject: [PATCH 237/375] Step 17.33: Styles for PartyDetails

---
 imports/ui/components/partyDetails/partyDetails.less | 9 +++++++++
 1 file changed, 9 insertions(+)
 create mode 100644 imports/ui/components/partyDetails/partyDetails.less

diff --git a/imports/ui/components/partyDetails/partyDetails.less b/imports/ui/components/partyDetails/partyDetails.less
new file mode 100644
index 0000000..bfea863
--- /dev/null
+++ b/imports/ui/components/partyDetails/partyDetails.less
@@ -0,0 +1,9 @@
+party-details {
+  display: block;
+
+  form {
+    margin: 25px 0;
+  }
+}
+
+@import "../partyUninvited/partyUninvited.less";
-- 
2.7.4


From b8ebabbd3d57ba8e82bf385d9dcd0a22a95b2302 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:21:01 +0200
Subject: [PATCH 238/375] Step 17.34: Styles for PartyMap

---
 imports/ui/components/partyMap/partyMap.less | 10 ++++++++++
 1 file changed, 10 insertions(+)
 create mode 100644 imports/ui/components/partyMap/partyMap.less

diff --git a/imports/ui/components/partyMap/partyMap.less b/imports/ui/components/partyMap/partyMap.less
new file mode 100644
index 0000000..3b4bed1
--- /dev/null
+++ b/imports/ui/components/partyMap/partyMap.less
@@ -0,0 +1,10 @@
+party-map {
+  display: block;
+  width: 100%;
+  margin: 25px 0;
+
+  .angular-google-map-container {
+    width: 100%;
+    height: 400px;
+  }
+}
-- 
2.7.4


From d7f4c7c5773f6fd5aa7d2b53e528a6e2a9b8da00 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:21:22 +0200
Subject: [PATCH 239/375] Step 17.35: Remove old css

---
 imports/ui/components/partyMap/partyMap.js | 1 -
 1 file changed, 1 deletion(-)

diff --git a/imports/ui/components/partyMap/partyMap.js b/imports/ui/components/partyMap/partyMap.js
index 5fe2dfa..9257efe 100644
--- a/imports/ui/components/partyMap/partyMap.js
+++ b/imports/ui/components/partyMap/partyMap.js
@@ -3,7 +3,6 @@ import angularMeteor from 'angular-meteor';
 import 'angular-simple-logger';
 import 'angular-google-maps';
 
-import './partyMap.css';
 import './partyMap.html';
 
 class PartyMap {
-- 
2.7.4


From b54988638c3febbd3af8e41e5ea1e07bfe2a4e61 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:21:43 +0200
Subject: [PATCH 240/375] Step 17.36: Delete old file

---
 imports/ui/components/partyMap/partyMap.css | 4 ----
 1 file changed, 4 deletions(-)
 delete mode 100644 imports/ui/components/partyMap/partyMap.css

diff --git a/imports/ui/components/partyMap/partyMap.css b/imports/ui/components/partyMap/partyMap.css
deleted file mode 100644
index f4b49f5..0000000
--- a/imports/ui/components/partyMap/partyMap.css
+++ /dev/null
@@ -1,4 +0,0 @@
-.angular-google-map-container {
-  height: 400px;
-  width: 400px;
-}
-- 
2.7.4


From 7bae702301cfdcc01bb7ef68e8b446c9289846b4 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:22:35 +0200
Subject: [PATCH 241/375] Step 17.37: Import PartyMap

---
 imports/ui/components/partyDetails/partyDetails.less | 1 +
 1 file changed, 1 insertion(+)

diff --git a/imports/ui/components/partyDetails/partyDetails.less b/imports/ui/components/partyDetails/partyDetails.less
index bfea863..a42c467 100644
--- a/imports/ui/components/partyDetails/partyDetails.less
+++ b/imports/ui/components/partyDetails/partyDetails.less
@@ -7,3 +7,4 @@ party-details {
 }
 
 @import "../partyUninvited/partyUninvited.less";
+@import "../partyMap/partyMap.less";
-- 
2.7.4


From 74be84ff28ab914bad6dd87f82eff4ae2c2a59d4 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:23:50 +0200
Subject: [PATCH 242/375] Step 17.38: Import missing files

---
 imports/ui/components/socially/socially.less | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/imports/ui/components/socially/socially.less b/imports/ui/components/socially/socially.less
index eec0480..3eabc12 100644
--- a/imports/ui/components/socially/socially.less
+++ b/imports/ui/components/socially/socially.less
@@ -1,3 +1,8 @@
 socially {
   display: block;
 }
+
+
+@import "../navigation/navigation.less";
+@import "../partiesList/partiesList.less";
+@import "../partyDetails/partyDetails.less";
-- 
2.7.4


From 38602e67d6a8aa199156f66931c8d18cec2d0481 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 01:32:24 +0200
Subject: [PATCH 243/375] Step 17.39: Add checking methods

---
 imports/ui/components/partyRsvp/partyRsvp.js | 18 ++++++++++++++++++
 1 file changed, 18 insertions(+)

diff --git a/imports/ui/components/partyRsvp/partyRsvp.js b/imports/ui/components/partyRsvp/partyRsvp.js
index e5907b2..6c29c65 100644
--- a/imports/ui/components/partyRsvp/partyRsvp.js
+++ b/imports/ui/components/partyRsvp/partyRsvp.js
@@ -1,5 +1,6 @@
 import angular from 'angular';
 import angularMeteor from 'angular-meteor';
+import _ from 'underscore';
 
 import { Meteor } from 'meteor/meteor';
 
@@ -9,14 +10,23 @@ class PartyRsvp {
   yes() {
     this.answer('yes');
   }
+  isYes() {
+    return this.isAnswer('yes');
+  }
 
   maybe() {
     this.answer('maybe');
   }
+  isMaybe() {
+    return this.isAnswer('maybe');
+  }
 
   no() {
     this.answer('no');
   }
+  isNo() {
+    return this.isAnswer('no');
+  }
 
   answer(answer) {
     Meteor.call('rsvp', this.party._id, answer, (error) => {
@@ -27,6 +37,14 @@ class PartyRsvp {
       }
     });
   }
+  isAnswer(answer) {
+    if(this.party) {
+      return !!_.findWhere(this.party.rsvps, {
+        user: Meteor.userId(),
+        rsvp: answer
+      });
+    }
+  }
 }
 
 const name = 'partyRsvp';
-- 
2.7.4


From bb64df1bedbc09a6b7a4000d6b8848cee86b47cf Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 02:26:23 +0200
Subject: [PATCH 244/375] Step 17.40: Remove unused partyRsvpUsers

---
 .../components/partyRsvpUsers/partyRsvpUsers.html  |  5 ----
 .../ui/components/partyRsvpUsers/partyRsvpUsers.js | 29 ----------------------
 2 files changed, 34 deletions(-)
 delete mode 100644 imports/ui/components/partyRsvpUsers/partyRsvpUsers.html
 delete mode 100644 imports/ui/components/partyRsvpUsers/partyRsvpUsers.js

diff --git a/imports/ui/components/partyRsvpUsers/partyRsvpUsers.html b/imports/ui/components/partyRsvpUsers/partyRsvpUsers.html
deleted file mode 100644
index 445d426..0000000
--- a/imports/ui/components/partyRsvpUsers/partyRsvpUsers.html
+++ /dev/null
@@ -1,5 +0,0 @@
-<div ng-repeat="rsvp in partyRsvpUsers.rsvps | filter:{ rsvp: partyRsvpUsers.type }">
-  {{ partyRsvpUsers.getUserById(rsvp.user) | displayNameFilter }}
-  -
-  {{ partyRsvpUsers.type }}
-</div>
diff --git a/imports/ui/components/partyRsvpUsers/partyRsvpUsers.js b/imports/ui/components/partyRsvpUsers/partyRsvpUsers.js
deleted file mode 100644
index f94eb18..0000000
--- a/imports/ui/components/partyRsvpUsers/partyRsvpUsers.js
+++ /dev/null
@@ -1,29 +0,0 @@
-import angular from 'angular';
-import angularMeteor from 'angular-meteor';
-
-import { Meteor } from 'meteor/meteor';
-
-import './partyRsvpUsers.html';
-import { name as DisplayNameFilter } from '../../filters/displayNameFilter';
-
-class PartyRsvpUsers {
-  getUserById(userId) {
-    return Meteor.users.findOne(userId);
-  }
-}
-
-const name = 'partyRsvpUsers';
-
-// create a module
-export default angular.module(name, [
-  angularMeteor,
-  DisplayNameFilter
-]).component(name, {
-  templateUrl: `imports/ui/components/${name}/${name}.html`,
-  controllerAs: name,
-  bindings: {
-    rsvps: '<',
-    type: '@'
-  },
-  controller: PartyRsvpUsers
-});
-- 
2.7.4


From 7e717a577e5ce232f76f8a6bbce31f39708988d6 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 02:26:40 +0200
Subject: [PATCH 245/375] Step 17.41: Remove unused partyUnanswered

---
 .../partyUnanswered/partyUnanswered.html           |  5 ---
 .../components/partyUnanswered/partyUnanswered.js  | 39 ----------------------
 2 files changed, 44 deletions(-)
 delete mode 100644 imports/ui/components/partyUnanswered/partyUnanswered.html
 delete mode 100644 imports/ui/components/partyUnanswered/partyUnanswered.js

diff --git a/imports/ui/components/partyUnanswered/partyUnanswered.html b/imports/ui/components/partyUnanswered/partyUnanswered.html
deleted file mode 100644
index ecc1b45..0000000
--- a/imports/ui/components/partyUnanswered/partyUnanswered.html
+++ /dev/null
@@ -1,5 +0,0 @@
-<ul>
-  <li ng-repeat="invitedUser in partyUnanswered.getUnanswered()">
-    {{ partyUnanswered.getUserById(invitedUser) | displayNameFilter }}
-  </li>
-</ul>
diff --git a/imports/ui/components/partyUnanswered/partyUnanswered.js b/imports/ui/components/partyUnanswered/partyUnanswered.js
deleted file mode 100644
index d6eaf46..0000000
--- a/imports/ui/components/partyUnanswered/partyUnanswered.js
+++ /dev/null
@@ -1,39 +0,0 @@
-import angular from 'angular';
-import angularMeteor from 'angular-meteor';
-import _ from 'underscore';
-
-import { Meteor } from 'meteor/meteor';
-
-import './partyUnanswered.html';
-import { name as DisplayNameFilter } from '../../filters/displayNameFilter';
-
-class PartyUnanswered {
-  getUnanswered() {
-    if (!this.party || !this.party.invited) {
-      return;
-    }
-
-    return this.party.invited.filter((user) => {
-      return !_.findWhere(this.party.rsvps, { user });
-    });
-  }
-
-  getUserById(userId) {
-    return Meteor.users.findOne(userId)
-  }
-}
-
-const name = 'partyUnanswered';
-
-// create a module
-export default angular.module(name, [
-  angularMeteor,
-  DisplayNameFilter
-]).component(name, {
-  templateUrl: `imports/ui/components/${name}/${name}.html`,
-  controllerAs: name,
-  bindings: {
-    party: '<'
-  },
-  controller: PartyUnanswered
-});
-- 
2.7.4


From b74bd4de61ea1c4579a14c453e8146d29bf5c4b2 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 02:27:20 +0200
Subject: [PATCH 246/375] Step 17.42: Remove PartyUnanswered

---
 imports/ui/components/partiesList/partiesList.js | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

diff --git a/imports/ui/components/partiesList/partiesList.js b/imports/ui/components/partiesList/partiesList.js
index 9a1811b..de14546 100644
--- a/imports/ui/components/partiesList/partiesList.js
+++ b/imports/ui/components/partiesList/partiesList.js
@@ -14,7 +14,6 @@ import { name as PartyRemove } from '../partyRemove/partyRemove';
 import { name as PartyCreator } from '../partyCreator/partyCreator';
 import { name as PartyRsvp } from '../partyRsvp/partyRsvp';
 import { name as PartyRsvpsList } from '../partyRsvpsList/partyRsvpsList';
-import { name as PartyUnanswered } from '../partyUnanswered/partyUnanswered';
 
 class PartiesList {
   constructor($scope, $reactive) {
@@ -82,8 +81,7 @@ export default angular.module(name, [
   PartyRemove,
   PartyCreator,
   PartyRsvp,
-  PartyRsvpsList,
-  PartyUnanswered
+  PartyRsvpsList
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
   controllerAs: name,
-- 
2.7.4


From b3b2706d143c1dd385480453930f6f9fabf32517 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 02:27:38 +0200
Subject: [PATCH 247/375] Step 17.43: Remove PartyRsvpUsers

---
 imports/ui/components/partyRsvpsList/partyRsvpsList.js | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

diff --git a/imports/ui/components/partyRsvpsList/partyRsvpsList.js b/imports/ui/components/partyRsvpsList/partyRsvpsList.js
index 1150a47..4e6e752 100644
--- a/imports/ui/components/partyRsvpsList/partyRsvpsList.js
+++ b/imports/ui/components/partyRsvpsList/partyRsvpsList.js
@@ -2,7 +2,6 @@ import angular from 'angular';
 import angularMeteor from 'angular-meteor';
 
 import './partyRsvpsList.html';
-import { name as PartyRsvpUsers } from '../partyRsvpUsers/partyRsvpUsers';
 
 class PartyRsvpsList { }
 
@@ -10,8 +9,7 @@ const name = 'partyRsvpsList';
 
 // create a module
 export default angular.module(name, [
-  angularMeteor,
-  PartyRsvpUsers
+  angularMeteor
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
   controllerAs: name,
-- 
2.7.4


From 21ca9fdfdad7770e02caecf21b85162d1721eb05 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 02:37:40 +0200
Subject: [PATCH 248/375] Step 18.1: Uninstall `bootstrap`

---
 package.json | 1 -
 1 file changed, 1 deletion(-)

diff --git a/package.json b/package.json
index 9f874c7..1bb773a 100644
--- a/package.json
+++ b/package.json
@@ -12,7 +12,6 @@
     "angular-simple-logger": "^0.1.7",
     "angular-ui-router": "^1.0.0-alpha.4",
     "angular-utils-pagination": "^0.11.1",
-    "bootstrap": "^4.0.0-alpha.2",
     "meteor-node-stubs": "~0.2.0",
     "underscore": "^1.8.3"
   },
-- 
2.7.4


From 6639ba9605adf4c6daa3cd76b298a429157bf41e Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 02:38:13 +0200
Subject: [PATCH 249/375] Step 18.2: Install `angular-material`

---
 package.json | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/package.json b/package.json
index 1bb773a..4e726a8 100644
--- a/package.json
+++ b/package.json
@@ -7,7 +7,11 @@
   },
   "dependencies": {
     "angular": "^1.5.3",
+    "angular-animate": "^1.5.3",
+    "angular-aria": "^1.5.3",
     "angular-google-maps": "^2.3.2",
+    "angular-material": "^1.0.7",
+    "angular-messages": "^1.5.3",
     "angular-meteor": "^1.3.9",
     "angular-simple-logger": "^0.1.7",
     "angular-ui-router": "^1.0.0-alpha.4",
-- 
2.7.4


From b91219cd33ab15514111c4303009f1158fc9ca90 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 02:38:56 +0200
Subject: [PATCH 250/375] Step 18.3: Add css

---
 client/index.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/client/index.html b/client/index.html
index d4505ca..4a914a1 100644
--- a/client/index.html
+++ b/client/index.html
@@ -4,7 +4,7 @@
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <base href="/">
   <title>Socially</title>
-  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
+  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/angular-material/1.0.7/angular-material.min.css">
 </head>
 <body>
   <socially></socially>
-- 
2.7.4


From e80929fe612c352a8ae852cb21711531421b80ab Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 03:31:01 +0200
Subject: [PATCH 251/375] Step 18.4: Remove bootstrap from main.js

---
 client/main.js | 1 -
 1 file changed, 1 deletion(-)

diff --git a/client/main.js b/client/main.js
index 52cb827..06731e1 100644
--- a/client/main.js
+++ b/client/main.js
@@ -1,5 +1,4 @@
 import angular from 'angular';
-import 'bootstrap/dist/css/bootstrap.css';
 
 import { Meteor } from 'meteor/meteor';
 
-- 
2.7.4


From 2bb35e3371c4443cfb4e554d950320ae0e0b1a7f Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 02:39:53 +0200
Subject: [PATCH 252/375] Step 18.5: Add ngMaterial to Socially

---
 imports/ui/components/socially/socially.js | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/socially/socially.js b/imports/ui/components/socially/socially.js
index 61c86d1..d6d7329 100644
--- a/imports/ui/components/socially/socially.js
+++ b/imports/ui/components/socially/socially.js
@@ -1,5 +1,6 @@
 import angular from 'angular';
 import angularMeteor from 'angular-meteor';
+import ngMaterial from 'angular-material';
 import uiRouter from 'angular-ui-router';
 
 import './socially.html';
@@ -14,6 +15,7 @@ const name = 'socially';
 // create a module
 export default angular.module(name, [
   angularMeteor,
+  ngMaterial,
   uiRouter,
   PartiesList,
   PartyDetails,
@@ -37,7 +39,7 @@ function config($locationProvider, $urlRouterProvider) {
 
 function run($rootScope, $state) {
   'ngInject';
-  
+
   $rootScope.$on('$stateChangeError',
     (event, toState, toParams, fromState, fromParams, error) => {
       if (error === 'AUTH_REQUIRED') {
-- 
2.7.4


From 9e85ca892f8b4a8269a957d5f88848ce9c8e414e Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 02:41:34 +0200
Subject: [PATCH 253/375] Step 18.6: Clean up Socially template

---
 imports/ui/components/socially/socially.html | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/imports/ui/components/socially/socially.html b/imports/ui/components/socially/socially.html
index 2e91050..7fdb2de 100644
--- a/imports/ui/components/socially/socially.html
+++ b/imports/ui/components/socially/socially.html
@@ -1,3 +1,3 @@
-<navigation class="navbar navbar-static-top navbar-dark bg-inverse"></navigation>
+<navigation></navigation>
 
-<div ui-view="" class="container-fluid"></div>
+<div ui-view=""></div>
-- 
2.7.4


From d56f33c6a84b44d2a546add0022b855bc9d6e5a1 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 02:43:06 +0200
Subject: [PATCH 254/375] Step 18.7: Refactor Navigation

---
 imports/ui/components/navigation/navigation.html | 14 +++++++++-----
 1 file changed, 9 insertions(+), 5 deletions(-)

diff --git a/imports/ui/components/navigation/navigation.html b/imports/ui/components/navigation/navigation.html
index 2bcae64..0b1d8a6 100644
--- a/imports/ui/components/navigation/navigation.html
+++ b/imports/ui/components/navigation/navigation.html
@@ -1,6 +1,10 @@
-<div class="fluid-container">
-  <div class="navbar-header">
-    <a href="/parties" class="navbar-brand">Socially</a>
-    <login-buttons class="navbar-brand"></login-buttons>
+<md-toolbar>
+  <div class="md-toolbar-tools">
+    <h2>
+      <span ui-sref="parties">
+        Socially
+      </span>
+    </h2>
+    <login-buttons></login-buttons>
   </div>
-</div>
+</md-toolbar>
-- 
2.7.4


From 989e9b0d9f0fafff05a359e2ae4cbbfbfe9abbac Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 02:43:40 +0200
Subject: [PATCH 255/375] Step 18.8: Add space before loginButtons

---
 imports/ui/components/navigation/navigation.less | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/navigation/navigation.less b/imports/ui/components/navigation/navigation.less
index 4035b7b..87b8777 100644
--- a/imports/ui/components/navigation/navigation.less
+++ b/imports/ui/components/navigation/navigation.less
@@ -1,3 +1,5 @@
 navigation {
-  display: block;
+  login-buttons {
+    margin-left: 15px;
+  }
 }
-- 
2.7.4


From b0582767be63826b0fddd818a3f2a9396a2232be Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 02:44:33 +0200
Subject: [PATCH 256/375] Step 18.9: Refactor PartiesList

---
 imports/ui/components/partiesList/partiesList.html | 99 ++++++++++------------
 1 file changed, 44 insertions(+), 55 deletions(-)

diff --git a/imports/ui/components/partiesList/partiesList.html b/imports/ui/components/partiesList/partiesList.html
index 29c4c69..b6772eb 100644
--- a/imports/ui/components/partiesList/partiesList.html
+++ b/imports/ui/components/partiesList/partiesList.html
@@ -1,65 +1,54 @@
-<div class="container-fluid">
-  <div class="row">
-    <div class="col-md-12">
-      <party-add ng-show="partiesList.isLoggedIn"></party-add>
+<div layout="column" layout-padding>
+  <party-add ng-show="partiesList.isLoggedIn"></party-add>
+  <div ng-hide="partiesList.isLoggedIn">
+    <i>Log in to create a party!</i>
+  </div>
 
-      <div class="alert alert-warning" role="alert" ng-hide="partiesList.isLoggedIn">
-        <strong>Warning!</strong>
-        Log in to create a party!
-      </div>
-    </div>
+  <div flex>
+    <h2 class="md-display-1">List of the parties:</h2>
   </div>
-  <div class="row">
-    <div class="col-md-12">
-      <h2>List of parties:</h2>
-      <form class="form-inline">
-        <div class="form-group">
-          <input type="search" ng-model="partiesList.searchText" placeholder="Search" class="form-control"/>
-        </div>
-        <parties-sort class="form-group" on-change="partiesList.sortChanged(sort)" property="name" order="1"></parties-sort>
-      </form>
-    </div>
+
+  <div flex layout="row" layout-padding>
+    <md-input-container>
+      <label>Search</label>
+      <input ng-model="partiesList.searchText">
+    </md-input-container>
+
+    <parties-sort on-change="partiesList.sortChanged(sort)" property="name" order="1"></parties-sort>
   </div>
-  <div class="row">
-    <div class="col-md-6">
-      <ul class="parties">
-        <li dir-paginate="party in partiesList.parties | itemsPerPage: partiesList.perPage" total-items="partiesList.partiesCount">
-          <div class="row">
-            <div class="col-sm-8">
-              <h3 class="party-name">
-                <a ui-sref="partyDetails({ partyId: party._id })">{{party.name}}</a>
-              </h3>
-              <p class="party-description">
-                {{party.description}}
-              </p>
-            </div>
-            <div class="col-sm-4">
-              <party-remove party="party" ng-show="partiesList.isOwner(party)"></party-remove>
-            </div>
-          </div>
-          <div class="row">
-            <div class="col-md-12">
-              <party-rsvp party="party" ng-show="partiesList.isLoggedIn"></party-rsvp>
-              <div class="alert alert-warning" role="alert" ng-hide="partiesList.isLoggedIn">
-                <strong>Warning!</strong>
-                <i>Sign in to RSVP for this party.</i>
-              </div>
-            </div>
-          </div>
-          <div class="row">
-            <div class="col-md-4">
-              <party-creator party="party"></party-creator>
-            </div>
-            <div class="col-md-8">
-              <party-rsvps-list rsvps="party.rsvps"></party-rsvps-list>
-            </div>
+
+  <div layout="column" layout-gt-sm="row">
+    <div flex="50">
+      <md-card dir-paginate="party in partiesList.parties | itemsPerPage: partiesList.perPage" total-items="partiesList.partiesCount">
+        <md-card-title>
+          <md-card-title-text>
+            <span class="md-headline" ui-sref="partyDetails({ partyId: party._id })">
+              {{party.name}}
+              <party-remove party="party"></party-remove>
+            </span>
+            <span class="md-subhead">{{party.description}}</span>
+          </md-card-title-text>
+        </md-card-title>
+        <md-card-content>
+          <party-rsvps-list rsvps="party.rsvps"></party-rsvps-list>
+
+          <party-unanswered party="party" ng-if="!party.public"></party-unanswered>
+          <div ng-if="party.public">
+            Everyone is invited
           </div>
-        </li>
-      </ul>
 
+          <party-creator party="party"></party-creator>
+        </md-card-content>
+        <md-card-actions>
+          <party-rsvp party="party" ng-show="partiesList.isLoggedIn"></party-rsvp>
+          <div ng-hide="partiesList.isLoggedIn">
+            <i>Sign in to RSVP for this party.</i>
+          </div>
+        </md-card-actions>
+      </md-card>
       <dir-pagination-controls on-page-change="partiesList.pageChanged(newPageNumber)"></dir-pagination-controls>
     </div>
-    <div class="col-md-6">
+    <div flex="50">
       <parties-map parties="partiesList.parties"></parties-map>
     </div>
   </div>
-- 
2.7.4


From 4f87f82dd9e387caaec6dd83cd36a6c78e815abf Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 02:45:55 +0200
Subject: [PATCH 257/375] Step 18.10: Leave only one definition

---
 imports/ui/components/partiesList/partiesList.less | 35 ++--------------------
 1 file changed, 2 insertions(+), 33 deletions(-)

diff --git a/imports/ui/components/partiesList/partiesList.less b/imports/ui/components/partiesList/partiesList.less
index a1eac5c..ba0839b 100644
--- a/imports/ui/components/partiesList/partiesList.less
+++ b/imports/ui/components/partiesList/partiesList.less
@@ -1,36 +1,5 @@
 parties-list {
-  display: block;
-  padding: 25px 0;
-
-  ul.parties {
-    padding-left: 0;
-    list-style-type: none;
-
-    > li {
-      padding: 15px;
-      background-color: #fff;
-      margin: 15px 0;
-      border: 3px solid #eaeaea;
-
-     .party-name {
-       margin-top: 0px;
-       margin-bottom: 20px;
-       a {
-         text-decoration: none !important;
-         font-weight: 400;
-       }
-     }
-     .party-description {
-       font-weight: 300;
-       padding-left: 18px;
-       font-size: 14px;
-     }
-    }
+  [ui-sref] {
+    cursor: pointer;
   }
 }
-
-@import "../partyAdd/partyAdd.less";
-@import "../partiesMap/partiesMap.less";
-@import "../partyCreator/partyCreator.less";
-@import "../partyRsvp/partyRsvp.less";
-@import "../partyRsvpsList/partyRsvpsList.less";
-- 
2.7.4


From 3046ed1772f65af73e64e0d9f342542e0ff3a31e Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 02:46:45 +0200
Subject: [PATCH 258/375] Step 18.11: Refactor PartiesMap

---
 imports/ui/components/partiesMap/partiesMap.html | 3 ---
 1 file changed, 3 deletions(-)

diff --git a/imports/ui/components/partiesMap/partiesMap.html b/imports/ui/components/partiesMap/partiesMap.html
index 870b2f7..a488738 100644
--- a/imports/ui/components/partiesMap/partiesMap.html
+++ b/imports/ui/components/partiesMap/partiesMap.html
@@ -1,6 +1,3 @@
-<h4>
-  See all the parties:
-</h4>
 <div class="angular-google-map-container">
   <ui-gmap-google-map center="partiesMap.map.center" zoom="partiesMap.map.zoom">
     <ui-gmap-markers models="partiesMap.parties" coords="'location'" fit="true" idkey="'_id'" doRebuildAll="true"></ui-gmap-markers>
-- 
2.7.4


From 8c66ecf6f302369add7ac8d3474c4d1a08e768dd Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 02:47:31 +0200
Subject: [PATCH 259/375] Step 18.12: Styles for PartiesMap

---
 imports/ui/components/partiesMap/partiesMap.less | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/imports/ui/components/partiesMap/partiesMap.less b/imports/ui/components/partiesMap/partiesMap.less
index 020e970..b69b834 100644
--- a/imports/ui/components/partiesMap/partiesMap.less
+++ b/imports/ui/components/partiesMap/partiesMap.less
@@ -1,6 +1,6 @@
 parties-map {
   display: block;
-  margin: 15px 5px;
+  padding: 10px;
 
   .angular-google-map-container {
     width: 100%;
-- 
2.7.4


From 886dfb6db7339f01031fb4690c9c427a3de5289b Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 03:13:36 +0200
Subject: [PATCH 260/375] Step 18.13: Import in PartiesList

---
 imports/ui/components/partiesList/partiesList.less | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/imports/ui/components/partiesList/partiesList.less b/imports/ui/components/partiesList/partiesList.less
index ba0839b..d3f7da4 100644
--- a/imports/ui/components/partiesList/partiesList.less
+++ b/imports/ui/components/partiesList/partiesList.less
@@ -3,3 +3,5 @@ parties-list {
     cursor: pointer;
   }
 }
+
+@import "../partiesMap/partiesMap.less";
-- 
2.7.4


From b2eaf309a23e388b16433d92e4e0b53ef8fddc18 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 02:48:05 +0200
Subject: [PATCH 261/375] Step 18.14: Refactor PartiesSort

---
 imports/ui/components/partiesSort/partiesSort.html | 14 ++++++++++----
 1 file changed, 10 insertions(+), 4 deletions(-)

diff --git a/imports/ui/components/partiesSort/partiesSort.html b/imports/ui/components/partiesSort/partiesSort.html
index b2a52b3..0b7a94e 100644
--- a/imports/ui/components/partiesSort/partiesSort.html
+++ b/imports/ui/components/partiesSort/partiesSort.html
@@ -1,4 +1,10 @@
-<select ng-model="partiesSort.order" ng-change="partiesSort.changed()" class="form-control">
-  <option value="1">Ascending</option>
-  <option value="-1">Descending</option>
-</select>
+<md-input-container>
+  <md-select ng-model="partiesSort.order" ng-change="partiesSort.changed()">
+    <md-option value="1">
+      Ascending
+    </md-option>
+    <md-option value="-1">
+      Descending
+    </md-option>
+  </md-select>
+</md-input-container>
-- 
2.7.4


From e2dbb382f0e0b9b3f125115ac638b231a8ddbbc6 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 02:48:41 +0200
Subject: [PATCH 262/375] Step 18.15: Refactor PartyAdd

---
 imports/ui/components/partyAdd/partyAdd.html | 26 ++++++++++++++------------
 1 file changed, 14 insertions(+), 12 deletions(-)

diff --git a/imports/ui/components/partyAdd/partyAdd.html b/imports/ui/components/partyAdd/partyAdd.html
index 7c4d284..6e504f0 100644
--- a/imports/ui/components/partyAdd/partyAdd.html
+++ b/imports/ui/components/partyAdd/partyAdd.html
@@ -1,20 +1,22 @@
-<form>
-  <div class="form-group">
+<div layout="column" layout-padding>
+  <md-input-container>
     <label>
       Party Name:
     </label>
-    <input type="text" ng-model="partyAdd.party.name" class="form-control"/>
-  </div>
-  <div class="form-group">
+    <input type="text" ng-model="partyAdd.party.name"/>
+  </md-input-container>
+  <md-input-container>
     <label>
       Description:
     </label>
-    <input type="text" ng-model="partyAdd.party.description" class="form-control"/>
+    <input type="text" ng-model="partyAdd.party.description"/>
+  </md-input-container>
+  <div flex>
+    <md-checkbox ng-model="partyAdd.party.public" aria-label="Public Party?">
+      Public Party?
+    </md-checkbox>
   </div>
-  <div class="checkbox">
-    <label>
-      <input type="checkbox" ng-model="partyAdd.party.public"/> Public Party?
-    </label>
+  <div flex>
+    <md-button ng-click="partyAdd.submit()" class="md-raised">Add Party!</md-button>
   </div>
-  <button ng-click="partyAdd.submit()" class="btn btn-success">Add Party!</button>
-</form>
+</div>
-- 
2.7.4


From 5ebb22ad5706636e549378aa2c6218d3da220340 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 02:49:18 +0200
Subject: [PATCH 263/375] Step 18.16: Remove styles for PartyAdd

---
 imports/ui/components/partyAdd/partyAdd.less | 10 ----------
 1 file changed, 10 deletions(-)
 delete mode 100644 imports/ui/components/partyAdd/partyAdd.less

diff --git a/imports/ui/components/partyAdd/partyAdd.less b/imports/ui/components/partyAdd/partyAdd.less
deleted file mode 100644
index 90b24c1..0000000
--- a/imports/ui/components/partyAdd/partyAdd.less
+++ /dev/null
@@ -1,10 +0,0 @@
-party-add {
-  display: block;
-}
-
-party-add > form {
-  padding: 15px;
-  margin-bottom: 25px;
-  background-color: #fff;
-  border: 3px solid #EAEAEC;
-}
-- 
2.7.4


From 061ae17f28806b9f6eb5ba29120af885cfc3983a Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 02:50:00 +0200
Subject: [PATCH 264/375] Step 18.17: Refactor PartyCreator

---
 imports/ui/components/partyCreator/partyCreator.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/imports/ui/components/partyCreator/partyCreator.html b/imports/ui/components/partyCreator/partyCreator.html
index 077739d..de986fb 100644
--- a/imports/ui/components/partyCreator/partyCreator.html
+++ b/imports/ui/components/partyCreator/partyCreator.html
@@ -1,5 +1,5 @@
 <p>
   <small>
-    <i class="fa fa-user fa-lg"></i> {{ partyCreator.creator | displayNameFilter }}
+    Posted by {{ partyCreator.creator | displayNameFilter }}
   </small>
 </p>
-- 
2.7.4


From 5abc35e512422a0bcfb6b291e2e1dab71732231b Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 02:50:35 +0200
Subject: [PATCH 265/375] Step 18.18: Remove partyCreator.less

---
 imports/ui/components/partyCreator/partyCreator.less | 6 ------
 1 file changed, 6 deletions(-)
 delete mode 100644 imports/ui/components/partyCreator/partyCreator.less

diff --git a/imports/ui/components/partyCreator/partyCreator.less b/imports/ui/components/partyCreator/partyCreator.less
deleted file mode 100644
index 4679f1f..0000000
--- a/imports/ui/components/partyCreator/partyCreator.less
+++ /dev/null
@@ -1,6 +0,0 @@
-party-creator {
-  i.fa {
-    margin-left: 5px;
-    margin-right: 10px;
-  }
-}
-- 
2.7.4


From 4f508e4a90eba86d6eba13e2f277badb1b226dc6 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 03:08:43 +0200
Subject: [PATCH 266/375] Step 18.19: Add `material-design-icons`

---
 .meteor/packages | 1 +
 .meteor/versions | 3 +--
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/.meteor/packages b/.meteor/packages
index 1b86693..c6567f3 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -28,3 +28,4 @@ tmeasday:publish-counts
 check
 email
 less
+planettraining:material-design-icons
diff --git a/.meteor/versions b/.meteor/versions
index 7995fa7..fb2822c 100644
--- a/.meteor/versions
+++ b/.meteor/versions
@@ -67,9 +67,9 @@ oauth2@1.1.7
 observe-sequence@1.0.11
 ordered-dict@1.0.7
 pbastowski:angular-babel@1.3.2
+planettraining:material-design-icons@2.2.0
 promise@0.6.7
 random@1.0.9
-reactive-dict@1.1.5
 rate-limit@1.0.2
 reactive-dict@1.1.5
 reactive-var@1.0.9
@@ -77,7 +77,6 @@ reload@1.1.8
 retry@1.0.7
 routepolicy@1.0.10
 sanjo:jasmine@1.0.1
-session@1.1.3
 service-configuration@1.0.7
 session@1.1.3
 sha@1.0.5
-- 
2.7.4


From 47b96c586cf577ab0a04a4a2ce04569b85c21329 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 03:10:01 +0200
Subject: [PATCH 267/375] Step 18.20: Set icons

---
 imports/ui/components/socially/socially.js | 20 +++++++++++++++++++-
 1 file changed, 19 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/socially/socially.js b/imports/ui/components/socially/socially.js
index d6d7329..4cd8e0c 100644
--- a/imports/ui/components/socially/socially.js
+++ b/imports/ui/components/socially/socially.js
@@ -29,12 +29,30 @@ export default angular.module(name, [
   .config(config)
   .run(run);
 
-function config($locationProvider, $urlRouterProvider) {
+function config($locationProvider, $urlRouterProvider, $mdIconProvider) {
   'ngInject';
 
   $locationProvider.html5Mode(true);
 
   $urlRouterProvider.otherwise('/parties');
+
+  const iconPath =  '/packages/planettraining_material-design-icons/bower_components/material-design-icons/sprites/svg-sprite/';
+
+  $mdIconProvider
+    .iconSet('social',
+      iconPath + 'svg-sprite-social.svg')
+    .iconSet('action',
+      iconPath + 'svg-sprite-action.svg')
+    .iconSet('communication',
+      iconPath + 'svg-sprite-communication.svg')
+    .iconSet('content',
+      iconPath + 'svg-sprite-content.svg')
+    .iconSet('toggle',
+      iconPath + 'svg-sprite-toggle.svg')
+    .iconSet('navigation',
+      iconPath + 'svg-sprite-navigation.svg')
+    .iconSet('image',
+      iconPath + 'svg-sprite-image.svg');
 }
 
 function run($rootScope, $state) {
-- 
2.7.4


From 814e736a09f00ad2bf850f85e50928ae23696a79 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 03:10:41 +0200
Subject: [PATCH 268/375] Step 18.21: Refactor PartyRemove

---
 imports/ui/components/partyRemove/partyRemove.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/imports/ui/components/partyRemove/partyRemove.html b/imports/ui/components/partyRemove/partyRemove.html
index ebe46ea..fc1206c 100644
--- a/imports/ui/components/partyRemove/partyRemove.html
+++ b/imports/ui/components/partyRemove/partyRemove.html
@@ -1 +1 @@
-<button type="button" class="close" aria-label="Close" ng-click="partyRemove.remove()"><span aria-hidden="true">&times;</span></button>
+<md-icon md-svg-icon="content:ic_clear_24px" ng-click="partyRemove.remove()"></md-icon>
-- 
2.7.4


From 267db0d16f8cca6756d8bbd127d2396818795ce7 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 03:11:20 +0200
Subject: [PATCH 269/375] Step 18.22: Styles for PartyRemove

---
 imports/ui/components/partyRemove/partyRemove.less | 3 +++
 1 file changed, 3 insertions(+)
 create mode 100644 imports/ui/components/partyRemove/partyRemove.less

diff --git a/imports/ui/components/partyRemove/partyRemove.less b/imports/ui/components/partyRemove/partyRemove.less
new file mode 100644
index 0000000..d7ad1f1
--- /dev/null
+++ b/imports/ui/components/partyRemove/partyRemove.less
@@ -0,0 +1,3 @@
+party-remove {
+  float: right;
+}
-- 
2.7.4


From 8f73501ef868a7bbad3452e6e57e137b8ddefe23 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 03:12:08 +0200
Subject: [PATCH 270/375] Step 18.23: Import to PartiesList

---
 imports/ui/components/partiesList/partiesList.less | 1 +
 1 file changed, 1 insertion(+)

diff --git a/imports/ui/components/partiesList/partiesList.less b/imports/ui/components/partiesList/partiesList.less
index d3f7da4..26a3d6b 100644
--- a/imports/ui/components/partiesList/partiesList.less
+++ b/imports/ui/components/partiesList/partiesList.less
@@ -5,3 +5,4 @@ parties-list {
 }
 
 @import "../partiesMap/partiesMap.less";
+@import "../partyRemove/partyRemove.less";
-- 
2.7.4


From 63bfafafb1b966860f580259e9f5ea7a65bc0e1b Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 03:17:34 +0200
Subject: [PATCH 271/375] Step 18.24: Refactor PartyRsvp

---
 imports/ui/components/partyRsvp/partyRsvp.html | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

diff --git a/imports/ui/components/partyRsvp/partyRsvp.html b/imports/ui/components/partyRsvp/partyRsvp.html
index e4c078c..ec6302b 100644
--- a/imports/ui/components/partyRsvp/partyRsvp.html
+++ b/imports/ui/components/partyRsvp/partyRsvp.html
@@ -1,3 +1,5 @@
-<input type="button" value="I'm going!" ng-click="partyRsvp.yes()" class="btn btn-default" ng-class="{'btn-primary' : partyRsvp.isYes()}"/>
-<input type="button" value="Maybe" ng-click="partyRsvp.maybe()" class="btn btn-default" ng-class="{'btn-primary' : partyRsvp.isMaybe()}"/>
-<input type="button" value="No" ng-click="partyRsvp.no()" class="btn btn-default" ng-class="{'btn-primary' : partyRsvp.isNo()}"/>
+<div layout="row" layout-align="end center">
+  <md-button ng-click="partyRsvp.yes()" ng-class="{'md-primary' : partyRsvp.isYes()}">I'm going!</md-button>
+  <md-button ng-click="partyRsvp.maybe()" ng-class="{'md-primary' : partyRsvp.isMaybe()}">Maybe</md-button>
+  <md-button ng-click="partyRsvp.no()" ng-class="{'md-primary' : partyRsvp.isNo()}">No</md-button>
+</div>
-- 
2.7.4


From c775e3d576ee75c415a992833d466f46d950ea67 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 03:18:08 +0200
Subject: [PATCH 272/375] Step 18.25: Remove styles

---
 imports/ui/components/partyRsvp/partyRsvp.less | 4 ----
 1 file changed, 4 deletions(-)
 delete mode 100644 imports/ui/components/partyRsvp/partyRsvp.less

diff --git a/imports/ui/components/partyRsvp/partyRsvp.less b/imports/ui/components/partyRsvp/partyRsvp.less
deleted file mode 100644
index be52d51..0000000
--- a/imports/ui/components/partyRsvp/partyRsvp.less
+++ /dev/null
@@ -1,4 +0,0 @@
-party-rsvp {
-  display: block;
-  margin: 15px 0;
-}
-- 
2.7.4


From 8f3d7ec6516a8daf48e174f180817b0c4b58057b Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 03:19:01 +0200
Subject: [PATCH 273/375] Step 18.26: Refactor PartyUninvited

---
 .../components/partyUninvited/partyUninvited.html  | 22 ++++++++++++----------
 1 file changed, 12 insertions(+), 10 deletions(-)

diff --git a/imports/ui/components/partyUninvited/partyUninvited.html b/imports/ui/components/partyUninvited/partyUninvited.html
index e9f9e1c..84b3eaf 100644
--- a/imports/ui/components/partyUninvited/partyUninvited.html
+++ b/imports/ui/components/partyUninvited/partyUninvited.html
@@ -1,10 +1,12 @@
-<h4>Users to invite:</h4>
-<ul>
-  <li ng-repeat="user in partyUninvited.users | uninvitedFilter:partyUninvited.party">
-    <button ng-click="partyUninvited.invite(user)" class="btn btn-primary-outline">Invite</button>
-    {{ user | displayNameFilter }}
-  </li>
-</ul>
-<div class="alert alert-success" role="alert" ng-if="(partyUninvited.users | uninvitedFilter:partyUninvited.party).length <= 0">
-  Everyone are already invited.
-</div>
+<h4 class="md-headline">
+  Users to invite:
+</h4>
+
+<md-list>
+  <md-list-item ng-repeat="user in partyUninvited.users | uninvitedFilter:partyUninvited.party" ng-click="partyUninvited.invite(user)">
+    <p>{{ user | displayNameFilter }}</p>
+  </md-list-item>
+  <md-list-item ng-if="(partyUninvited.users | uninvitedFilter:partyUninvited.party).length <= 0">
+    Everyone are already invited.
+  </md-list-item>
+</md-list>
-- 
2.7.4


From cf092240bfabd01528b8e8b518c4746398ae1b9b Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 03:19:24 +0200
Subject: [PATCH 274/375] Step 18.27: Remove unused styles

---
 imports/ui/components/partyUninvited/partyUninvited.less | 8 --------
 1 file changed, 8 deletions(-)
 delete mode 100644 imports/ui/components/partyUninvited/partyUninvited.less

diff --git a/imports/ui/components/partyUninvited/partyUninvited.less b/imports/ui/components/partyUninvited/partyUninvited.less
deleted file mode 100644
index 52b27fe..0000000
--- a/imports/ui/components/partyUninvited/partyUninvited.less
+++ /dev/null
@@ -1,8 +0,0 @@
-party-uninvited {
-  display: block;
-
-  ul {
-    padding-left: 0;
-    list-style-type: none;
-  }
-}
-- 
2.7.4


From a53f3fce894e13c7fa2a9e30125f669f3c46bdcd Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 03:20:28 +0200
Subject: [PATCH 275/375] Step 18.28: Add PartyRsvpsList less to PartiesList

---
 imports/ui/components/partiesList/partiesList.less | 1 +
 1 file changed, 1 insertion(+)

diff --git a/imports/ui/components/partiesList/partiesList.less b/imports/ui/components/partiesList/partiesList.less
index 26a3d6b..6ac87dc 100644
--- a/imports/ui/components/partiesList/partiesList.less
+++ b/imports/ui/components/partiesList/partiesList.less
@@ -6,3 +6,4 @@ parties-list {
 
 @import "../partiesMap/partiesMap.less";
 @import "../partyRemove/partyRemove.less";
+@import "../partyRsvpsList/partyRsvpsList.less";
-- 
2.7.4


From 67af7d5a3aa7910110f8db01d35c8279239ac094 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 03:21:23 +0200
Subject: [PATCH 276/375] Step 18.29: Update styles of PartyMap

---
 imports/ui/components/partyMap/partyMap.less | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/imports/ui/components/partyMap/partyMap.less b/imports/ui/components/partyMap/partyMap.less
index 3b4bed1..62f1643 100644
--- a/imports/ui/components/partyMap/partyMap.less
+++ b/imports/ui/components/partyMap/partyMap.less
@@ -1,7 +1,6 @@
 party-map {
   display: block;
-  width: 100%;
-  margin: 25px 0;
+  padding: 10px;
 
   .angular-google-map-container {
     width: 100%;
-- 
2.7.4


From 0f109191fa8d9088df1afe3474eb83ee70bfb4ad Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 03:23:22 +0200
Subject: [PATCH 277/375] Step 18.30: Refactor PartyDetails

---
 .../ui/components/partyDetails/partyDetails.html   | 51 ++++++++++------------
 1 file changed, 22 insertions(+), 29 deletions(-)

diff --git a/imports/ui/components/partyDetails/partyDetails.html b/imports/ui/components/partyDetails/partyDetails.html
index 4023174..59fe896 100644
--- a/imports/ui/components/partyDetails/partyDetails.html
+++ b/imports/ui/components/partyDetails/partyDetails.html
@@ -1,35 +1,28 @@
-<div class="container-fluid">
-  <div class="row">
-    <div class="col-md-6">
-      <form>
-        <fieldset class="form-group">
-          <label>Party name</label>
-          <input type="text" ng-model="partyDetails.party.name" ng-disabled="!partyDetails.isLoggedIn" class="form-control"/>
-        </fieldset>
+<div layout="column" layout-padding>
+  <div layout="column" layout-gt-sm="row"  layout-padding>
+    <form flex="50" layout="column">
+      <md-input-container>
+        <label>Party name</label>
+        <input ng-model="partyDetails.party.name" ng-disabled="!partyDetails.isLoggedIn">
+      </md-input-container>
 
-        <fieldset class="form-group">
-          <label>Description</label>
-          <input type="text" ng-model="partyDetails.party.name" ng-disabled="!partyDetails.isLoggedIn" class="form-control"/>
-        </fieldset>
+      <md-input-container>
+        <label>Description</label>
+        <input ng-model="partyDetails.party.description" ng-disabled="!partyDetails.isLoggedIn">
+      </md-input-container>
 
-        <div class="checkbox">
-          <label>
-            <input type="checkbox" ng-model="partyDetails.party.public" ng-disabled="!partyDetails.isLoggedIn"/>
-            Public Party?
-          </label>
-        </div>
+      <div>
+        <md-checkbox ng-model="partyDetails.party.public" ng-disabled="!partyDetails.isLoggedIn" aria-label="Public Party?">
+          Public Party?
+        </md-checkbox>
+      </div>
 
-        <button ng-click="partyDetails.save()" type="submit" class="btn btn-primary">Save</button>
-      </form>
-    </div>
-    <div class="col-md-6">
-      <party-map location="partyDetails.party.location"></party-map>
-    </div>
+      <div>
+        <md-button ng-click="partyDetails.save()" class="md-primary md-raised">Save</md-button>
+      </div>
+    </form>
+    <party-map flex="50" location="partyDetails.party.location"></party-map>
   </div>
 
-  <div class="row">
-    <div class="col-md-6">
-      <party-uninvited party="partyDetails.party" ng-show="partyDetails.canInvite()"></party-uninvited>
-    </div>
-  </div>
+  <party-uninvited flex party="partyDetails.party" ng-show="partyDetails.canInvite()"></party-uninvited>
 </div>
-- 
2.7.4


From 96e105fc760305bbb7bd83c1ba116abe148e89cd Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 03:24:01 +0200
Subject: [PATCH 278/375] Step 18.31: Leave only PartyMap inside PartyDetails
 less

---
 imports/ui/components/partyDetails/partyDetails.less | 9 ---------
 1 file changed, 9 deletions(-)

diff --git a/imports/ui/components/partyDetails/partyDetails.less b/imports/ui/components/partyDetails/partyDetails.less
index a42c467..bb42a69 100644
--- a/imports/ui/components/partyDetails/partyDetails.less
+++ b/imports/ui/components/partyDetails/partyDetails.less
@@ -1,10 +1 @@
-party-details {
-  display: block;
-
-  form {
-    margin: 25px 0;
-  }
-}
-
-@import "../partyUninvited/partyUninvited.less";
 @import "../partyMap/partyMap.less";
-- 
2.7.4


From 6c2c7b4e6a9c672ed8b7738ef8c4164b796d60b8 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 11:43:44 +0200
Subject: [PATCH 279/375] Step 18.32: Create view for PartyAddButton

---
 imports/ui/components/partyAddButton/partyAddButton.html | 3 +++
 1 file changed, 3 insertions(+)
 create mode 100644 imports/ui/components/partyAddButton/partyAddButton.html

diff --git a/imports/ui/components/partyAddButton/partyAddButton.html b/imports/ui/components/partyAddButton/partyAddButton.html
new file mode 100644
index 0000000..6e37857
--- /dev/null
+++ b/imports/ui/components/partyAddButton/partyAddButton.html
@@ -0,0 +1,3 @@
+<md-button class="md-fab" aria-label="Add new party" ng-click="partyAddButton.open($event)">
+  <md-icon md-svg-icon="content:ic_add_24px"></md-icon>
+</md-button>
-- 
2.7.4


From ee115a3a980c007daf8d61535f2dde8535c8423b Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 11:45:15 +0200
Subject: [PATCH 280/375] Step 18.33: Create PartyAddButton component

---
 .../ui/components/partyAddButton/partyAddButton.js | 45 ++++++++++++++++++++++
 1 file changed, 45 insertions(+)
 create mode 100644 imports/ui/components/partyAddButton/partyAddButton.js

diff --git a/imports/ui/components/partyAddButton/partyAddButton.js b/imports/ui/components/partyAddButton/partyAddButton.js
new file mode 100644
index 0000000..e661ba5
--- /dev/null
+++ b/imports/ui/components/partyAddButton/partyAddButton.js
@@ -0,0 +1,45 @@
+import angular from 'angular';
+import angularMeteor from 'angular-meteor';
+
+import './partyAddButton.html';
+import './partyAddModal.html';
+import { name as PartyAdd } from '../partyAdd/partyAdd';
+
+class PartyAddButton {
+  constructor($mdDialog, $mdMedia) {
+    'ngInject';
+
+    this.$mdDialog = $mdDialog;
+    this.$mdMedia = $mdMedia
+  }
+
+  open(event) {
+    this.$mdDialog.show({
+      controller($mdDialog) {
+        'ngInject';
+        
+        this.close = () => {
+          $mdDialog.hide();
+        }
+      },
+      controllerAs: 'partyAddModal',
+      templateUrl: `imports/ui/components/${name}/partyAddModal.html`,
+      targetEvent: event,
+      parent: angular.element(document.body),
+      clickOutsideToClose: true,
+      fullscreen: this.$mdMedia('sm') || this.$mdMedia('xs')
+    });
+  }
+}
+
+const name = 'partyAddButton';
+
+// create a module
+export default angular.module(name, [
+  angularMeteor,
+  PartyAdd
+]).component(name, {
+  templateUrl: `imports/ui/components/${name}/${name}.html`,
+  controllerAs: name,
+  controller: PartyAddButton
+});
-- 
2.7.4


From 35826848360589b05a7945be7cb59fe151a665ff Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 11:46:03 +0200
Subject: [PATCH 281/375] Step 18.34: Add view for modal window

---
 imports/ui/components/partyAddButton/partyAddModal.html | 16 ++++++++++++++++
 1 file changed, 16 insertions(+)
 create mode 100644 imports/ui/components/partyAddButton/partyAddModal.html

diff --git a/imports/ui/components/partyAddButton/partyAddModal.html b/imports/ui/components/partyAddButton/partyAddModal.html
new file mode 100644
index 0000000..3b490ec
--- /dev/null
+++ b/imports/ui/components/partyAddButton/partyAddModal.html
@@ -0,0 +1,16 @@
+<md-dialog aria-label="New party" ng-cloak>
+  <md-toolbar>
+    <div class="md-toolbar-tools">
+      <h2>New party</h2>
+      <span flex></span>
+      <md-button ng-click="partyAddModal.close()">
+        Close
+      </md-button>
+    </div>
+  </md-toolbar>
+  <md-dialog-content>
+    <div class="md-dialog-content">
+      <party-add done="partyAddModal.close()"></party-add>
+    </div>
+  </md-dialog-content>
+</md-dialog>
-- 
2.7.4


From 67d51d5adceff26ab5888e7a050935685545aa33 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 11:46:27 +0200
Subject: [PATCH 282/375] Step 18.35: Add some style

---
 imports/ui/components/partyAddButton/partyAddButton.less | 7 +++++++
 1 file changed, 7 insertions(+)
 create mode 100644 imports/ui/components/partyAddButton/partyAddButton.less

diff --git a/imports/ui/components/partyAddButton/partyAddButton.less b/imports/ui/components/partyAddButton/partyAddButton.less
new file mode 100644
index 0000000..73828f6
--- /dev/null
+++ b/imports/ui/components/partyAddButton/partyAddButton.less
@@ -0,0 +1,7 @@
+party-add-button {
+  .md-fab {
+    position: fixed;
+    right: 15px;
+    bottom: 15px;
+  }
+}
-- 
2.7.4


From a6f94d75714f281d3abd10a19ab820cf1e2eb5fe Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 11:47:55 +0200
Subject: [PATCH 283/375] Step 18.36: Implement `done` expression to PartyAdd

---
 imports/ui/components/partyAdd/partyAdd.js | 8 ++++++++
 1 file changed, 8 insertions(+)

diff --git a/imports/ui/components/partyAdd/partyAdd.js b/imports/ui/components/partyAdd/partyAdd.js
index 5b1ead3..0b1d240 100644
--- a/imports/ui/components/partyAdd/partyAdd.js
+++ b/imports/ui/components/partyAdd/partyAdd.js
@@ -14,6 +14,11 @@ class PartyAdd {
   submit() {
     this.party.owner = Meteor.user()._id;
     Parties.insert(this.party);
+
+    if(this.done) {
+      this.done();
+    }
+    
     this.reset();
   }
 
@@ -29,6 +34,9 @@ export default angular.module(name, [
   angularMeteor
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
+  bindings: {
+    done: '&?'
+  },
   controllerAs: name,
   controller: PartyAdd
 });
-- 
2.7.4


From 8b74839520b7ae8cb8feda2319967b852e32349e Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 11:48:44 +0200
Subject: [PATCH 284/375] Step 18.37: Add PartyAddButton to PartiesList

---
 imports/ui/components/partiesList/partiesList.js | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/imports/ui/components/partiesList/partiesList.js b/imports/ui/components/partiesList/partiesList.js
index de14546..92f56d3 100644
--- a/imports/ui/components/partiesList/partiesList.js
+++ b/imports/ui/components/partiesList/partiesList.js
@@ -9,7 +9,7 @@ import './partiesList.html';
 import { Parties } from '../../../api/parties';
 import { name as PartiesSort } from '../partiesSort/partiesSort';
 import { name as PartiesMap } from '../partiesMap/partiesMap';
-import { name as PartyAdd } from '../partyAdd/partyAdd';
+import { name as PartyAddButton } from '../partyAddButton/partyAddButton';
 import { name as PartyRemove } from '../partyRemove/partyRemove';
 import { name as PartyCreator } from '../partyCreator/partyCreator';
 import { name as PartyRsvp } from '../partyRsvp/partyRsvp';
@@ -77,7 +77,7 @@ export default angular.module(name, [
   utilsPagination,
   PartiesSort,
   PartiesMap,
-  PartyAdd,
+  PartyAddButton,
   PartyRemove,
   PartyCreator,
   PartyRsvp,
-- 
2.7.4


From c43bd1a5bfd7f5de2c9cef2488eb0dd45b4ab360 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 11:51:45 +0200
Subject: [PATCH 285/375] Step 18.38: Implement PartyAddButton

---
 imports/ui/components/partiesList/partiesList.html | 5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)

diff --git a/imports/ui/components/partiesList/partiesList.html b/imports/ui/components/partiesList/partiesList.html
index b6772eb..12987b3 100644
--- a/imports/ui/components/partiesList/partiesList.html
+++ b/imports/ui/components/partiesList/partiesList.html
@@ -1,8 +1,5 @@
 <div layout="column" layout-padding>
-  <party-add ng-show="partiesList.isLoggedIn"></party-add>
-  <div ng-hide="partiesList.isLoggedIn">
-    <i>Log in to create a party!</i>
-  </div>
+  <party-add-button ng-show="partiesList.isLoggedIn"></party-add-button>
 
   <div flex>
     <h2 class="md-display-1">List of the parties:</h2>
-- 
2.7.4


From f61ee2c1153f36b3e85d6a05444ae6ff09058052 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 11:51:59 +0200
Subject: [PATCH 286/375] Step 18.39: Import styles

---
 imports/ui/components/partiesList/partiesList.less | 1 +
 1 file changed, 1 insertion(+)

diff --git a/imports/ui/components/partiesList/partiesList.less b/imports/ui/components/partiesList/partiesList.less
index 6ac87dc..b0bc5dc 100644
--- a/imports/ui/components/partiesList/partiesList.less
+++ b/imports/ui/components/partiesList/partiesList.less
@@ -6,4 +6,5 @@ parties-list {
 
 @import "../partiesMap/partiesMap.less";
 @import "../partyRemove/partyRemove.less";
+@import "../partyAddButton/partyAddButton.less";
 @import "../partyRsvpsList/partyRsvpsList.less";
-- 
2.7.4


From 837ea3f3e5d1bb5a2a3ac462b50d7835269a14da Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 03:25:09 +0200
Subject: [PATCH 287/375] Step 18.40: Create view for Auth

---
 imports/ui/components/auth/auth.html | 6 ++++++
 1 file changed, 6 insertions(+)
 create mode 100644 imports/ui/components/auth/auth.html

diff --git a/imports/ui/components/auth/auth.html b/imports/ui/components/auth/auth.html
new file mode 100644
index 0000000..28f7a45
--- /dev/null
+++ b/imports/ui/components/auth/auth.html
@@ -0,0 +1,6 @@
+<div layout="row">
+  <md-button flex ui-sref="login" ng-hide="auth.isLoggedIn">Login</md-button>
+  <md-button flex ui-sref="register" ng-hide="auth.isLoggedIn">Sign up</md-button>
+  <md-button flex ng-click="auth.logout()" ng-show="auth.isLoggedIn">Logout</md-button>
+  <div ng-show="auth.isLoggedIn">{{ auth.currentUser | displayNameFilter }}</div>
+</div>
-- 
2.7.4


From 506d57a70b870988d0718c22079c02e5a4537906 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 03:25:49 +0200
Subject: [PATCH 288/375] Step 18.41: Create Auth component

---
 imports/ui/components/auth/auth.js | 41 ++++++++++++++++++++++++++++++++++++++
 1 file changed, 41 insertions(+)
 create mode 100644 imports/ui/components/auth/auth.js

diff --git a/imports/ui/components/auth/auth.js b/imports/ui/components/auth/auth.js
new file mode 100644
index 0000000..724bdbe
--- /dev/null
+++ b/imports/ui/components/auth/auth.js
@@ -0,0 +1,41 @@
+import angular from 'angular';
+import angularMeteor from 'angular-meteor';
+
+import { Meteor } from 'meteor/meteor';
+import { Accounts } from 'meteor/accounts-base';
+
+import './auth.html';
+import { name as DisplayNameFilter } from '../../filters/displayNameFilter';
+
+const name = 'auth';
+
+class Auth {
+  constructor($scope, $reactive) {
+    'ngInject';
+
+    $reactive(this).attach($scope);
+
+    this.helpers({
+      isLoggedIn() {
+        return !!Meteor.userId();
+      },
+      currentUser() {
+        return Meteor.user();
+      }
+    });
+  }
+
+  logout() {
+    Accounts.logout();
+  }
+}
+
+// create a module
+export default angular.module(name, [
+  angularMeteor,
+  DisplayNameFilter
+]).component(name, {
+  templateUrl: `imports/ui/components/${name}/${name}.html`,
+  controllerAs: name,
+  controller: Auth
+});
-- 
2.7.4


From 6e4609eb50ccb50cbf668c33ab47f0d62a92e02b Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 03:42:53 +0200
Subject: [PATCH 289/375] Step 18.42: View for Login

---
 imports/ui/components/login/login.html | 72 ++++++++++++++++++++++++++++++++++
 1 file changed, 72 insertions(+)
 create mode 100644 imports/ui/components/login/login.html

diff --git a/imports/ui/components/login/login.html b/imports/ui/components/login/login.html
new file mode 100644
index 0000000..64ea544
--- /dev/null
+++ b/imports/ui/components/login/login.html
@@ -0,0 +1,72 @@
+<md-content layout="row" layout-align="center start" layout-fill layout-margin>
+
+  <md-whiteframe layout="column" flex flex-md="50" flex-lg="50" flex-gt-lg="33" class="md-whiteframe-z2" layout-fill>
+
+    <md-toolbar class="md-primary md-tall" layout="column" layout-align="end" layout-fill>
+      <div layout="row" class="md-toolbar-tools md-toolbar-tools-bottom">
+        <h3 class="md-display-1">
+          Sign in
+        </h3>
+      </div>
+    </md-toolbar>
+
+    <div layout="column" layout-fill layout-margin layout-padding>
+      <div layout="row" layout-fill layout-margin>
+        <p class="md-body-2">
+          Use existing account</p>
+      </div>
+      <div layout="row" layout-fill layout-margin layout-padding layout-wrap>
+        <md-button class="md-raised">
+          <md-icon md-svg-icon="social:ic_google_24px" style="color: #DC4A38;"></md-icon>
+          <span>
+            Google</span>
+        </md-button>
+        <md-button class="md-raised">
+          <md-icon md-svg-icon="social:ic_facebook_24px" style="color: #3F62B4;"></md-icon>
+          <span>Facebook
+          </span>
+        </md-button>
+        <md-button class="md-raised">
+          <md-icon md-svg-icon="social:ic_twitter_24px" style="color: #27AAE2;"></md-icon>
+          <span>Twitter
+          </span>
+        </md-button>
+      </div>
+      <md-divider class="inset"></md-divider>
+
+      <div layout="row" layout-fill layout-margin>
+        <p class="md-body-2">
+          Sign in with your email</p>
+      </div>
+
+      <form name="loginForm" layout="column" layout-fill layout-padding layout-margin>
+        <md-input-container>
+          <label>
+            Email
+          </label>
+          <input type="text" ng-model="login.credentials.email" aria-label="email" required/>
+        </md-input-container>
+        <md-input-container>
+          <label>
+            Password
+          </label>
+          <input type="password" ng-model="login.credentials.password" aria-label="password" required/>
+        </md-input-container>
+        <div layout="row" layout-align="space-between center">
+          <a class="md-button" href="/password">Forgot password?</a>
+          <md-button class="md-raised md-primary" ng-click="login.login()" aria-label="login" ng-disabled="login.loginForm.$invalid()">Sign In
+          </md-button>
+        </div>
+      </form>
+      <md-toolbar ng-show="login.error" class="md-warn" layout="row" layout-fill layout-padding layout-margin>
+        <p class="md-body-1">{{ login.error }}</p>
+      </md-toolbar>
+      <md-divider></md-divider>
+      <div layout="row" layout-align="center">
+        <a class="md-button" href="/register">Need an account?</a>
+      </div>
+
+    </div>
+
+  </md-whiteframe>
+</md-content>
-- 
2.7.4


From 6f325fc270fc422fbdd6b3a0da1f85ac913e4d3b Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 03:44:02 +0200
Subject: [PATCH 290/375] Step 18.43: Create Login

---
 imports/ui/components/login/login.js | 61 ++++++++++++++++++++++++++++++++++++
 1 file changed, 61 insertions(+)
 create mode 100644 imports/ui/components/login/login.js

diff --git a/imports/ui/components/login/login.js b/imports/ui/components/login/login.js
new file mode 100644
index 0000000..f5a3be4
--- /dev/null
+++ b/imports/ui/components/login/login.js
@@ -0,0 +1,61 @@
+import angular from 'angular';
+import angularMeteor from 'angular-meteor';
+import uiRouter from 'angular-ui-router';
+
+import { Meteor } from 'meteor/meteor';
+
+import './login.html';
+
+import { name as Register } from '../register/register';
+
+class Login {
+  constructor($scope, $reactive, $state) {
+    'ngInject';
+
+    this.$state = $state;
+
+    $reactive(this).attach($scope);
+
+    this.credentials = {
+      email: '',
+      password: ''
+    };
+
+    this.error = '';
+  }
+
+  login() {
+    Meteor.loginWithPassword(this.credentials.email, this.credentials.password,
+      this.$bindToContext((err) => {
+        if (err) {
+          this.error = err;
+        } else {
+          this.$state.go('parties');
+        }
+      })
+    );
+  }
+}
+
+const name = 'login';
+
+// create a module
+export default angular.module(name, [
+  angularMeteor,
+  uiRouter
+])
+  .component(name, {
+    templateUrl: `imports/ui/components/${name}/${name}.html`,
+    controllerAs: name,
+    controller: Login
+  })
+  .config(config);
+
+function config($stateProvider) {
+  'ngInject';
+
+  $stateProvider.state('login', {
+    url: '/login',
+    template: '<login></login>'
+  });
+}
-- 
2.7.4


From 39075ace26ccc2904ab418d926032bdb9d87ae9f Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 03:44:39 +0200
Subject: [PATCH 291/375] Step 18.44: Add Login to Auth

---
 imports/ui/components/auth/auth.js | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/auth/auth.js b/imports/ui/components/auth/auth.js
index 724bdbe..9c5de5a 100644
--- a/imports/ui/components/auth/auth.js
+++ b/imports/ui/components/auth/auth.js
@@ -6,6 +6,7 @@ import { Accounts } from 'meteor/accounts-base';
 
 import './auth.html';
 import { name as DisplayNameFilter } from '../../filters/displayNameFilter';
+import { name as Login } from '../login/login';
 
 const name = 'auth';
 
@@ -33,7 +34,8 @@ class Auth {
 // create a module
 export default angular.module(name, [
   angularMeteor,
-  DisplayNameFilter
+  DisplayNameFilter,
+  Login
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
   controllerAs: name,
-- 
2.7.4


From 6c770bfa067356f36e83108b54402a2549ca890b Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 03:45:38 +0200
Subject: [PATCH 292/375] Step 18.45: View for Register

---
 imports/ui/components/register/register.html | 72 ++++++++++++++++++++++++++++
 1 file changed, 72 insertions(+)
 create mode 100644 imports/ui/components/register/register.html

diff --git a/imports/ui/components/register/register.html b/imports/ui/components/register/register.html
new file mode 100644
index 0000000..37b42c6
--- /dev/null
+++ b/imports/ui/components/register/register.html
@@ -0,0 +1,72 @@
+<md-content layout="row" layout-align="center start" layout-fill layout-margin>
+  <md-whiteframe layout="column" flex flex-md="50" flex-lg="50" flex-gt-lg="33" class="md-whiteframe-z2" layout-fill>
+
+    <md-toolbar class="md-primary md-tall" layout="column" layout-align="end" layout-fill>
+      <div layout="row" class="md-toolbar-tools md-toolbar-tools-bottom">
+        <h3 class="md-display-1">
+          Register a new account</h3>
+      </div>
+    </md-toolbar>
+
+    <div layout="column" layout-fill layout-margin layout-padding>
+
+      <div layout="row" layout-fill layout-margin>
+        <p class="md-body-2">Use your email?</p>
+      </div>
+
+      <form name="registerForm" layout="column" layout-fill layout-padding layout-margin>
+        <md-input-container >
+          <label>
+            Email
+          </label>
+          <input type="text" ng-model="register.credentials.email" placeholder="email" aria-label="email" required/>
+        </md-input-container>
+        <md-input-container >
+          <label>
+            Password
+          </label>
+          <input type="password" ng-model="register.credentials.password" placeholder="password" aria-label="password" required/>
+        </md-input-container>
+        <div layout="row" layout-align="end center">
+          <md-button class="md-raised md-primary" ng-click="register.register()" aria-label="login" ng-disabled="register.registerForm.$invalid()">Register</md-button>
+        </div>
+      </form>
+
+      <md-divider class="inset"></md-divider>
+
+      <div layout="row" layout-fill layout-margin>
+        <p class="md-body-2">
+          Want to use an existing account?
+        </p>
+      </div>
+
+      <div layout="row" layout-fill layout-margin layout-padding layout-wrap>
+        <md-button class="md-raised">
+          <md-icon md-svg-icon="social:ic_google_24px" style="color: #DC4A38;"></md-icon>
+          <span>
+            Google</span>
+        </md-button>
+        <md-button class="md-raised">
+          <md-icon md-svg-icon="social:ic_facebook_24px" style="color: #3F62B4;"></md-icon>
+          <span>Facebook
+          </span>
+        </md-button>
+        <md-button class="md-raised">
+          <md-icon md-svg-icon="social:ic_twitter_24px" style="color: #27AAE2;"></md-icon>
+          <span>Twitter
+          </span>
+        </md-button>
+      </div>
+      <md-toolbar ng-show="register.error" class="md-warn" layout="row" layout-fill layout-padding layout-margin>
+        <p class="md-body-1">{{ register.error }}</p>
+      </md-toolbar>
+
+      <md-divider></md-divider>
+      <div layout="row" layout-align="center">
+        <a class="md-button" href="/login">Already a user?</a>
+      </div>
+
+    </div>
+
+  </md-whiteframe>
+</md-content>
-- 
2.7.4


From 739bfc035517dc1223975ec013a542fdff129d18 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 03:46:15 +0200
Subject: [PATCH 293/375] Step 18.46: Create Register

---
 imports/ui/components/register/register.js | 58 ++++++++++++++++++++++++++++++
 1 file changed, 58 insertions(+)
 create mode 100644 imports/ui/components/register/register.js

diff --git a/imports/ui/components/register/register.js b/imports/ui/components/register/register.js
new file mode 100644
index 0000000..91b108c
--- /dev/null
+++ b/imports/ui/components/register/register.js
@@ -0,0 +1,58 @@
+import angular from 'angular';
+import angularMeteor from 'angular-meteor';
+import uiRouter from 'angular-ui-router';
+
+import { Accounts } from 'meteor/accounts-base';
+
+import './register.html';
+
+class Register {
+  constructor($scope, $reactive, $state) {
+    'ngInject';
+
+    this.$state = $state;
+
+    $reactive(this).attach($scope);
+
+    this.credentials = {
+      email: '',
+      password: ''
+    };
+
+    this.error = '';
+  }
+
+  register() {
+    Accounts.createUser(this.credentials,
+      this.$bindToContext((err) => {
+        if (err) {
+          this.error = err;
+        } else {
+          this.$state.go('parties');
+        }
+      })
+    );
+  }
+}
+
+const name = 'register';
+
+// create a module
+export default angular.module(name, [
+  angularMeteor,
+  uiRouter
+])
+  .component(name, {
+    templateUrl: `imports/ui/components/${name}/${name}.html`,
+    controllerAs: name,
+    controller: Register
+  })
+  .config(config);
+
+function config($stateProvider) {
+  'ngInject';
+  $stateProvider.state('register', {
+    url: '/register',
+    template: '<register></register>'
+  });
+}
-- 
2.7.4


From 0b086ef72789f6f18e415aacaacca99a868feea7 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 03:46:55 +0200
Subject: [PATCH 294/375] Step 18.47: Add Register to Auth

---
 imports/ui/components/auth/auth.js | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/auth/auth.js b/imports/ui/components/auth/auth.js
index 9c5de5a..e4b40a5 100644
--- a/imports/ui/components/auth/auth.js
+++ b/imports/ui/components/auth/auth.js
@@ -7,6 +7,7 @@ import { Accounts } from 'meteor/accounts-base';
 import './auth.html';
 import { name as DisplayNameFilter } from '../../filters/displayNameFilter';
 import { name as Login } from '../login/login';
+import { name as Register } from '../register/register';
 
 const name = 'auth';
 
@@ -35,7 +36,8 @@ class Auth {
 export default angular.module(name, [
   angularMeteor,
   DisplayNameFilter,
-  Login
+  Login,
+  Register
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
   controllerAs: name,
-- 
2.7.4


From be9fe52a3109742907e5c64c658a1b4dbcf3aaf2 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 03:47:29 +0200
Subject: [PATCH 295/375] Step 18.48: View for Password

---
 imports/ui/components/password/password.html | 40 ++++++++++++++++++++++++++++
 1 file changed, 40 insertions(+)
 create mode 100644 imports/ui/components/password/password.html

diff --git a/imports/ui/components/password/password.html b/imports/ui/components/password/password.html
new file mode 100644
index 0000000..94df2b0
--- /dev/null
+++ b/imports/ui/components/password/password.html
@@ -0,0 +1,40 @@
+<md-content layout="row" layout-align="center start" layout-fill layout-margin>
+  <md-whiteframe layout="column" flex flex-md="50" flex-lg="50" flex-gt-lg="33" class="md-whiteframe-z2" layout-fill>
+
+    <md-toolbar class="md-primary md-tall" layout="column" layout-align="end" layout-fill>
+      <div layout="row" class="md-toolbar-tools md-toolbar-tools-bottom">
+        <h3 class="md-display-1"> Reset Password</h3>
+      </div>
+    </md-toolbar>
+
+    <div layout="column" layout-fill layout-margin layout-padding>
+
+      <div layout="row" layout-fill layout-margin>
+        <p class="md-body-2">Enter your email so we can send you a reset link</p>
+      </div>
+
+      <form name="resetForm" layout="column" layout-fill layout-padding layout-margin>
+        <md-input-container>
+          <label> Email </label>
+          <input type="text" ng-model="password.credentials.email" placeholder="email" aria-label="email" required/>
+        </md-input-container>
+        <div layout="row" layout-align="end center">
+          <md-button class="md-raised md-primary" ng-click="password.reset()" aria-label="reset"
+                     ng-disabled="password.resetForm.$invalid()">Send Email
+          </md-button>
+        </div>
+      </form>
+
+      <md-toolbar ng-show="password.error" class="md-warn" layout="row" layout-fill layout-padding layout-margin>
+        <p class="md-body-1">{{ password.error }}</p>
+      </md-toolbar>
+
+      <md-divider></md-divider>
+      <div layout="row" layout-align="center">
+        <a class="md-button" href="/login">Sign in</a>
+      </div>
+
+    </div>
+
+  </md-whiteframe>
+</md-content>
-- 
2.7.4


From 6bb21c4b1a90014eafb371f5cf5e1d7db0bc0e2a Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 03:48:03 +0200
Subject: [PATCH 296/375] Step 18.49: Create Password

---
 imports/ui/components/password/password.js | 56 ++++++++++++++++++++++++++++++
 1 file changed, 56 insertions(+)
 create mode 100644 imports/ui/components/password/password.js

diff --git a/imports/ui/components/password/password.js b/imports/ui/components/password/password.js
new file mode 100644
index 0000000..946f013
--- /dev/null
+++ b/imports/ui/components/password/password.js
@@ -0,0 +1,56 @@
+import angular from 'angular';
+import angularMeteor from 'angular-meteor';
+import uiRouter from 'angular-ui-router';
+
+import { Accounts } from 'meteor/accounts-base';
+
+import './password.html';
+
+class Register {
+  constructor($scope, $reactive, $state) {
+    'ngInject';
+
+    this.$state = $state;
+
+    $reactive(this).attach($scope);
+
+    this.credentials = {
+      email: ''
+    };
+
+    this.error = '';
+  }
+
+  reset() {
+    Accounts.forgotPassword(this.credentials, this.$bindToContext((err) => {
+      if (err) {
+        this.error = err;
+      } else {
+        this.$state.go('parties');
+      }
+    }));
+  }
+}
+
+const name = 'password';
+
+// create a module
+export default angular.module(name, [
+  angularMeteor,
+  uiRouter
+])
+  .component(name, {
+    templateUrl: `imports/ui/components/${name}/${name}.html`,
+    controllerAs: name,
+    controller: Register
+  })
+  .config(config);
+
+function config($stateProvider) {
+  'ngInject';
+
+  $stateProvider.state('password', {
+    url: '/password',
+    template: '<password></password>'
+  });
+}
-- 
2.7.4


From 5425df9ca02e1898e50ec85d4e8e3db47aa1900a Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 03:48:33 +0200
Subject: [PATCH 297/375] Step 18.50: Add Password to Auth

---
 imports/ui/components/auth/auth.js | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/auth/auth.js b/imports/ui/components/auth/auth.js
index e4b40a5..a780572 100644
--- a/imports/ui/components/auth/auth.js
+++ b/imports/ui/components/auth/auth.js
@@ -8,6 +8,7 @@ import './auth.html';
 import { name as DisplayNameFilter } from '../../filters/displayNameFilter';
 import { name as Login } from '../login/login';
 import { name as Register } from '../register/register';
+import { name as Password } from '../password/password';
 
 const name = 'auth';
 
@@ -37,7 +38,8 @@ export default angular.module(name, [
   angularMeteor,
   DisplayNameFilter,
   Login,
-  Register
+  Register,
+  Password
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
   controllerAs: name,
-- 
2.7.4


From fde5deabeafd03b63c96e523f6f1799f0f10b247 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 03:50:12 +0200
Subject: [PATCH 298/375] Step 18.51: Add Auth to Socially

---
 imports/ui/components/socially/socially.js | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/imports/ui/components/socially/socially.js b/imports/ui/components/socially/socially.js
index 4cd8e0c..565f42f 100644
--- a/imports/ui/components/socially/socially.js
+++ b/imports/ui/components/socially/socially.js
@@ -7,6 +7,7 @@ import './socially.html';
 import { name as PartiesList } from '../partiesList/partiesList';
 import { name as PartyDetails } from '../partyDetails/partyDetails';
 import { name as Navigation } from '../navigation/navigation';
+import { name as Auth } from '../auth/auth';
 
 class Socially {}
 
@@ -20,6 +21,7 @@ export default angular.module(name, [
   PartiesList,
   PartyDetails,
   Navigation,
+  Auth,
   'accounts.ui'
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
-- 
2.7.4


From 3696434b0207edde572c6f8068edf6d0069aabc7 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 03:50:46 +0200
Subject: [PATCH 299/375] Step 18.52: Implement Auth

---
 imports/ui/components/navigation/navigation.html | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/navigation/navigation.html b/imports/ui/components/navigation/navigation.html
index 0b1d8a6..2d81bc4 100644
--- a/imports/ui/components/navigation/navigation.html
+++ b/imports/ui/components/navigation/navigation.html
@@ -5,6 +5,7 @@
         Socially
       </span>
     </h2>
-    <login-buttons></login-buttons>
+    <span flex></span>
+    <auth></auth>
   </div>
 </md-toolbar>
-- 
2.7.4


From 39dcadb1212f4cc32b695eaaf668a17dcb334571 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 03:51:45 +0200
Subject: [PATCH 300/375] Step 18.53: Remove .less of Navigation

---
 imports/ui/components/navigation/navigation.less | 5 -----
 1 file changed, 5 deletions(-)
 delete mode 100644 imports/ui/components/navigation/navigation.less

diff --git a/imports/ui/components/navigation/navigation.less b/imports/ui/components/navigation/navigation.less
deleted file mode 100644
index 87b8777..0000000
--- a/imports/ui/components/navigation/navigation.less
+++ /dev/null
@@ -1,5 +0,0 @@
-navigation {
-  login-buttons {
-    margin-left: 15px;
-  }
-}
-- 
2.7.4


From d2a12e535d998a902ea351ccd9c48be83ac88fa7 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 03:52:12 +0200
Subject: [PATCH 301/375] Step 18.54: Remove import statement

---
 imports/ui/components/socially/socially.less | 2 --
 1 file changed, 2 deletions(-)

diff --git a/imports/ui/components/socially/socially.less b/imports/ui/components/socially/socially.less
index 3eabc12..742f92d 100644
--- a/imports/ui/components/socially/socially.less
+++ b/imports/ui/components/socially/socially.less
@@ -2,7 +2,5 @@ socially {
   display: block;
 }
 
-
-@import "../navigation/navigation.less";
 @import "../partiesList/partiesList.less";
 @import "../partyDetails/partyDetails.less";
-- 
2.7.4


From a78619170ee768589c8de459e62dc25a40d4a1be Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 12:38:56 +0200
Subject: [PATCH 302/375] Step 20.1: Add `jalik:ufs`

---
 .meteor/packages | 1 +
 .meteor/versions | 2 ++
 2 files changed, 3 insertions(+)

diff --git a/.meteor/packages b/.meteor/packages
index c6567f3..182ec84 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -29,3 +29,4 @@ check
 email
 less
 planettraining:material-design-icons
+jalik:ufs
diff --git a/.meteor/versions b/.meteor/versions
index fb2822c..234e26b 100644
--- a/.meteor/versions
+++ b/.meteor/versions
@@ -42,12 +42,14 @@ html-tools@1.0.9
 htmljs@1.0.9
 http@1.1.5
 id-map@1.0.7
+jalik:ufs@0.5.3
 jquery@1.11.8
 launch-screen@1.0.11
 less@2.5.6
 livedata@1.0.18
 localstorage@1.0.7
 logging@1.0.12
+matb33:collection-hooks@0.7.15
 meteor@1.1.14
 meteor-base@1.0.4
 minifier-css@1.1.11
-- 
2.7.4


From ae6fd83d3aac696a4c63ba4d21bd89701a79311d Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 12:40:52 +0200
Subject: [PATCH 303/375] Step 20.2: Add `jalik:ufs-gridfs`

---
 .meteor/packages | 1 +
 .meteor/versions | 1 +
 2 files changed, 2 insertions(+)

diff --git a/.meteor/packages b/.meteor/packages
index 182ec84..57c1f6b 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -30,3 +30,4 @@ email
 less
 planettraining:material-design-icons
 jalik:ufs
+jalik:ufs-gridfs
diff --git a/.meteor/versions b/.meteor/versions
index 234e26b..abe42a2 100644
--- a/.meteor/versions
+++ b/.meteor/versions
@@ -43,6 +43,7 @@ htmljs@1.0.9
 http@1.1.5
 id-map@1.0.7
 jalik:ufs@0.5.3
+jalik:ufs-gridfs@0.1.1
 jquery@1.11.8
 launch-screen@1.0.11
 less@2.5.6
-- 
2.7.4


From 44cc4f7e95be057c8679b05a84b17fc72c2147f3 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 12:48:58 +0200
Subject: [PATCH 304/375] Step 20.3: Create Images and Thumbs collections

---
 imports/api/images/collection.js | 21 +++++++++++++++++++++
 1 file changed, 21 insertions(+)
 create mode 100644 imports/api/images/collection.js

diff --git a/imports/api/images/collection.js b/imports/api/images/collection.js
new file mode 100644
index 0000000..a522111
--- /dev/null
+++ b/imports/api/images/collection.js
@@ -0,0 +1,21 @@
+import { Meteor } from 'meteor/meteor';
+import { Mongo } from 'meteor/mongo';
+
+export const Images = new Mongo.Collection('images');
+export const Thumbs = new Mongo.Collection('thumbs');
+
+function loggedIn(userId) {
+  return !!userId;
+}
+
+Thumbs.allow({
+  insert: loggedIn,
+  update: loggedIn,
+  remove: loggedIn
+});
+
+Images.allow({
+  insert: loggedIn,
+  update: loggedIn,
+  remove: loggedIn
+});
-- 
2.7.4


From 40918489202b9717068fb4f76b3da7035fff334a Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 12:50:11 +0200
Subject: [PATCH 305/375] Step 20.4: Create ThumbsStore and ImagesStore

---
 imports/api/images/store.js | 18 ++++++++++++++++++
 1 file changed, 18 insertions(+)
 create mode 100644 imports/api/images/store.js

diff --git a/imports/api/images/store.js b/imports/api/images/store.js
new file mode 100644
index 0000000..58462c1
--- /dev/null
+++ b/imports/api/images/store.js
@@ -0,0 +1,18 @@
+import { UploadFS } from 'meteor/jalik:ufs';
+import { Images, Thumbs } from './collection';
+
+export const ThumbsStore = new UploadFS.store.GridFS({
+  collection: Thumbs,
+  name: 'thumbs'
+});
+
+export const ImagesStore = new UploadFS.store.GridFS({
+  collection: Images,
+  name: 'images',
+  filter: new UploadFS.Filter({
+    contentTypes: ['image/*']
+  }),
+  copyTo: [
+    ThumbsStore
+  ]
+});
-- 
2.7.4


From dc18b7280aaada9e1c8ed9bd1da0b49b4125f08c Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 12:50:57 +0200
Subject: [PATCH 306/375] Step 20.5: Create main export file of Images and
 Thumbs

---
 imports/api/images/index.js | 2 ++
 1 file changed, 2 insertions(+)
 create mode 100644 imports/api/images/index.js

diff --git a/imports/api/images/index.js b/imports/api/images/index.js
new file mode 100644
index 0000000..9c18361
--- /dev/null
+++ b/imports/api/images/index.js
@@ -0,0 +1,2 @@
+export * from './collection';
+export * from './store';
-- 
2.7.4


From c57e4c525e5b2244892217c255fb1faae1390313 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 12:52:30 +0200
Subject: [PATCH 307/375] Step 20.6: Resize images

---
 imports/api/images/store.js | 14 +++++++++++++-
 1 file changed, 13 insertions(+), 1 deletion(-)

diff --git a/imports/api/images/store.js b/imports/api/images/store.js
index 58462c1..a0fa6d6 100644
--- a/imports/api/images/store.js
+++ b/imports/api/images/store.js
@@ -3,7 +3,19 @@ import { Images, Thumbs } from './collection';
 
 export const ThumbsStore = new UploadFS.store.GridFS({
   collection: Thumbs,
-  name: 'thumbs'
+  name: 'thumbs',
+  transformWrite(from, to, fileId, file) {
+    // Resize to 32x32
+    const gm = require('gm');
+
+    gm(from, file.name)
+      .resize(32, 32)
+      .gravity('Center')
+      .extent(32, 32)
+      .quality(75)
+      .stream()
+      .pipe(to);
+  }
 });
 
 export const ImagesStore = new UploadFS.store.GridFS({
-- 
2.7.4


From 4b2df2acc0eb2d4fb352e11b711c1a0afb2b8dc7 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 12:54:06 +0200
Subject: [PATCH 308/375] Step 20.7: Install `gm`

---
 package.json | 1 +
 1 file changed, 1 insertion(+)

diff --git a/package.json b/package.json
index 4e726a8..19b4b6e 100644
--- a/package.json
+++ b/package.json
@@ -16,6 +16,7 @@
     "angular-simple-logger": "^0.1.7",
     "angular-ui-router": "^1.0.0-alpha.4",
     "angular-utils-pagination": "^0.11.1",
+    "gm": "^1.22.0",
     "meteor-node-stubs": "~0.2.0",
     "underscore": "^1.8.3"
   },
-- 
2.7.4


From c1232b29f6fc40ce1ba3decb81ff1295a605447e Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 12:58:21 +0200
Subject: [PATCH 309/375] Step 20.8: Create view for PartyUpload

---
 imports/ui/components/partyUpload/partyUpload.html | 9 +++++++++
 1 file changed, 9 insertions(+)
 create mode 100644 imports/ui/components/partyUpload/partyUpload.html

diff --git a/imports/ui/components/partyUpload/partyUpload.html b/imports/ui/components/partyUpload/partyUpload.html
new file mode 100644
index 0000000..d53d6c7
--- /dev/null
+++ b/imports/ui/components/partyUpload/partyUpload.html
@@ -0,0 +1,9 @@
+<div layout="column">
+  <div>
+      <div>Click here to select image</div>
+      <div>
+        <strong>OR</strong>
+      </div>
+      <div>You can also drop image to here</div>
+  </div>
+</div>
-- 
2.7.4


From 39bcf4d0a47e17d83d78c946e375f70d5c5209ba Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 12:59:42 +0200
Subject: [PATCH 310/375] Step 20.9: Create PartyUpload component

---
 imports/ui/components/partyUpload/partyUpload.js | 19 +++++++++++++++++++
 1 file changed, 19 insertions(+)
 create mode 100644 imports/ui/components/partyUpload/partyUpload.js

diff --git a/imports/ui/components/partyUpload/partyUpload.js b/imports/ui/components/partyUpload/partyUpload.js
new file mode 100644
index 0000000..9a48483
--- /dev/null
+++ b/imports/ui/components/partyUpload/partyUpload.js
@@ -0,0 +1,19 @@
+import angular from 'angular';
+import angularMeteor from 'angular-meteor';
+
+import { Meteor } from 'meteor/meteor';
+
+import './partyUpload.html';
+
+class PartyUpload {}
+
+const name = 'partyUpload';
+
+// create a module
+export default angular.module(name, [
+  angularMeteor
+]).component(name, {
+  templateUrl: `imports/ui/components/${name}/${name}.html`,
+  controllerAs: name,
+  controller: PartyUpload
+});
-- 
2.7.4


From 779d86cb75ad633e4c75e77fe6eb7a108120dfe7 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 13:01:32 +0200
Subject: [PATCH 311/375] Step 20.10: Add to PartyAdd

---
 imports/ui/components/partyAdd/partyAdd.js | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/imports/ui/components/partyAdd/partyAdd.js b/imports/ui/components/partyAdd/partyAdd.js
index 0b1d240..2cda43f 100644
--- a/imports/ui/components/partyAdd/partyAdd.js
+++ b/imports/ui/components/partyAdd/partyAdd.js
@@ -5,6 +5,7 @@ import { Meteor } from 'meteor/meteor';
 
 import './partyAdd.html';
 import { Parties } from '../../../api/parties';
+import { name as PartyUpload } from '../partyUpload/partyUpload';
 
 class PartyAdd {
   constructor() {
@@ -18,7 +19,7 @@ class PartyAdd {
     if(this.done) {
       this.done();
     }
-    
+
     this.reset();
   }
 
@@ -31,7 +32,8 @@ const name = 'partyAdd';
 
 // create a module
 export default angular.module(name, [
-  angularMeteor
+  angularMeteor,
+  PartyUpload
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
   bindings: {
-- 
2.7.4


From 7c1725c71ab4b41a53dd2de0760375f4101fa23d Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 13:03:51 +0200
Subject: [PATCH 312/375] Step 20.11: Implement to the view

---
 imports/ui/components/partyAdd/partyAdd.html | 1 +
 1 file changed, 1 insertion(+)

diff --git a/imports/ui/components/partyAdd/partyAdd.html b/imports/ui/components/partyAdd/partyAdd.html
index 6e504f0..8946e6d 100644
--- a/imports/ui/components/partyAdd/partyAdd.html
+++ b/imports/ui/components/partyAdd/partyAdd.html
@@ -19,4 +19,5 @@
   <div flex>
     <md-button ng-click="partyAdd.submit()" class="md-raised">Add Party!</md-button>
   </div>
+  <party-upload files="partyAdd.party.images"></party-upload>
 </div>
-- 
2.7.4


From 990bb900e6c9d7f8c41781d546eaf685f0ef2bfa Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 13:05:32 +0200
Subject: [PATCH 313/375] Step 20.12: install `ng-file-upload`

---
 package.json | 1 +
 1 file changed, 1 insertion(+)

diff --git a/package.json b/package.json
index 19b4b6e..c19d6de 100644
--- a/package.json
+++ b/package.json
@@ -18,6 +18,7 @@
     "angular-utils-pagination": "^0.11.1",
     "gm": "^1.22.0",
     "meteor-node-stubs": "~0.2.0",
+    "ng-file-upload": "^12.0.4",
     "underscore": "^1.8.3"
   },
   "devDependencies": {
-- 
2.7.4


From 574e6437f6fc2fc45ab4db4015b244f9f46eb59e Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 13:08:06 +0200
Subject: [PATCH 314/375] Step 20.13: Add as a dependency

---
 imports/ui/components/partyUpload/partyUpload.js | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partyUpload/partyUpload.js b/imports/ui/components/partyUpload/partyUpload.js
index 9a48483..ecbf8d3 100644
--- a/imports/ui/components/partyUpload/partyUpload.js
+++ b/imports/ui/components/partyUpload/partyUpload.js
@@ -1,5 +1,6 @@
 import angular from 'angular';
 import angularMeteor from 'angular-meteor';
+import ngFileUpload from 'ng-file-upload';
 
 import { Meteor } from 'meteor/meteor';
 
@@ -11,7 +12,8 @@ const name = 'partyUpload';
 
 // create a module
 export default angular.module(name, [
-  angularMeteor
+  angularMeteor,
+  ngFileUpload
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
   controllerAs: name,
-- 
2.7.4


From 5057fab32cd33913c407add8da09b93ca9bdc186 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 13:09:13 +0200
Subject: [PATCH 315/375] Step 20.14: Add ngf-drop to the view

---
 imports/ui/components/partyUpload/partyUpload.html | 21 +++++++++++++++------
 1 file changed, 15 insertions(+), 6 deletions(-)

diff --git a/imports/ui/components/partyUpload/partyUpload.html b/imports/ui/components/partyUpload/partyUpload.html
index d53d6c7..70e5af3 100644
--- a/imports/ui/components/partyUpload/partyUpload.html
+++ b/imports/ui/components/partyUpload/partyUpload.html
@@ -1,9 +1,18 @@
 <div layout="column">
-  <div>
-      <div>Click here to select image</div>
-      <div>
-        <strong>OR</strong>
-      </div>
-      <div>You can also drop image to here</div>
+  <div ngf-drop
+    ngf-select
+    ngf-change="partyUpload.addImages($files)"
+    ngf-drag-over-class="{accept:'dragover', reject:'dragover-err', delay:100}"
+    class="drop-box"
+    ngf-multiple="false"
+    ngf-allow-dir="false"
+    ngf-accept="'image/*'"
+    ngf-drop-available="true"
+    ng-hide="partyUpload.cropImgSrc">
+    <div>Click here to select image</div>
+    <div>
+      <strong>OR</strong>
+    </div>
+    <div>You can also drop image to here</div>
   </div>
 </div>
-- 
2.7.4


From 3f993ea7208119e5dfec605df24f24fd1b96894d Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 13:12:52 +0200
Subject: [PATCH 316/375] Step 20.15: Handle file selection

---
 imports/ui/components/partyUpload/partyUpload.js | 25 +++++++++++++++++++++++-
 1 file changed, 24 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partyUpload/partyUpload.js b/imports/ui/components/partyUpload/partyUpload.js
index ecbf8d3..14d5ae6 100644
--- a/imports/ui/components/partyUpload/partyUpload.js
+++ b/imports/ui/components/partyUpload/partyUpload.js
@@ -6,7 +6,30 @@ import { Meteor } from 'meteor/meteor';
 
 import './partyUpload.html';
 
-class PartyUpload {}
+class PartyUpload {
+  constructor($scope, $reactive) {
+    'ngInject';
+
+    $reactive(this).attach($scope);
+  }
+
+  addImages(files) {
+    if (files.length) {
+      this.currentFile = files[0];
+
+      const reader = new FileReader;
+
+      reader.onload = this.$bindToContext((e) => {
+        this.cropImgSrc = e.target.result;
+        this.myCroppedImage = '';
+      });
+
+      reader.readAsDataURL(files[0]);
+    } else {
+      this.cropImgSrc = undefined;
+    }
+  }
+}
 
 const name = 'partyUpload';
 
-- 
2.7.4


From 110d0502b28aae83eeef7cfd5c2f7e8e72f32b7e Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 13:15:21 +0200
Subject: [PATCH 317/375] Step 20.16: Add style

---
 imports/ui/components/partyUpload/partyUpload.less | 16 ++++++++++++++++
 1 file changed, 16 insertions(+)
 create mode 100644 imports/ui/components/partyUpload/partyUpload.less

diff --git a/imports/ui/components/partyUpload/partyUpload.less b/imports/ui/components/partyUpload/partyUpload.less
new file mode 100644
index 0000000..987a853
--- /dev/null
+++ b/imports/ui/components/partyUpload/partyUpload.less
@@ -0,0 +1,16 @@
+party-upload {
+  .drop-box {
+    background: #F8F8F8;
+    border: 5px dashed #DDD;
+    text-align: center;
+    padding: 25px;
+    margin-left: 10px;
+    margin-bottom: 20px;
+  }
+  .drop-box.dragover {
+    border: 5px dashed blue;
+  }
+  .drop-box.dragover-err {
+    border: 5px dashed red;
+  }
+}
-- 
2.7.4


From 25f2d8a282b9574ec59649371db5966a1c404957 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 13:15:42 +0200
Subject: [PATCH 318/375] Step 20.17: Import in PartyAdd

---
 imports/ui/components/partyAdd/partyAdd.less | 1 +
 1 file changed, 1 insertion(+)
 create mode 100644 imports/ui/components/partyAdd/partyAdd.less

diff --git a/imports/ui/components/partyAdd/partyAdd.less b/imports/ui/components/partyAdd/partyAdd.less
new file mode 100644
index 0000000..18bfd78
--- /dev/null
+++ b/imports/ui/components/partyAdd/partyAdd.less
@@ -0,0 +1 @@
+@import "../partyUpload/partyUpload.less";
-- 
2.7.4


From 0ad331cb2a8d78208b2ac2e94fe185d54cf342d1 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 13:16:18 +0200
Subject: [PATCH 319/375] Step 20.18: Import in PartyAddButton

---
 imports/ui/components/partyAddButton/partyAddButton.less | 1 +
 1 file changed, 1 insertion(+)

diff --git a/imports/ui/components/partyAddButton/partyAddButton.less b/imports/ui/components/partyAddButton/partyAddButton.less
index 73828f6..1b95052 100644
--- a/imports/ui/components/partyAddButton/partyAddButton.less
+++ b/imports/ui/components/partyAddButton/partyAddButton.less
@@ -5,3 +5,4 @@ party-add-button {
     bottom: 15px;
   }
 }
+@import "../partyAdd/partyAdd.less";
-- 
2.7.4


From c84a16ae35860a5db843e641fc282891d2b21f28 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 13:17:27 +0200
Subject: [PATCH 320/375] Step 20.19: Install `ng-img-crop`

---
 package.json | 1 +
 1 file changed, 1 insertion(+)

diff --git a/package.json b/package.json
index c19d6de..52236c7 100644
--- a/package.json
+++ b/package.json
@@ -19,6 +19,7 @@
     "gm": "^1.22.0",
     "meteor-node-stubs": "~0.2.0",
     "ng-file-upload": "^12.0.4",
+    "ng-img-crop": "^0.2.0",
     "underscore": "^1.8.3"
   },
   "devDependencies": {
-- 
2.7.4


From 4e1101d34bec054dcfd722334de100ade0cbe372 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 13:27:50 +0200
Subject: [PATCH 321/375] Step 20.20: Add ngImgCrop

---
 imports/ui/components/partyUpload/partyUpload.js | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partyUpload/partyUpload.js b/imports/ui/components/partyUpload/partyUpload.js
index 14d5ae6..74f3a63 100644
--- a/imports/ui/components/partyUpload/partyUpload.js
+++ b/imports/ui/components/partyUpload/partyUpload.js
@@ -1,6 +1,9 @@
 import angular from 'angular';
 import angularMeteor from 'angular-meteor';
 import ngFileUpload from 'ng-file-upload';
+import 'ng-img-crop/compile/minified/ng-img-crop';
+import 'ng-img-crop/compile/minified/ng-img-crop.css';
+
 
 import { Meteor } from 'meteor/meteor';
 
@@ -36,7 +39,8 @@ const name = 'partyUpload';
 // create a module
 export default angular.module(name, [
   angularMeteor,
-  ngFileUpload
+  ngFileUpload,
+  'ngImgCrop'
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
   controllerAs: name,
-- 
2.7.4


From 4b225592b5bf43dd529046ab0a3245b3caa4bc61 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 13:31:51 +0200
Subject: [PATCH 322/375] Step 20.21: Use ngImgCrop

---
 imports/ui/components/partyUpload/partyUpload.html | 14 ++++++++++++++
 1 file changed, 14 insertions(+)

diff --git a/imports/ui/components/partyUpload/partyUpload.html b/imports/ui/components/partyUpload/partyUpload.html
index 70e5af3..2dd38e9 100644
--- a/imports/ui/components/partyUpload/partyUpload.html
+++ b/imports/ui/components/partyUpload/partyUpload.html
@@ -15,4 +15,18 @@
     </div>
     <div>You can also drop image to here</div>
   </div>
+  <div ng-show="partyUpload.cropImgSrc" layout="column" class="ng-crop">
+    <div>
+      <h3>Edit &amp; crop</h3>
+      <md-button ng-click="partyUpload.save()" class="md-primary">
+        Save Image
+      </md-button>
+      <md-button ng-click="partyUpload.reset()">
+        Cancel
+      </md-button>
+    </div>
+    <div class="ng-crop-container">
+      <img-crop image="partyUpload.cropImgSrc" result-image="partyUpload.myCroppedImage" area-type="square"></img-crop>
+    </div>
+  </div>
 </div>
-- 
2.7.4


From b76cd1e1be6af90dfc63a406fbd27183ea6aac46 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 13:32:11 +0200
Subject: [PATCH 323/375] Step 20.22: Add styles

---
 imports/ui/components/partyUpload/partyUpload.less | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/imports/ui/components/partyUpload/partyUpload.less b/imports/ui/components/partyUpload/partyUpload.less
index 987a853..645cee2 100644
--- a/imports/ui/components/partyUpload/partyUpload.less
+++ b/imports/ui/components/partyUpload/partyUpload.less
@@ -13,4 +13,13 @@ party-upload {
   .drop-box.dragover-err {
     border: 5px dashed red;
   }
+  .ng-crop {
+    h3 {
+      margin-top: 0;
+    }
+  }
+  .ng-crop-container {
+    width: 400px;
+    height: 225px;
+  }
 }
-- 
2.7.4


From 59f088e68145ddacf38bcc3c049efa4195a3b199 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 14:02:41 +0200
Subject: [PATCH 324/375] Step 20.23: Add dataURLToBlob helper

---
 imports/api/images/helpers.js | 31 +++++++++++++++++++++++++++++++
 1 file changed, 31 insertions(+)
 create mode 100644 imports/api/images/helpers.js

diff --git a/imports/api/images/helpers.js b/imports/api/images/helpers.js
new file mode 100644
index 0000000..23f1350
--- /dev/null
+++ b/imports/api/images/helpers.js
@@ -0,0 +1,31 @@
+/**
+ * Converts DataURL to Blob object
+ *
+ * https://github.com/ebidel/filer.js/blob/master/src/filer.js#L137
+ *
+ * @param  {String} dataURL
+ * @return {Blob}
+ */
+export function dataURLToBlob(dataURL) {
+    const BASE64_MARKER = ';base64,';
+
+    if (dataURL.indexOf(BASE64_MARKER) === -1) {
+      const parts = dataURL.split(',');
+      const contentType = parts[0].split(':')[1];
+      const raw = decodeURIComponent(parts[1]);
+
+      return new Blob([raw], {type: contentType});
+    }
+
+    const parts = dataURL.split(BASE64_MARKER);
+    const contentType = parts[0].split(':')[1];
+    const raw = window.atob(parts[1]);
+    const rawLength = raw.length;
+    const uInt8Array = new Uint8Array(rawLength);
+
+    for (let i = 0; i < rawLength; ++i) {
+      uInt8Array[i] = raw.charCodeAt(i);
+    }
+
+    return new Blob([uInt8Array], {type: contentType});
+}
-- 
2.7.4


From b771c39283144d83be8b4a18e8c7369a5d83567a Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 14:05:04 +0200
Subject: [PATCH 325/375] Step 20.24: Add blobToArrayBuffer helper

---
 imports/api/images/helpers.js | 23 +++++++++++++++++++++++
 1 file changed, 23 insertions(+)

diff --git a/imports/api/images/helpers.js b/imports/api/images/helpers.js
index 23f1350..448f932 100644
--- a/imports/api/images/helpers.js
+++ b/imports/api/images/helpers.js
@@ -29,3 +29,26 @@ export function dataURLToBlob(dataURL) {
 
     return new Blob([uInt8Array], {type: contentType});
 }
+
+/**
+ * Converts Blob object to ArrayBuffer
+ *
+ * @param  {Blob}       blob          Source file
+ * @param  {Function}   callback      Success callback with converted object as a first argument
+ * @param  {Function}   errorCallback Error callback with error as a first argument
+ */
+export function blobToArrayBuffer(blob, callback, errorCallback) {
+  const reader = new FileReader();
+
+  reader.onload = (e) => {
+    callback(e.target.result);
+  };
+
+  reader.onerror = (e) => {
+    if (errorCallback) {
+      errorCallback(e);
+    }
+  };
+
+  reader.readAsArrayBuffer(blob);
+}
-- 
2.7.4


From bf4eb622deb7738c804c0ab0f44cc58fc65c605e Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 14:08:29 +0200
Subject: [PATCH 326/375] Step 20.25: Create `upload` method

---
 imports/api/images/methods.js | 33 +++++++++++++++++++++++++++++++++
 1 file changed, 33 insertions(+)
 create mode 100644 imports/api/images/methods.js

diff --git a/imports/api/images/methods.js b/imports/api/images/methods.js
new file mode 100644
index 0000000..e634901
--- /dev/null
+++ b/imports/api/images/methods.js
@@ -0,0 +1,33 @@
+import { UploadFS } from 'meteor/jalik:ufs';
+import { ImagesStore } from './store';
+import { dataURLToBlob, blobToArrayBuffer } from './helpers';
+
+/**
+ * Uploads a new file
+ *
+ * @param  {String}   dataUrl [description]
+ * @param  {String}   name    [description]
+ * @param  {Function} resolve [description]
+ * @param  {Function} reject  [description]
+ */
+export function upload(dataUrl, name, resolve, reject) {
+  // convert to Blob
+  const blob = dataURLToBlob(dataUrl);
+  blob.name = name;
+
+  // pick from an object only: name, type and size
+  const file = _.pick(blob, 'name', 'type', 'size');
+
+  // convert to ArrayBuffer
+  blobToArrayBuffer(blob, (data) => {
+    const upload = new UploadFS.Uploader({
+      data,
+      file,
+      store: ImagesStore,
+      onError: reject,
+      onComplete: resolve
+    });
+
+    upload.start();
+  }, reject);
+}
-- 
2.7.4


From 8a8582a32de5780bd3ce411af0bdf32cb7a7a8ac Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 14:08:56 +0200
Subject: [PATCH 327/375] Step 20.26: Export methods

---
 imports/api/images/index.js | 1 +
 1 file changed, 1 insertion(+)

diff --git a/imports/api/images/index.js b/imports/api/images/index.js
index 9c18361..74293fe 100644
--- a/imports/api/images/index.js
+++ b/imports/api/images/index.js
@@ -1,2 +1,3 @@
 export * from './collection';
 export * from './store';
+export * from './methods';
-- 
2.7.4


From 2b358e99d41e10dbaf5308bb9372119f7b579905 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 14:15:15 +0200
Subject: [PATCH 328/375] Step 20.27: Implement `save` and `reset` methods

---
 imports/ui/components/partyUpload/partyUpload.js | 17 +++++++++++++++++
 1 file changed, 17 insertions(+)

diff --git a/imports/ui/components/partyUpload/partyUpload.js b/imports/ui/components/partyUpload/partyUpload.js
index 74f3a63..2b8885a 100644
--- a/imports/ui/components/partyUpload/partyUpload.js
+++ b/imports/ui/components/partyUpload/partyUpload.js
@@ -8,12 +8,15 @@ import 'ng-img-crop/compile/minified/ng-img-crop.css';
 import { Meteor } from 'meteor/meteor';
 
 import './partyUpload.html';
+import { upload } from '../../../api/images';
 
 class PartyUpload {
   constructor($scope, $reactive) {
     'ngInject';
 
     $reactive(this).attach($scope);
+
+    this.uploaded = [];
   }
 
   addImages(files) {
@@ -32,6 +35,20 @@ class PartyUpload {
       this.cropImgSrc = undefined;
     }
   }
+
+  save() {
+    upload(this.myCroppedImage, this.currentFile.name, this.$bindToContext((file) => {
+      this.uploaded.push(file);
+      this.reset();
+    }), (e) => {
+      console.log('Oops, something went wrong', e);
+    });
+  }
+
+  reset() {
+    this.cropImgSrc = undefined;
+    this.myCroppedImage = '';
+  }
 }
 
 const name = 'partyUpload';
-- 
2.7.4


From 99d01de61a4c22ea7461fb13bdded5eb5780d284 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 14:16:03 +0200
Subject: [PATCH 329/375] Step 20.28: Import Images on server side

---
 server/main.js | 1 +
 1 file changed, 1 insertion(+)

diff --git a/server/main.js b/server/main.js
index 1acdc6c..2b47936 100644
--- a/server/main.js
+++ b/server/main.js
@@ -1,3 +1,4 @@
 import '../imports/startup/fixtures';
 import '../imports/api/parties';
 import '../imports/api/users';
+import '../imports/api/images';
-- 
2.7.4


From e55271cc451b43e0f5beb93156d82cd12267fee7 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 14:21:33 +0200
Subject: [PATCH 330/375] Step 20.29: Display uploaded images

---
 imports/ui/components/partyUpload/partyUpload.html | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/imports/ui/components/partyUpload/partyUpload.html b/imports/ui/components/partyUpload/partyUpload.html
index 2dd38e9..124bfdb 100644
--- a/imports/ui/components/partyUpload/partyUpload.html
+++ b/imports/ui/components/partyUpload/partyUpload.html
@@ -29,4 +29,9 @@
       <img-crop image="partyUpload.cropImgSrc" result-image="partyUpload.myCroppedImage" area-type="square"></img-crop>
     </div>
   </div>
+  <div layout="row" class="images-container-title">
+    <div class="party-image-container" ng-class="{'main-image': $index === 0}" ng-repeat="thumb in partyUpload.thumbs">
+      <img ng-src="{{ thumb.url }}"/>
+    </div>
+  </div>
 </div>
-- 
2.7.4


From 4e9c2f5502088f2c740547aa2cdd7d7b26333758 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 14:22:36 +0200
Subject: [PATCH 331/375] Step 20.30: Add styles

---
 imports/ui/components/partyUpload/partyUpload.less | 16 ++++++++++++++++
 1 file changed, 16 insertions(+)

diff --git a/imports/ui/components/partyUpload/partyUpload.less b/imports/ui/components/partyUpload/partyUpload.less
index 645cee2..f781c1c 100644
--- a/imports/ui/components/partyUpload/partyUpload.less
+++ b/imports/ui/components/partyUpload/partyUpload.less
@@ -22,4 +22,20 @@ party-upload {
     width: 400px;
     height: 225px;
   }
+  .images-container-title {
+    padding-bottom: 30px;
+  }
+  .party-image-container {
+    position: relative;
+    margin-right: 10px;
+    max-height: 200px;
+    max-width: 200px;
+    img {
+      max-height: 100%;
+      max-width: 100%;
+    }
+  }
+  .main-image {
+    border: 2px solid #ddd;
+  }
 }
-- 
2.7.4


From 90715bdc36e5bc0df7d89b664f9074ff57355936 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 14:24:09 +0200
Subject: [PATCH 332/375] Step 20.31: Add `thumbs` and `images` publications

---
 imports/api/images/publish.js | 17 +++++++++++++++++
 1 file changed, 17 insertions(+)
 create mode 100644 imports/api/images/publish.js

diff --git a/imports/api/images/publish.js b/imports/api/images/publish.js
new file mode 100644
index 0000000..5949c72
--- /dev/null
+++ b/imports/api/images/publish.js
@@ -0,0 +1,17 @@
+import { Meteor } from 'meteor/meteor';
+import { Thumbs, Images } from './collection';
+
+if (Meteor.isServer) {
+  Meteor.publish('thumbs', function(ids) {
+    return Thumbs.find({
+      originalStore: 'images',
+      originalId: {
+        $in: ids
+      }
+    });
+  });
+
+  Meteor.publish('images', function() {
+    return Images.find({});
+  });
+}
-- 
2.7.4


From b4f40f5fe97e8895d9ecd17f8504608e37f32d26 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 14:24:36 +0200
Subject: [PATCH 333/375] Step 20.32: Import publications

---
 imports/api/images/index.js | 1 +
 1 file changed, 1 insertion(+)

diff --git a/imports/api/images/index.js b/imports/api/images/index.js
index 74293fe..57692b3 100644
--- a/imports/api/images/index.js
+++ b/imports/api/images/index.js
@@ -1,3 +1,4 @@
+import './publish';
 export * from './collection';
 export * from './store';
 export * from './methods';
-- 
2.7.4


From 2062f9b8b5f777c0560f419f0a06796d2194064a Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 14:29:08 +0200
Subject: [PATCH 334/375] Step 20.33: Implement thumbnails

---
 imports/ui/components/partyUpload/partyUpload.js | 23 ++++++++++++++++++++++-
 1 file changed, 22 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partyUpload/partyUpload.js b/imports/ui/components/partyUpload/partyUpload.js
index 2b8885a..ab3b53c 100644
--- a/imports/ui/components/partyUpload/partyUpload.js
+++ b/imports/ui/components/partyUpload/partyUpload.js
@@ -8,7 +8,7 @@ import 'ng-img-crop/compile/minified/ng-img-crop.css';
 import { Meteor } from 'meteor/meteor';
 
 import './partyUpload.html';
-import { upload } from '../../../api/images';
+import { Thumbs, upload } from '../../../api/images';
 
 class PartyUpload {
   constructor($scope, $reactive) {
@@ -17,6 +17,21 @@ class PartyUpload {
     $reactive(this).attach($scope);
 
     this.uploaded = [];
+
+    this.subscribe('thumbs', () => [
+      this.getReactively('files', true) || []
+    ]);
+
+    this.helpers({
+      thumbs() {
+        return Thumbs.find({
+          originalStore: 'images',
+          originalId: {
+            $in: this.getReactively('files', true) || []
+          }
+        });
+      }
+    });
   }
 
   addImages(files) {
@@ -39,6 +54,12 @@ class PartyUpload {
   save() {
     upload(this.myCroppedImage, this.currentFile.name, this.$bindToContext((file) => {
       this.uploaded.push(file);
+
+      if (!this.files || !this.files.length) {
+        this.files = [];
+      }
+      this.files.push(file._id);
+
       this.reset();
     }), (e) => {
       console.log('Oops, something went wrong', e);
-- 
2.7.4


From b070776693cde4380d8a63a95f24c97934def214 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 14:32:41 +0200
Subject: [PATCH 335/375] Step 20.34: Install `angular-sortable-view`

---
 package.json | 1 +
 1 file changed, 1 insertion(+)

diff --git a/package.json b/package.json
index 52236c7..6f05158 100644
--- a/package.json
+++ b/package.json
@@ -14,6 +14,7 @@
     "angular-messages": "^1.5.3",
     "angular-meteor": "^1.3.9",
     "angular-simple-logger": "^0.1.7",
+    "angular-sortable-view": "0.0.15",
     "angular-ui-router": "^1.0.0-alpha.4",
     "angular-utils-pagination": "^0.11.1",
     "gm": "^1.22.0",
-- 
2.7.4


From 9fb20cd266ac89a6b6a06cf0bc95751a8fcc693a Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 14:33:09 +0200
Subject: [PATCH 336/375] Step 20.35: Add as a dependency

---
 imports/ui/components/partyUpload/partyUpload.js | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partyUpload/partyUpload.js b/imports/ui/components/partyUpload/partyUpload.js
index ab3b53c..2f2ff26 100644
--- a/imports/ui/components/partyUpload/partyUpload.js
+++ b/imports/ui/components/partyUpload/partyUpload.js
@@ -1,6 +1,7 @@
 import angular from 'angular';
 import angularMeteor from 'angular-meteor';
 import ngFileUpload from 'ng-file-upload';
+import 'angular-sortable-view';
 import 'ng-img-crop/compile/minified/ng-img-crop';
 import 'ng-img-crop/compile/minified/ng-img-crop.css';
 
@@ -78,7 +79,8 @@ const name = 'partyUpload';
 export default angular.module(name, [
   angularMeteor,
   ngFileUpload,
-  'ngImgCrop'
+  'ngImgCrop',
+  'angular-sortable-view'
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
   controllerAs: name,
-- 
2.7.4


From e9653fd819a844fdcd9189f3f5397e786ea2575c Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 14:33:31 +0200
Subject: [PATCH 337/375] Step 20.36: Use directives on thumbnails

---
 imports/ui/components/partyUpload/partyUpload.html | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/imports/ui/components/partyUpload/partyUpload.html b/imports/ui/components/partyUpload/partyUpload.html
index 124bfdb..14a3704 100644
--- a/imports/ui/components/partyUpload/partyUpload.html
+++ b/imports/ui/components/partyUpload/partyUpload.html
@@ -29,9 +29,9 @@
       <img-crop image="partyUpload.cropImgSrc" result-image="partyUpload.myCroppedImage" area-type="square"></img-crop>
     </div>
   </div>
-  <div layout="row" class="images-container-title">
-    <div class="party-image-container" ng-class="{'main-image': $index === 0}" ng-repeat="thumb in partyUpload.thumbs">
-      <img ng-src="{{ thumb.url }}"/>
+  <div layout="row" class="images-container-title" sv-root sv-part="partyUpload.thumbs">
+    <div sv-element class="party-image-container" ng-class="{'main-image': $index === 0}" ng-repeat="thumb in partyUpload.thumbs">
+      <img draggable="false" ng-src="{{ thumb.url }}"/>
     </div>
   </div>
 </div>
-- 
2.7.4


From eb02b219531eafc8327f6b862d794ad0a5d8e590 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 15:33:07 +0200
Subject: [PATCH 338/375] Step 20.37: Define two-way data binding `files`

---
 imports/ui/components/partyUpload/partyUpload.js | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/imports/ui/components/partyUpload/partyUpload.js b/imports/ui/components/partyUpload/partyUpload.js
index 2f2ff26..f13d11c 100644
--- a/imports/ui/components/partyUpload/partyUpload.js
+++ b/imports/ui/components/partyUpload/partyUpload.js
@@ -83,6 +83,9 @@ export default angular.module(name, [
   'angular-sortable-view'
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
+  bindings: {
+    files: '=?'
+  },
   controllerAs: name,
   controller: PartyUpload
 });
-- 
2.7.4


From 1548d909b4afb38ba48163d8fd9a556affc71390 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 15:33:24 +0200
Subject: [PATCH 339/375] Step 20.38: Create view for PartyImage

---
 imports/ui/components/partyImage/partyImage.html | 1 +
 1 file changed, 1 insertion(+)
 create mode 100644 imports/ui/components/partyImage/partyImage.html

diff --git a/imports/ui/components/partyImage/partyImage.html b/imports/ui/components/partyImage/partyImage.html
new file mode 100644
index 0000000..719c4a3
--- /dev/null
+++ b/imports/ui/components/partyImage/partyImage.html
@@ -0,0 +1 @@
+<img ng-src="{{partyImage.mainImage.url}}"/>
-- 
2.7.4


From f215717543ef220d4659a675f84b3f82e2a6a30c Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 15:33:39 +0200
Subject: [PATCH 340/375] Step 20.39: Create PartyImage component

---
 imports/ui/components/partyImage/partyImage.js | 37 ++++++++++++++++++++++++++
 1 file changed, 37 insertions(+)
 create mode 100644 imports/ui/components/partyImage/partyImage.js

diff --git a/imports/ui/components/partyImage/partyImage.js b/imports/ui/components/partyImage/partyImage.js
new file mode 100644
index 0000000..84e0bc6
--- /dev/null
+++ b/imports/ui/components/partyImage/partyImage.js
@@ -0,0 +1,37 @@
+import angular from 'angular';
+import angularMeteor from 'angular-meteor';
+
+import './partyImage.html';
+import { Images } from '../../../api/images';
+
+class PartyImage {
+  constructor($scope, $reactive) {
+    'ngInject';
+    $reactive(this).attach($scope);
+
+    this.helpers({
+      mainImage() {
+        const images = this.getReactively('images', true);
+        if (images) {
+          return Images.findOne({
+            _id: images[0]
+          });
+        }
+      }
+    });
+  }
+}
+
+const name = 'partyImage';
+
+// create a module
+export default angular.module(name, [
+  angularMeteor
+]).component(name, {
+  templateUrl: `imports/ui/components/${name}/${name}.html`,
+  bindings: {
+    images: '<'
+  },
+  controllerAs: name,
+  controller: PartyImage
+});
-- 
2.7.4


From 52b7c3bd58ed154140dc8ea1f80aad67689b22c3 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 15:33:58 +0200
Subject: [PATCH 341/375] Step 20.40: Implement PartyImage in PartiesList

---
 imports/ui/components/partiesList/partiesList.html | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/imports/ui/components/partiesList/partiesList.html b/imports/ui/components/partiesList/partiesList.html
index 12987b3..de5d229 100644
--- a/imports/ui/components/partiesList/partiesList.html
+++ b/imports/ui/components/partiesList/partiesList.html
@@ -25,6 +25,11 @@
             </span>
             <span class="md-subhead">{{party.description}}</span>
           </md-card-title-text>
+          <md-card-title-media ng-if="party.images">
+            <div class="md-media-lg card-media">
+              <party-image images="party.images"></party-image>
+            </div>
+          </md-card-title-media>
         </md-card-title>
         <md-card-content>
           <party-rsvps-list rsvps="party.rsvps"></party-rsvps-list>
-- 
2.7.4


From b2b3e343fbf9a5ead957191cdbf2a563f8c76115 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Wed, 13 Apr 2016 15:34:24 +0200
Subject: [PATCH 342/375] Step 20.41: Add PartyImage to PartiesList and
 subscribe to `images`

---
 imports/ui/components/partiesList/partiesList.js | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partiesList/partiesList.js b/imports/ui/components/partiesList/partiesList.js
index 92f56d3..ef9eb3c 100644
--- a/imports/ui/components/partiesList/partiesList.js
+++ b/imports/ui/components/partiesList/partiesList.js
@@ -14,6 +14,7 @@ import { name as PartyRemove } from '../partyRemove/partyRemove';
 import { name as PartyCreator } from '../partyCreator/partyCreator';
 import { name as PartyRsvp } from '../partyRsvp/partyRsvp';
 import { name as PartyRsvpsList } from '../partyRsvpsList/partyRsvpsList';
+import { name as PartyImage } from '../partyImage/partyImage';
 
 class PartiesList {
   constructor($scope, $reactive) {
@@ -36,6 +37,7 @@ class PartiesList {
     ]);
 
     this.subscribe('users');
+    this.subscribe('images');
 
     this.helpers({
       parties() {
@@ -81,7 +83,8 @@ export default angular.module(name, [
   PartyRemove,
   PartyCreator,
   PartyRsvp,
-  PartyRsvpsList
+  PartyRsvpsList,
+  PartyImage
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
   controllerAs: name,
-- 
2.7.4


From 351258585d18cd64255283453ce1ce053f804326 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 14 Apr 2016 20:41:02 +0200
Subject: [PATCH 343/375] Step 21.1: Add mobile platform

---
 .meteor/platforms | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/.meteor/platforms b/.meteor/platforms
index efeba1b..0b0ddcc 100644
--- a/.meteor/platforms
+++ b/.meteor/platforms
@@ -1,2 +1,3 @@
-server
+android
 browser
+server
-- 
2.7.4


From 16ab7e1d0d4addea55cad52c7476b257391590a9 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 14 Apr 2016 20:43:34 +0200
Subject: [PATCH 344/375] Step 21.2: Move login.html to web.html

---
 imports/ui/components/login/web.html | 70 ++++++++++++++++++++++++++++++++++++
 1 file changed, 70 insertions(+)
 create mode 100644 imports/ui/components/login/web.html

diff --git a/imports/ui/components/login/web.html b/imports/ui/components/login/web.html
new file mode 100644
index 0000000..1ac5b6f
--- /dev/null
+++ b/imports/ui/components/login/web.html
@@ -0,0 +1,70 @@
+<md-content layout="row" layout-align="center start" layout-fill layout-margin>
+  <md-whiteframe layout="column" flex flex-md="50" flex-lg="50" flex-gt-lg="33" class="md-whiteframe-z2" layout-fill>
+    <md-toolbar class="md-primary md-tall" layout="column" layout-align="end" layout-fill>
+      <div layout="row" class="md-toolbar-tools md-toolbar-tools-bottom">
+        <h3 class="md-display-1">
+          Sign in
+        </h3>
+      </div>
+    </md-toolbar>
+
+    <div layout="column" layout-fill layout-margin layout-padding>
+      <div layout="row" layout-fill layout-margin>
+        <p class="md-body-2">
+          Use existing account</p>
+      </div>
+
+      <div layout="row" layout-fill layout-margin layout-padding layout-wrap>
+        <md-button class="md-raised">
+          <md-icon md-svg-icon="social:ic_google_24px" style="color: #DC4A38;"></md-icon>
+          <span>Google</span>
+        </md-button>
+        <md-button class="md-raised">
+          <md-icon md-svg-icon="social:ic_facebook_24px" style="color: #3F62B4;"></md-icon>
+          <span>Facebook</span>
+        </md-button>
+        <md-button class="md-raised">
+          <md-icon md-svg-icon="social:ic_twitter_24px" style="color: #27AAE2;"></md-icon>
+          <span>Twitter</span>
+        </md-button>
+      </div>
+      <md-divider class="inset"></md-divider>
+
+      <div layout="row" layout-fill layout-margin>
+        <p class="md-body-2">
+          Sign in with your email</p>
+      </div>
+
+      <form name="loginForm" layout="column" layout-fill layout-padding layout-margin>
+        <md-input-container>
+          <label>
+            Email
+          </label>
+          <input type="text" ng-model="login.credentials.email" aria-label="email" required/>
+        </md-input-container>
+        <md-input-container>
+          <label>
+            Password
+          </label>
+          <input type="password" ng-model="login.credentials.password" aria-label="password" required/>
+        </md-input-container>
+        <div layout="row" layout-align="space-between center">
+          <a class="md-button" href="/password">Forgot password?</a>
+          
+          <md-button class="md-raised md-primary" ng-click="login.login()" aria-label="login" ng-disabled="login.loginForm.$invalid()">Sign In
+          </md-button>
+        </div>
+      </form>
+
+      <md-toolbar ng-show="login.error" class="md-warn" layout="row" layout-fill layout-padding layout-margin>
+        <p class="md-body-1">{{ login.error }}</p>
+      </md-toolbar>
+
+      <md-divider></md-divider>
+
+      <div layout="row" layout-align="center">
+        <a class="md-button" href="/register">Need an account?</a>
+      </div>
+    </div>
+  </md-whiteframe>
+</md-content>
-- 
2.7.4


From 9378d164932c7760624382e3ac0a8cd780ae16a8 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 14 Apr 2016 20:45:56 +0200
Subject: [PATCH 345/375] Step 21.3: Add mobile view

---
 imports/ui/components/login/mobile.html | 27 +++++++++++++++++++++++++++
 1 file changed, 27 insertions(+)
 create mode 100644 imports/ui/components/login/mobile.html

diff --git a/imports/ui/components/login/mobile.html b/imports/ui/components/login/mobile.html
new file mode 100644
index 0000000..112ba9e
--- /dev/null
+++ b/imports/ui/components/login/mobile.html
@@ -0,0 +1,27 @@
+<md-content layout="row" layout-align="center start" layout-fill layout-margin>
+  <md-whiteframe layout="column" flex flex-md="50" flex-lg="50" flex-gt-lg="33" class="md-whiteframe-z2" layout-fill>
+    <!-- header -->
+    <md-toolbar class="md-primary md-tall" layout="column" layout-align="end" layout-fill>
+      <div layout="row" class="md-toolbar-tools md-toolbar-tools-bottom">
+        <h3 class="md-display-1">
+          Login
+        </h3>
+      </div>
+    </md-toolbar>
+
+    <!-- content -->
+    <div layout="column" layout-fill layout-margin layout-padding>
+      <!-- display an error -->
+      <md-toolbar ng-show="login.error" class="md-warn" layout="row" layout-fill layout-padding layout-margin>
+        <p class="md-body-1">{{ login.error }}</p>
+      </md-toolbar>
+
+      <md-divider></md-divider>
+
+      <!-- other actions -->
+      <div layout="row" layout-align="center">
+        <a class="md-button" href="/password">Forgot password?</a>
+      </div>
+    </div>
+  </md-whiteframe>
+</md-content>
-- 
2.7.4


From 27bd9a3e1feeae0b511975a148b6e733b8d273a9 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 14 Apr 2016 20:47:15 +0200
Subject: [PATCH 346/375] Step 21.4: Move Login class to web.js

---
 imports/ui/components/login/web.js | 30 ++++++++++++++++++++++++++++++
 1 file changed, 30 insertions(+)
 create mode 100644 imports/ui/components/login/web.js

diff --git a/imports/ui/components/login/web.js b/imports/ui/components/login/web.js
new file mode 100644
index 0000000..bc7b752
--- /dev/null
+++ b/imports/ui/components/login/web.js
@@ -0,0 +1,30 @@
+import { Meteor } from 'meteor/meteor';
+
+export class Login {
+  constructor($scope, $reactive, $state) {
+    'ngInject';
+
+    this.$state = $state;
+
+    $reactive(this).attach($scope);
+
+    this.credentials = {
+      email: '',
+      password: ''
+    };
+
+    this.error = '';
+  }
+
+  login() {
+    Meteor.loginWithPassword(this.credentials.email, this.credentials.password,
+      this.$bindToContext((err) => {
+        if (err) {
+          this.error = err;
+        } else {
+          this.$state.go('parties');
+        }
+      })
+    );
+  }
+}
-- 
2.7.4


From 20ab509847c0763a27b84feabdbc3c6073a870d4 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 14 Apr 2016 20:48:39 +0200
Subject: [PATCH 347/375] Step 21.5: Create controller for mobile

---
 imports/ui/components/login/mobile.js | 1 +
 1 file changed, 1 insertion(+)
 create mode 100644 imports/ui/components/login/mobile.js

diff --git a/imports/ui/components/login/mobile.js b/imports/ui/components/login/mobile.js
new file mode 100644
index 0000000..792f38c
--- /dev/null
+++ b/imports/ui/components/login/mobile.js
@@ -0,0 +1 @@
+export class Login {}
-- 
2.7.4


From 256679e260d15eebdd18596f742b8d09d4474066 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 14 Apr 2016 20:49:48 +0200
Subject: [PATCH 348/375] Step 21.6: Refactor login.js

---
 imports/ui/components/login/login.js | 42 +++++++-----------------------------
 1 file changed, 8 insertions(+), 34 deletions(-)

diff --git a/imports/ui/components/login/login.js b/imports/ui/components/login/login.js
index f5a3be4..e1b3a29 100644
--- a/imports/ui/components/login/login.js
+++ b/imports/ui/components/login/login.js
@@ -4,40 +4,14 @@ import uiRouter from 'angular-ui-router';
 
 import { Meteor } from 'meteor/meteor';
 
-import './login.html';
-
-import { name as Register } from '../register/register';
-
-class Login {
-  constructor($scope, $reactive, $state) {
-    'ngInject';
-
-    this.$state = $state;
-
-    $reactive(this).attach($scope);
-
-    this.credentials = {
-      email: '',
-      password: ''
-    };
-
-    this.error = '';
-  }
-
-  login() {
-    Meteor.loginWithPassword(this.credentials.email, this.credentials.password,
-      this.$bindToContext((err) => {
-        if (err) {
-          this.error = err;
-        } else {
-          this.$state.go('parties');
-        }
-      })
-    );
-  }
-}
+import './web.html';
+import { Login as LoginWeb } from './web';
+import './mobile.html';
+import { Login as LoginMobile } from './mobile';
 
 const name = 'login';
+const template = Meteor.isCordova ? 'mobile' : 'web';
+const controller = Meteor.isCordova ? LoginMobile : LoginWeb;
 
 // create a module
 export default angular.module(name, [
@@ -45,9 +19,9 @@ export default angular.module(name, [
   uiRouter
 ])
   .component(name, {
-    templateUrl: `imports/ui/components/${name}/${name}.html`,
+    controller,
     controllerAs: name,
-    controller: Login
+    templateUrl: `imports/ui/components/${name}/${template}.html`,
   })
   .config(config);
 
-- 
2.7.4


From 94577acf2f82225361233bf99b79d1991e822706 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 14 Apr 2016 20:50:03 +0200
Subject: [PATCH 349/375] Step 21.7: Remove login.html

---
 imports/ui/components/login/login.html | 72 ----------------------------------
 1 file changed, 72 deletions(-)
 delete mode 100644 imports/ui/components/login/login.html

diff --git a/imports/ui/components/login/login.html b/imports/ui/components/login/login.html
deleted file mode 100644
index 64ea544..0000000
--- a/imports/ui/components/login/login.html
+++ /dev/null
@@ -1,72 +0,0 @@
-<md-content layout="row" layout-align="center start" layout-fill layout-margin>
-
-  <md-whiteframe layout="column" flex flex-md="50" flex-lg="50" flex-gt-lg="33" class="md-whiteframe-z2" layout-fill>
-
-    <md-toolbar class="md-primary md-tall" layout="column" layout-align="end" layout-fill>
-      <div layout="row" class="md-toolbar-tools md-toolbar-tools-bottom">
-        <h3 class="md-display-1">
-          Sign in
-        </h3>
-      </div>
-    </md-toolbar>
-
-    <div layout="column" layout-fill layout-margin layout-padding>
-      <div layout="row" layout-fill layout-margin>
-        <p class="md-body-2">
-          Use existing account</p>
-      </div>
-      <div layout="row" layout-fill layout-margin layout-padding layout-wrap>
-        <md-button class="md-raised">
-          <md-icon md-svg-icon="social:ic_google_24px" style="color: #DC4A38;"></md-icon>
-          <span>
-            Google</span>
-        </md-button>
-        <md-button class="md-raised">
-          <md-icon md-svg-icon="social:ic_facebook_24px" style="color: #3F62B4;"></md-icon>
-          <span>Facebook
-          </span>
-        </md-button>
-        <md-button class="md-raised">
-          <md-icon md-svg-icon="social:ic_twitter_24px" style="color: #27AAE2;"></md-icon>
-          <span>Twitter
-          </span>
-        </md-button>
-      </div>
-      <md-divider class="inset"></md-divider>
-
-      <div layout="row" layout-fill layout-margin>
-        <p class="md-body-2">
-          Sign in with your email</p>
-      </div>
-
-      <form name="loginForm" layout="column" layout-fill layout-padding layout-margin>
-        <md-input-container>
-          <label>
-            Email
-          </label>
-          <input type="text" ng-model="login.credentials.email" aria-label="email" required/>
-        </md-input-container>
-        <md-input-container>
-          <label>
-            Password
-          </label>
-          <input type="password" ng-model="login.credentials.password" aria-label="password" required/>
-        </md-input-container>
-        <div layout="row" layout-align="space-between center">
-          <a class="md-button" href="/password">Forgot password?</a>
-          <md-button class="md-raised md-primary" ng-click="login.login()" aria-label="login" ng-disabled="login.loginForm.$invalid()">Sign In
-          </md-button>
-        </div>
-      </form>
-      <md-toolbar ng-show="login.error" class="md-warn" layout="row" layout-fill layout-padding layout-margin>
-        <p class="md-body-1">{{ login.error }}</p>
-      </md-toolbar>
-      <md-divider></md-divider>
-      <div layout="row" layout-align="center">
-        <a class="md-button" href="/register">Need an account?</a>
-      </div>
-
-    </div>
-
-  </md-whiteframe>
-</md-content>
-- 
2.7.4


From ff205217b722cfb15c06d8a3eda7ad2a1dd0e1e7 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 14 Apr 2016 20:52:54 +0200
Subject: [PATCH 350/375] Step 21.8: Add `okland:accounts-phone`

---
 .meteor/packages | 1 +
 .meteor/versions | 1 +
 2 files changed, 2 insertions(+)

diff --git a/.meteor/packages b/.meteor/packages
index 57c1f6b..e6717e6 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -31,3 +31,4 @@ less
 planettraining:material-design-icons
 jalik:ufs
 jalik:ufs-gridfs
+mys:accounts-phone
diff --git a/.meteor/versions b/.meteor/versions
index abe42a2..45162cd 100644
--- a/.meteor/versions
+++ b/.meteor/versions
@@ -68,6 +68,7 @@ oauth@1.1.8
 oauth1@1.1.7
 oauth2@1.1.7
 observe-sequence@1.0.11
+mys:accounts-phone@0.0.21
 ordered-dict@1.0.7
 pbastowski:angular-babel@1.3.2
 planettraining:material-design-icons@2.2.0
-- 
2.7.4


From 081cd7032a5b128d08f324214dc808a78772c69c Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 14 Apr 2016 20:56:24 +0200
Subject: [PATCH 351/375] Step 21.9: Add phone verification method

---
 imports/ui/components/login/mobile.js | 28 +++++++++++++++++++++++++++-
 1 file changed, 27 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/login/mobile.js b/imports/ui/components/login/mobile.js
index 792f38c..c201eb2 100644
--- a/imports/ui/components/login/mobile.js
+++ b/imports/ui/components/login/mobile.js
@@ -1 +1,27 @@
-export class Login {}
+import { Accounts } from 'meteor/accounts-base';
+
+export class Login {
+  constructor($scope, $reactive) {
+    'ngInject';
+
+    $reactive(this).attach($scope);
+
+    this.isStepTwo = false;
+    this.phoneNumber = '';
+    this.verificationCode = '';
+    this.error = '';
+  }
+
+  verifyPhone() {
+    Accounts.requestPhoneVerification(this.phoneNumber, this.$bindToContext((err) => {
+      if (err) {
+        // display also reason of Meteor.Error
+        this.error = err.reason || err;
+      } else {
+        this.error = '';
+        // move to code verification
+        this.isStepTwo = true;
+      }
+    }));
+  }
+}
-- 
2.7.4


From 363476ab8564b3ae59924d0edbbff7f385a1cfbc Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 14 Apr 2016 20:57:40 +0200
Subject: [PATCH 352/375] Step 21.10: Add phone verification form

---
 imports/ui/components/login/mobile.html | 11 ++++++++++-
 1 file changed, 10 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/login/mobile.html b/imports/ui/components/login/mobile.html
index 112ba9e..0b889a7 100644
--- a/imports/ui/components/login/mobile.html
+++ b/imports/ui/components/login/mobile.html
@@ -4,13 +4,22 @@
     <md-toolbar class="md-primary md-tall" layout="column" layout-align="end" layout-fill>
       <div layout="row" class="md-toolbar-tools md-toolbar-tools-bottom">
         <h3 class="md-display-1">
-          Login
+          Login with SMS
         </h3>
       </div>
     </md-toolbar>
 
     <!-- content -->
     <div layout="column" layout-fill layout-margin layout-padding>
+      <!-- step 1: phone verification -->
+      <form ng-show="!login.isStepTwo" layout="column" layout-fill layout-padding layout-margin>
+        <md-input-container>
+          <input type="text" ng-model="login.phoneNumber" placeholder="phone"/>
+        </md-input-container>
+        <md-button class="md-raised md-primary" ng-click="login.verifyPhone()" aria-label="login" ng-disabled="!login.phoneNumber">Send SMS
+        </md-button>
+      </form>
+      
       <!-- display an error -->
       <md-toolbar ng-show="login.error" class="md-warn" layout="row" layout-fill layout-padding layout-margin>
         <p class="md-body-1">{{ login.error }}</p>
-- 
2.7.4


From 827b2c4a4ff9abc5864af8e361b07767508ef414 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 14 Apr 2016 21:00:05 +0200
Subject: [PATCH 353/375] Step 21.11: Add code verification method

---
 imports/ui/components/login/mobile.js | 15 ++++++++++++++-
 1 file changed, 14 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/login/mobile.js b/imports/ui/components/login/mobile.js
index c201eb2..798d563 100644
--- a/imports/ui/components/login/mobile.js
+++ b/imports/ui/components/login/mobile.js
@@ -1,9 +1,11 @@
 import { Accounts } from 'meteor/accounts-base';
 
 export class Login {
-  constructor($scope, $reactive) {
+  constructor($scope, $reactive, $state) {
     'ngInject';
 
+    this.$state = $state;
+
     $reactive(this).attach($scope);
 
     this.isStepTwo = false;
@@ -24,4 +26,15 @@ export class Login {
       }
     }));
   }
+
+  verifyCode() {
+    Accounts.verifyPhone(this.phoneNumber, this.verificationCode, this.$bindToContext((err) => {
+      if (err) {
+        this.error = err.reason || err;
+      } else {
+        // redirect to parties list
+        this.$state.go('parties');
+      }
+    }));
+  }
 }
-- 
2.7.4


From 60db5dcbdd2bb23a9dc331d7f976c2ac201c1450 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Thu, 14 Apr 2016 21:01:13 +0200
Subject: [PATCH 354/375] Step 21.12: Add code verification form

---
 imports/ui/components/login/mobile.html | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/login/mobile.html b/imports/ui/components/login/mobile.html
index 0b889a7..e93c1d5 100644
--- a/imports/ui/components/login/mobile.html
+++ b/imports/ui/components/login/mobile.html
@@ -19,7 +19,15 @@
         <md-button class="md-raised md-primary" ng-click="login.verifyPhone()" aria-label="login" ng-disabled="!login.phoneNumber">Send SMS
         </md-button>
       </form>
-      
+      <!-- step 2: code verification -->
+      <form ng-show="login.isStepTwo" layout="column" layout-fill layout-padding layout-margin>
+        <md-input-container>
+          <input type="text" ng-model="login.verificationCode" placeholder="code"/>
+        </md-input-container>
+        <md-button class="md-raised md-primary" ng-click="login.verifyCode()" aria-label="login" ng-disabled="!login.verificationCode">Verify Code
+        </md-button>
+      </form>
+
       <!-- display an error -->
       <md-toolbar ng-show="login.error" class="md-warn" layout="row" layout-fill layout-padding layout-margin>
         <p class="md-body-1">{{ login.error }}</p>
-- 
2.7.4


From 25a8f9d990b04d6ee3b23429ca4e2441944e15cd Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 25 Apr 2016 10:58:52 +0200
Subject: [PATCH 355/375] Step 22.1: Install `ionic-sdk`

---
 package.json | 1 +
 1 file changed, 1 insertion(+)

diff --git a/package.json b/package.json
index 6f05158..0a98104 100644
--- a/package.json
+++ b/package.json
@@ -18,6 +18,7 @@
     "angular-ui-router": "^1.0.0-alpha.4",
     "angular-utils-pagination": "^0.11.1",
     "gm": "^1.22.0",
+    "ionic-sdk": "^1.2.4",
     "meteor-node-stubs": "~0.2.0",
     "ng-file-upload": "^12.0.4",
     "ng-img-crop": "^0.2.0",
-- 
2.7.4


From 77a574393f5860cb62c0a897cabcaf7ddab3a7b3 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 25 Apr 2016 10:59:31 +0200
Subject: [PATCH 356/375] Step 22.2: Install `angular-sanitize`

---
 package.json | 1 +
 1 file changed, 1 insertion(+)

diff --git a/package.json b/package.json
index 0a98104..dc1c769 100644
--- a/package.json
+++ b/package.json
@@ -13,6 +13,7 @@
     "angular-material": "^1.0.7",
     "angular-messages": "^1.5.3",
     "angular-meteor": "^1.3.9",
+    "angular-sanitize": "^1.5.5",
     "angular-simple-logger": "^0.1.7",
     "angular-sortable-view": "0.0.15",
     "angular-ui-router": "^1.0.0-alpha.4",
-- 
2.7.4


From 0134cfb4415ccd3437574888e24b74f573212284 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 25 Apr 2016 11:00:27 +0200
Subject: [PATCH 357/375] Step 22.3: Change version of `angular-ui-router`

---
 package.json | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/package.json b/package.json
index dc1c769..3b163d5 100644
--- a/package.json
+++ b/package.json
@@ -16,7 +16,7 @@
     "angular-sanitize": "^1.5.5",
     "angular-simple-logger": "^0.1.7",
     "angular-sortable-view": "0.0.15",
-    "angular-ui-router": "^1.0.0-alpha.4",
+    "angular-ui-router": "^0.2.18",
     "angular-utils-pagination": "^0.11.1",
     "gm": "^1.22.0",
     "ionic-sdk": "^1.2.4",
-- 
2.7.4


From 93c0e04093697529afa41bf62a737a739d1d6bef Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 25 Apr 2016 11:08:38 +0200
Subject: [PATCH 358/375] Step 22.4: ngSanitize as a dependency

---
 imports/ui/components/socially/socially.js | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/imports/ui/components/socially/socially.js b/imports/ui/components/socially/socially.js
index 565f42f..6ccb567 100644
--- a/imports/ui/components/socially/socially.js
+++ b/imports/ui/components/socially/socially.js
@@ -1,6 +1,7 @@
 import angular from 'angular';
 import angularMeteor from 'angular-meteor';
 import ngMaterial from 'angular-material';
+import ngSanitize from 'angular-sanitize';
 import uiRouter from 'angular-ui-router';
 
 import './socially.html';
@@ -17,6 +18,7 @@ const name = 'socially';
 export default angular.module(name, [
   angularMeteor,
   ngMaterial,
+  ngSanitize,
   uiRouter,
   PartiesList,
   PartyDetails,
-- 
2.7.4


From b44b8c75d4d0288771e73a09086862094d831768 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 25 Apr 2016 11:48:44 +0200
Subject: [PATCH 359/375] Step 22.5: Import ionic and add as a dependency

---
 imports/ui/components/socially/socially.js | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/socially/socially.js b/imports/ui/components/socially/socially.js
index 6ccb567..36acacd 100644
--- a/imports/ui/components/socially/socially.js
+++ b/imports/ui/components/socially/socially.js
@@ -3,6 +3,8 @@ import angularMeteor from 'angular-meteor';
 import ngMaterial from 'angular-material';
 import ngSanitize from 'angular-sanitize';
 import uiRouter from 'angular-ui-router';
+import 'ionic-sdk/release/js/ionic';
+import 'ionic-sdk/release/js/ionic-angular';
 
 import './socially.html';
 import { name as PartiesList } from '../partiesList/partiesList';
@@ -24,7 +26,8 @@ export default angular.module(name, [
   PartyDetails,
   Navigation,
   Auth,
-  'accounts.ui'
+  'accounts.ui',
+  'ionic'
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
   controllerAs: name,
-- 
2.7.4


From a36c48bb25c6fcacc0328cc960c595783dc2e0e0 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 25 Apr 2016 11:49:08 +0200
Subject: [PATCH 360/375] Step 22.6: Import ionic styles

---
 imports/ui/components/socially/socially.js | 1 +
 1 file changed, 1 insertion(+)

diff --git a/imports/ui/components/socially/socially.js b/imports/ui/components/socially/socially.js
index 36acacd..80378f8 100644
--- a/imports/ui/components/socially/socially.js
+++ b/imports/ui/components/socially/socially.js
@@ -5,6 +5,7 @@ import ngSanitize from 'angular-sanitize';
 import uiRouter from 'angular-ui-router';
 import 'ionic-sdk/release/js/ionic';
 import 'ionic-sdk/release/js/ionic-angular';
+import 'ionic-sdk/release/css/ionic.css';
 
 import './socially.html';
 import { name as PartiesList } from '../partiesList/partiesList';
-- 
2.7.4


From a6160219ba119f88bc52df01cad1a7f07eba1c08 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 25 Apr 2016 11:50:26 +0200
Subject: [PATCH 361/375] Step 22.7: Create view of Socially for web

---
 imports/ui/components/socially/web.html | 3 +++
 1 file changed, 3 insertions(+)
 create mode 100644 imports/ui/components/socially/web.html

diff --git a/imports/ui/components/socially/web.html b/imports/ui/components/socially/web.html
new file mode 100644
index 0000000..7fdb2de
--- /dev/null
+++ b/imports/ui/components/socially/web.html
@@ -0,0 +1,3 @@
+<navigation></navigation>
+
+<div ui-view=""></div>
-- 
2.7.4


From a857acb26ddb72cdade83e62c803c243e6780c8e Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 25 Apr 2016 11:51:02 +0200
Subject: [PATCH 362/375] Step 22.8: Create mobile view

---
 imports/ui/components/socially/mobile.html | 3 +++
 1 file changed, 3 insertions(+)
 create mode 100644 imports/ui/components/socially/mobile.html

diff --git a/imports/ui/components/socially/mobile.html b/imports/ui/components/socially/mobile.html
new file mode 100644
index 0000000..b0de4a9
--- /dev/null
+++ b/imports/ui/components/socially/mobile.html
@@ -0,0 +1,3 @@
+<ion-nav-bar class="bar-positive" align-title="center">
+</ion-nav-bar>
+<ion-nav-view></ion-nav-view>
-- 
2.7.4


From c4947a292c5638a207d42a3cce5f1a15f9d34a34 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 25 Apr 2016 11:53:48 +0200
Subject: [PATCH 363/375] Step 22.9: Implement web and mobile views

---
 imports/ui/components/socially/socially.js | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

diff --git a/imports/ui/components/socially/socially.js b/imports/ui/components/socially/socially.js
index 80378f8..e792542 100644
--- a/imports/ui/components/socially/socially.js
+++ b/imports/ui/components/socially/socially.js
@@ -7,7 +7,10 @@ import 'ionic-sdk/release/js/ionic';
 import 'ionic-sdk/release/js/ionic-angular';
 import 'ionic-sdk/release/css/ionic.css';
 
-import './socially.html';
+import { Meteor } from 'meteor/meteor';
+
+import './web.html';
+import './mobile.html';
 import { name as PartiesList } from '../partiesList/partiesList';
 import { name as PartyDetails } from '../partyDetails/partyDetails';
 import { name as Navigation } from '../navigation/navigation';
@@ -16,6 +19,7 @@ import { name as Auth } from '../auth/auth';
 class Socially {}
 
 const name = 'socially';
+const template = Meteor.isCordova ? 'mobile' : 'web';
 
 // create a module
 export default angular.module(name, [
@@ -30,7 +34,7 @@ export default angular.module(name, [
   'accounts.ui',
   'ionic'
 ]).component(name, {
-  templateUrl: `imports/ui/components/${name}/${name}.html`,
+  templateUrl: `imports/ui/components/${name}/${template}.html`,
   controllerAs: name,
   controller: Socially
 })
-- 
2.7.4


From 1122bab62663e2d35668635f2d3c579279142abf Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 25 Apr 2016 15:17:24 +0200
Subject: [PATCH 364/375] Step 22.10: Remove old view

---
 imports/ui/components/socially/socially.html | 3 ---
 1 file changed, 3 deletions(-)
 delete mode 100644 imports/ui/components/socially/socially.html

diff --git a/imports/ui/components/socially/socially.html b/imports/ui/components/socially/socially.html
deleted file mode 100644
index 7fdb2de..0000000
--- a/imports/ui/components/socially/socially.html
+++ /dev/null
@@ -1,3 +0,0 @@
-<navigation></navigation>
-
-<div ui-view=""></div>
-- 
2.7.4


From 1d05fc3d232a5e40f2882ca64c8d64e1f4060c7c Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 25 Apr 2016 15:18:14 +0200
Subject: [PATCH 365/375] Step 22.11: Add title

---
 imports/ui/components/socially/mobile.html | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/imports/ui/components/socially/mobile.html b/imports/ui/components/socially/mobile.html
index b0de4a9..7751a6f 100644
--- a/imports/ui/components/socially/mobile.html
+++ b/imports/ui/components/socially/mobile.html
@@ -1,3 +1,6 @@
 <ion-nav-bar class="bar-positive" align-title="center">
+  <ion-nav-title>
+    Socially
+  </ion-nav-title>
 </ion-nav-bar>
 <ion-nav-view></ion-nav-view>
-- 
2.7.4


From 478df392e6ad51678eac6911d53048cf7da7d4b5 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 25 Apr 2016 15:19:33 +0200
Subject: [PATCH 366/375] Step 22.12: Create web view of PartiesList

---
 imports/ui/components/partiesList/web.html | 57 ++++++++++++++++++++++++++++++
 1 file changed, 57 insertions(+)
 create mode 100644 imports/ui/components/partiesList/web.html

diff --git a/imports/ui/components/partiesList/web.html b/imports/ui/components/partiesList/web.html
new file mode 100644
index 0000000..de5d229
--- /dev/null
+++ b/imports/ui/components/partiesList/web.html
@@ -0,0 +1,57 @@
+<div layout="column" layout-padding>
+  <party-add-button ng-show="partiesList.isLoggedIn"></party-add-button>
+
+  <div flex>
+    <h2 class="md-display-1">List of the parties:</h2>
+  </div>
+
+  <div flex layout="row" layout-padding>
+    <md-input-container>
+      <label>Search</label>
+      <input ng-model="partiesList.searchText">
+    </md-input-container>
+
+    <parties-sort on-change="partiesList.sortChanged(sort)" property="name" order="1"></parties-sort>
+  </div>
+
+  <div layout="column" layout-gt-sm="row">
+    <div flex="50">
+      <md-card dir-paginate="party in partiesList.parties | itemsPerPage: partiesList.perPage" total-items="partiesList.partiesCount">
+        <md-card-title>
+          <md-card-title-text>
+            <span class="md-headline" ui-sref="partyDetails({ partyId: party._id })">
+              {{party.name}}
+              <party-remove party="party"></party-remove>
+            </span>
+            <span class="md-subhead">{{party.description}}</span>
+          </md-card-title-text>
+          <md-card-title-media ng-if="party.images">
+            <div class="md-media-lg card-media">
+              <party-image images="party.images"></party-image>
+            </div>
+          </md-card-title-media>
+        </md-card-title>
+        <md-card-content>
+          <party-rsvps-list rsvps="party.rsvps"></party-rsvps-list>
+
+          <party-unanswered party="party" ng-if="!party.public"></party-unanswered>
+          <div ng-if="party.public">
+            Everyone is invited
+          </div>
+
+          <party-creator party="party"></party-creator>
+        </md-card-content>
+        <md-card-actions>
+          <party-rsvp party="party" ng-show="partiesList.isLoggedIn"></party-rsvp>
+          <div ng-hide="partiesList.isLoggedIn">
+            <i>Sign in to RSVP for this party.</i>
+          </div>
+        </md-card-actions>
+      </md-card>
+      <dir-pagination-controls on-page-change="partiesList.pageChanged(newPageNumber)"></dir-pagination-controls>
+    </div>
+    <div flex="50">
+      <parties-map parties="partiesList.parties"></parties-map>
+    </div>
+  </div>
+</div>
-- 
2.7.4


From 93e5b3802417fe974accd5cb079091a1aa45d9e6 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 25 Apr 2016 15:20:02 +0200
Subject: [PATCH 367/375] Step 22.13: Remove old view

---
 imports/ui/components/partiesList/partiesList.html | 57 ----------------------
 1 file changed, 57 deletions(-)
 delete mode 100644 imports/ui/components/partiesList/partiesList.html

diff --git a/imports/ui/components/partiesList/partiesList.html b/imports/ui/components/partiesList/partiesList.html
deleted file mode 100644
index de5d229..0000000
--- a/imports/ui/components/partiesList/partiesList.html
+++ /dev/null
@@ -1,57 +0,0 @@
-<div layout="column" layout-padding>
-  <party-add-button ng-show="partiesList.isLoggedIn"></party-add-button>
-
-  <div flex>
-    <h2 class="md-display-1">List of the parties:</h2>
-  </div>
-
-  <div flex layout="row" layout-padding>
-    <md-input-container>
-      <label>Search</label>
-      <input ng-model="partiesList.searchText">
-    </md-input-container>
-
-    <parties-sort on-change="partiesList.sortChanged(sort)" property="name" order="1"></parties-sort>
-  </div>
-
-  <div layout="column" layout-gt-sm="row">
-    <div flex="50">
-      <md-card dir-paginate="party in partiesList.parties | itemsPerPage: partiesList.perPage" total-items="partiesList.partiesCount">
-        <md-card-title>
-          <md-card-title-text>
-            <span class="md-headline" ui-sref="partyDetails({ partyId: party._id })">
-              {{party.name}}
-              <party-remove party="party"></party-remove>
-            </span>
-            <span class="md-subhead">{{party.description}}</span>
-          </md-card-title-text>
-          <md-card-title-media ng-if="party.images">
-            <div class="md-media-lg card-media">
-              <party-image images="party.images"></party-image>
-            </div>
-          </md-card-title-media>
-        </md-card-title>
-        <md-card-content>
-          <party-rsvps-list rsvps="party.rsvps"></party-rsvps-list>
-
-          <party-unanswered party="party" ng-if="!party.public"></party-unanswered>
-          <div ng-if="party.public">
-            Everyone is invited
-          </div>
-
-          <party-creator party="party"></party-creator>
-        </md-card-content>
-        <md-card-actions>
-          <party-rsvp party="party" ng-show="partiesList.isLoggedIn"></party-rsvp>
-          <div ng-hide="partiesList.isLoggedIn">
-            <i>Sign in to RSVP for this party.</i>
-          </div>
-        </md-card-actions>
-      </md-card>
-      <dir-pagination-controls on-page-change="partiesList.pageChanged(newPageNumber)"></dir-pagination-controls>
-    </div>
-    <div flex="50">
-      <parties-map parties="partiesList.parties"></parties-map>
-    </div>
-  </div>
-</div>
-- 
2.7.4


From 99a64556c0efbdaaf54928cf3b389fc687d676cf Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 25 Apr 2016 15:20:56 +0200
Subject: [PATCH 368/375] Step 22.14: Create mobile view

---
 imports/ui/components/partiesList/mobile.html | 22 ++++++++++++++++++++++
 1 file changed, 22 insertions(+)
 create mode 100644 imports/ui/components/partiesList/mobile.html

diff --git a/imports/ui/components/partiesList/mobile.html b/imports/ui/components/partiesList/mobile.html
new file mode 100644
index 0000000..c2c838a
--- /dev/null
+++ b/imports/ui/components/partiesList/mobile.html
@@ -0,0 +1,22 @@
+<ion-view hide-back-button="true">
+  <ion-content padding="true" class="has-header">
+    <div class="list">
+      <div class="card" ng-repeat="party in partiesList.parties">
+        <div class="item">
+          <h2>
+            {{party.name}}
+          </h2>
+          <p>
+            {{party.description}}
+          </p>
+        </div>
+
+        <div class="item item-image">
+          <party-image images="party.images"></party-image>
+        </div>
+
+        <party-rsvps-list class="item" rsvps="party.rsvps"></party-rsvps-list>
+      </div>
+    </div>
+  </ion-content>
+</ion-view>
-- 
2.7.4


From c7f047bcd1581d9f7892692579781e0885583350 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 25 Apr 2016 15:21:54 +0200
Subject: [PATCH 369/375] Step 22.15: Implement new views

---
 imports/ui/components/partiesList/partiesList.js | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

diff --git a/imports/ui/components/partiesList/partiesList.js b/imports/ui/components/partiesList/partiesList.js
index ef9eb3c..bbec2e1 100644
--- a/imports/ui/components/partiesList/partiesList.js
+++ b/imports/ui/components/partiesList/partiesList.js
@@ -4,8 +4,10 @@ import uiRouter from 'angular-ui-router';
 import utilsPagination from 'angular-utils-pagination';
 
 import { Counts } from 'meteor/tmeasday:publish-counts';
+import { Meteor } from 'meteor/meteor';
 
-import './partiesList.html';
+import './web.html';
+import './mobile.html';
 import { Parties } from '../../../api/parties';
 import { name as PartiesSort } from '../partiesSort/partiesSort';
 import { name as PartiesMap } from '../partiesMap/partiesMap';
@@ -71,6 +73,7 @@ class PartiesList {
 }
 
 const name = 'partiesList';
+const template = Meteor.isCordova ? 'mobile' : 'web';
 
 // create a module
 export default angular.module(name, [
@@ -86,7 +89,7 @@ export default angular.module(name, [
   PartyRsvpsList,
   PartyImage
 ]).component(name, {
-  templateUrl: `imports/ui/components/${name}/${name}.html`,
+  templateUrl: `imports/ui/components/${name}/${template}.html`,
   controllerAs: name,
   controller: PartiesList
 })
-- 
2.7.4


From c39023668fdd57e35ef23ff86beff7682297308a Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 25 Apr 2016 15:22:45 +0200
Subject: [PATCH 370/375] Step 22.16: Remove top margin of the first card

---
 imports/ui/components/partiesList/partiesList.less | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/imports/ui/components/partiesList/partiesList.less b/imports/ui/components/partiesList/partiesList.less
index b0bc5dc..08e59d6 100644
--- a/imports/ui/components/partiesList/partiesList.less
+++ b/imports/ui/components/partiesList/partiesList.less
@@ -2,6 +2,10 @@ parties-list {
   [ui-sref] {
     cursor: pointer;
   }
+
+  .list > .card:first-child {
+    margin-top: 0;
+  }
 }
 
 @import "../partiesMap/partiesMap.less";
-- 
2.7.4


From 9a3e3b8a779dccc01337774e970f4d1dcdb76a94 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 25 Apr 2016 15:25:39 +0200
Subject: [PATCH 371/375] Step 22.17: Create DisplayImageFilter

---
 imports/ui/filters/displayImageFilter.js | 26 ++++++++++++++++++++++++++
 1 file changed, 26 insertions(+)
 create mode 100644 imports/ui/filters/displayImageFilter.js

diff --git a/imports/ui/filters/displayImageFilter.js b/imports/ui/filters/displayImageFilter.js
new file mode 100644
index 0000000..aa2dfda
--- /dev/null
+++ b/imports/ui/filters/displayImageFilter.js
@@ -0,0 +1,26 @@
+import angular from 'angular';
+
+import { Meteor } from 'meteor/meteor';
+
+const name = 'displayImageFilter';
+
+function DisplayImageFilter(image) {
+  if (!image) {
+    return image;
+  }
+
+  // leave it as it is for the web view
+  if (!Meteor.isCordova) {
+    return image.url;
+  }
+
+  // create new path of an image
+  const path = `ufs/${image.store}/${image._id}/${image.name}`;
+  return Meteor.absoluteUrl(path);
+}
+
+// create a module
+export default angular.module(name, [])
+  .filter(name, () => {
+    return DisplayImageFilter;
+  });
-- 
2.7.4


From 4f1b757dac451b805df03329164a67c1087cd962 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 25 Apr 2016 15:26:55 +0200
Subject: [PATCH 372/375] Step 22.18: Add new filter to PartyImage

---
 imports/ui/components/partyImage/partyImage.js | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/imports/ui/components/partyImage/partyImage.js b/imports/ui/components/partyImage/partyImage.js
index 84e0bc6..9e3f6c7 100644
--- a/imports/ui/components/partyImage/partyImage.js
+++ b/imports/ui/components/partyImage/partyImage.js
@@ -3,6 +3,7 @@ import angularMeteor from 'angular-meteor';
 
 import './partyImage.html';
 import { Images } from '../../../api/images';
+import { name as DisplayImageFilter } from '../../filters/displayImageFilter';
 
 class PartyImage {
   constructor($scope, $reactive) {
@@ -26,7 +27,8 @@ const name = 'partyImage';
 
 // create a module
 export default angular.module(name, [
-  angularMeteor
+  angularMeteor,
+  DisplayImageFilter
 ]).component(name, {
   templateUrl: `imports/ui/components/${name}/${name}.html`,
   bindings: {
-- 
2.7.4


From 0b66c2926decef1e5bc766dea1b18d7fa9910ecc Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 25 Apr 2016 15:27:28 +0200
Subject: [PATCH 373/375] Step 22.19: Implement DisplayImageFilter

---
 imports/ui/components/partyImage/partyImage.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/imports/ui/components/partyImage/partyImage.html b/imports/ui/components/partyImage/partyImage.html
index 719c4a3..04693e3 100644
--- a/imports/ui/components/partyImage/partyImage.html
+++ b/imports/ui/components/partyImage/partyImage.html
@@ -1 +1 @@
-<img ng-src="{{partyImage.mainImage.url}}"/>
+<img ng-src="{{partyImage.mainImage | displayImageFilter}}"/>
-- 
2.7.4


From 4400f3eebfdabc88c6b5d7e0b8f24bafb7d3e256 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 10:27:29 +0200
Subject: [PATCH 374/375] Add README

---
 README.md | 61 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 61 insertions(+)
 create mode 100644 README.md

diff --git a/README.md b/README.md
new file mode 100644
index 0000000..95fd557
--- /dev/null
+++ b/README.md
@@ -0,0 +1,61 @@
+# meteor-angular-socially - [Tutorial's site](http://angular-meteor.com/tutorialIntro)
+angular-meteor example and tutorial app.
+
+The tutorial starts at branch 'step_00' till the last step.
+
+The master branch is always equal to the last step.
+
+Here is the deployed final version - http://socially-step22.meteor.com/
+
+Please contribute to the tutorial.
+Pull request the master branch to add new features or pull request specific step to improve that step.
+
+Our goal in this tutorial is to add more steps as we go along, to cover as many use cases as possible.
+
+Thanks @MilosStanic for writing step 18 on angular-material
+
+An example with the `controller as` syntax can be found in [this branch](https://github.com/Urigo/meteor-angular-socially/tree/step_12_controller_as_vm).
+
+# angular-meteor University! <a href="http://angularjs.meteor.com/"><img src="http://angular-meteor.com/images/logo.png" /></a>  
+
+The angular-meteor university is a community learning experiment, we would like to create a similar experience to the [hueniversity](https://github.com/hueniverse/hueniversity)
+
+
+[![Join the chat at https://gitter.im/Urigo/angular-meteor](https://badges.gitter.im/Join%20Chat.svg)](https://gitter.im/Urigo/angular-meteor?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge)
+
+The first assignments will be to rewrite the tutorial steps, and follow the latest angular-meteor API , in a more [consistent style](https://github.com/johnpapa/angular-styleguide).
+We also hope the community will propose better solutions than the current ones.
+When we will catch up with the latest steps we will create new steps.
+
+### What am I going to learn?
+You will learn how to build a full stack application using meteor and angular. It will start with the basics and move on to the more advanced topic such as users and authentication, application architecture, reactivity, mobile app, ionic, working with files, Angular Server, ES6 and more.
+
+
+### What do I need to know?
+You should feel comfortable writing simple functions in JavaScript, working with GitHub, using basic git commands, have a basic familiarity with mongoDB, and be able to pick up new subjects by reading tutorials and documentation.
+
+### How advanced is this course?
+We'll start from the basics and make our way to the most advanced topics. The way this course is structured, you can choose which assignments to participate in, so more experienced developers can "sit out" or help others during the basic assignments and participate when it gets to areas they are not as strong in. However, since teaching is one of the most effective ways to learn, we believe that participating early will improve the existing skills of advanced developers.
+The assignment will include just enough information to get you going, but you will need to do most of the learning on your own by using the wide range of online resources available. However, the real benefit of this process will come from the code review of your Pull Request. This is where expert developers will review your work and provide you specific and actionable feedback.
+
+### How does it work?
+First, read the [Code of Conduct](https://github.com/Urigo/meteor-angular-socially/blob/master/COC.md) !
+
+Simple, you start by forking this repo.
+Every few days a new issue will be posted with an [`assignment` label](https://github.com/Urigo/meteor-angular-socially/labels/assignment)
+. If you would like to participate in the assignment, try to solve it and when you are done, submit a Pull Request back to this repo to the `step_NUMBER_u` branch. Make sure your code complies with the [John Papa Angular Style Guide](https://github.com/johnpapa/angular-styleguide).
+While you wait for the assignment to close, take a look at what others are submitting and see if you can improve your own solution (borrow ideas, add tests, write examples, update the documentation). If you see ways in which others can improve their solution, please don’t hesitate to comment on their Pull Request.
+Each assignment will have a final submission date. When the issue expires, one of the Pull Requests submitted will be picked and merged and published as the new tutorial step. Any follow up assignments will be based on the merged code.
+Before starting the next assignment, make sure [your fork matches the current](https://github.com/Urigo/meteor-angular-socially/blob/master/guides/git.md ) assignment step branch (`step_NUMBER_u`) since only one Pull Request can be accepted.
+
+### How can I help?
+
+There are lots of way you can help make this experiment succeed and help shape a new format for teaching development skills:
+Submit Pull Requests to improve this readme, add examples, write quick tutorials on how to work with git, etc.
+Add new steps to angular-meteor-socially tutorial.
+Look for issues with a [help wanted label](https://github.com/Urigo/meteor-angular-socially/labels/help%20wanted) and help with those.
+Randomly pick submitted Pull Request and review them, offering advice and helping others improve their skills.
+Submit Pull Request or open issues with proposals for [angular-meteor](https://github.com/Urigo/angular-meteor)
+
+### Anything else?
+[Open an issue](https://github.com/Urigo/meteor-angular-socially/issues/new), it's free.
-- 
2.7.4


From e125f0f2268604857976060f275db53bfbfd35d5 Mon Sep 17 00:00:00 2001
From: Kamil Kisiela <kamil.kisiela@ster-project.pl>
Date: Mon, 11 Apr 2016 10:28:34 +0200
Subject: [PATCH 375/375] Add EDIT_THIS_TUTORIAL.md

---
 EDIT_THIS_TUTORIAL.md | 192 ++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 192 insertions(+)
 create mode 100644 EDIT_THIS_TUTORIAL.md

diff --git a/EDIT_THIS_TUTORIAL.md b/EDIT_THIS_TUTORIAL.md
new file mode 100644
index 0000000..b0f831a
--- /dev/null
+++ b/EDIT_THIS_TUTORIAL.md
@@ -0,0 +1,192 @@
+## How to edit this tutorial?
+
+First, you need to understand how this tutorial works and the importance of the commits.
+This tutorial is based on [Meteor's tutorial tools](http://meteor-tutorial-tools.readthedocs.org/en/latest/) and use it's tools to create a simple diff-boxes for code changes accross the commit.
+
+So the very first thing you need to know it that this specific tutorial is used in [Angular1 Meteor tutorials](http://www.angular-meteor.com/tutorials/socially/angular1/bootstrapping) and every diff box you see there is generated automatically from the commits in this repository.
+
+So what is the flow?
+- Create commits with specific format - the format in use in this repository and in Meteor tutorial tools is:
+
+  ````Step XX.XX: TEXT_TEXT_TEXT````
+
+  (where XX.XX are numbers that relates to the step in the tutorial you write, and TEXT_TEXT_TEXT is the title of the generated diffbox you will get).
+
+- Generate PATCH file, as described [here](http://meteor-tutorial-tools.readthedocs.org/en/latest/new-tutorial/), it's just running a simple `git` command that generates a file from all of you commits in the repository.
+
+- Create a Meteor tutorial app and define the tutorial objects - also described [here](http://meteor-tutorial-tools.readthedocs.org/en/latest/new-tutorial/).
+
+- Write your tutorial and use the `diffBox` helper to generate the actual HTML of the DiffBox.
+
+**Note that commit without the speical format are also legal, but won't be available for creating diff-box!**
+
+## How to add new steps to the tutorial?
+
+Adding new steps to your tutorial is easy, just get the latest version of the repository, and do your changes and commit them.
+It is recomended to make only ONE CHANGE in ONE FILE in ONE COMMIT, which means that after you make a simple change in only one file, commit that single file with a commit message with the right format, for example:
+
+` Step 10.12: This is new!`
+
+I recomend to perform multiple commit to your local repository, and just after you sure that they are fine, to `git push` them to the remote repository, because it is much easier to make change in the local repository.
+
+## How to undo my lastest commit?
+
+So you done a commit and you are not so sure about the change you made, or the order of it? you can just undo your lastest commit with the following command:
+
+` git reset HEAD~1`
+
+Note that the files you changes goes back to be uncommited change, and if it's a new file it will be removed from git and new you need to `git add` it again.
+
+## How to edit existing commits?
+
+So this is there it becomes interesting - we want to keep the order of the commits as it should be in the tutorial.
+
+Let's understand it with this order of commits:
+
+````
+Step 1.4: Create a new service
+Step 1.3: Create a new view
+Step 1.2: Create a new component
+Step 1.1: Add the application dependencies
+Step 1.0: Create new application
+````
+
+So now we created our tutorial, and we noticed that we have a bug in `Step 1.2` - our instinct is to go to the latest commit (most updated state of the repository) and add a new commit, and this will be the result:
+
+````
+Fix for step 1.2
+Step 1.4: Create a new service
+Step 1.3: Create a new view
+Step 1.2: Create a new component
+Step 1.1: Add the application dependencies
+Step 1.0: Create new application
+````
+
+So now we have a commit on top of the rest of the commit and if we get the lastest repository commit - everything will work great and we will have the bug fixed we just applied.
+
+This is good for regular applications or projects - but in case of a tutorial it isn't good at all - if we generate the diff box for the commit with `Step 1.2` we will see the code with the bug!
+
+So as you might already understand - we need to edit the actual `Step 1.2` commit, without adding new commits!
+
+In order to edit existing commits, we need to get the actual commit with the bug, edit it, keep the same commit message and the same commit id and then generate a new PATCH file.
+
+This might sound complicated but it isn't, it just requires from you to know how to use some `git` commands and basic `vi` commands. I also recommend to use [SourceTree](https://www.sourcetreeapp.com/) - it's great Git GUI tool, but it is not enough and note that you **must** know how to use the command line git.
+
+
+So let's edit the commit:
+
+- Go the the project's repository after you clone it, make sure you all up-to-date (`git pull`) and make sure that you do not have any commits that you did not pushed, or any other uncomitted changes! (**This is VERY important**)
+- Find the commit id you want to edit, you can simply do it in SourceTree. For example, here:
+![1](http://s10.postimg.org/qs4f1d2nd/image.png)
+
+- So in our case, we want to edit commit id `d002ba8`, so we need to go back in time and to set our local repository to that commit. This done by running the following command:
+
+````
+  git rebase -i d002ba8~1
+````
+
+- Now you will get the Interactive Rebase screen of git - you will see your commit in the first line:
+
+![2](http://s8.postimg.org/sz0avbymt/Screen_Shot_2016_02_08_at_16_42_51.png)
+
+
+- Notice the `pick` near you commit? great! we want to edit that commit, so use your `vi` skills and change the word `pick` to `edit`, than exit and save your changes in `vi` (ESC, `:`, and then `wq!`).
+
+- Great, now you in edit mode, and the repository is set to the commit you want to edit! ** so now make your changes to the file / files **
+
+- Done with that file? Great. to keep the original commit and apply the changes to it, run:
+
+`  git commit --all --no-edit --amend`
+
+That command will commit **all** the files you changed, without **edit the commit message**, and it will **amend** you changes into the original commit.
+
+- So now you are done with the changes and updating the commit, you will need to add the next commits on top of the new commit you edited. so you need to continue with the rebase process, do it by running:
+
+`  git rebase --continue`
+
+And if you noticed in any step on the change the you made a mistake, you can always abort the rebase by running:
+
+`  git rebase --abort`
+
+- In some cases, this is the last step, but in most of the times, you notice that after you continue the rebase operation, git stops and tells you that you have to merge because of conflicts. This makes sense - you changed a file in some point of the repository, but the commits that comes next, also changes it and it depends on the previous version of the file.
+
+- So in order to merge your conflict, I recommend to open your working directory in WebStorm, right click on the root of your project, and select "Git > Resolve Conflicts":
+![3](http://s12.postimg.org/4yxlr4llp/Screen_Shot_2016_02_08_at_16_58_04.png)
+
+- In the next screen, resolve you conflicts and ** DO NOT MAKE ANY GIT ACTION FROM WEBSTORM**
+
+- Now go back to the command line, and run: `git rebase --continue`, and you will get a screen that tells you to modify your commit message, you can just ignore it and save it as-is (ESC, `:` and then `wq!`).
+
+- If it's compilicated file that changes a lot of time, you might have multiple merges that needed to be done!
+- And you are done now! you just need to update your remote repository with the changes, but in order to do it, you need to `git push` with the `--force` flag, because now that you changed the history of you commits, the repositories no longer match! So run `git push --force origin YOUR_BRANCH` (replace YOUR_BRANCH with the branch you want to push to, **be carful! if you do not specify it, you will push it to the master and you might override the whole repo!**
+
+## How to only edit the commit message?
+
+So if you know how to edit commint (read the previous explaination), changing a commit message is much easier.
+
+You just need to perform the same `git rebase` as in the previous question, and instead of using `edit`, use `reword` (or just `r`), note that you can do it to multiple commits in the same time.
+
+Then you will see the commit message in the git shell screen, just change it and then exit and save from the vi.
+
+Then just continue the rebase (`git rebase --continue`) and push it.
+
+## How to remove entire commit?
+
+You just need to perform the same `git rebase` as in the previous question, and in the `vi` screen you get, just removed the entire line of the commit you want to remove (vi shortcut: `dd`), and then continue the rebase.
+
+## How to split commit into two or more commits?
+
+Splitting commits is a tricky one - there are some ways to to it, but I recommend to undo the commit if you still can (if it's the last one) and do it again in splitted commits.
+
+But if you can't undo it, you can still solve this issue:
+
+- Do `git rebase` to your commit minus two commits, that means for example: `git rebase d0021ab~2` (note the 2 instead of 1 in the end of the line), now the commit you want to split will be second in the commits list.
+- Remove the commit you want to split by removing it's line (vi shortcut: `dd`).
+- Go to the first commit in the list now (which is the commit that comes before the one you want to split), and set it to `edit` mode.
+- Now make you changes in a different commits, instead of one, perform them manually, and to commit each single change, use: `git commit --all` (Note that we did not use `amend` flag so we do not change the commit we set to edit mode!), and in that screen that opens, set the commit message. do that for each one of the commits.
+- Now just continue your rebase with `git rebase --continue` and finish it like any other change you made in the git history.
+
+## How to handle Meteor packages and versions?
+
+Actually, changing versions and packages in Meteor app should be the same, but there is a file that Meteor manages by it self, called `.meteor/versions` - this file contains the versions of all the packages you use in your app.
+
+So if you `git rebase` to specific commit and modify the packages or update a package version, make sure to run your app as you used to (for example: `meteor`) and wait until Meteor done with the build - in this point, a new `.meteor/versions` file will be generated, so make sure that you commit and update it aswell.
+
+But now you will notice that in every step that you done some change with the packages, you have a conflict and you have to merge - this merge will be very hard to perform because of two generated files with a lot of lines and versions of packages - you do not have to deal with it that way!
+
+First, mark the `.meteor/versions` file as resolved conflict (does matter it's content right now) , and then set the content of the file to empty content.
+
+Now run your app and wait for it to finish the build, and you will notice that Meteor generated the correct and updates `versions` file! Just commit that file now and continue the rebase!
+
+
+## How to create a new tutorial app?
+
+Creating a new tutorial described [here](http://meteor-tutorial-tools.readthedocs.org/en/latest/new-tutorial/).
+
+## Another goods
+
+#### Step tag and step diff
+
+So after creating a few steps in your tutorial, you can create a link that shown that entire diff between two steps (not sub-steps!), the actual does not related to the tutorial tools but very useful if you want to provide your users the ability to see the whole changes for each step of the tutorial.
+
+So in order to do that, make sure you create a Git Tag for each steps you finish (In the last commit of the step), you can do it with SourceTree or in GitHub, it does not matter.
+
+So after adding more that one step and one tag, you can add to your tutotial link to page that shows the entire diff, for example:
+
+https://github.com/Urigo/meteor-angular-socially/compare/step_01...step_02
+
+This link shows the entire diff between the tag `step_01` and `step_02`.
+
+Note that after each change you made in the commits that required a force `push`, you need to create the tags again!
+
+#### Download link for a step
+
+Another good you get is the ability to get a link to download the entire tutorial example, so users can jump to step and start it from there with the updated code!
+
+To do that, just add a link in your tutorial, like this:
+
+https://github.com/Urigo/meteor-angular-socially/archive/step_21.zip
+
+You need ofcourse to change the repository url, and replace `step_21` with the name of the tag you created (explained in the previous section).
+
+Thanks it! now you can just download the entire project in each step!
-- 
2.7.4

