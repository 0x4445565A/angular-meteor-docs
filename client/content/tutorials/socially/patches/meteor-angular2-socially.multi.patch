From 93e04c09ab087ec37a2e4da0e611ba6e08bbeabb Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 15:10:14 +0200
Subject: [PATCH 001/194] Add README file

---
 README.md | 2 ++
 1 file changed, 2 insertions(+)
 create mode 100644 README.md

diff --git a/README.md b/README.md
new file mode 100644
index 0000000..bf634c1
--- /dev/null
+++ b/README.md
@@ -0,0 +1,2 @@
+# Angular2-Meteor Tutorial
+Tutorial is based on building Angular2 UI for a Meteor app called Socially.
\ No newline at end of file
-- 
2.6.4


From 88ba7392523911a68113b23edd263621a6a9c8fb Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 15:11:01 +0200
Subject: [PATCH 002/194] Step 0.1: add client/index.html

---
 client/index.html | 3 +++
 1 file changed, 3 insertions(+)
 create mode 100644 client/index.html

diff --git a/client/index.html b/client/index.html
new file mode 100644
index 0000000..3887661
--- /dev/null
+++ b/client/index.html
@@ -0,0 +1,3 @@
+<body>
+<p>Nothing here</p>
+</body>
\ No newline at end of file
-- 
2.6.4


From 1c2f15369adc03a64fdc6868e301762a561e121f Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Thu, 5 May 2016 22:33:50 +0300
Subject: [PATCH 003/194] Step 0.2: Add the angular2-compilers package

---
 .meteor/packages | 2 ++
 .meteor/versions | 6 ++++++
 2 files changed, 8 insertions(+)

diff --git a/.meteor/packages b/.meteor/packages
index a9f8340..00ec1ba 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -18,3 +18,5 @@ ecmascript              # Enable ECMAScript2015+ syntax in app code
 
 autopublish             # Publish all data to the clients (for prototyping)
 insecure                # Allow all DB writes from clients (for prototyping)
+angular2-compilers
+barbatus:angular2-runtime
diff --git a/.meteor/versions b/.meteor/versions
index e794fc0..0a4d265 100644
--- a/.meteor/versions
+++ b/.meteor/versions
@@ -1,8 +1,14 @@
 allow-deny@1.0.4
+angular2-compilers@0.5.6
+angular2-html-templates@0.5.2
 autopublish@1.0.7
 autoupdate@1.2.9
 babel-compiler@6.6.4
 babel-runtime@0.1.8
+barbatus:angular2-runtime@0.2.3_2
+barbatus:typescript@0.2.11
+barbatus:typescript-compiler@0.5.9
+barbatus:typescript-runtime@0.1.1
 base64@1.0.8
 binary-heap@1.0.8
 blaze@2.1.7
-- 
2.6.4


From 3ffdcc097ba57964a3aec87f4db8f96fe03a8bb4 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 15:16:27 +0200
Subject: [PATCH 004/194] Step 0.3: Add TypeScript configuration file

---
 tsconfig.json | 21 +++++++++++++++++++++
 1 file changed, 21 insertions(+)
 create mode 100644 tsconfig.json

diff --git a/tsconfig.json b/tsconfig.json
new file mode 100644
index 0000000..4c01376
--- /dev/null
+++ b/tsconfig.json
@@ -0,0 +1,21 @@
+{
+  "compilerOptions": {
+    "experimentalDecorators": true,
+    "module": "commonjs",
+    "target": "es5",
+    "isolatedModules": false,
+    "moduleResolution": "node",
+    "emitDecoratorMetadata": true,
+    "removeComments": false,
+    "noImplicitAny": false,
+    "sourceMap": true
+  },
+  "filesGlob": [
+    "client/**/*.ts",
+    "server/**/*.ts",
+    "typings/**/*.d.ts"
+  ],
+  "exclude": [
+    "node_modules"
+  ]
+}
\ No newline at end of file
-- 
2.6.4


From 20474ef6efff54d433d4b69f318c476b06c2e050 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Sat, 2 Apr 2016 11:51:39 +0300
Subject: [PATCH 005/194] Step 0.4: Add angular2 and its dependencies to the
 project

---
 .meteor/packages | 1 -
 .meteor/versions | 4 ----
 package.json     | 5 ++++-
 3 files changed, 4 insertions(+), 6 deletions(-)

diff --git a/.meteor/packages b/.meteor/packages
index 00ec1ba..db449bd 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -7,7 +7,6 @@
 meteor-base             # Packages every Meteor app needs to have
 mobile-experience       # Packages for a great mobile UX
 mongo                   # The database Meteor supports right now
-blaze-html-templates    # Compile .html files into Meteor Blaze views
 session                 # Client-side reactive dictionary for your app
 jquery                  # Helpful client-side library
 tracker                 # Meteor's client-side reactive programming library
diff --git a/.meteor/versions b/.meteor/versions
index 0a4d265..ee2f95e 100644
--- a/.meteor/versions
+++ b/.meteor/versions
@@ -12,11 +12,9 @@ barbatus:typescript-runtime@0.1.1
 base64@1.0.8
 binary-heap@1.0.8
 blaze@2.1.7
-blaze-html-templates@1.0.4
 blaze-tools@1.0.8
 boilerplate-generator@1.0.8
 caching-compiler@1.0.4
-caching-html-compiler@1.0.6
 callback-hook@1.0.8
 check@1.2.1
 ddp@1.2.5
@@ -68,8 +66,6 @@ spacebars-compiler@1.0.11
 standard-minifier-css@1.0.6
 standard-minifier-js@1.0.6
 standard-minifiers@1.0.6
-templating@1.1.9
-templating-tools@1.0.4
 tracker@1.0.13
 ui@1.0.11
 underscore@1.0.8
diff --git a/package.json b/package.json
index 183abe2..dacddfd 100644
--- a/package.json
+++ b/package.json
@@ -5,6 +5,9 @@
     "start": "meteor run"
   },
   "dependencies": {
-    "meteor-node-stubs": "^0.2.3"
+    "angular2": "2.0.0-rc.1",
+    "angular2-meteor": "0.5.5",
+    "meteor-node-stubs": "^0.2.3",
+    "rxjs": "5.0.0-beta.6"
   }
 }
-- 
2.6.4


From c49e46e6ed5f111a636c74b7685707cd7ebc588c Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Sat, 2 Apr 2016 11:34:37 +0300
Subject: [PATCH 006/194] Step 0.5: Added the Meteor 1.3 typings file

---
 typings/meteor_1.3.d.ts | 933 ++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 933 insertions(+)
 create mode 100644 typings/meteor_1.3.d.ts

diff --git a/typings/meteor_1.3.d.ts b/typings/meteor_1.3.d.ts
new file mode 100644
index 0000000..baa46c4
--- /dev/null
+++ b/typings/meteor_1.3.d.ts
@@ -0,0 +1,933 @@
+// Type definitions for Meteor 1.3
+// Project: http://www.meteor.com/
+// Definitions by: Dave Allen <https://github.com/fullflavedave>
+// Definitions: https://github.com/borisyankov/DefinitelyTyped
+
+/**
+ * These are the common (for client and server) modules and interfaces that can't be automatically generated from the Meteor data.js file
+ */
+
+interface EJSONable {
+  [key: string]: number | string | boolean | Object | number[] | string[] | Object[] | Date | Uint8Array | EJSON.CustomType;
+}
+interface JSONable {
+  [key: string]: number | string | boolean | Object | number[] | string[] | Object[];
+}
+interface EJSON extends EJSONable { }
+
+declare module "meteor/match" {
+  export module Match {
+    export var Any: any;
+    export var String: any;
+    export var Integer: any;
+    export var Boolean: any;
+    export var undefined: any;
+    //function null();  // not allowed in TypeScript
+    export var Object: any;
+    export function Optional(pattern: any): boolean;
+    export function ObjectIncluding(dico: any): boolean;
+    export function OneOf(...patterns: any[]): any;
+    export function Where(condition: any): any;
+  }
+}
+
+
+declare module "meteor/meteor" {
+  export module Meteor {
+    interface UserEmail {
+      address: string;
+      verified: boolean;
+    }
+
+    interface User {
+      _id?: string;
+      username?: string;
+      emails?: Meteor.UserEmail[];
+      createdAt?: number;
+      profile?: any;
+      services?: any;
+    }
+
+    enum StatusEnum {
+      connected,
+      connecting,
+      failed,
+      waiting,
+      offline
+    }
+
+    interface LiveQueryHandle {
+      stop(): void;
+    }
+  }
+}
+
+declare module "meteor/ddp" {
+  import { Meteor } from "meteor/meteor";
+
+  export module DDP {
+    interface DDPStatic {
+      subscribe(name: string, ...rest: any[]): Meteor.SubscriptionHandle;
+      call(method: string, ...parameters: any[]): void;
+      apply(method: string, ...parameters: any[]): void;
+      methods(IMeteorMethodsDictionary: any): any;
+      status(): DDPStatus;
+      reconnect(): void;
+      disconnect(): void;
+      onReconnect(): void;
+    }
+
+    interface DDPStatus {
+      connected: boolean;
+      status: Meteor.StatusEnum;
+      retryCount: number;
+      //To turn this into an interval until the next reconnection, use retryTime - (new Date()).getTime()
+      retryTime?: number;
+      reason?: string;
+    }
+  }
+}
+
+declare module "meteor/mongo" {
+  export module Mongo {
+    interface Selector {
+      [key: string]: any;
+    }
+    interface Selector extends Object { }
+    interface Modifier { }
+    interface SortSpecifier { }
+    interface FieldSpecifier {
+      [id: string]: Number;
+    }
+  }
+}
+
+declare module "meteor/http" {
+  export module HTTP {
+
+    interface HTTPRequest {
+      content?: string;
+      data?: any;
+      query?: string;
+      params?: { [id: string]: string };
+      auth?: string;
+      headers?: { [id: string]: string };
+      timeout?: number;
+      followRedirects?: boolean;
+    }
+
+    interface HTTPResponse {
+      statusCode?: number;
+      headers?: { [id: string]: string };
+      content?: string;
+      data?: any;
+    }
+
+    function call(method: string, url: string, options?: HTTP.HTTPRequest, asyncCallback?: Function): HTTP.HTTPResponse;
+    function del(url: string, callOptions?: HTTP.HTTPRequest, asyncCallback?: Function): HTTP.HTTPResponse;
+    function get(url: string, callOptions?: HTTP.HTTPRequest, asyncCallback?: Function): HTTP.HTTPResponse;
+    function post(url: string, callOptions?: HTTP.HTTPRequest, asyncCallback?: Function): HTTP.HTTPResponse;
+    function put(url: string, callOptions?: HTTP.HTTPRequest, asyncCallback?: Function): HTTP.HTTPResponse;
+  }
+}
+
+declare module "meteor/random" {
+  export module Random {
+    function id(numberOfChars?: number): string;
+    function secret(numberOfChars?: number): string;
+    function fraction(): number;
+    function hexString(numberOfDigits: number): string; // @param numberOfDigits, @returns a random hex string of the given length
+    function choice(array: any[]): string; // @param array, @return a random element in array
+    function choice(str: string): string; // @param str, @return a random char in str
+  }
+}
+
+/**
+ * These are the client modules and interfaces that can't be automatically generated from the Meteor data.js file
+ */
+
+declare module "meteor/meteor" {
+  import { Blaze } from "meteor/blaze";
+
+  export module Meteor {
+    /** Start definitions for Template **/
+    interface Event {
+      type: string;
+      target: HTMLElement;
+      currentTarget: HTMLElement;
+      which: number;
+      stopPropagation(): void;
+      stopImmediatePropagation(): void;
+      preventDefault(): void;
+      isPropagationStopped(): boolean;
+      isImmediatePropagationStopped(): boolean;
+      isDefaultPrevented(): boolean;
+    }
+
+    interface EventHandlerFunction extends Function {
+      (event?: Meteor.Event, templateInstance?: Blaze.TemplateInstance): void;
+    }
+
+    interface EventMap {
+      [id: string]: Meteor.EventHandlerFunction;
+    }
+    /** End definitions for Template **/
+
+    interface LoginWithExternalServiceOptions {
+      requestPermissions?: string[];
+      requestOfflineToken?: Boolean;
+      forceApprovalPrompt?: Boolean;
+      userEmail?: string;
+      loginStyle?: string;
+    }
+
+    function loginWithMeteorDeveloperAccount(options?: Meteor.LoginWithExternalServiceOptions, callback?: Function): void;
+    function loginWithFacebook(options?: Meteor.LoginWithExternalServiceOptions, callback?: Function): void;
+    function loginWithGithub(options?: Meteor.LoginWithExternalServiceOptions, callback?: Function): void;
+    function loginWithGoogle(options?: Meteor.LoginWithExternalServiceOptions, callback?: Function): void;
+    function loginWithMeetup(options?: Meteor.LoginWithExternalServiceOptions, callback?: Function): void;
+    function loginWithTwitter(options?: Meteor.LoginWithExternalServiceOptions, callback?: Function): void;
+    function loginWithWeibo(options?: Meteor.LoginWithExternalServiceOptions, callback?: Function): void;
+
+    interface SubscriptionHandle {
+      stop(): void;
+      ready(): boolean;
+    }
+  }
+}
+
+declare module "meteor/blaze" {
+  export module Blaze {
+    interface View {
+      name: string;
+      parentView: Blaze.View;
+      isCreated: boolean;
+      isRendered: boolean;
+      isDestroyed: boolean;
+      renderCount: number;
+      autorun(runFunc: Function): void;
+      onViewCreated(func: Function): void;
+      onViewReady(func: Function): void;
+      onViewDestroyed(func: Function): void;
+      firstNode(): Node;
+      lastNode(): Node;
+      template: Blaze.Template;
+      templateInstance(): any;
+    }
+    interface Template {
+      viewName: string;
+      renderFunction: Function;
+      constructView(): Blaze.View;
+    }
+  }
+}
+
+declare module "meteor/browser-policy" {
+  export module BrowserPolicy {
+
+    interface framing {
+      disallow(): void;
+      restrictToOrigin(origin: string): void;
+      allowAll(): void;
+    }
+    interface content {
+      allowEval(): void;
+      allowInlineStyles(): void;
+      allowInlineScripts(): void;
+      allowSameOriginForAll(): void;
+      allowDataUrlForAll(): void;
+      allowOriginForAll(origin: string): void;
+      allowImageOrigin(origin: string): void;
+      allowFrameOrigin(origin: string): void;
+      allowContentTypeSniffing(): void;
+      allowAllContentOrigin(): void;
+      allowAllContentDataUrl(): void;
+      allowAllContentSameOrigin(): void;
+
+      disallowAll(): void;
+      disallowInlineStyles(): void;
+      disallowEval(): void;
+      disallowInlineScripts(): void;
+      disallowFont(): void;
+      disallowObject(): void;
+      disallowAllContent(): void;
+      //TODO: add the basic content types
+      // allow<content type>Origin(origin)
+      // allow<content type>DataUrl()
+      // allow<content type>SameOrigin()
+      // disallow<content type>()
+    }
+  }
+}
+
+
+/**
+ * These are the server modules and interfaces that can't be automatically generated from the Meteor data.js file
+ */
+
+declare module "meteor/meteor" {
+  export module Meteor {
+    interface EmailFields {
+      subject?: Function;
+      text?: Function;
+    }
+
+    interface EmailTemplates {
+      from: string;
+      siteName: string;
+      resetPassword: Meteor.EmailFields;
+      enrollAccount: Meteor.EmailFields;
+      verifyEmail: Meteor.EmailFields;
+    }
+
+    interface Connection {
+      id: string;
+      close: Function;
+      onClose: Function;
+      clientAddress: string;
+      httpHeaders: Object;
+    }
+  }
+}
+
+declare module "meteor/mongo" {
+  export module Mongo {
+    interface AllowDenyOptions {
+      insert?: (userId: string, doc: any) => boolean;
+      update?: (userId: string, doc: any, fieldNames: string[], modifier: any) => boolean;
+      remove?: (userId: string, doc: any) => boolean;
+      fetch?: string[];
+      transform?: Function;
+    }
+  }
+}
+
+interface MailComposerOptions {
+  escapeSMTP: boolean;
+  encoding: string;
+  charset: string;
+  keepBcc: boolean;
+  forceEmbeddedImages: boolean;
+}
+
+declare var MailComposer: MailComposerStatic;
+interface MailComposerStatic {
+  new (options: MailComposerOptions): MailComposer;
+}
+interface MailComposer {
+  addHeader(name: string, value: string): void;
+  setMessageOption(from: string, to: string, body: string, html: string): void;
+  streamMessage(): void;
+  pipe(stream: any /** fs.WriteStream **/): void;
+}
+/**
+ * These are the modules and interfaces for packages that can't be automatically generated from the Meteor data.js file
+ */
+
+interface ILengthAble {
+  length: number;
+}
+
+interface ITinytestAssertions {
+  ok(doc: Object): void;
+  expect_fail(): void;
+  fail(doc: Object): void;
+  runId(): string;
+  equal<T>(actual: T, expected: T, message?: string, not?: boolean): void;
+  notEqual<T>(actual: T, expected: T, message?: string): void;
+  instanceOf(obj: Object, klass: Function, message?: string): void;
+  notInstanceOf(obj: Object, klass: Function, message?: string): void;
+  matches(actual: any, regexp: RegExp, message?: string): void;
+  notMatches(actual: any, regexp: RegExp, message?: string): void;
+  throws(f: Function, expected?: string | RegExp): void;
+  isTrue(v: boolean, msg?: string): void;
+  isFalse(v: boolean, msg?: string): void;
+  isNull(v: any, msg?: string): void;
+  isNotNull(v: any, msg?: string): void;
+  isUndefined(v: any, msg?: string): void;
+  isNotUndefined(v: any, msg?: string): void;
+  isNan(v: any, msg?: string): void;
+  isNotNan(v: any, msg?: string): void;
+  include<T>(s: Array<T> | Object | string, value: any, msg?: string, not?: boolean): void;
+
+  notInclude<T>(s: Array<T> | Object | string, value: any, msg?: string, not?: boolean): void;
+  length(obj: ILengthAble, expected_length: number, msg?: string): void;
+  _stringEqual(actual: string, expected: string, msg?: string): void;
+}
+
+declare module "meteor/tiny-test" {
+  export module Tinytest {
+    function add(description: string, func: (test: ITinytestAssertions) => void): void;
+    function addAsync(description: string, func: (test: ITinytestAssertions) => void): void;
+  }
+}
+
+
+// Kept in for backwards compatibility
+declare module "meteor/meteor" {
+  export module Meteor {
+    interface Tinytest {
+      add(description: string, func: (test: ITinytestAssertions) => void): void;
+      addAsync(description: string, func: (test: ITinytestAssertions) => void): void;
+    }
+  }
+}
+
+declare module "meteor/accounts-base" {
+  import { Meteor } from "meteor/meteor";
+
+  export module Accounts {
+    function addEmail(userId: string, newEmail: string, verified?: boolean): void;
+    function changePassword(oldPassword: string, newPassword: string, callback?: Function): void;
+    function createUser(options: {
+      username?: string;
+      email?: string;
+      password?: string;
+      profile?: Object;
+    }, callback?: Function): string;
+    var emailTemplates: Meteor.EmailTemplates;
+    function findUserByEmail(email: string): Object;
+    function findUserByUsername(username: string): Object;
+    function forgotPassword(options: {
+      email?: string;
+    }, callback?: Function): void;
+    function onEmailVerificationLink(callback: Function): void;
+    function onEnrollmentLink(callback: Function): void;
+    function onResetPasswordLink(callback: Function): void;
+    function removeEmail(userId: string, email: string): void;
+    function resetPassword(token: string, newPassword: string, callback?: Function): void;
+    function sendEnrollmentEmail(userId: string, email?: string): void;
+    function sendResetPasswordEmail(userId: string, email?: string): void;
+    function sendVerificationEmail(userId: string, email?: string): void;
+    function setPassword(userId: string, newPassword: string, options?: {
+      logout?: Object;
+    }): void;
+    function setUsername(userId: string, newUsername: string): void;
+    var ui: {
+      config(options: {
+        requestPermissions?: Object;
+        requestOfflineToken?: Object;
+        forceApprovalPrompt?: Object;
+        passwordSignupFields?: string;
+      }): void;
+    };
+    function verifyEmail(token: string, callback?: Function): void;
+    function config(options: {
+      sendVerificationEmail?: boolean;
+      forbidClientAccountCreation?: boolean;
+      restrictCreationByEmailDomain?: string | Function;
+      loginExpirationInDays?: number;
+      oauthSecretKey?: string;
+    }): void;
+    function onLogin(func: Function): { stop: () => void };
+    function onLoginFailure(func: Function): { stop: () => void };
+    function user(): Meteor.User;
+    function userId(): string;
+    function loggingIn(): boolean;
+    function logout(callback?: Function): void;
+    function logoutOtherClients(callback?: Function): void;
+    function onCreateUser(func: Function): void;
+    function validateLoginAttempt(func: Function): { stop: () => void };
+    function validateNewUser(func: Function): boolean;
+  }
+}
+
+declare module App {
+  function accessRule(domainRule: string, options?: {
+    launchExternal?: boolean;
+  }): void;
+  function configurePlugin(id: string, config: Object): void;
+  function icons(icons: Object): void;
+  function info(options: {
+    id?: string;
+    version?: string;
+    name?: string;
+    description?: string;
+    author?: string;
+    email?: string;
+    website?: string;
+  }): void;
+  function launchScreens(launchScreens: Object): void;
+  function setPreference(name: string, value: string, platform?: string): void;
+}
+
+declare module Assets {
+  function getBinary(assetPath: string, asyncCallback?: Function): EJSON;
+  function getText(assetPath: string, asyncCallback?: Function): string;
+}
+
+declare module "meteor/blaze" {
+  import { Meteor } from "meteor/meteor";
+  export module Blaze {
+    function Each(argFunc: Function, contentFunc: Function, elseFunc?: Function): Blaze.View;
+    function If(conditionFunc: Function, contentFunc: Function, elseFunc?: Function): Blaze.View;
+    function Let(bindings: Function, contentFunc: Function): Blaze.View;
+    var Template: TemplateStatic;
+    interface TemplateStatic {
+      new (viewName?: string, renderFunction?: Function): Template;
+      // It should be [templateName: string]: TemplateInstance but this is not possible -- user will need to cast to TemplateInstance
+      [templateName: string]: any | Template; // added "any" to make it work
+      head: Template;
+      find(selector: string): Blaze.Template;
+      findAll(selector: string): Blaze.Template[];
+      $: any;
+    }
+    interface Template {
+    }
+
+    var TemplateInstance: TemplateInstanceStatic;
+    interface TemplateInstanceStatic {
+      new (view: Blaze.View): TemplateInstance;
+    }
+    interface TemplateInstance {
+      $(selector: string): any;
+      autorun(runFunc: Function): Object;
+      data: Object;
+      find(selector?: string): Blaze.TemplateInstance;
+      findAll(selector: string): Blaze.TemplateInstance[];
+      firstNode: Object;
+      lastNode: Object;
+      subscribe(name: string, ...args: any[]): Meteor.SubscriptionHandle;
+      subscriptionsReady(): boolean;
+      view: Object;
+    }
+
+    function Unless(conditionFunc: Function, contentFunc: Function, elseFunc?: Function): Blaze.View;
+    var View: ViewStatic;
+    interface ViewStatic {
+      new (name?: string, renderFunction?: Function): View;
+    }
+    interface View {
+    }
+
+    function With(data: Object | Function, contentFunc: Function): Blaze.View;
+    var currentView: Blaze.View;
+    function getData(elementOrView?: HTMLElement | Blaze.View): Object;
+    function getView(element?: HTMLElement): Blaze.View;
+    function isTemplate(value: any): boolean;
+    function remove(renderedView: Blaze.View): void;
+    function render(templateOrView: Template | Blaze.View, parentNode: Node, nextNode?: Node, parentView?: Blaze.View): Blaze.View;
+    function renderWithData(templateOrView: Template | Blaze.View, data: Object | Function, parentNode: Node, nextNode?: Node, parentView?: Blaze.View): Blaze.View;
+    function toHTML(templateOrView: Template | Blaze.View): string;
+    function toHTMLWithData(templateOrView: Template | Blaze.View, data: Object | Function): string;
+  }
+}
+
+declare module Cordova {
+  function depends(dependencies: { [id: string]: string }): void;
+}
+
+declare module "meteor/ddp" {
+  export module DDP {
+    function connect(url: string): DDP.DDPStatic;
+  }
+}
+
+declare module DDPCommon {
+  function MethodInvocation(options: {
+  }): any;
+}
+
+declare module EJSON {
+  var CustomType: CustomTypeStatic;
+  interface CustomTypeStatic {
+    new (): CustomType;
+  }
+  interface CustomType {
+    clone(): EJSON.CustomType;
+    equals(other: Object): boolean;
+    toJSONValue(): JSONable;
+    typeName(): string;
+  }
+
+  function addType(name: string, factory: (val: JSONable) => EJSON.CustomType): void;
+  function clone<T>(val: T): T;
+  function equals(a: EJSON, b: EJSON, options?: {
+    keyOrderSensitive?: boolean;
+  }): boolean;
+  function fromJSONValue(val: JSONable): any;
+  function isBinary(x: Object): boolean;
+  var newBinary: any;
+  function parse(str: string): EJSON;
+  function stringify(val: EJSON, options?: {
+    indent?: boolean | number | string;
+    canonical?: boolean;
+  }): string;
+  function toJSONValue(val: EJSON): JSONable;
+}
+
+declare module Match {
+  function test(value: any, pattern: any): boolean;
+}
+
+declare module "meteor/meteor" {
+  import { Mongo } from "meteor/mongo";
+
+  export module Meteor {
+    var Error: ErrorStatic;
+    interface ErrorStatic {
+      new (error: string | number, reason?: string, details?: string): Error;
+    }
+    interface Error {
+      error: string | number;
+      reason?: string;
+      details?: string;
+    }
+    function absoluteUrl(path?: string, options?: {
+      secure?: boolean;
+      replaceLocalhost?: boolean;
+      rootUrl?: string;
+    }): string;
+    function apply(name: string, args: EJSONable[], options?: {
+      wait?: boolean;
+      onResultReceived?: Function;
+    }, asyncCallback?: Function): any;
+    function call(name: string, ...args: any[]): any;
+    function clearInterval(id: number): void;
+    function clearTimeout(id: number): void;
+    function disconnect(): void;
+    var isClient: boolean;
+    var isCordova: boolean;
+    var isServer: boolean;
+    function loggingIn(): boolean;
+    function loginWith<ExternalService>(options?: {
+      requestPermissions?: string[];
+      requestOfflineToken?: boolean;
+      loginUrlParameters?: Object;
+      userEmail?: string;
+      loginStyle?: string;
+      redirectUrl?: string;
+    }, callback?: Function): void;
+    function loginWithPassword(user: Object | string, password: string, callback?: Function): void;
+    function logout(callback?: Function): void;
+    function logoutOtherClients(callback?: Function): void;
+    function methods(methods: Object): void;
+    function onConnection(callback: Function): void;
+    function publish(name: string, func: Function): void;
+    function reconnect(): void;
+    var release: string;
+    function setInterval(func: Function, delay: number): number;
+    function setTimeout(func: Function, delay: number): number;
+    var settings: { [id: string]: any };
+    function startup(func: Function): void;
+    function status(): Meteor.StatusEnum;
+    function subscribe(name: string, ...args: any[]): Meteor.SubscriptionHandle;
+    function user(): Meteor.User;
+    function userId(): string;
+    var users: Mongo.Collection<User>;
+    function wrapAsync(func: Function, context?: Object): any;
+  }
+}
+
+declare module "meteor/mongo" {
+  import { Meteor } from "meteor/meteor";
+
+  export module Mongo {
+    var Collection: CollectionStatic;
+    interface CollectionStatic {
+      new <T>(name: string, options?: {
+        connection?: Object;
+        idGeneration?: string;
+        transform?: Function;
+      }): Collection<T>;
+    }
+    interface Collection<T> {
+      allow(options: {
+        insert?: (userId: string, doc: T) => boolean;
+        update?: (userId: string, doc: T, fieldNames: string[], modifier: any) => boolean;
+        remove?: (userId: string, doc: T) => boolean;
+        fetch?: string[];
+        transform?: Function;
+      }): boolean;
+      deny(options: {
+        insert?: (userId: string, doc: T) => boolean;
+        update?: (userId: string, doc: T, fieldNames: string[], modifier: any) => boolean;
+        remove?: (userId: string, doc: T) => boolean;
+        fetch?: string[];
+        transform?: Function;
+      }): boolean;
+      find(selector?: Mongo.Selector | Mongo.ObjectID | string, options?: {
+        sort?: Mongo.SortSpecifier;
+        skip?: number;
+        limit?: number;
+        fields?: Mongo.FieldSpecifier;
+        reactive?: boolean;
+        transform?: Function;
+      }): Mongo.Cursor<T>;
+      findOne(selector?: Mongo.Selector | Mongo.ObjectID | string, options?: {
+        sort?: Mongo.SortSpecifier;
+        skip?: number;
+        fields?: Mongo.FieldSpecifier;
+        reactive?: boolean;
+        transform?: Function;
+      }): T;
+      insert(doc: T, callback?: Function): string;
+      rawCollection(): any;
+      rawDatabase(): any;
+      remove(selector: Mongo.Selector | Mongo.ObjectID | string, callback?: Function): number;
+      update(selector: Mongo.Selector | Mongo.ObjectID | string, modifier: Mongo.Modifier, options?: {
+        multi?: boolean;
+        upsert?: boolean;
+      }, callback?: Function): number;
+      upsert(selector: Mongo.Selector | Mongo.ObjectID | string, modifier: Mongo.Modifier, options?: {
+        multi?: boolean;
+      }, callback?: Function): { numberAffected?: number; insertedId?: string; };
+      _ensureIndex(indexName: string, options?: { [key: string]: any }): void;
+    }
+
+    var Cursor: CursorStatic;
+    interface CursorStatic {
+      new <T>(): Cursor<T>;
+    }
+    interface Cursor<T> {
+      count(): number;
+      fetch(): Array<T>;
+      forEach(callback: <T>(doc: T, index: number, cursor: Mongo.Cursor<T>) => void, thisArg?: any): void;
+      map<U>(callback: (doc: T, index: number, cursor: Mongo.Cursor<T>) => U, thisArg?: any): Array<U>;
+      observe(callbacks: Object): Meteor.LiveQueryHandle;
+      observeChanges(callbacks: Object): Meteor.LiveQueryHandle;
+    }
+
+    var ObjectID: ObjectIDStatic;
+    interface ObjectIDStatic {
+      new (hexString?: string): ObjectID;
+    }
+    interface ObjectID {
+    }
+
+  }
+}
+
+declare module Npm {
+  function depends(dependencies: { [id: string]: string }): void;
+  function require(name: string): any;
+}
+
+declare module Package {
+  function describe(options: {
+    summary?: string;
+    version?: string;
+    name?: string;
+    git?: string;
+    documentation?: string;
+    debugOnly?: boolean;
+    prodOnly?: boolean;
+  }): void;
+  function onTest(func: Function): void;
+  function onUse(func: Function): void;
+  function registerBuildPlugin(options?: {
+    name?: string;
+    use?: string | string[];
+    sources?: string[];
+    npmDependencies?: Object;
+  }): void;
+}
+
+declare module "meteor/tracker" {
+  export module Tracker {
+    function Computation(): void;
+    interface Computation {
+      firstRun: boolean;
+      invalidate(): void;
+      invalidated: boolean;
+      onInvalidate(callback: Function): void;
+      onStop(callback: Function): void;
+      stop(): void;
+      stopped: boolean;
+    }
+
+    var Dependency: DependencyStatic;
+    interface DependencyStatic {
+      new (): Dependency;
+    }
+    interface Dependency {
+      changed(): void;
+      depend(fromComputation?: Tracker.Computation): boolean;
+      hasDependents(): boolean;
+    }
+
+    var active: boolean;
+    function afterFlush(callback: Function): void;
+    function autorun(runFunc: (computation: Tracker.Computation) => void, options?: {
+      onError?: Function;
+    }): Tracker.Computation;
+    var currentComputation: Tracker.Computation;
+    function flush(): void;
+    function nonreactive(func: Function): void;
+    function onInvalidate(callback: Function): void;
+  }
+}
+
+declare module Session {
+  function equals(key: string, value: string | number | boolean | any /** Null **/ | any /** Undefined **/): boolean;
+  function get(key: string): any;
+  function set(key: string, value: EJSONable | any /** Undefined **/): void;
+  function setDefault(key: string, value: EJSONable | any /** Undefined **/): void;
+}
+
+declare module "meteor/http" {
+  import { Meteor } from "meteor/meteor";
+  export module HTTP {
+
+    function call(method: string, url: string, options?: {
+      content?: string;
+      data?: Object;
+      query?: string;
+      params?: Object;
+      auth?: string;
+      headers?: Object;
+      timeout?: number;
+      followRedirects?: boolean;
+      npmRequestOptions?: Object;
+      beforeSend?: Function;
+    }, asyncCallback?: Function): HTTP.HTTPResponse;
+    function del(url: string, callOptions?: Object, asyncCallback?: Function): HTTP.HTTPResponse;
+    function get(url: string, callOptions?: Object, asyncCallback?: Function): HTTP.HTTPResponse;
+    function post(url: string, callOptions?: Object, asyncCallback?: Function): HTTP.HTTPResponse;
+    function put(url: string, callOptions?: Object, asyncCallback?: Function): HTTP.HTTPResponse;
+  }
+}
+
+declare module "meteor/email" {
+  export module Email {
+    function send(options: {
+      from?: string;
+      to?: string | string[];
+      cc?: string | string[];
+      bcc?: string | string[];
+      replyTo?: string | string[];
+      subject?: string;
+      text?: string;
+      html?: string;
+      headers?: Object;
+      attachments?: Object[];
+      mailComposer?: MailComposer;
+    }): void;
+  }
+}
+
+declare var CompileStep: CompileStepStatic;
+interface CompileStepStatic {
+  new (): CompileStep;
+}
+interface CompileStep {
+  addAsset(options: {
+  }, path: string, data: any /** Buffer **/ | string): any;
+  addHtml(options: {
+    section?: string;
+    data?: string;
+  }): any;
+  addJavaScript(options: {
+    path?: string;
+    data?: string;
+    sourcePath?: string;
+  }): any;
+  addStylesheet(options: {
+  }, path: string, data: string, sourceMap: string): any;
+  arch: any;
+  declaredExports: any;
+  error(options: {
+  }, message: string, sourcePath?: string, line?: number, func?: string): any;
+  fileOptions: any;
+  fullInputPath: any;
+  inputPath: any;
+  inputSize: any;
+  packageName: any;
+  pathForSourceMap: any;
+  read(n?: number): any;
+  rootOutputPath: any;
+}
+
+declare var PackageAPI: PackageAPIStatic;
+interface PackageAPIStatic {
+  new (): PackageAPI;
+}
+interface PackageAPI {
+  addAssets(filenames: string | string[], architecture: string | string[]): void;
+  addFiles(filenames: string | string[], architecture?: string | string[], options?: {
+    bare?: boolean;
+  }): void;
+  export(exportedObjects: string | string[], architecture?: string | string[], exportOptions?: Object, testOnly?: boolean): void;
+  imply(packageNames: string | string[], architecture?: string | string[]): void;
+  use(packageNames: string | string[], architecture?: string | string[], options?: {
+    weak?: boolean;
+    unordered?: boolean;
+  }): void;
+  versionsFrom(meteorRelease: string | string[]): void;
+}
+
+declare module "meteor/reactive-var" {
+  import { Meteor } from "meteor/meteor";
+
+  export var ReactiveVar: ReactiveVarStatic;
+  interface ReactiveVarStatic {
+    new <T>(initialValue: T, equalsFunc?: Function): ReactiveVar<T>;
+  }
+  interface ReactiveVar<T> {
+    get(): T;
+    set(newValue: T): void;
+  }
+
+  export var Subscription: SubscriptionStatic;
+  interface SubscriptionStatic {
+    new (): Subscription;
+  }
+  interface Subscription {
+    added(collection: string, id: string, fields: Object): void;
+    changed(collection: string, id: string, fields: Object): void;
+    connection: Meteor.Connection;
+    error(error: Error): void;
+    onStop(func: Function): void;
+    ready(): void;
+    removed(collection: string, id: string): void;
+    stop(): void;
+    userId: string;
+  }
+}
+
+declare module "meteor/blaze" {
+  import { Meteor } from "meteor/meteor";
+
+  export var Template: TemplateStatic;
+  interface TemplateStatic {
+    new (): Template;
+    // It should be [templateName: string]: TemplateInstance but this is not possible -- user will need to cast to TemplateInstance
+    [templateName: string]: any | Template; // added "any" to make it work
+    head: Template;
+    find(selector: string): Blaze.Template;
+    findAll(selector: string): Blaze.Template[];
+    $: any;
+    body: Template;
+    currentData(): {};
+    instance(): Blaze.TemplateInstance;
+    parentData(numLevels?: number): {};
+    registerHelper(name: string, helperFunction: Function): void;
+  }
+  interface Template {
+    created: Function;
+    destroyed: Function;
+    events(eventMap: Meteor.EventMap): void;
+    helpers(helpers: { [id: string]: any }): void;
+    onCreated: Function;
+    onDestroyed: Function;
+    onRendered: Function;
+    rendered: Function;
+  }
+}
+
+declare function check(value: any, pattern: any): void;
+declare function execFileAsync(command: string, args?: any[], options?: {
+  cwd?: Object;
+  env?: Object;
+  stdio?: any[] | string;
+  destination?: any;
+  waitForClose?: string;
+}): any;
+declare function execFileSync(command: string, args?: any[], options?: {
+  cwd?: Object;
+  env?: Object;
+  stdio?: any[] | string;
+  destination?: any;
+  waitForClose?: string;
+}): String;
+declare function getExtension(): String;
\ No newline at end of file
-- 
2.6.4


From 5ce4e1ce3f9ed9b401da18d12d48f990faae47e3 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 15:46:09 +0200
Subject: [PATCH 007/194] Step 0.6: Create the root component

---
 client/app.ts | 12 ++++++++++++
 1 file changed, 12 insertions(+)
 create mode 100644 client/app.ts

diff --git a/client/app.ts b/client/app.ts
new file mode 100644
index 0000000..020375e
--- /dev/null
+++ b/client/app.ts
@@ -0,0 +1,12 @@
+import 'reflect-metadata';
+import 'zone.js/dist/zone';
+import {Component} from 'angular2/core';
+import {bootstrap} from 'angular2/platform/browser';
+
+@Component({
+  selector: 'app',
+  templateUrl: 'client/app.html'
+})
+class Socially { }
+
+bootstrap(Socially);
\ No newline at end of file
-- 
2.6.4


From e6cd6ed092517a9a20fe8e9cc45d88efb13e9101 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 15:46:28 +0200
Subject: [PATCH 008/194] Step 0.7: Add the main component HTML file

---
 client/app.html | 1 +
 1 file changed, 1 insertion(+)
 create mode 100644 client/app.html

diff --git a/client/app.html b/client/app.html
new file mode 100644
index 0000000..c57eff5
--- /dev/null
+++ b/client/app.html
@@ -0,0 +1 @@
+Hello World!
\ No newline at end of file
-- 
2.6.4


From 31587ab3728856f3ab8626091ab0272275baed3d Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 15:46:43 +0200
Subject: [PATCH 009/194] Step 0.8: Use the main component in the index.html
 file

---
 client/index.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/client/index.html b/client/index.html
index 3887661..2662e56 100644
--- a/client/index.html
+++ b/client/index.html
@@ -1,3 +1,3 @@
 <body>
-<p>Nothing here</p>
+  <app></app>
 </body>
\ No newline at end of file
-- 
2.6.4


From 0ea900330be665c543ed85a74fd4086101b8b58d Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 15:47:57 +0200
Subject: [PATCH 010/194] Step 1.1: Add static HTML to the main component view

---
 client/app.html | 15 ++++++++++++++-
 1 file changed, 14 insertions(+), 1 deletion(-)

diff --git a/client/app.html b/client/app.html
index c57eff5..9ea318e 100644
--- a/client/app.html
+++ b/client/app.html
@@ -1 +1,14 @@
-Hello World!
\ No newline at end of file
+<ul>
+  <li>
+    <span>Dubstep-Free Zone</span>
+    <p>
+      Can we please just for an evening not listen to dubstep.
+    </p>
+  </li>
+  <li>
+    <span>All dubstep all the time</span>
+    <p>
+      Get it on!
+    </p>
+  </li>
+</ul>
\ No newline at end of file
-- 
2.6.4


From dc761e4e58af3c9516c77aa6dc43ef6f80b70252 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 15:49:08 +0200
Subject: [PATCH 011/194] Step 2.1: Add dynamic html to the main component view

---
 client/app.html | 23 +++++++++--------------
 1 file changed, 9 insertions(+), 14 deletions(-)

diff --git a/client/app.html b/client/app.html
index 9ea318e..b750655 100644
--- a/client/app.html
+++ b/client/app.html
@@ -1,14 +1,9 @@
-<ul>
-  <li>
-    <span>Dubstep-Free Zone</span>
-    <p>
-      Can we please just for an evening not listen to dubstep.
-    </p>
-  </li>
-  <li>
-    <span>All dubstep all the time</span>
-    <p>
-      Get it on!
-    </p>
-  </li>
-</ul>
\ No newline at end of file
+<div>
+  <ul>
+    <li *ngFor="let party of parties">
+      {{party.name}}
+      <p>{{party.description}}</p>
+      <p>{{party.location}}</p>
+    </li>
+  </ul>
+</div>
\ No newline at end of file
-- 
2.6.4


From e4465f91bca7ee2b8e3d531a00355f1b3d1ec88e Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 15:50:04 +0200
Subject: [PATCH 012/194] Step 2.2: load parties data into the app

---
 client/app.ts | 19 ++++++++++++++++++-
 1 file changed, 18 insertions(+), 1 deletion(-)

diff --git a/client/app.ts b/client/app.ts
index 020375e..6eaea17 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -7,6 +7,23 @@ import {bootstrap} from 'angular2/platform/browser';
   selector: 'app',
   templateUrl: 'client/app.html'
 })
-class Socially { }
+class Socially {
+  constructor() {
+    this.parties = [
+      {'name': 'Dubstep-Free Zone',
+        'description': 'Can we please just for an evening not listen to dubstep.',
+        'location': 'Palo Alto'
+      },
+      {'name': 'All dubstep all the time',
+        'description': 'Get it on!',
+        'location': 'Palo Alto'
+      },
+      {'name': 'Savage lounging',
+        'description': 'Leisure suit required. And only fiercest manners.',
+        'location': 'San Francisco'
+      }
+    ];
+  }
+}
 
 bootstrap(Socially);
\ No newline at end of file
-- 
2.6.4


From a26bb9c279e4e85a48e655aa3206bd88f4625943 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 15:50:30 +0200
Subject: [PATCH 013/194] Step 2.3: define parties property

---
 client/app.ts | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/client/app.ts b/client/app.ts
index 6eaea17..63548ef 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -8,6 +8,8 @@ import {bootstrap} from 'angular2/platform/browser';
   templateUrl: 'client/app.html'
 })
 class Socially {
+  parties: Array<Object>;
+
   constructor() {
     this.parties = [
       {'name': 'Dubstep-Free Zone',
-- 
2.6.4


From 4495f57e63cddae52729f3597b0e0f5c83c4bc8f Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 15:51:11 +0200
Subject: [PATCH 014/194] Step 3.1: add the parties collection

---
 collections/parties.ts | 3 +++
 1 file changed, 3 insertions(+)
 create mode 100644 collections/parties.ts

diff --git a/collections/parties.ts b/collections/parties.ts
new file mode 100644
index 0000000..22bdeab
--- /dev/null
+++ b/collections/parties.ts
@@ -0,0 +1,3 @@
+import {Mongo} from 'meteor/mongo';
+
+export let Parties = new Mongo.Collection('parties');
\ No newline at end of file
-- 
2.6.4


From 9fe5c7d9ea1355c5aa711bf1f7e2c7fc4d6f5edd Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 15:53:10 +0200
Subject: [PATCH 015/194] Step 3.2: import the parties collection

---
 client/app.ts | 1 +
 1 file changed, 1 insertion(+)

diff --git a/client/app.ts b/client/app.ts
index 63548ef..1ee8711 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -2,6 +2,7 @@ import 'reflect-metadata';
 import 'zone.js/dist/zone';
 import {Component} from 'angular2/core';
 import {bootstrap} from 'angular2/platform/browser';
+import {Parties} from '../collections/parties';
 
 @Component({
   selector: 'app',
-- 
2.6.4


From 8eae0ff5457a559288cbb28adc54d2ca043a90c0 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 15:53:46 +0200
Subject: [PATCH 016/194] Step 3.3: Fetch parties from the collection

---
 client/app.ts | 15 +--------------
 1 file changed, 1 insertion(+), 14 deletions(-)

diff --git a/client/app.ts b/client/app.ts
index 1ee8711..3292799 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -12,20 +12,7 @@ class Socially {
   parties: Array<Object>;
 
   constructor() {
-    this.parties = [
-      {'name': 'Dubstep-Free Zone',
-        'description': 'Can we please just for an evening not listen to dubstep.',
-        'location': 'Palo Alto'
-      },
-      {'name': 'All dubstep all the time',
-        'description': 'Get it on!',
-        'location': 'Palo Alto'
-      },
-      {'name': 'Savage lounging',
-        'description': 'Leisure suit required. And only fiercest manners.',
-        'location': 'San Francisco'
-      }
-    ];
+    this.parties = Parties.find().fetch();
   }
 }
 
-- 
2.6.4


From f2c329eaaca572f56c6c6d770edeacdf1976b23d Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 15:55:24 +0200
Subject: [PATCH 017/194] Step 3.4: Fetch parties from the collection
 reactively

---
 client/app.ts | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

diff --git a/client/app.ts b/client/app.ts
index 3292799..8074362 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -1,8 +1,9 @@
 import 'reflect-metadata';
 import 'zone.js/dist/zone';
-import {Component} from 'angular2/core';
+import {Component, NgZone} from 'angular2/core';
 import {bootstrap} from 'angular2/platform/browser';
 import {Parties} from '../collections/parties';
+import {Tracker} from 'meteor/tracker';
 
 @Component({
   selector: 'app',
@@ -11,8 +12,10 @@ import {Parties} from '../collections/parties';
 class Socially {
   parties: Array<Object>;
 
-  constructor() {
-    this.parties = Parties.find().fetch();
+  constructor (zone: NgZone) {
+    Tracker.autorun(() => zone.run(() => {
+      this.parties = Parties.find().fetch();
+    }));
   }
 }
 
-- 
2.6.4


From ca472d423539f24f685ad4956001c967b8ad7204 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Sat, 2 Apr 2016 11:54:18 +0300
Subject: [PATCH 018/194] Step 3.5: Add server side main file

---
 server/main.ts | 1 +
 1 file changed, 1 insertion(+)
 create mode 100644 server/main.ts

diff --git a/server/main.ts b/server/main.ts
new file mode 100644
index 0000000..469d147
--- /dev/null
+++ b/server/main.ts
@@ -0,0 +1 @@
+import {Parties} from '../collections/parties.ts';
\ No newline at end of file
-- 
2.6.4


From b793c21ff587ed4a357eb9744a44f7f73327d15f Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Sat, 2 Apr 2016 11:54:38 +0300
Subject: [PATCH 019/194] Step 3.6: Added Angular2-Meteor auto bootstrap

---
 package.json | 1 +
 1 file changed, 1 insertion(+)

diff --git a/package.json b/package.json
index dacddfd..ed5e51f 100644
--- a/package.json
+++ b/package.json
@@ -7,6 +7,7 @@
   "dependencies": {
     "angular2": "2.0.0-rc.1",
     "angular2-meteor": "0.5.5",
+    "angular2-meteor-auto-bootstrap": "0.5.4",
     "meteor-node-stubs": "^0.2.3",
     "rxjs": "5.0.0-beta.6"
   }
-- 
2.6.4


From 1fd1a7d0c35872c16197e8eff9680662d85dfdd2 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 16:08:10 +0200
Subject: [PATCH 020/194] Step 3.7: Blaze-like binding to Angular2

---
 client/app.ts | 14 ++++++--------
 1 file changed, 6 insertions(+), 8 deletions(-)

diff --git a/client/app.ts b/client/app.ts
index 8074362..d11ad8a 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -1,21 +1,19 @@
 import 'reflect-metadata';
 import 'zone.js/dist/zone';
-import {Component, NgZone} from 'angular2/core';
-import {bootstrap} from 'angular2/platform/browser';
+import {Component} from 'angular2/core';
+import {bootstrap} from 'angular2-meteor-auto-bootstrap';
 import {Parties} from '../collections/parties';
-import {Tracker} from 'meteor/tracker';
+import {Mongo} from "meteor/mongo";
 
 @Component({
   selector: 'app',
   templateUrl: 'client/app.html'
 })
 class Socially {
-  parties: Array<Object>;
+  parties: Mongo.Cursor<Object>;
 
-  constructor (zone: NgZone) {
-    Tracker.autorun(() => zone.run(() => {
-      this.parties = Parties.find().fetch();
-    }));
+  constructor () {
+    this.parties = Parties.find();
   }
 }
 
-- 
2.6.4


From 82fb143fe1f870b18ded40e632f45b092e12b26e Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 16:10:18 +0200
Subject: [PATCH 021/194] Step 3.8: Load initial parties on server side

---
 server/load-parties.ts | 28 ++++++++++++++++++++++++++++
 1 file changed, 28 insertions(+)
 create mode 100644 server/load-parties.ts

diff --git a/server/load-parties.ts b/server/load-parties.ts
new file mode 100644
index 0000000..47c3c1c
--- /dev/null
+++ b/server/load-parties.ts
@@ -0,0 +1,28 @@
+import {Parties} from '../collections/parties.ts';
+
+export function loadParties() {
+  if (Parties.find().count() === 0) {
+
+    var parties = [
+      {
+        'name': 'Dubstep-Free Zone',
+        'description': 'Can we please just for an evening not listen to dubstep.',
+        'location': 'Palo Alto'
+      },
+      {
+        'name': 'All dubstep all the time',
+        'description': 'Get it on!',
+        'location': 'Palo Alto'
+      },
+      {
+        'name': 'Savage lounging',
+        'description': 'Leisure suit required. And only fiercest manners.',
+        'location': 'San Francisco'
+      }
+    ];
+
+    for (var i = 0; i < parties.length; i++) {
+      Parties.insert(parties[i]);
+    }
+  }
+};
\ No newline at end of file
-- 
2.6.4


From 1dd5759f7a67c69f78b3d2508b19307f0c179ed2 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 16:11:01 +0200
Subject: [PATCH 022/194] Step 3.9: bootstrap server side

---
 server/main.ts | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/server/main.ts b/server/main.ts
index 469d147..cdda65d 100644
--- a/server/main.ts
+++ b/server/main.ts
@@ -1 +1,4 @@
-import {Parties} from '../collections/parties.ts';
\ No newline at end of file
+import {loadParties} from './load-parties.ts';
+import {Meteor} from 'meteor/meteor';
+
+Meteor.startup(loadParties);
\ No newline at end of file
-- 
2.6.4


From 2d31ab97fa457e593fca0d2e356a2d7488b4dc3b Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 16:14:03 +0200
Subject: [PATCH 023/194] Step 4.1: create PartiesForm component

---
 client/imports/parties-form/parties-form.ts | 8 ++++++++
 1 file changed, 8 insertions(+)
 create mode 100644 client/imports/parties-form/parties-form.ts

diff --git a/client/imports/parties-form/parties-form.ts b/client/imports/parties-form/parties-form.ts
new file mode 100644
index 0000000..dbce5f6
--- /dev/null
+++ b/client/imports/parties-form/parties-form.ts
@@ -0,0 +1,8 @@
+import 'reflect-metadata';
+import {Component} from 'angular2/core';
+
+@Component({
+  selector: 'parties-form',
+  templateUrl: '/client/imports/parties-form/parties-form.html'
+})
+export class PartiesForm { }
\ No newline at end of file
-- 
2.6.4


From 3c537b22467817678a10ed96f0e1898006e2f49c Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 16:14:14 +0200
Subject: [PATCH 024/194] Step 4.2: add parties-form.html template

---
 client/imports/parties-form/parties-form.html | 9 +++++++++
 1 file changed, 9 insertions(+)
 create mode 100644 client/imports/parties-form/parties-form.html

diff --git a/client/imports/parties-form/parties-form.html b/client/imports/parties-form/parties-form.html
new file mode 100644
index 0000000..37748f5
--- /dev/null
+++ b/client/imports/parties-form/parties-form.html
@@ -0,0 +1,9 @@
+<form>
+  <label>Name</label>
+  <input type="text">
+  <label>Description</label>
+  <input type="text">
+  <label>Location</label>
+  <input type="text">
+  <button>Add</button>
+</form>
\ No newline at end of file
-- 
2.6.4


From 4976b5e24be4a071d80efb7950414f3de132fe03 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 16:14:30 +0200
Subject: [PATCH 025/194] Step 4.3: load the PartiesForm component

---
 client/app.html | 1 +
 1 file changed, 1 insertion(+)

diff --git a/client/app.html b/client/app.html
index b750655..e6ea085 100644
--- a/client/app.html
+++ b/client/app.html
@@ -1,4 +1,5 @@
 <div>
+  <parties-form></parties-form>
   <ul>
     <li *ngFor="let party of parties">
       {{party.name}}
-- 
2.6.4


From 563c000fa6af62f4424b041bc83de08c54316974 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 16:14:47 +0200
Subject: [PATCH 026/194] Step 4.4: import the PartiesForm component and link
 it with the Socially component

---
 client/app.ts | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/client/app.ts b/client/app.ts
index d11ad8a..4b11753 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -4,10 +4,12 @@ import {Component} from 'angular2/core';
 import {bootstrap} from 'angular2-meteor-auto-bootstrap';
 import {Parties} from '../collections/parties';
 import {Mongo} from "meteor/mongo";
+import {PartiesForm} from './imports/parties-form/parties-form';
 
 @Component({
   selector: 'app',
-  templateUrl: 'client/app.html'
+  templateUrl: 'client/app.html',
+  directives: [PartiesForm]
 })
 class Socially {
   parties: Mongo.Cursor<Object>;
-- 
2.6.4


From 5d988ab87ac17d22d94d05c0ce9f8eb0ded3a1bb Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 16:15:59 +0200
Subject: [PATCH 027/194] Step 4.5: build a form model

---
 client/imports/parties-form/parties-form.ts | 15 ++++++++++++++-
 1 file changed, 14 insertions(+), 1 deletion(-)

diff --git a/client/imports/parties-form/parties-form.ts b/client/imports/parties-form/parties-form.ts
index dbce5f6..231c58d 100644
--- a/client/imports/parties-form/parties-form.ts
+++ b/client/imports/parties-form/parties-form.ts
@@ -1,8 +1,21 @@
 import 'reflect-metadata';
 import {Component} from 'angular2/core';
+import {FormBuilder, ControlGroup, Validators} from 'angular2/common';
 
 @Component({
   selector: 'parties-form',
   templateUrl: '/client/imports/parties-form/parties-form.html'
 })
-export class PartiesForm { }
\ No newline at end of file
+export class PartiesForm {
+  partiesForm: ControlGroup;
+
+  constructor() {
+    let fb = new FormBuilder();
+
+    this.partiesForm = fb.group({
+      name: [''],
+      description: [''],
+      location: ['']
+    });
+  }
+}
\ No newline at end of file
-- 
2.6.4


From 239e098006a08763ee970ff9d8a23b2aac873d18 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 16:16:26 +0200
Subject: [PATCH 028/194] Step 4.6: add form validation

---
 client/imports/parties-form/parties-form.ts | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/client/imports/parties-form/parties-form.ts b/client/imports/parties-form/parties-form.ts
index 231c58d..f8a45b5 100644
--- a/client/imports/parties-form/parties-form.ts
+++ b/client/imports/parties-form/parties-form.ts
@@ -13,9 +13,9 @@ export class PartiesForm {
     let fb = new FormBuilder();
 
     this.partiesForm = fb.group({
-      name: [''],
+      name: ['', Validators.required],
       description: [''],
-      location: ['']
+      location: ['', Validators.required]
     });
   }
 }
\ No newline at end of file
-- 
2.6.4


From 29e6546cb8d98fd0c6a6e25384fe1836e4a6abad Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 16:16:51 +0200
Subject: [PATCH 029/194] Step 4.7: link the form and its model together

---
 client/imports/parties-form/parties-form.html | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/client/imports/parties-form/parties-form.html b/client/imports/parties-form/parties-form.html
index 37748f5..4e3676e 100644
--- a/client/imports/parties-form/parties-form.html
+++ b/client/imports/parties-form/parties-form.html
@@ -1,9 +1,9 @@
-<form>
+<form [ngFormModel]="partiesForm">
   <label>Name</label>
-  <input type="text">
+  <input type="text" ngControl="name">
   <label>Description</label>
-  <input type="text">
+  <input type="text" ngControl="description">
   <label>Location</label>
-  <input type="text">
+  <input type="text" ngControl="location">
   <button>Add</button>
 </form>
\ No newline at end of file
-- 
2.6.4


From dc76dc69727ea67be20be31185607577f6ec2194 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 16:17:16 +0200
Subject: [PATCH 030/194] Step 4.8: add submit handler inside the template

---
 client/imports/parties-form/parties-form.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/client/imports/parties-form/parties-form.html b/client/imports/parties-form/parties-form.html
index 4e3676e..754b9ff 100644
--- a/client/imports/parties-form/parties-form.html
+++ b/client/imports/parties-form/parties-form.html
@@ -1,4 +1,4 @@
-<form [ngFormModel]="partiesForm">
+<form [ngFormModel]="partiesForm" #f="ngForm" (submit)="addParty(f.value)">
   <label>Name</label>
   <input type="text" ngControl="name">
   <label>Description</label>
-- 
2.6.4


From 25e6eea0fbdb314cf9e505ca3f30a1adcb34f37f Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 16:19:39 +0200
Subject: [PATCH 031/194] Step 4.9: add addParty method into the component

---
 client/imports/parties-form/parties-form.ts | 17 ++++++++++++++++-
 1 file changed, 16 insertions(+), 1 deletion(-)

diff --git a/client/imports/parties-form/parties-form.ts b/client/imports/parties-form/parties-form.ts
index f8a45b5..73fd496 100644
--- a/client/imports/parties-form/parties-form.ts
+++ b/client/imports/parties-form/parties-form.ts
@@ -1,6 +1,7 @@
 import 'reflect-metadata';
 import {Component} from 'angular2/core';
-import {FormBuilder, ControlGroup, Validators} from 'angular2/common';
+import {FormBuilder, ControlGroup, Validators, Control} from 'angular2/common';
+import {Parties} from '../../../collections/parties.ts';
 
 @Component({
   selector: 'parties-form',
@@ -18,4 +19,18 @@ export class PartiesForm {
       location: ['', Validators.required]
     });
   }
+
+  addParty(party) {
+    if (this.partiesForm.valid) {
+      Parties.insert({
+        name: party.name,
+        description: party.description,
+        location: party.location
+      });
+
+      (<Control>this.partiesForm.controls['name']).updateValue('');
+      (<Control>this.partiesForm.controls['description']).updateValue('');
+      (<Control>this.partiesForm.controls['location']).updateValue('');
+    }
+  }
 }
\ No newline at end of file
-- 
2.6.4


From c16d520d5e7058f53126d9383b135f0c83a13983 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 16:20:12 +0200
Subject: [PATCH 032/194] Step 4.10: add a remove party button and click event
 handler

---
 client/app.html | 1 +
 1 file changed, 1 insertion(+)

diff --git a/client/app.html b/client/app.html
index e6ea085..0362c48 100644
--- a/client/app.html
+++ b/client/app.html
@@ -5,6 +5,7 @@
       {{party.name}}
       <p>{{party.description}}</p>
       <p>{{party.location}}</p>
+      <button (click)="removeParty(party)">X</button>
     </li>
   </ul>
 </div>
\ No newline at end of file
-- 
2.6.4


From 97ab8e4f899bc751744511dfe0e8c74657c0d987 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 16:21:03 +0200
Subject: [PATCH 033/194] Step 4.11: add removeParty method inside the
 component

---
 client/app.ts | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/client/app.ts b/client/app.ts
index 4b11753..5aefbd2 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -17,6 +17,10 @@ class Socially {
   constructor () {
     this.parties = Parties.find();
   }
+
+  removeParty(party) {
+    Parties.remove(party._id);
+  }
 }
 
 bootstrap(Socially);
\ No newline at end of file
-- 
2.6.4


From 4d4cb45fa0a76145f870bfb5f4cae872ce76737f Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 16:22:13 +0200
Subject: [PATCH 034/194] Step 5.1: import routing components and add them to
 the app

---
 client/app.ts | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/client/app.ts b/client/app.ts
index 5aefbd2..2aabb67 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -5,11 +5,12 @@ import {bootstrap} from 'angular2-meteor-auto-bootstrap';
 import {Parties} from '../collections/parties';
 import {Mongo} from "meteor/mongo";
 import {PartiesForm} from './imports/parties-form/parties-form';
+import {ROUTER_PROVIDERS, ROUTER_DIRECTIVES, RouteConfig} from 'angular2/router';
 
 @Component({
   selector: 'app',
   templateUrl: 'client/app.html',
-  directives: [PartiesForm]
+  directives: [PartiesForm, ROUTER_DIRECTIVES]
 })
 class Socially {
   parties: Mongo.Cursor<Object>;
@@ -23,4 +24,4 @@ class Socially {
   }
 }
 
-bootstrap(Socially);
\ No newline at end of file
+bootstrap(Socially, [ROUTER_PROVIDERS]);
\ No newline at end of file
-- 
2.6.4


From ac046186330ec15664186154125cdde7de44a559 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 16:25:41 +0200
Subject: [PATCH 035/194] Step 5.2: create PartiesList component

---
 client/imports/parties-list/parties-list.ts | 21 +++++++++++++++++++++
 1 file changed, 21 insertions(+)
 create mode 100644 client/imports/parties-list/parties-list.ts

diff --git a/client/imports/parties-list/parties-list.ts b/client/imports/parties-list/parties-list.ts
new file mode 100644
index 0000000..fee9dc9
--- /dev/null
+++ b/client/imports/parties-list/parties-list.ts
@@ -0,0 +1,21 @@
+import {Component} from 'angular2/core';
+import {Parties} from '../../../collections/parties';
+import {PartiesForm} from '../parties-form/parties-form';
+import {Mongo} from 'meteor/mongo';
+
+@Component({
+  selector: 'parties-list',
+  templateUrl: '/client/imports/parties-list/parties-list.html',
+  directives: [PartiesForm]
+})
+export class PartiesList {
+  parties: Mongo.Cursor<Object>;
+
+  constructor() {
+    this.parties = Parties.find();
+  }
+
+  removeParty(party) {
+    Parties.remove(party._id);
+  }
+}
\ No newline at end of file
-- 
2.6.4


From bf591c516d8bd8b6d0f656856ae0af95f9eac8c7 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 16:25:51 +0200
Subject: [PATCH 036/194] Step 5.3: create PartiesList component view

---
 client/imports/parties-list/parties-list.html | 11 +++++++++++
 1 file changed, 11 insertions(+)
 create mode 100644 client/imports/parties-list/parties-list.html

diff --git a/client/imports/parties-list/parties-list.html b/client/imports/parties-list/parties-list.html
new file mode 100644
index 0000000..0362c48
--- /dev/null
+++ b/client/imports/parties-list/parties-list.html
@@ -0,0 +1,11 @@
+<div>
+  <parties-form></parties-form>
+  <ul>
+    <li *ngFor="let party of parties">
+      {{party.name}}
+      <p>{{party.description}}</p>
+      <p>{{party.location}}</p>
+      <button (click)="removeParty(party)">X</button>
+    </li>
+  </ul>
+</div>
\ No newline at end of file
-- 
2.6.4


From 83a69d61bb6b9e545f0ed868bdc013da8e029018 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 16:26:07 +0200
Subject: [PATCH 037/194] Step 5.4: Clean up app.ts file

---
 client/app.ts | 19 +++----------------
 1 file changed, 3 insertions(+), 16 deletions(-)

diff --git a/client/app.ts b/client/app.ts
index 2aabb67..692678b 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -2,26 +2,13 @@ import 'reflect-metadata';
 import 'zone.js/dist/zone';
 import {Component} from 'angular2/core';
 import {bootstrap} from 'angular2-meteor-auto-bootstrap';
-import {Parties} from '../collections/parties';
-import {Mongo} from "meteor/mongo";
-import {PartiesForm} from './imports/parties-form/parties-form';
 import {ROUTER_PROVIDERS, ROUTER_DIRECTIVES, RouteConfig} from 'angular2/router';
 
 @Component({
   selector: 'app',
   templateUrl: 'client/app.html',
-  directives: [PartiesForm, ROUTER_DIRECTIVES]
+  directives: [ROUTER_DIRECTIVES]
 })
-class Socially {
-  parties: Mongo.Cursor<Object>;
+class Socially {}
 
-  constructor () {
-    this.parties = Parties.find();
-  }
-
-  removeParty(party) {
-    Parties.remove(party._id);
-  }
-}
-
-bootstrap(Socially, [ROUTER_PROVIDERS]);
\ No newline at end of file
+bootstrap(Socially, [ROUTER_PROVIDERS]);
-- 
2.6.4


From 2e30eb5a2c2ebf710d123ce1734c252f48382edd Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 16:26:15 +0200
Subject: [PATCH 038/194] Step 5.5: Remove app.html file

---
 client/app.html | 11 -----------
 1 file changed, 11 deletions(-)
 delete mode 100644 client/app.html

diff --git a/client/app.html b/client/app.html
deleted file mode 100644
index 0362c48..0000000
--- a/client/app.html
+++ /dev/null
@@ -1,11 +0,0 @@
-<div>
-  <parties-form></parties-form>
-  <ul>
-    <li *ngFor="let party of parties">
-      {{party.name}}
-      <p>{{party.description}}</p>
-      <p>{{party.location}}</p>
-      <button (click)="removeParty(party)">X</button>
-    </li>
-  </ul>
-</div>
\ No newline at end of file
-- 
2.6.4


From ab171927c1d02f9c4a6cc9d6dff70b09fdafffe8 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 16:27:03 +0200
Subject: [PATCH 039/194] Step 5.6: add PartyDetails component

---
 client/imports/party-details/party-details.ts | 7 +++++++
 1 file changed, 7 insertions(+)
 create mode 100644 client/imports/party-details/party-details.ts

diff --git a/client/imports/party-details/party-details.ts b/client/imports/party-details/party-details.ts
new file mode 100644
index 0000000..47ee440
--- /dev/null
+++ b/client/imports/party-details/party-details.ts
@@ -0,0 +1,7 @@
+import {Component} from 'angular2/core';
+
+@Component({
+  selector: 'party-details',
+  templateUrl: '/client/imports/party-details/party-details.html'
+})
+export class PartyDetails {}
\ No newline at end of file
-- 
2.6.4


From 4266641facf1f771b65ccbe4d91592b1bc7896ba Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 16:27:47 +0200
Subject: [PATCH 040/194] Step 5.7: add PartyDetails template

---
 client/imports/party-details/party-details.html | 5 +++++
 1 file changed, 5 insertions(+)
 create mode 100644 client/imports/party-details/party-details.html

diff --git a/client/imports/party-details/party-details.html b/client/imports/party-details/party-details.html
new file mode 100644
index 0000000..a3da9f4
--- /dev/null
+++ b/client/imports/party-details/party-details.html
@@ -0,0 +1,5 @@
+<header>
+  <h2>PARTY_NAME</h2>
+
+  <p>PARTY_DESCRIPTION</p>
+</header>
\ No newline at end of file
-- 
2.6.4


From a59ad64758b71763385786d0d18ca16987493420 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 17:32:05 +0200
Subject: [PATCH 041/194] Step 5.8: configure routes

---
 client/app.ts | 11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)

diff --git a/client/app.ts b/client/app.ts
index 692678b..85c1149 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -1,14 +1,21 @@
 import 'reflect-metadata';
 import 'zone.js/dist/zone';
-import {Component} from 'angular2/core';
+import {Component, provide} from 'angular2/core';
 import {bootstrap} from 'angular2-meteor-auto-bootstrap';
 import {ROUTER_PROVIDERS, ROUTER_DIRECTIVES, RouteConfig} from 'angular2/router';
+import {APP_BASE_HREF} from 'angular2/platform/common';
+import {PartiesList} from './imports/parties-list/parties-list.ts';
+import {PartyDetails} from './imports/party-details/party-details.ts';
 
 @Component({
   selector: 'app',
   templateUrl: 'client/app.html',
   directives: [ROUTER_DIRECTIVES]
 })
+@RouteConfig([
+  { path: '/', as: 'PartiesList', component: PartiesList },
+  { path: '/party/:partyId', as: 'PartyDetails', component: PartyDetails }
+])
 class Socially {}
 
-bootstrap(Socially, [ROUTER_PROVIDERS]);
+bootstrap(Socially, [ROUTER_PROVIDERS, provide(APP_BASE_HREF, { useValue: '/' })]);
\ No newline at end of file
-- 
2.6.4


From 300573ba76330050274ac3f1db0253d18d3251fd Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 17:32:27 +0200
Subject: [PATCH 042/194] Step 5.9: Add app.html that uses router

---
 client/app.html | 1 +
 1 file changed, 1 insertion(+)
 create mode 100644 client/app.html

diff --git a/client/app.html b/client/app.html
new file mode 100644
index 0000000..90c6b64
--- /dev/null
+++ b/client/app.html
@@ -0,0 +1 @@
+<router-outlet></router-outlet>
\ No newline at end of file
-- 
2.6.4


From c5045777f52b27c2f83c3beb1be6941ebde37881 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 17:34:22 +0200
Subject: [PATCH 043/194] Step 5.10: import RouterLink directive

---
 client/imports/parties-list/parties-list.ts | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/client/imports/parties-list/parties-list.ts b/client/imports/parties-list/parties-list.ts
index fee9dc9..5cac39b 100644
--- a/client/imports/parties-list/parties-list.ts
+++ b/client/imports/parties-list/parties-list.ts
@@ -2,11 +2,12 @@ import {Component} from 'angular2/core';
 import {Parties} from '../../../collections/parties';
 import {PartiesForm} from '../parties-form/parties-form';
 import {Mongo} from 'meteor/mongo';
+import {RouterLink} from 'angular2/router';
 
 @Component({
   selector: 'parties-list',
   templateUrl: '/client/imports/parties-list/parties-list.html',
-  directives: [PartiesForm]
+  directives: [PartiesForm, RouterLink]
 })
 export class PartiesList {
   parties: Mongo.Cursor<Object>;
-- 
2.6.4


From 5682b93a3de8d532e9336cee04bf5d16234ca198 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 17:34:59 +0200
Subject: [PATCH 044/194] Step 5.11: add links to the parties list

---
 client/imports/parties-list/parties-list.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/client/imports/parties-list/parties-list.html b/client/imports/parties-list/parties-list.html
index 0362c48..a149764 100644
--- a/client/imports/parties-list/parties-list.html
+++ b/client/imports/parties-list/parties-list.html
@@ -2,7 +2,7 @@
   <parties-form></parties-form>
   <ul>
     <li *ngFor="let party of parties">
-      {{party.name}}
+      <a [routerLink]="['/PartyDetails', {partyId: party._id}]">{{party.name}}</a>
       <p>{{party.description}}</p>
       <p>{{party.location}}</p>
       <button (click)="removeParty(party)">X</button>
-- 
2.6.4


From eeccdb76ad9826f3aaaf6e607f562409921e9388 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 17:35:58 +0200
Subject: [PATCH 045/194] Step 5.12: inject route parameters

---
 client/imports/party-details/party-details.ts | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

diff --git a/client/imports/party-details/party-details.ts b/client/imports/party-details/party-details.ts
index 47ee440..4bbd3e0 100644
--- a/client/imports/party-details/party-details.ts
+++ b/client/imports/party-details/party-details.ts
@@ -1,7 +1,12 @@
 import {Component} from 'angular2/core';
+import {RouteParams} from 'angular2/router';
 
 @Component({
   selector: 'party-details',
   templateUrl: '/client/imports/party-details/party-details.html'
 })
-export class PartyDetails {}
\ No newline at end of file
+export class PartyDetails {
+  constructor(params: RouteParams) {
+    var partyId = params.get('partyId');
+  }
+}
\ No newline at end of file
-- 
2.6.4


From fea099fb77a7fbc79d4f09155d369af829cad63a Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 17:36:57 +0200
Subject: [PATCH 046/194] Step 5.13: load party details

---
 client/imports/party-details/party-details.ts | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/client/imports/party-details/party-details.ts b/client/imports/party-details/party-details.ts
index 4bbd3e0..d56ec8b 100644
--- a/client/imports/party-details/party-details.ts
+++ b/client/imports/party-details/party-details.ts
@@ -1,12 +1,16 @@
 import {Component} from 'angular2/core';
 import {RouteParams} from 'angular2/router';
+import {Parties} from '../../../collections/parties.ts';
 
 @Component({
   selector: 'party-details',
   templateUrl: '/client/imports/party-details/party-details.html'
 })
 export class PartyDetails {
+  party: Object;
+
   constructor(params: RouteParams) {
     var partyId = params.get('partyId');
+    this.party = Parties.findOne(partyId);
   }
 }
\ No newline at end of file
-- 
2.6.4


From 590b7583828b6ff49656b6916bb66c9a5108e6dc Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 17:37:32 +0200
Subject: [PATCH 047/194] Step 5.14: Add the party details to the view

---
 client/imports/party-details/party-details.html | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/client/imports/party-details/party-details.html b/client/imports/party-details/party-details.html
index a3da9f4..1793e75 100644
--- a/client/imports/party-details/party-details.html
+++ b/client/imports/party-details/party-details.html
@@ -1,5 +1,7 @@
 <header>
-  <h2>PARTY_NAME</h2>
+  <h2>{{party.name}}</h2>
 
-  <p>PARTY_DESCRIPTION</p>
+  <p>{{party.description}}</p>
+
+  <p>{{party.location}}</p>
 </header>
\ No newline at end of file
-- 
2.6.4


From ce7ae927f8d5d60edde3ec995ac3dbd39fafc32e Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 17:38:47 +0200
Subject: [PATCH 048/194] Step 6.1: Add router-link dependency

---
 client/imports/party-details/party-details.ts | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/client/imports/party-details/party-details.ts b/client/imports/party-details/party-details.ts
index d56ec8b..536f2b8 100644
--- a/client/imports/party-details/party-details.ts
+++ b/client/imports/party-details/party-details.ts
@@ -1,10 +1,12 @@
 import {Component} from 'angular2/core';
 import {RouteParams} from 'angular2/router';
 import {Parties} from '../../../collections/parties.ts';
+import {RouterLink} from 'angular2/router';
 
 @Component({
   selector: 'party-details',
-  templateUrl: '/client/imports/party-details/party-details.html'
+  templateUrl: '/client/imports/party-details/party-details.html',
+  directives: [RouterLink]
 })
 export class PartyDetails {
   party: Object;
-- 
2.6.4


From c00a209e3f943a40e7730f2ec0a1df0c61b64024 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 17:39:16 +0200
Subject: [PATCH 049/194] Step 6.2: add party details form

---
 client/imports/party-details/party-details.html | 16 +++++++++++-----
 1 file changed, 11 insertions(+), 5 deletions(-)

diff --git a/client/imports/party-details/party-details.html b/client/imports/party-details/party-details.html
index 1793e75..bf3be58 100644
--- a/client/imports/party-details/party-details.html
+++ b/client/imports/party-details/party-details.html
@@ -1,7 +1,13 @@
-<header>
-  <h2>{{party.name}}</h2>
+<form>
+  <label>Name</label>
+  <input type="text">
 
-  <p>{{party.description}}</p>
+  <label>Description</label>
+  <input type="text">
 
-  <p>{{party.location}}</p>
-</header>
\ No newline at end of file
+  <label>Location</label>
+  <input type="text">
+
+  <button type="submit">Save</button>
+  <button [routerLink]="['/PartiesList']">Cancel</button>
+</form>
\ No newline at end of file
-- 
2.6.4


From fc93d04ce7197e71e84215cede916a0d4e55a920 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 17:39:45 +0200
Subject: [PATCH 050/194] Step 6.3: bind party to form inputs

---
 client/imports/party-details/party-details.html | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/client/imports/party-details/party-details.html b/client/imports/party-details/party-details.html
index bf3be58..7521f02 100644
--- a/client/imports/party-details/party-details.html
+++ b/client/imports/party-details/party-details.html
@@ -1,12 +1,12 @@
-<form>
+<form (submit)="saveParty(party)">
   <label>Name</label>
-  <input type="text">
+  <input type="text" [(ngModel)]="party.name">
 
   <label>Description</label>
-  <input type="text">
+  <input type="text" [(ngModel)]="party.description">
 
   <label>Location</label>
-  <input type="text">
+  <input type="text" [(ngModel)]="party.location">
 
   <button type="submit">Save</button>
   <button [routerLink]="['/PartiesList']">Cancel</button>
-- 
2.6.4


From 5f9a660a2a1412d327ae2c1be8d175191d0e35e3 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 17:44:44 +0200
Subject: [PATCH 051/194] Step 6.4: add submit event handler

---
 client/imports/party-details/party-details.ts | 10 ++++++++++
 1 file changed, 10 insertions(+)

diff --git a/client/imports/party-details/party-details.ts b/client/imports/party-details/party-details.ts
index 536f2b8..0d86972 100644
--- a/client/imports/party-details/party-details.ts
+++ b/client/imports/party-details/party-details.ts
@@ -15,4 +15,14 @@ export class PartyDetails {
     var partyId = params.get('partyId');
     this.party = Parties.findOne(partyId);
   }
+
+  saveParty(party) {
+    Parties.update(party._id, {
+      $set: {
+        name: party.name,
+        description: party.description,
+        location: party.location
+      }
+    });
+  }
 }
\ No newline at end of file
-- 
2.6.4


From 34fe0608726e385a2e9de56d74e7184d592145ec Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 17:45:42 +0200
Subject: [PATCH 052/194] Step 7.1: declare Party type

---
 typings/party.d.ts | 6 ++++++
 1 file changed, 6 insertions(+)
 create mode 100644 typings/party.d.ts

diff --git a/typings/party.d.ts b/typings/party.d.ts
new file mode 100644
index 0000000..82919d0
--- /dev/null
+++ b/typings/party.d.ts
@@ -0,0 +1,6 @@
+interface Party {
+  _id?: string;
+  name: string;
+  description?: string;
+  location: string;
+}
\ No newline at end of file
-- 
2.6.4


From 29ddf682d04c505d491aaa20de73e8895edc9c4a Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 17:46:41 +0200
Subject: [PATCH 053/194] Step 7.2: define parties collection with Party type

---
 collections/parties.ts | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/collections/parties.ts b/collections/parties.ts
index 22bdeab..20143a6 100644
--- a/collections/parties.ts
+++ b/collections/parties.ts
@@ -1,3 +1,3 @@
 import {Mongo} from 'meteor/mongo';
 
-export let Parties = new Mongo.Collection('parties');
\ No newline at end of file
+export let Parties = new Mongo.Collection<Party>('parties');
-- 
2.6.4


From 0a1b054be907268a47070c7b69dc878cb931b25e Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Mon, 25 Jan 2016 17:47:11 +0200
Subject: [PATCH 054/194] Step 7.3: correct parties cursor to be of the exact
 type

---
 client/imports/parties-list/parties-list.ts | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/client/imports/parties-list/parties-list.ts b/client/imports/parties-list/parties-list.ts
index 5cac39b..d387200 100644
--- a/client/imports/parties-list/parties-list.ts
+++ b/client/imports/parties-list/parties-list.ts
@@ -10,7 +10,7 @@ import {RouterLink} from 'angular2/router';
   directives: [PartiesForm, RouterLink]
 })
 export class PartiesList {
-  parties: Mongo.Cursor<Object>;
+  parties: Mongo.Cursor<Party>;
 
   constructor() {
     this.parties = Parties.find();
-- 
2.6.4


From 262c01d0c84835b7eb17c30cc63ec25ef3161df3 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 6 May 2016 21:45:27 +0300
Subject: [PATCH 055/194] Step 7.4: correct party property to be of Party type

---
 client/imports/party-details/party-details.ts | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/client/imports/party-details/party-details.ts b/client/imports/party-details/party-details.ts
index 0d86972..07b4733 100644
--- a/client/imports/party-details/party-details.ts
+++ b/client/imports/party-details/party-details.ts
@@ -9,7 +9,7 @@ import {RouterLink} from 'angular2/router';
   directives: [RouterLink]
 })
 export class PartyDetails {
-  party: Object;
+  party: Party;
 
   constructor(params: RouteParams) {
     var partyId = params.get('partyId');
-- 
2.6.4


From d610eed1a4308c04ae60a58091461cc6b254d410 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 6 May 2016 21:45:41 +0300
Subject: [PATCH 056/194] Step 8.0: Add accounts packages from atmosphere

---
 .meteor/packages |  2 +-
 .meteor/versions | 11 ++++++++++-
 2 files changed, 11 insertions(+), 2 deletions(-)

diff --git a/.meteor/packages b/.meteor/packages
index db449bd..24ed442 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -16,6 +16,6 @@ es5-shim                # ECMAScript 5 compatibility for older browsers.
 ecmascript              # Enable ECMAScript2015+ syntax in app code
 
 autopublish             # Publish all data to the clients (for prototyping)
-insecure                # Allow all DB writes from clients (for prototyping)
 angular2-compilers
 barbatus:angular2-runtime
+accounts-password
diff --git a/.meteor/versions b/.meteor/versions
index ee2f95e..423c16c 100644
--- a/.meteor/versions
+++ b/.meteor/versions
@@ -1,3 +1,5 @@
+accounts-base@1.2.7
+accounts-password@1.1.8
 allow-deny@1.0.4
 angular2-compilers@0.5.6
 angular2-html-templates@0.5.2
@@ -20,12 +22,14 @@ check@1.2.1
 ddp@1.2.5
 ddp-client@1.2.7
 ddp-common@1.2.5
+ddp-rate-limiter@1.0.4
 ddp-server@1.2.6
 deps@1.0.12
 diff-sequence@1.0.5
 ecmascript@0.4.3
 ecmascript-runtime@0.2.10
 ejson@1.0.11
+email@1.0.12
 es5-shim@4.5.10
 fastclick@1.0.11
 geojson-utils@1.0.8
@@ -34,10 +38,10 @@ html-tools@1.0.9
 htmljs@1.0.9
 http@1.1.5
 id-map@1.0.7
-insecure@1.0.7
 jquery@1.11.8
 launch-screen@1.0.11
 livedata@1.0.18
+localstorage@1.0.9
 logging@1.0.12
 meteor@1.1.14
 meteor-base@1.0.4
@@ -50,19 +54,24 @@ modules@0.6.1
 modules-runtime@0.6.3
 mongo@1.1.7
 mongo-id@1.0.4
+npm-bcrypt@0.8.5
 npm-mongo@1.4.43
 observe-sequence@1.0.11
 ordered-dict@1.0.7
 promise@0.6.7
 random@1.0.9
+rate-limit@1.0.4
 reactive-dict@1.1.7
 reactive-var@1.0.9
 reload@1.1.8
 retry@1.0.7
 routepolicy@1.0.10
+service-configuration@1.0.9
 session@1.1.5
+sha@1.0.7
 spacebars@1.0.11
 spacebars-compiler@1.0.11
+srp@1.0.8
 standard-minifier-css@1.0.6
 standard-minifier-js@1.0.6
 standard-minifiers@1.0.6
-- 
2.6.4


From 109585123ed035a71bf78e3264b9468a81cdc0f7 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 28 Jan 2016 23:13:43 +0200
Subject: [PATCH 057/194] Step 8.1: Add accounts ui package from NPM

---
 package.json | 1 +
 1 file changed, 1 insertion(+)

diff --git a/package.json b/package.json
index ed5e51f..58223ee 100644
--- a/package.json
+++ b/package.json
@@ -7,6 +7,7 @@
   "dependencies": {
     "angular2": "2.0.0-rc.1",
     "angular2-meteor": "0.5.5",
+    "angular2-meteor-accounts-ui": "0.3.5",
     "angular2-meteor-auto-bootstrap": "0.5.4",
     "meteor-node-stubs": "^0.2.3",
     "rxjs": "5.0.0-beta.6"
-- 
2.6.4


From 412ad354d1b8b52bffc79f53fbeb387d14cd6d39 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 28 Jan 2016 23:14:09 +0200
Subject: [PATCH 058/194] Step 8.2: add Accounts UI component to the
 PartiesList template

---
 client/imports/parties-list/parties-list.html | 1 +
 1 file changed, 1 insertion(+)

diff --git a/client/imports/parties-list/parties-list.html b/client/imports/parties-list/parties-list.html
index a149764..3af9e00 100644
--- a/client/imports/parties-list/parties-list.html
+++ b/client/imports/parties-list/parties-list.html
@@ -1,5 +1,6 @@
 <div>
   <parties-form></parties-form>
+  <login-buttons></login-buttons>
   <ul>
     <li *ngFor="let party of parties">
       <a [routerLink]="['/PartyDetails', {partyId: party._id}]">{{party.name}}</a>
-- 
2.6.4


From e31b2ad7fd0da2b41cf0eb906b8870aa02297d34 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 28 Jan 2016 23:16:21 +0200
Subject: [PATCH 059/194] Step 8.3: import dependencies

---
 client/imports/parties-list/parties-list.ts | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/client/imports/parties-list/parties-list.ts b/client/imports/parties-list/parties-list.ts
index d387200..baae345 100644
--- a/client/imports/parties-list/parties-list.ts
+++ b/client/imports/parties-list/parties-list.ts
@@ -3,11 +3,12 @@ import {Parties} from '../../../collections/parties';
 import {PartiesForm} from '../parties-form/parties-form';
 import {Mongo} from 'meteor/mongo';
 import {RouterLink} from 'angular2/router';
+import {LoginButtons} from 'angular2-meteor-accounts-ui/login-buttons';
 
 @Component({
   selector: 'parties-list',
   templateUrl: '/client/imports/parties-list/parties-list.html',
-  directives: [PartiesForm, RouterLink]
+  directives: [PartiesForm, RouterLink, LoginButtons]
 })
 export class PartiesList {
   parties: Mongo.Cursor<Party>;
-- 
2.6.4


From 09550d16dfa36b8c7c559bae1404b43ae054496c Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 28 Jan 2016 23:16:57 +0200
Subject: [PATCH 060/194] Step 8.5: add parties collection security

---
 collections/parties.ts | 19 +++++++++++++++++++
 1 file changed, 19 insertions(+)

diff --git a/collections/parties.ts b/collections/parties.ts
index 20143a6..167fa10 100644
--- a/collections/parties.ts
+++ b/collections/parties.ts
@@ -1,3 +1,22 @@
 import {Mongo} from 'meteor/mongo';
+import {Meteor} from 'meteor/meteor';
 
 export let Parties = new Mongo.Collection<Party>('parties');
+
+Parties.allow({
+  insert: function() {
+    let user = Meteor.user();
+    
+    return !!user;
+  },
+  update: function() {
+    let user = Meteor.user();
+    
+    return !!user;
+  },
+  remove: function() {
+    let user = Meteor.user();
+    
+    return !!user;
+  }
+});
-- 
2.6.4


From 786812e3de561c4228c17f66972026c6dc16f929 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 28 Jan 2016 23:17:48 +0200
Subject: [PATCH 061/194] Step 8.6: check access and add party owner ID

---
 client/imports/parties-form/parties-form.ts | 22 ++++++++++++++--------
 1 file changed, 14 insertions(+), 8 deletions(-)

diff --git a/client/imports/parties-form/parties-form.ts b/client/imports/parties-form/parties-form.ts
index 73fd496..68db0a8 100644
--- a/client/imports/parties-form/parties-form.ts
+++ b/client/imports/parties-form/parties-form.ts
@@ -2,6 +2,7 @@ import 'reflect-metadata';
 import {Component} from 'angular2/core';
 import {FormBuilder, ControlGroup, Validators, Control} from 'angular2/common';
 import {Parties} from '../../../collections/parties.ts';
+import {Meteor} from 'meteor/meteor';
 
 @Component({
   selector: 'parties-form',
@@ -22,15 +23,20 @@ export class PartiesForm {
 
   addParty(party) {
     if (this.partiesForm.valid) {
-      Parties.insert({
-        name: party.name,
-        description: party.description,
-        location: party.location
-      });
+      if (Meteor.userId()) {
+        Parties.insert({
+          name: party.name,
+          description: party.description,
+          location: party.location,
+          owner: Meteor.userId()
+        });
 
-      (<Control>this.partiesForm.controls['name']).updateValue('');
-      (<Control>this.partiesForm.controls['description']).updateValue('');
-      (<Control>this.partiesForm.controls['location']).updateValue('');
+        (<Control>this.partiesForm.controls['name']).updateValue('');
+        (<Control>this.partiesForm.controls['description']).updateValue('');
+        (<Control>this.partiesForm.controls['location']).updateValue('');
+      } else {
+        alert('Please log in to add a party');
+      }
     }
   }
 }
\ No newline at end of file
-- 
2.6.4


From 4a1445b51ebdcc18595ed1aeb79981bd1adb69f0 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 6 May 2016 21:48:19 +0300
Subject: [PATCH 062/194] Step 8.7: check access to change party

---
 client/imports/party-details/party-details.ts | 19 ++++++++++++-------
 1 file changed, 12 insertions(+), 7 deletions(-)

diff --git a/client/imports/party-details/party-details.ts b/client/imports/party-details/party-details.ts
index 07b4733..cf5d643 100644
--- a/client/imports/party-details/party-details.ts
+++ b/client/imports/party-details/party-details.ts
@@ -2,6 +2,7 @@ import {Component} from 'angular2/core';
 import {RouteParams} from 'angular2/router';
 import {Parties} from '../../../collections/parties.ts';
 import {RouterLink} from 'angular2/router';
+import {Meteor} from 'meteor/meteor';
 
 @Component({
   selector: 'party-details',
@@ -17,12 +18,16 @@ export class PartyDetails {
   }
 
   saveParty(party) {
-    Parties.update(party._id, {
-      $set: {
-        name: party.name,
-        description: party.description,
-        location: party.location
-      }
-    });
+    if (Meteor.userId()) {
+      Parties.update(party._id, {
+        $set: {
+          name: party.name,
+          description: party.description,
+          location: party.location
+        }
+      });
+    } else {
+      alert('Please log in to change this party');
+    }
   }
 }
\ No newline at end of file
-- 
2.6.4


From c48f4fbefff2931bb08e24cdbf44c4416c9675fd Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 6 May 2016 21:48:44 +0300
Subject: [PATCH 063/194] Step 8.8: Updated typings

---
 typings/party.d.ts | 1 +
 1 file changed, 1 insertion(+)

diff --git a/typings/party.d.ts b/typings/party.d.ts
index 82919d0..a503ec1 100644
--- a/typings/party.d.ts
+++ b/typings/party.d.ts
@@ -3,4 +3,5 @@ interface Party {
   name: string;
   description?: string;
   location: string;
+  owner?: string;
 }
\ No newline at end of file
-- 
2.6.4


From 7141357981be0c0d5a3ff81616a3088e42d44380 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 4 Feb 2016 00:05:06 +0200
Subject: [PATCH 064/194] Step 8.9: require user to access PartyDetails

---
 client/imports/party-details/party-details.ts | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/client/imports/party-details/party-details.ts b/client/imports/party-details/party-details.ts
index cf5d643..ad890fd 100644
--- a/client/imports/party-details/party-details.ts
+++ b/client/imports/party-details/party-details.ts
@@ -3,12 +3,14 @@ import {RouteParams} from 'angular2/router';
 import {Parties} from '../../../collections/parties.ts';
 import {RouterLink} from 'angular2/router';
 import {Meteor} from 'meteor/meteor';
+import {RequireUser} from 'angular2-meteor-accounts-ui';
 
 @Component({
   selector: 'party-details',
   templateUrl: '/client/imports/party-details/party-details.html',
   directives: [RouterLink]
 })
+@RequireUser()
 export class PartyDetails {
   party: Party;
 
-- 
2.6.4


From acda315eceb4021daa81f71e6f429d1ce0075f3f Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 6 May 2016 21:49:49 +0300
Subject: [PATCH 065/194] Step 9.0: Removed autopublish

---
 .meteor/packages | 1 -
 .meteor/versions | 1 -
 2 files changed, 2 deletions(-)

diff --git a/.meteor/packages b/.meteor/packages
index 24ed442..1ed54cc 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -15,7 +15,6 @@ standard-minifiers      # JS/CSS minifiers run for production mode
 es5-shim                # ECMAScript 5 compatibility for older browsers.
 ecmascript              # Enable ECMAScript2015+ syntax in app code
 
-autopublish             # Publish all data to the clients (for prototyping)
 angular2-compilers
 barbatus:angular2-runtime
 accounts-password
diff --git a/.meteor/versions b/.meteor/versions
index 423c16c..00e7b72 100644
--- a/.meteor/versions
+++ b/.meteor/versions
@@ -3,7 +3,6 @@ accounts-password@1.1.8
 allow-deny@1.0.4
 angular2-compilers@0.5.6
 angular2-html-templates@0.5.2
-autopublish@1.0.7
 autoupdate@1.2.9
 babel-compiler@6.6.4
 babel-runtime@0.1.8
-- 
2.6.4


From ad004de0158ce5b56ff85d50b25ec61581f8e55e Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 28 Jan 2016 23:22:04 +0200
Subject: [PATCH 066/194] Step 9.1: publish parties collection

---
 server/parties.ts | 6 ++++++
 1 file changed, 6 insertions(+)
 create mode 100644 server/parties.ts

diff --git a/server/parties.ts b/server/parties.ts
new file mode 100644
index 0000000..24e96e5
--- /dev/null
+++ b/server/parties.ts
@@ -0,0 +1,6 @@
+import {Parties} from '../collections/parties';
+import {Meteor} from 'meteor/meteor';
+
+Meteor.publish('parties', function() {
+  return Parties.find();
+});
\ No newline at end of file
-- 
2.6.4


From ce0a61a8e510a98d130c9e209e1db043b1ccfaa8 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 28 Jan 2016 23:22:36 +0200
Subject: [PATCH 067/194] Step 9.2: import parties publications on the server

---
 server/main.ts | 1 +
 1 file changed, 1 insertion(+)

diff --git a/server/main.ts b/server/main.ts
index cdda65d..7330ae5 100644
--- a/server/main.ts
+++ b/server/main.ts
@@ -1,4 +1,5 @@
 import {loadParties} from './load-parties.ts';
 import {Meteor} from 'meteor/meteor';
+import './parties.ts';
 
 Meteor.startup(loadParties);
\ No newline at end of file
-- 
2.6.4


From ecdbf8e2f9b90e09b4d7c8da407616684d2f96fc Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 28 Jan 2016 23:24:12 +0200
Subject: [PATCH 068/194] Step 9.3: extend PartiesList and make use of
 subscribe method

---
 client/imports/parties-list/parties-list.ts | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

diff --git a/client/imports/parties-list/parties-list.ts b/client/imports/parties-list/parties-list.ts
index baae345..3b1abf9 100644
--- a/client/imports/parties-list/parties-list.ts
+++ b/client/imports/parties-list/parties-list.ts
@@ -4,17 +4,21 @@ import {PartiesForm} from '../parties-form/parties-form';
 import {Mongo} from 'meteor/mongo';
 import {RouterLink} from 'angular2/router';
 import {LoginButtons} from 'angular2-meteor-accounts-ui/login-buttons';
+import {MeteorComponent} from 'angular2-meteor';
 
 @Component({
   selector: 'parties-list',
   templateUrl: '/client/imports/parties-list/parties-list.html',
   directives: [PartiesForm, RouterLink, LoginButtons]
 })
-export class PartiesList {
+export class PartiesList extends MeteorComponent{
   parties: Mongo.Cursor<Party>;
 
   constructor() {
-    this.parties = Parties.find();
+    super();
+    this.subscribe('parties', () => {
+      this.parties = Parties.find();
+    }, true);
   }
 
   removeParty(party) {
-- 
2.6.4


From 9a684ea861820b9f2985eed7b107d02b0592212f Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 28 Jan 2016 23:24:47 +0200
Subject: [PATCH 069/194] Step 9.4: add "Public" checkbox

---
 client/imports/parties-form/parties-form.html | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/client/imports/parties-form/parties-form.html b/client/imports/parties-form/parties-form.html
index 754b9ff..1dc86c7 100644
--- a/client/imports/parties-form/parties-form.html
+++ b/client/imports/parties-form/parties-form.html
@@ -6,4 +6,6 @@
   <label>Location</label>
   <input type="text" ngControl="location">
   <button>Add</button>
+  <label>Public</label>
+  <input type="checkbox" ngControl="public">
 </form>
\ No newline at end of file
-- 
2.6.4


From 5c484be7c0c690baf1333d405dc67d76ddd5f42f Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 28 Jan 2016 23:26:03 +0200
Subject: [PATCH 070/194] Step 9.5: update PartiesForm component

---
 client/imports/parties-form/parties-form.ts | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

diff --git a/client/imports/parties-form/parties-form.ts b/client/imports/parties-form/parties-form.ts
index 68db0a8..726794d 100644
--- a/client/imports/parties-form/parties-form.ts
+++ b/client/imports/parties-form/parties-form.ts
@@ -17,23 +17,26 @@ export class PartiesForm {
     this.partiesForm = fb.group({
       name: ['', Validators.required],
       description: [''],
-      location: ['', Validators.required]
+      location: ['', Validators.required],
+      'public': [false]
     });
   }
 
   addParty(party) {
     if (this.partiesForm.valid) {
       if (Meteor.userId()) {
-        Parties.insert({
+        Parties.insert(<Party>{
           name: party.name,
           description: party.description,
           location: party.location,
+          'public': party.public,
           owner: Meteor.userId()
         });
 
         (<Control>this.partiesForm.controls['name']).updateValue('');
         (<Control>this.partiesForm.controls['description']).updateValue('');
         (<Control>this.partiesForm.controls['location']).updateValue('');
+        (<Control>this.partiesForm.controls['public']).updateValue(false);
       } else {
         alert('Please log in to add a party');
       }
-- 
2.6.4


From 03068f567a0cddb21b228e79bf76617d8fb838c8 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 28 Jan 2016 23:26:35 +0200
Subject: [PATCH 071/194] Step 9.6: add public field to the initial parties

---
 server/load-parties.ts | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

diff --git a/server/load-parties.ts b/server/load-parties.ts
index 47c3c1c..0aef531 100644
--- a/server/load-parties.ts
+++ b/server/load-parties.ts
@@ -7,17 +7,20 @@ export function loadParties() {
       {
         'name': 'Dubstep-Free Zone',
         'description': 'Can we please just for an evening not listen to dubstep.',
-        'location': 'Palo Alto'
+        'location': 'Palo Alto',
+        'public': true
       },
       {
         'name': 'All dubstep all the time',
         'description': 'Get it on!',
-        'location': 'Palo Alto'
+        'location': 'Palo Alto',
+        'public': true
       },
       {
         'name': 'Savage lounging',
         'description': 'Leisure suit required. And only fiercest manners.',
-        'location': 'San Francisco'
+        'location': 'San Francisco',
+        'public': false
       }
     ];
 
-- 
2.6.4


From 4d171afa8fadd0f78bf23ffd7a0fa48dc4ff7542 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 28 Jan 2016 23:27:18 +0200
Subject: [PATCH 072/194] Step 9.7: limit data sent to the client

---
 server/parties.ts | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

diff --git a/server/parties.ts b/server/parties.ts
index 24e96e5..c7c7552 100644
--- a/server/parties.ts
+++ b/server/parties.ts
@@ -2,5 +2,15 @@ import {Parties} from '../collections/parties';
 import {Meteor} from 'meteor/meteor';
 
 Meteor.publish('parties', function() {
-  return Parties.find();
+  return Parties.find({
+    $or: [
+      { 'public': true },
+      {
+        $and: [
+          { owner: this.userId },
+          { owner: { $exists: true } }
+        ]
+      }
+    ]
+  });
 });
\ No newline at end of file
-- 
2.6.4


From ecdaf1cc3b6d931085d97e1711b892de08ae709f Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 28 Jan 2016 23:27:50 +0200
Subject: [PATCH 073/194] Step 9.8: add "party" publication

---
 server/parties.ts | 20 +++++++++++++++++---
 1 file changed, 17 insertions(+), 3 deletions(-)

diff --git a/server/parties.ts b/server/parties.ts
index c7c7552..8345468 100644
--- a/server/parties.ts
+++ b/server/parties.ts
@@ -1,8 +1,8 @@
 import {Parties} from '../collections/parties';
 import {Meteor} from 'meteor/meteor';
 
-Meteor.publish('parties', function() {
-  return Parties.find({
+function buildQuery(partyId?: string): Object {
+  var isAvailable = {
     $or: [
       { 'public': true },
       {
@@ -12,5 +12,19 @@ Meteor.publish('parties', function() {
         ]
       }
     ]
-  });
+  };
+
+  if (partyId) {
+    return { $and: [{ _id: partyId }, isAvailable] };
+  }
+
+  return isAvailable;
+}
+
+Meteor.publish('parties', function() {
+  return Parties.find(buildQuery.call(this));
+});
+
+Meteor.publish('party', function(partyId: string) {
+  return Parties.find(buildQuery.call(this, partyId));
 });
\ No newline at end of file
-- 
2.6.4


From cd8960e0619c71c51f51c40cd66fc212673d4dbe Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 28 Jan 2016 23:29:31 +0200
Subject: [PATCH 074/194] Step 9.9: subscribe to the "party" publication

---
 client/imports/party-details/party-details.ts | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

diff --git a/client/imports/party-details/party-details.ts b/client/imports/party-details/party-details.ts
index ad890fd..69af630 100644
--- a/client/imports/party-details/party-details.ts
+++ b/client/imports/party-details/party-details.ts
@@ -4,6 +4,7 @@ import {Parties} from '../../../collections/parties.ts';
 import {RouterLink} from 'angular2/router';
 import {Meteor} from 'meteor/meteor';
 import {RequireUser} from 'angular2-meteor-accounts-ui';
+import {MeteorComponent} from 'angular2-meteor';
 
 @Component({
   selector: 'party-details',
@@ -11,12 +12,16 @@ import {RequireUser} from 'angular2-meteor-accounts-ui';
   directives: [RouterLink]
 })
 @RequireUser()
-export class PartyDetails {
+export class PartyDetails extends MeteorComponent {
   party: Party;
 
   constructor(params: RouteParams) {
+    super();
     var partyId = params.get('partyId');
-    this.party = Parties.findOne(partyId);
+
+    this.subscribe('party', partyId, () => {
+      this.party = Parties.findOne(partyId);
+    }, true);
   }
 
   saveParty(party) {
-- 
2.6.4


From ba307c3d71ecd958e7d8544d65738651b1ae9467 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 28 Jan 2016 23:29:57 +0200
Subject: [PATCH 075/194] Step 9.10: show PartyDetails when the party is loaded

---
 client/imports/party-details/party-details.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/client/imports/party-details/party-details.html b/client/imports/party-details/party-details.html
index 7521f02..8775366 100644
--- a/client/imports/party-details/party-details.html
+++ b/client/imports/party-details/party-details.html
@@ -1,4 +1,4 @@
-<form (submit)="saveParty(party)">
+<form (submit)="saveParty(party)" *ngIf="party">
   <label>Name</label>
   <input type="text" [(ngModel)]="party.name">
 
-- 
2.6.4


From 0a956c4c6c34a5690e5703db1858b26197e99a0e Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 28 Jan 2016 23:30:38 +0200
Subject: [PATCH 076/194] Step 9.11: add search inputs

---
 client/imports/parties-list/parties-list.html | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/client/imports/parties-list/parties-list.html b/client/imports/parties-list/parties-list.html
index 3af9e00..6866114 100644
--- a/client/imports/parties-list/parties-list.html
+++ b/client/imports/parties-list/parties-list.html
@@ -1,5 +1,7 @@
 <div>
-  <parties-form></parties-form>
+  <parties-form style="float: left"></parties-form>
+  <input type="text" #searchtext placeholder="Search by Location">
+  <button type="button" (click)="search(searchtext.value)">Search</button>
   <login-buttons></login-buttons>
   <ul>
     <li *ngFor="let party of parties">
-- 
2.6.4


From 936c89d1aadb9eb9226e71d9f79f4afe432dda77 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 28 Jan 2016 23:31:13 +0200
Subject: [PATCH 077/194] Step 9.12: add search click event handler

---
 client/imports/parties-list/parties-list.ts | 8 ++++++++
 1 file changed, 8 insertions(+)

diff --git a/client/imports/parties-list/parties-list.ts b/client/imports/parties-list/parties-list.ts
index 3b1abf9..e9aba90 100644
--- a/client/imports/parties-list/parties-list.ts
+++ b/client/imports/parties-list/parties-list.ts
@@ -24,4 +24,12 @@ export class PartiesList extends MeteorComponent{
   removeParty(party) {
     Parties.remove(party._id);
   }
+
+  search(value: string) {
+    if (value) {
+      this.parties = Parties.find({ location: value });
+    } else {
+      this.parties = Parties.find();
+    }
+  }
 }
\ No newline at end of file
-- 
2.6.4


From bbbc0c58352b18c3a22d59bccb075fa43d4ce308 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 28 Jan 2016 23:32:09 +0200
Subject: [PATCH 078/194] Step 12.1: add options to the parties publication

---
 server/parties.ts | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/server/parties.ts b/server/parties.ts
index 8345468..5b9cb4f 100644
--- a/server/parties.ts
+++ b/server/parties.ts
@@ -21,8 +21,8 @@ function buildQuery(partyId?: string): Object {
   return isAvailable;
 }
 
-Meteor.publish('parties', function() {
-  return Parties.find(buildQuery.call(this));
+Meteor.publish('parties', function(options: Object) {
+  return Parties.find(buildQuery.call(this), options);
 });
 
 Meteor.publish('party', function(partyId: string) {
-- 
2.6.4


From eab1a5eda10f89ca14a8c3aacc7b1f8ecd86bcf2 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 28 Jan 2016 23:33:12 +0200
Subject: [PATCH 079/194] Step 12.2: create options and add them to the parties
 subscription

---
 client/imports/parties-list/parties-list.ts | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

diff --git a/client/imports/parties-list/parties-list.ts b/client/imports/parties-list/parties-list.ts
index e9aba90..7bca5a2 100644
--- a/client/imports/parties-list/parties-list.ts
+++ b/client/imports/parties-list/parties-list.ts
@@ -13,10 +13,20 @@ import {MeteorComponent} from 'angular2-meteor';
 })
 export class PartiesList extends MeteorComponent{
   parties: Mongo.Cursor<Party>;
+  pageSize: number = 10;
+  curPage: number = 1;
+  nameOrder: number = 1;
 
   constructor() {
     super();
-    this.subscribe('parties', () => {
+
+    let options = {
+      limit: this.pageSize,
+      skip: (this.curPage - 1) * this.pageSize,
+      sort: { name: this.nameOrder }
+    };
+
+    this.subscribe('parties', options, () => {
       this.parties = Parties.find();
     }, true);
   }
-- 
2.6.4


From 0dbc76ba6ced6a888afbd336e152a7b2e5dbaec6 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 28 Jan 2016 23:33:40 +0200
Subject: [PATCH 080/194] Step 12.3: add sorting by party name to PartiesList

---
 client/imports/parties-list/parties-list.ts | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/client/imports/parties-list/parties-list.ts b/client/imports/parties-list/parties-list.ts
index 7bca5a2..1d69d97 100644
--- a/client/imports/parties-list/parties-list.ts
+++ b/client/imports/parties-list/parties-list.ts
@@ -27,7 +27,7 @@ export class PartiesList extends MeteorComponent{
     };
 
     this.subscribe('parties', options, () => {
-      this.parties = Parties.find();
+      this.parties = Parties.find({}, {sort: { name: this.nameOrder }});
     }, true);
   }
 
-- 
2.6.4


From 5fb7df72c93c0aef7c6d92b82d7f799f0ad3f574 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 28 Jan 2016 23:34:40 +0200
Subject: [PATCH 081/194] Step 12.4: re-subscribe on current page changes
 reactively

---
 client/imports/parties-list/parties-list.ts | 20 +++++++++++---------
 1 file changed, 11 insertions(+), 9 deletions(-)

diff --git a/client/imports/parties-list/parties-list.ts b/client/imports/parties-list/parties-list.ts
index 1d69d97..9d63896 100644
--- a/client/imports/parties-list/parties-list.ts
+++ b/client/imports/parties-list/parties-list.ts
@@ -14,21 +14,23 @@ import {MeteorComponent} from 'angular2-meteor';
 export class PartiesList extends MeteorComponent{
   parties: Mongo.Cursor<Party>;
   pageSize: number = 10;
-  curPage: number = 1;
+  curPage: ReactiveVar<number> = new ReactiveVar<number>(1);
   nameOrder: number = 1;
 
   constructor() {
     super();
 
-    let options = {
-      limit: this.pageSize,
-      skip: (this.curPage - 1) * this.pageSize,
-      sort: { name: this.nameOrder }
-    };
+    this.autorun(() => {
+      let options = {
+        limit: this.pageSize,
+        skip: (this.curPage.get() - 1) * this.pageSize,
+        sort: { name: this.nameOrder }
+      };
 
-    this.subscribe('parties', options, () => {
-      this.parties = Parties.find({}, {sort: { name: this.nameOrder }});
-    }, true);
+      this.subscribe('parties', options, () => {
+        this.parties = Parties.find({}, { sort: { name: this.nameOrder } });
+      }, true);
+    });
   }
 
   removeParty(party) {
-- 
2.6.4


From 332a03c55d2950fb769788f27d6baf92d606d3d6 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Fri, 29 Jan 2016 00:16:46 +0200
Subject: [PATCH 082/194] Step 12.5: Add reactive var package

---
 .meteor/packages | 1 +
 1 file changed, 1 insertion(+)

diff --git a/.meteor/packages b/.meteor/packages
index 1ed54cc..7a065eb 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -18,3 +18,4 @@ ecmascript              # Enable ECMAScript2015+ syntax in app code
 angular2-compilers
 barbatus:angular2-runtime
 accounts-password
+reactive-var
-- 
2.6.4


From 0493dbaefecfd7a3a26f80d07697caafff13d55a Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Fri, 29 Jan 2016 00:19:23 +0200
Subject: [PATCH 083/194] Step 12.6: Import reactive var from meteor

---
 client/imports/parties-list/parties-list.ts | 1 +
 1 file changed, 1 insertion(+)

diff --git a/client/imports/parties-list/parties-list.ts b/client/imports/parties-list/parties-list.ts
index 9d63896..e6b5bde 100644
--- a/client/imports/parties-list/parties-list.ts
+++ b/client/imports/parties-list/parties-list.ts
@@ -5,6 +5,7 @@ import {Mongo} from 'meteor/mongo';
 import {RouterLink} from 'angular2/router';
 import {LoginButtons} from 'angular2-meteor-accounts-ui/login-buttons';
 import {MeteorComponent} from 'angular2-meteor';
+import {ReactiveVar} from 'meteor/reactive-var';
 
 @Component({
   selector: 'parties-list',
-- 
2.6.4


From 68fbc7956988ef883e38f41db7d1fba568898928 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 21:43:25 +0200
Subject: [PATCH 084/194] Step 12.7: Add dependency for the pagination package

---
 package.json | 1 +
 1 file changed, 1 insertion(+)

diff --git a/package.json b/package.json
index 58223ee..7bce629 100644
--- a/package.json
+++ b/package.json
@@ -8,6 +8,7 @@
     "angular2": "2.0.0-rc.1",
     "angular2-meteor": "0.5.5",
     "angular2-meteor-accounts-ui": "0.3.5",
+    "angular2-pagination": "0.1.1",
     "angular2-meteor-auto-bootstrap": "0.5.4",
     "meteor-node-stubs": "^0.2.3",
     "rxjs": "5.0.0-beta.6"
-- 
2.6.4


From 1c29eb10ada08bbaa806cef1be187664bf98c8d0 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Fri, 29 Jan 2016 00:23:44 +0200
Subject: [PATCH 085/194] Step 12.8: import and set up pagination components

---
 client/imports/parties-list/parties-list.ts | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/client/imports/parties-list/parties-list.ts b/client/imports/parties-list/parties-list.ts
index e6b5bde..ac8d806 100644
--- a/client/imports/parties-list/parties-list.ts
+++ b/client/imports/parties-list/parties-list.ts
@@ -6,11 +6,14 @@ import {RouterLink} from 'angular2/router';
 import {LoginButtons} from 'angular2-meteor-accounts-ui/login-buttons';
 import {MeteorComponent} from 'angular2-meteor';
 import {ReactiveVar} from 'meteor/reactive-var';
+import {PaginationService, PaginatePipe, PaginationControlsCmp} from 'angular2-pagination';
 
 @Component({
   selector: 'parties-list',
+  viewProviders: [PaginationService],
   templateUrl: '/client/imports/parties-list/parties-list.html',
-  directives: [PartiesForm, RouterLink, LoginButtons]
+  directives: [PartiesForm, RouterLink, LoginButtons, PaginationControlsCmp],
+  pipes: [PaginatePipe]
 })
 export class PartiesList extends MeteorComponent{
   parties: Mongo.Cursor<Party>;
-- 
2.6.4


From f94a242dc87128a99fb5c300575b0e3dcae8120b Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 22:00:29 +0200
Subject: [PATCH 086/194] Step 12.9: add pagination markup to the PartiesList's
 template

---
 client/imports/parties-list/parties-list.html | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/client/imports/parties-list/parties-list.html b/client/imports/parties-list/parties-list.html
index 6866114..79dcaa8 100644
--- a/client/imports/parties-list/parties-list.html
+++ b/client/imports/parties-list/parties-list.html
@@ -4,11 +4,12 @@
   <button type="button" (click)="search(searchtext.value)">Search</button>
   <login-buttons></login-buttons>
   <ul>
-    <li *ngFor="let party of parties">
+    <li *ngFor="let party of parties | paginate:{currentPage: 1, itemsPerPage: pageSize, totalItems: 30}">
       <a [routerLink]="['/PartyDetails', {partyId: party._id}]">{{party.name}}</a>
       <p>{{party.description}}</p>
       <p>{{party.location}}</p>
       <button (click)="removeParty(party)">X</button>
     </li>
   </ul>
+  <pagination-controls></pagination-controls>
 </div>
\ No newline at end of file
-- 
2.6.4


From 8f6e2dc4d0b49fb1d76420b638b8d212294289d1 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 22:00:55 +0200
Subject: [PATCH 087/194] Step 12.10: handle page changed event of the
 pagination controls

---
 client/imports/parties-list/parties-list.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/client/imports/parties-list/parties-list.html b/client/imports/parties-list/parties-list.html
index 79dcaa8..e7d9bc8 100644
--- a/client/imports/parties-list/parties-list.html
+++ b/client/imports/parties-list/parties-list.html
@@ -11,5 +11,5 @@
       <button (click)="removeParty(party)">X</button>
     </li>
   </ul>
-  <pagination-controls></pagination-controls>
+  <pagination-controls (change)="onPageChanged($event.page)"></pagination-controls>
 </div>
\ No newline at end of file
-- 
2.6.4


From e6a7daa6bbba785ea144f761486acf828a8e843e Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 6 May 2016 21:52:55 +0300
Subject: [PATCH 088/194] Step 12.11: add page changed event handler to the
 component

---
 client/imports/parties-list/parties-list.ts | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/client/imports/parties-list/parties-list.ts b/client/imports/parties-list/parties-list.ts
index ac8d806..51f74eb 100644
--- a/client/imports/parties-list/parties-list.ts
+++ b/client/imports/parties-list/parties-list.ts
@@ -48,4 +48,8 @@ export class PartiesList extends MeteorComponent{
       this.parties = Parties.find();
     }
   }
+
+  onPageChanged(page: number) {
+    this.curPage.set(page);
+  }
 }
\ No newline at end of file
-- 
2.6.4


From 91d8a56cefd9b4733100d2a3f81ed2a5d515846a Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 6 May 2016 21:53:44 +0300
Subject: [PATCH 089/194] Step 12.12: Add counts package and the typings file

---
 .meteor/packages            | 1 +
 .meteor/versions            | 1 +
 typings/publish-counts.d.ts | 8 ++++++++
 3 files changed, 10 insertions(+)
 create mode 100644 typings/publish-counts.d.ts

diff --git a/.meteor/packages b/.meteor/packages
index 7a065eb..be421cc 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -19,3 +19,4 @@ angular2-compilers
 barbatus:angular2-runtime
 accounts-password
 reactive-var
+tmeasday:publish-counts
diff --git a/.meteor/versions b/.meteor/versions
index 00e7b72..0eb9b2f 100644
--- a/.meteor/versions
+++ b/.meteor/versions
@@ -74,6 +74,7 @@ srp@1.0.8
 standard-minifier-css@1.0.6
 standard-minifier-js@1.0.6
 standard-minifiers@1.0.6
+tmeasday:publish-counts@0.7.3
 tracker@1.0.13
 ui@1.0.11
 underscore@1.0.8
diff --git a/typings/publish-counts.d.ts b/typings/publish-counts.d.ts
new file mode 100644
index 0000000..765120e
--- /dev/null
+++ b/typings/publish-counts.d.ts
@@ -0,0 +1,8 @@
+interface CountsObject {
+  get(publicationName : string) : number;
+  publish(context : any, publicationName : string, cursor : Mongo.Cursor, options : any) : number;
+}
+
+declare module "meteor/tmeasday:publish-counts" {
+  export let Counts : CountsObject;
+}
\ No newline at end of file
-- 
2.6.4


From 44812dd5af29a73daeb71d49af28d8bf9bb036f4 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 22:04:13 +0200
Subject: [PATCH 090/194] Step 12.13: publish total number of parties

---
 server/parties.ts | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/server/parties.ts b/server/parties.ts
index 5b9cb4f..37f9922 100644
--- a/server/parties.ts
+++ b/server/parties.ts
@@ -1,5 +1,6 @@
 import {Parties} from '../collections/parties';
 import {Meteor} from 'meteor/meteor';
+import {Counts} from 'meteor/tmeasday:publish-counts';
 
 function buildQuery(partyId?: string): Object {
   var isAvailable = {
@@ -22,6 +23,8 @@ function buildQuery(partyId?: string): Object {
 }
 
 Meteor.publish('parties', function(options: Object) {
+  Counts.publish(this, 'numberOfParties', Parties.find(buildQuery.call(this)), { noReady: true });
+
   return Parties.find(buildQuery.call(this), options);
 });
 
-- 
2.6.4


From 034cc2cf068878cf29f973091621dc2b53a6e4fc Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 22:06:01 +0200
Subject: [PATCH 091/194] Step 12.14: handle reactive updates of the parties
 total number

---
 client/imports/parties-list/parties-list.ts | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/client/imports/parties-list/parties-list.ts b/client/imports/parties-list/parties-list.ts
index 51f74eb..47e67e6 100644
--- a/client/imports/parties-list/parties-list.ts
+++ b/client/imports/parties-list/parties-list.ts
@@ -6,6 +6,7 @@ import {RouterLink} from 'angular2/router';
 import {LoginButtons} from 'angular2-meteor-accounts-ui/login-buttons';
 import {MeteorComponent} from 'angular2-meteor';
 import {ReactiveVar} from 'meteor/reactive-var';
+import {Counts} from 'meteor/tmeasday:publish-counts';
 import {PaginationService, PaginatePipe, PaginationControlsCmp} from 'angular2-pagination';
 
 @Component({
@@ -20,6 +21,7 @@ export class PartiesList extends MeteorComponent{
   pageSize: number = 10;
   curPage: ReactiveVar<number> = new ReactiveVar<number>(1);
   nameOrder: number = 1;
+  partiesSize: number = 0;
 
   constructor() {
     super();
@@ -35,6 +37,10 @@ export class PartiesList extends MeteorComponent{
         this.parties = Parties.find({}, { sort: { name: this.nameOrder } });
       }, true);
     });
+
+    this.autorun(() => {
+      this.partiesSize = Counts.get('numberOfParties');
+    }, true);
   }
 
   removeParty(party) {
-- 
2.6.4


From 1b9d5f40458ce1b7bd703869ec7f4ca5f7625cbe Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 22:06:38 +0200
Subject: [PATCH 092/194] Step 12.15: add parties total number var in the
 template

---
 client/imports/parties-list/parties-list.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/client/imports/parties-list/parties-list.html b/client/imports/parties-list/parties-list.html
index e7d9bc8..412eaef 100644
--- a/client/imports/parties-list/parties-list.html
+++ b/client/imports/parties-list/parties-list.html
@@ -4,7 +4,7 @@
   <button type="button" (click)="search(searchtext.value)">Search</button>
   <login-buttons></login-buttons>
   <ul>
-    <li *ngFor="let party of parties | paginate:{currentPage: 1, itemsPerPage: pageSize, totalItems: 30}">
+    <li *ngFor="let party of parties | paginate:{currentPage: 1, itemsPerPage: pageSize, totalItems: partiesSize}">
       <a [routerLink]="['/PartyDetails', {partyId: party._id}]">{{party.name}}</a>
       <p>{{party.description}}</p>
       <p>{{party.location}}</p>
-- 
2.6.4


From becaaaba7100614c6571f3217dafdcc4f9e86831 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 22:07:37 +0200
Subject: [PATCH 093/194] Step 12.16: add a sort order dropdown

---
 client/imports/parties-list/parties-list.html | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/client/imports/parties-list/parties-list.html b/client/imports/parties-list/parties-list.html
index 412eaef..88acea9 100644
--- a/client/imports/parties-list/parties-list.html
+++ b/client/imports/parties-list/parties-list.html
@@ -3,6 +3,13 @@
   <input type="text" #searchtext placeholder="Search by Location">
   <button type="button" (click)="search(searchtext.value)">Search</button>
   <login-buttons></login-buttons>
+  <h1>Parties:</h1>
+  <div>
+    <select #sort (change)="changeSortOrder(sort.value)">
+      <option value="1" selected>Ascending</option>
+      <option value="-1">Descending</option>
+    </select>
+  </div>
   <ul>
     <li *ngFor="let party of parties | paginate:{currentPage: 1, itemsPerPage: pageSize, totalItems: partiesSize}">
       <a [routerLink]="['/PartyDetails', {partyId: party._id}]">{{party.name}}</a>
-- 
2.6.4


From 04fe0725db5f4778c21e08e3fb1b40f4c1e1b3de Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 22:09:03 +0200
Subject: [PATCH 094/194] Step 12.17: re-subscribe reactively when sort order
 changes

---
 client/imports/parties-list/parties-list.ts | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

diff --git a/client/imports/parties-list/parties-list.ts b/client/imports/parties-list/parties-list.ts
index 47e67e6..b565044 100644
--- a/client/imports/parties-list/parties-list.ts
+++ b/client/imports/parties-list/parties-list.ts
@@ -20,7 +20,7 @@ export class PartiesList extends MeteorComponent{
   parties: Mongo.Cursor<Party>;
   pageSize: number = 10;
   curPage: ReactiveVar<number> = new ReactiveVar<number>(1);
-  nameOrder: number = 1;
+  nameOrder: ReactiveVar<number> = new ReactiveVar<number>(1);
   partiesSize: number = 0;
 
   constructor() {
@@ -30,11 +30,11 @@ export class PartiesList extends MeteorComponent{
       let options = {
         limit: this.pageSize,
         skip: (this.curPage.get() - 1) * this.pageSize,
-        sort: { name: this.nameOrder }
+        sort: { name: this.nameOrder.get() }
       };
 
       this.subscribe('parties', options, () => {
-        this.parties = Parties.find({}, { sort: { name: this.nameOrder } });
+        this.parties = Parties.find({}, { sort: { name: this.nameOrder.get() } });
       }, true);
     });
 
@@ -55,6 +55,10 @@ export class PartiesList extends MeteorComponent{
     }
   }
 
+  changeSortOrder(nameOrder: string) {
+    this.nameOrder.set(parseInt(nameOrder));
+  }
+
   onPageChanged(page: number) {
     this.curPage.set(page);
   }
-- 
2.6.4


From 377b15e3510a3d1a0d542a7cd996c1fefe8537ee Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 22:27:25 +0200
Subject: [PATCH 095/194] Step 12.18: add search by the party location using
 Mongo regex

---
 server/parties.ts | 16 +++++++++-------
 1 file changed, 9 insertions(+), 7 deletions(-)

diff --git a/server/parties.ts b/server/parties.ts
index 37f9922..9595708 100644
--- a/server/parties.ts
+++ b/server/parties.ts
@@ -2,10 +2,10 @@ import {Parties} from '../collections/parties';
 import {Meteor} from 'meteor/meteor';
 import {Counts} from 'meteor/tmeasday:publish-counts';
 
-function buildQuery(partyId?: string): Object {
+function buildQuery(partyId: string, location: string): Object {
   var isAvailable = {
     $or: [
-      { 'public': true },
+      { public: true },
       {
         $and: [
           { owner: this.userId },
@@ -19,13 +19,15 @@ function buildQuery(partyId?: string): Object {
     return { $and: [{ _id: partyId }, isAvailable] };
   }
 
-  return isAvailable;
-}
+  let searchRegEx = { '$regex': '.*' + (location || '') + '.*', '$options': 'i' };
 
-Meteor.publish('parties', function(options: Object) {
-  Counts.publish(this, 'numberOfParties', Parties.find(buildQuery.call(this)), { noReady: true });
+  return { $and: [{ location: searchRegEx }, isAvailable] };
+}
 
-  return Parties.find(buildQuery.call(this), options);
+Meteor.publish('parties', function(options: Object, location: string) {
+  Counts.publish(this, 'numberOfParties',
+    Parties.find(buildQuery.call(this, null, location)), { noReady: true });
+  return Parties.find(buildQuery.call(this, null, location), options);
 });
 
 Meteor.publish('party', function(partyId: string) {
-- 
2.6.4


From 59ec790237dacc8eccc4c0d3a8ccad22af6424ca Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 22:32:06 +0200
Subject: [PATCH 096/194] Step 12.19: add reactive search by the location on
 the client

---
 client/imports/parties-list/parties-list.ts | 10 ++++------
 1 file changed, 4 insertions(+), 6 deletions(-)

diff --git a/client/imports/parties-list/parties-list.ts b/client/imports/parties-list/parties-list.ts
index b565044..d4d4dab 100644
--- a/client/imports/parties-list/parties-list.ts
+++ b/client/imports/parties-list/parties-list.ts
@@ -22,6 +22,7 @@ export class PartiesList extends MeteorComponent{
   curPage: ReactiveVar<number> = new ReactiveVar<number>(1);
   nameOrder: ReactiveVar<number> = new ReactiveVar<number>(1);
   partiesSize: number = 0;
+  location: ReactiveVar<string> = new ReactiveVar<string>(null);
 
   constructor() {
     super();
@@ -33,7 +34,7 @@ export class PartiesList extends MeteorComponent{
         sort: { name: this.nameOrder.get() }
       };
 
-      this.subscribe('parties', options, () => {
+      this.subscribe('parties', options, this.location.get(), () => {
         this.parties = Parties.find({}, { sort: { name: this.nameOrder.get() } });
       }, true);
     });
@@ -48,11 +49,8 @@ export class PartiesList extends MeteorComponent{
   }
 
   search(value: string) {
-    if (value) {
-      this.parties = Parties.find({ location: value });
-    } else {
-      this.parties = Parties.find();
-    }
+    this.curPage.set(1);
+    this.location.set(value);
   }
 
   changeSortOrder(nameOrder: string) {
-- 
2.6.4


From a7ecf34865523591733e06ec7bb0b9896737c811 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 22:32:47 +0200
Subject: [PATCH 097/194] Step 13.1: add uninvited users publication

---
 server/users.ts | 15 +++++++++++++++
 1 file changed, 15 insertions(+)
 create mode 100644 server/users.ts

diff --git a/server/users.ts b/server/users.ts
new file mode 100644
index 0000000..4c95705
--- /dev/null
+++ b/server/users.ts
@@ -0,0 +1,15 @@
+import {Parties} from '../collections/parties.ts';
+
+Meteor.publish('uninvited', function (partyId:string) {
+  let party = Parties.findOne(partyId);
+
+  if (!party)
+    throw new Meteor.Error('404', 'No such party!');
+
+  return Meteor.users.find({
+    _id: {
+      $nin: party.invited || [],
+      $ne: this.userId
+    }
+  });
+});
\ No newline at end of file
-- 
2.6.4


From 6cc6562c85a25891f50ceb94c8023fa657bae6a3 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 22:33:15 +0200
Subject: [PATCH 098/194] Step 13.2: import users publications on the server
 start

---
 server/main.ts | 1 +
 1 file changed, 1 insertion(+)

diff --git a/server/main.ts b/server/main.ts
index 7330ae5..b2a5647 100644
--- a/server/main.ts
+++ b/server/main.ts
@@ -1,5 +1,6 @@
 import {loadParties} from './load-parties.ts';
 import {Meteor} from 'meteor/meteor';
 import './parties.ts';
+import './users.ts';
 
 Meteor.startup(loadParties);
\ No newline at end of file
-- 
2.6.4


From 9f7e68b63cda51e321c5661db4c8351e3067619e Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 22:34:11 +0200
Subject: [PATCH 099/194] Step 13.3: load uninvited users

---
 client/imports/party-details/party-details.ts | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/client/imports/party-details/party-details.ts b/client/imports/party-details/party-details.ts
index 69af630..3de9998 100644
--- a/client/imports/party-details/party-details.ts
+++ b/client/imports/party-details/party-details.ts
@@ -14,6 +14,7 @@ import {MeteorComponent} from 'angular2-meteor';
 @RequireUser()
 export class PartyDetails extends MeteorComponent {
   party: Party;
+  users: Mongo.Cursor<Object>;
 
   constructor(params: RouteParams) {
     super();
@@ -22,6 +23,10 @@ export class PartyDetails extends MeteorComponent {
     this.subscribe('party', partyId, () => {
       this.party = Parties.findOne(partyId);
     }, true);
+
+    this.subscribe('uninvited', partyId, () => {
+      this.users = Meteor.users.find({_id: {$ne: Meteor.userId()}});
+    }, true);
   }
 
   saveParty(party) {
-- 
2.6.4


From f7b9a6929f44953e237ab3726659ba8df555b6a6 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 22:34:44 +0200
Subject: [PATCH 100/194] Step 13.4: Add invited to the party definition

---
 typings/party.d.ts | 1 +
 1 file changed, 1 insertion(+)

diff --git a/typings/party.d.ts b/typings/party.d.ts
index a503ec1..c01ebea 100644
--- a/typings/party.d.ts
+++ b/typings/party.d.ts
@@ -4,4 +4,5 @@ interface Party {
   description?: string;
   location: string;
   owner?: string;
+  invited?: Array<string>;
 }
\ No newline at end of file
-- 
2.6.4


From 922e5e399d49e4e761b001dbdae5b2e1a6d960ac Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 22:35:35 +0200
Subject: [PATCH 101/194] Step 13.5: render uninvited users

---
 client/imports/party-details/party-details.html | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

diff --git a/client/imports/party-details/party-details.html b/client/imports/party-details/party-details.html
index 8775366..f0d5e92 100644
--- a/client/imports/party-details/party-details.html
+++ b/client/imports/party-details/party-details.html
@@ -10,4 +10,11 @@
 
   <button type="submit">Save</button>
   <button [routerLink]="['/PartiesList']">Cancel</button>
-</form>
\ No newline at end of file
+</form>
+
+<ul>
+  Users to invite:
+  <li *ngFor="#user of users">
+    <div>{{ user.emails[0].address }}</div>
+  </li>
+</ul>
\ No newline at end of file
-- 
2.6.4


From aa865154e48c5742a86e00d5767504f80643bb59 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 22:45:15 +0200
Subject: [PATCH 102/194] Step 13.6: add new pipe to render user name

---
 client/imports/pipes/pipes.ts | 23 +++++++++++++++++++++++
 1 file changed, 23 insertions(+)
 create mode 100644 client/imports/pipes/pipes.ts

diff --git a/client/imports/pipes/pipes.ts b/client/imports/pipes/pipes.ts
new file mode 100644
index 0000000..96353d0
--- /dev/null
+++ b/client/imports/pipes/pipes.ts
@@ -0,0 +1,23 @@
+import 'reflect-metadata';
+import {Pipe} from 'angular2/core';
+
+@Pipe({
+  name: 'displayName'
+})
+export class DisplayName {
+  transform(user: Meteor.User): string {
+    if (!user) {
+      return '';
+    }
+
+    if (user.username) {
+      return user.username;
+    }
+
+    if (user.emails) {
+      return user.emails[0].address;
+    }
+
+    return '';
+  }
+}
\ No newline at end of file
-- 
2.6.4


From faefa65df447858f03a3af638c5521d378d4a4c2 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 22:46:31 +0200
Subject: [PATCH 103/194] Step 13.7: make use of the pipe in the template

---
 client/imports/party-details/party-details.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/client/imports/party-details/party-details.html b/client/imports/party-details/party-details.html
index f0d5e92..e1809fe 100644
--- a/client/imports/party-details/party-details.html
+++ b/client/imports/party-details/party-details.html
@@ -15,6 +15,6 @@
 <ul>
   Users to invite:
   <li *ngFor="#user of users">
-    <div>{{ user.emails[0].address }}</div>
+    <div>{{ user | displayName }}</div>
   </li>
 </ul>
\ No newline at end of file
-- 
2.6.4


From 84384b3d8785a55a7f5717aa9e7594fa9734d58a Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 22:48:00 +0200
Subject: [PATCH 104/194] Step 13.8: import DisplayName pipe and add it to the
 view

---
 client/imports/party-details/party-details.ts | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/client/imports/party-details/party-details.ts b/client/imports/party-details/party-details.ts
index 3de9998..422f49f 100644
--- a/client/imports/party-details/party-details.ts
+++ b/client/imports/party-details/party-details.ts
@@ -5,11 +5,13 @@ import {RouterLink} from 'angular2/router';
 import {Meteor} from 'meteor/meteor';
 import {RequireUser} from 'angular2-meteor-accounts-ui';
 import {MeteorComponent} from 'angular2-meteor';
+import {DisplayName} from '../pipes/pipes.ts';
 
 @Component({
   selector: 'party-details',
   templateUrl: '/client/imports/party-details/party-details.html',
-  directives: [RouterLink]
+  directives: [RouterLink],
+  pipes: [DisplayName]
 })
 @RequireUser()
 export class PartyDetails extends MeteorComponent {
-- 
2.6.4


From 442fe579ece6c1ab805f29fafbd11f501b2b541a Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 22:50:45 +0200
Subject: [PATCH 105/194] Step 14.0: add a party invitation method

---
 collections/methods.ts | 46 ++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 46 insertions(+)
 create mode 100644 collections/methods.ts

diff --git a/collections/methods.ts b/collections/methods.ts
new file mode 100644
index 0000000..201f619
--- /dev/null
+++ b/collections/methods.ts
@@ -0,0 +1,46 @@
+import {Parties} from './parties.ts';
+import {Email} from 'meteor/email';
+import {check} from 'meteor/check';
+
+function getContactEmail(user:Meteor.User):string {
+  if (user.emails && user.emails.length)
+    return user.emails[0].address;
+
+  return null;
+}
+
+Meteor.methods({
+  invite: function (partyId:string, userId:string) {
+    check(partyId, String);
+    check(userId, String);
+
+    let party = Parties.findOne(partyId);
+
+    if (!party)
+      throw new Meteor.Error('404', 'No such party!');
+
+    if (party.public)
+      throw new Meteor.Error('400', 'That party is public. No need to invite people.');
+
+    if (party.owner !== this.userId)
+      throw new Meteor.Error('403', 'No permissions!');
+
+    if (userId !== party.owner && (party.invited || []).indexOf(userId) == -1) {
+      Parties.update(partyId, {$addToSet: {invited: userId}});
+
+      let from = getContactEmail(Meteor.users.findOne(this.userId));
+      let to = getContactEmail(Meteor.users.findOne(userId));
+
+      if (Meteor.isServer && to) {
+        Email.send({
+          from: 'noreply@socially.com',
+          to: to,
+          replyTo: from || undefined,
+          subject: 'PARTY: ' + party.name,
+          text: `Hi, I just invited you to ${party.name} on Socially.
+                        \n\nCome check it out: ${Meteor.absoluteUrl()}\n`
+        });
+      }
+    }
+  }
+});
\ No newline at end of file
-- 
2.6.4


From 7bcdca817770f19c7e4e44d418254d37866e2879 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 22:51:24 +0200
Subject: [PATCH 106/194] Step 14.1: Add email and check packages

---
 .meteor/packages | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/.meteor/packages b/.meteor/packages
index be421cc..c9a3be2 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -20,3 +20,5 @@ barbatus:angular2-runtime
 accounts-password
 reactive-var
 tmeasday:publish-counts
+email
+check
-- 
2.6.4


From 4b70e0e2a2b387a7587d2b3a29871a78ed9d0364 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 22:51:49 +0200
Subject: [PATCH 107/194] Step 14.2: import methods on the server side

---
 server/main.ts | 1 +
 1 file changed, 1 insertion(+)

diff --git a/server/main.ts b/server/main.ts
index b2a5647..e4eb2d1 100644
--- a/server/main.ts
+++ b/server/main.ts
@@ -2,5 +2,6 @@ import {loadParties} from './load-parties.ts';
 import {Meteor} from 'meteor/meteor';
 import './parties.ts';
 import './users.ts';
+import '../collections/methods.ts';
 
 Meteor.startup(loadParties);
\ No newline at end of file
-- 
2.6.4


From ec6af1686bc5a0df83b82fb2d3125f37a9e72b89 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 22:52:16 +0200
Subject: [PATCH 108/194] Step 14.3: import methods on the client

---
 client/app.ts | 1 +
 1 file changed, 1 insertion(+)

diff --git a/client/app.ts b/client/app.ts
index 85c1149..ff9e6e4 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -6,6 +6,7 @@ import {ROUTER_PROVIDERS, ROUTER_DIRECTIVES, RouteConfig} from 'angular2/router'
 import {APP_BASE_HREF} from 'angular2/platform/common';
 import {PartiesList} from './imports/parties-list/parties-list.ts';
 import {PartyDetails} from './imports/party-details/party-details.ts';
+import '../collections/methods.ts';
 
 @Component({
   selector: 'app',
-- 
2.6.4


From deee25c0d5f7d95b36202b3b9a74939ccf95bcfb Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 22:52:40 +0200
Subject: [PATCH 109/194] Step 14.4: add "invite" button

---
 client/imports/party-details/party-details.html | 1 +
 1 file changed, 1 insertion(+)

diff --git a/client/imports/party-details/party-details.html b/client/imports/party-details/party-details.html
index e1809fe..7fabe2e 100644
--- a/client/imports/party-details/party-details.html
+++ b/client/imports/party-details/party-details.html
@@ -16,5 +16,6 @@
   Users to invite:
   <li *ngFor="#user of users">
     <div>{{ user | displayName }}</div>
+    <button (click)="invite(user)">Invite</button>
   </li>
 </ul>
\ No newline at end of file
-- 
2.6.4


From 57731ac7249610f15b0a847e7e92a07cb53e0875 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 22:53:18 +0200
Subject: [PATCH 110/194] Step 14.5: add the click handler and call "invite"
 method

---
 client/imports/party-details/party-details.ts | 11 +++++++++++
 1 file changed, 11 insertions(+)

diff --git a/client/imports/party-details/party-details.ts b/client/imports/party-details/party-details.ts
index 422f49f..8128c00 100644
--- a/client/imports/party-details/party-details.ts
+++ b/client/imports/party-details/party-details.ts
@@ -44,4 +44,15 @@ export class PartyDetails extends MeteorComponent {
       alert('Please log in to change this party');
     }
   }
+
+  invite(user: Meteor.User) {
+    this.call('invite', this.party._id, user._id, (error) => {
+      if (error) {
+        alert(`Failed to invite due to ${error}`);
+        return;
+      }
+
+      alert('User successfully invited.');
+    });
+  }
 }
\ No newline at end of file
-- 
2.6.4


From 3683a82d2450a3cb6e29a4d6ecbc4ebf208e5f59 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 22:54:04 +0200
Subject: [PATCH 111/194] Step 14.6: get the party reactively

---
 client/imports/party-details/party-details.ts | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/client/imports/party-details/party-details.ts b/client/imports/party-details/party-details.ts
index 8128c00..18f2ddc 100644
--- a/client/imports/party-details/party-details.ts
+++ b/client/imports/party-details/party-details.ts
@@ -23,8 +23,10 @@ export class PartyDetails extends MeteorComponent {
     var partyId = params.get('partyId');
 
     this.subscribe('party', partyId, () => {
-      this.party = Parties.findOne(partyId);
-    }, true);
+      this.autorun(() => {
+        this.party = Parties.findOne(partyId);
+      },   true);
+    });
 
     this.subscribe('uninvited', partyId, () => {
       this.users = Meteor.users.find({_id: {$ne: Meteor.userId()}});
-- 
2.6.4


From 566d557af4e0c80967b2c6f046c447babeff23b6 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 22:58:30 +0200
Subject: [PATCH 112/194] Step 14.7: update the users list reactively

---
 client/imports/party-details/party-details.ts | 14 +++++++++++++-
 1 file changed, 13 insertions(+), 1 deletion(-)

diff --git a/client/imports/party-details/party-details.ts b/client/imports/party-details/party-details.ts
index 18f2ddc..86b6d5a 100644
--- a/client/imports/party-details/party-details.ts
+++ b/client/imports/party-details/party-details.ts
@@ -25,14 +25,26 @@ export class PartyDetails extends MeteorComponent {
     this.subscribe('party', partyId, () => {
       this.autorun(() => {
         this.party = Parties.findOne(partyId);
+        this.getUsers(this.party);
       },   true);
     });
 
     this.subscribe('uninvited', partyId, () => {
-      this.users = Meteor.users.find({_id: {$ne: Meteor.userId()}});
+      this.getUsers(this.party);
     }, true);
   }
 
+  getUsers(party: Party) {
+    if (party) {
+      this.users = Meteor.users.find({
+        _id: {
+          $nin: party.invited || [],
+          $ne: Meteor.userId()
+        }
+      });
+    }
+  }
+
   saveParty(party) {
     if (Meteor.userId()) {
       Parties.update(party._id, {
-- 
2.6.4


From b07158eab8d1ec866a96b7bcfcffe7941ff29613 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 22:59:21 +0200
Subject: [PATCH 113/194] Step 14.8: show private parties to the invited and
 owners only

---
 server/parties.ts | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

diff --git a/server/parties.ts b/server/parties.ts
index 9595708..2a44e5e 100644
--- a/server/parties.ts
+++ b/server/parties.ts
@@ -5,11 +5,17 @@ import {Counts} from 'meteor/tmeasday:publish-counts';
 function buildQuery(partyId: string, location: string): Object {
   var isAvailable = {
     $or: [
-      { public: true },
+      { 'public': true },
       {
         $and: [
           { owner: this.userId },
           { owner: { $exists: true } }
+        ],
+      },
+      {
+        $and: [
+          { invited: this.userId },
+          { invited: { $exists: true } }
         ]
       }
     ]
-- 
2.6.4


From cc7c56883b65d587626ea6db8d14e901822f9def Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 23:00:12 +0200
Subject: [PATCH 114/194] Step 14.9: add a "reply" method

---
 collections/methods.ts | 45 +++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 45 insertions(+)

diff --git a/collections/methods.ts b/collections/methods.ts
index 201f619..36aa708 100644
--- a/collections/methods.ts
+++ b/collections/methods.ts
@@ -42,5 +42,50 @@ Meteor.methods({
         });
       }
     }
+  },
+  reply: function(partyId: string, rsvp: string) {
+    check(partyId, String);
+    check(rsvp, String);
+
+    if (!this.userId)
+      throw new Meteor.Error('403', 'You must be logged-in to reply');
+
+    if (['yes', 'no', 'maybe'].indexOf(rsvp) === -1)
+      throw new Meteor.Error('400', 'Invalid RSVP');
+
+    let party = Parties.findOne({ _id: partyId });
+
+    if (!party)
+      throw new Meteor.Error('404', 'No such party');
+
+    if (party.owner === this.userId)
+      throw new Meteor.Error('500', 'You are the owner!');
+
+    if (!party.public && (!party.invited || party.invited.indexOf(this.userId) == -1))
+      throw new Meteor.Error('403', 'No such party'); // its private, but let's not tell this to the user
+
+    let rsvpIndex = party.rsvps ? party.rsvps.findIndex((rsvp) => rsvp.userId === this.userId) : -1;
+
+    if (rsvpIndex !== -1) {
+      // update existing rsvp entry
+      if (Meteor.isServer) {
+        // update the appropriate rsvp entry with $
+        Parties.update(
+          { _id: partyId, 'rsvps.userId': this.userId },
+          { $set: { 'rsvps.$.response': rsvp } });
+      } else {
+        // minimongo doesn't yet support $ in modifier. as a temporary
+        // workaround, make a modifier that uses an index. this is
+        // safe on the client since there's only one thread.
+        let modifier = { $set: {} };
+        modifier.$set['rsvps.' + rsvpIndex + '.response'] = rsvp;
+
+        Parties.update(partyId, modifier);
+      }
+    } else {
+      // add new rsvp entry
+      Parties.update(partyId,
+        { $push: { rsvps: { userId: this.userId, response: rsvp } } });
+    }
   }
 });
\ No newline at end of file
-- 
2.6.4


From 17a593d0eebe88123b7356c6e8e1c1bf84522683 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 23:00:50 +0200
Subject: [PATCH 115/194] Step 14.10: update the party typings

---
 typings/party.d.ts | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/typings/party.d.ts b/typings/party.d.ts
index c01ebea..4d41910 100644
--- a/typings/party.d.ts
+++ b/typings/party.d.ts
@@ -5,4 +5,10 @@ interface Party {
   location: string;
   owner?: string;
   invited?: Array<string>;
+  rsvps?: Array<RSVP>;
+}
+
+interface RSVP {
+  userId: string;
+  response: string;
 }
\ No newline at end of file
-- 
2.6.4


From 04a1251040f88024243aafd6ea5d110e7342a810 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 23:01:23 +0200
Subject: [PATCH 116/194] Step 14.11: update PartyDetails view with the three
 response buttons

---
 client/imports/party-details/party-details.html | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

diff --git a/client/imports/party-details/party-details.html b/client/imports/party-details/party-details.html
index 7fabe2e..f8b939b 100644
--- a/client/imports/party-details/party-details.html
+++ b/client/imports/party-details/party-details.html
@@ -18,4 +18,11 @@
     <div>{{ user | displayName }}</div>
     <button (click)="invite(user)">Invite</button>
   </li>
-</ul>
\ No newline at end of file
+</ul>
+
+<div>
+  <h2>Reply to the invitation</h2>
+  <input type="button" value="I'm going!" (click)="reply('yes')">
+  <input type="button" value="Maybe" (click)="reply('maybe')">
+  <input type="button" value="No" (click)="reply('no')">
+</div>
\ No newline at end of file
-- 
2.6.4


From 25dad582db4a1785e545cd2125853554e8968520 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 23:02:06 +0200
Subject: [PATCH 117/194] Step 14.12: handle reply events in the PartyDetails
 component

---
 client/imports/party-details/party-details.ts | 11 +++++++++++
 1 file changed, 11 insertions(+)

diff --git a/client/imports/party-details/party-details.ts b/client/imports/party-details/party-details.ts
index 86b6d5a..515acda 100644
--- a/client/imports/party-details/party-details.ts
+++ b/client/imports/party-details/party-details.ts
@@ -69,4 +69,15 @@ export class PartyDetails extends MeteorComponent {
       alert('User successfully invited.');
     });
   }
+
+  reply(rsvp: string) {
+    this.call('reply', this.party._id, rsvp, (error) => {
+      if (error) {
+        alert(`Failed to reply due to ${error}`);
+      }
+      else {
+        alert('You successfully replied.');
+      }
+    });
+  }
 }
\ No newline at end of file
-- 
2.6.4


From bbcdbfaf6b8602c6c891acad95fa34e80b7ad011 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 23:21:50 +0200
Subject: [PATCH 118/194] Step 14.13: add a new response counting pipe

---
 client/imports/pipes/pipes.ts | 32 ++++++++++++++++++++++++++++++++
 1 file changed, 32 insertions(+)

diff --git a/client/imports/pipes/pipes.ts b/client/imports/pipes/pipes.ts
index 96353d0..6cfaf89 100644
--- a/client/imports/pipes/pipes.ts
+++ b/client/imports/pipes/pipes.ts
@@ -1,5 +1,7 @@
 import 'reflect-metadata';
 import {Pipe} from 'angular2/core';
+import {Parties} from '../../../collections/parties.ts';
+import {MeteorComponent} from 'angular2-meteor';
 
 @Pipe({
   name: 'displayName'
@@ -20,4 +22,34 @@ export class DisplayName {
 
     return '';
   }
+}
+
+
+@Pipe({
+  name: 'rsvp',
+  pure: false
+})
+export class RsvpPipe extends MeteorComponent {
+  init: boolean = false;
+  total: number = 0;
+
+  transform(party: Party, args: any[]): number {
+    let type = args[0];
+    if (!type) {
+      return 0;
+    }
+
+    if (!this.init) {
+      this.autorun(() => {
+        party = Parties.findOne(party._id);
+        if (party) {
+          this.total = party.rsvps ?
+            party.rsvps.filter(rsvp => rsvp.response === type).length : 0;
+        }
+      }, true);
+      this.init = true;
+    }
+
+    return this.total;
+  }
 }
\ No newline at end of file
-- 
2.6.4


From 2dac1d5d66eaa6b459709877402b178bd5e931dd Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 23:34:41 +0200
Subject: [PATCH 119/194] Step 14.14: display response statistics in the list

---
 client/imports/parties-list/parties-list.html | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/client/imports/parties-list/parties-list.html b/client/imports/parties-list/parties-list.html
index 88acea9..c3eeb2d 100644
--- a/client/imports/parties-list/parties-list.html
+++ b/client/imports/parties-list/parties-list.html
@@ -16,6 +16,12 @@
       <p>{{party.description}}</p>
       <p>{{party.location}}</p>
       <button (click)="removeParty(party)">X</button>
+      <div>
+        Who is coming:
+        Yes - {{party | rsvp:'yes'}}
+        Maybe - {{party | rsvp:'maybe'}}
+        No - {{party | rsvp:'no'}}
+      </div>
     </li>
   </ul>
   <pagination-controls (change)="onPageChanged($event.page)"></pagination-controls>
-- 
2.6.4


From 843250d5a3af1aefc955f8e11dedaef0849d59c8 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 23:34:59 +0200
Subject: [PATCH 120/194] Step 14.15: import the RsvpPipe pipe

---
 client/imports/parties-list/parties-list.ts | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/client/imports/parties-list/parties-list.ts b/client/imports/parties-list/parties-list.ts
index d4d4dab..e773cd7 100644
--- a/client/imports/parties-list/parties-list.ts
+++ b/client/imports/parties-list/parties-list.ts
@@ -8,13 +8,14 @@ import {MeteorComponent} from 'angular2-meteor';
 import {ReactiveVar} from 'meteor/reactive-var';
 import {Counts} from 'meteor/tmeasday:publish-counts';
 import {PaginationService, PaginatePipe, PaginationControlsCmp} from 'angular2-pagination';
+import {RsvpPipe} from '../pipes/pipes.ts';
 
 @Component({
   selector: 'parties-list',
   viewProviders: [PaginationService],
   templateUrl: '/client/imports/parties-list/parties-list.html',
   directives: [PartiesForm, RouterLink, LoginButtons, PaginationControlsCmp],
-  pipes: [PaginatePipe]
+  pipes: [PaginatePipe, RsvpPipe]
 })
 export class PartiesList extends MeteorComponent{
   parties: Mongo.Cursor<Party>;
-- 
2.6.4


From 0698b7b29f0c75cde364d54129fd75c27f6bb72a Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Wed, 3 Feb 2016 23:58:58 +0200
Subject: [PATCH 121/194] Step 15.1: inject Meteor user and add isOwner method

---
 client/imports/parties-list/parties-list.ts | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

diff --git a/client/imports/parties-list/parties-list.ts b/client/imports/parties-list/parties-list.ts
index e773cd7..8dd0df7 100644
--- a/client/imports/parties-list/parties-list.ts
+++ b/client/imports/parties-list/parties-list.ts
@@ -3,7 +3,7 @@ import {Parties} from '../../../collections/parties';
 import {PartiesForm} from '../parties-form/parties-form';
 import {Mongo} from 'meteor/mongo';
 import {RouterLink} from 'angular2/router';
-import {LoginButtons} from 'angular2-meteor-accounts-ui/login-buttons';
+import {LoginButtons, InjectUser} from 'angular2-meteor-accounts-ui';
 import {MeteorComponent} from 'angular2-meteor';
 import {ReactiveVar} from 'meteor/reactive-var';
 import {Counts} from 'meteor/tmeasday:publish-counts';
@@ -17,6 +17,7 @@ import {RsvpPipe} from '../pipes/pipes.ts';
   directives: [PartiesForm, RouterLink, LoginButtons, PaginationControlsCmp],
   pipes: [PaginatePipe, RsvpPipe]
 })
+@InjectUser()
 export class PartiesList extends MeteorComponent{
   parties: Mongo.Cursor<Party>;
   pageSize: number = 10;
@@ -24,6 +25,7 @@ export class PartiesList extends MeteorComponent{
   nameOrder: ReactiveVar<number> = new ReactiveVar<number>(1);
   partiesSize: number = 0;
   location: ReactiveVar<string> = new ReactiveVar<string>(null);
+  user: Meteor.User;
 
   constructor() {
     super();
@@ -61,4 +63,12 @@ export class PartiesList extends MeteorComponent{
   onPageChanged(page: number) {
     this.curPage.set(page);
   }
+
+  isOwner(party: Party): boolean {
+    if (this.user) {
+      return this.user._id === party.owner;
+    }
+
+    return false;
+  }
 }
\ No newline at end of file
-- 
2.6.4


From 0f8f93f7b7f5fa50c42832b957625168f798fb9b Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 4 Feb 2016 00:00:15 +0200
Subject: [PATCH 122/194] Step 15.2: use the hidden attribute in the
 PartiesList template

---
 client/imports/parties-list/parties-list.html | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/client/imports/parties-list/parties-list.html b/client/imports/parties-list/parties-list.html
index c3eeb2d..254161c 100644
--- a/client/imports/parties-list/parties-list.html
+++ b/client/imports/parties-list/parties-list.html
@@ -1,5 +1,5 @@
 <div>
-  <parties-form style="float: left"></parties-form>
+  <parties-form [hidden]="!user" style="float: left"></parties-form>
   <input type="text" #searchtext placeholder="Search by Location">
   <button type="button" (click)="search(searchtext.value)">Search</button>
   <login-buttons></login-buttons>
@@ -15,7 +15,7 @@
       <a [routerLink]="['/PartyDetails', {partyId: party._id}]">{{party.name}}</a>
       <p>{{party.description}}</p>
       <p>{{party.location}}</p>
-      <button (click)="removeParty(party)">X</button>
+      <button [hidden]="!isOwner(party)"  (click)="removeParty(party)">X</button>
       <div>
         Who is coming:
         Yes - {{party | rsvp:'yes'}}
-- 
2.6.4


From 23e5005eb1c8aa373c872fe37729bb2224e1790a Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 4 Feb 2016 00:08:45 +0200
Subject: [PATCH 123/194] Step 15.3: add isOwner property into the PartyDetails

---
 client/imports/party-details/party-details.ts | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

diff --git a/client/imports/party-details/party-details.ts b/client/imports/party-details/party-details.ts
index 515acda..1ac102c 100644
--- a/client/imports/party-details/party-details.ts
+++ b/client/imports/party-details/party-details.ts
@@ -3,7 +3,7 @@ import {RouteParams} from 'angular2/router';
 import {Parties} from '../../../collections/parties.ts';
 import {RouterLink} from 'angular2/router';
 import {Meteor} from 'meteor/meteor';
-import {RequireUser} from 'angular2-meteor-accounts-ui';
+import {RequireUser, InjectUser} from 'angular2-meteor-accounts-ui';
 import {MeteorComponent} from 'angular2-meteor';
 import {DisplayName} from '../pipes/pipes.ts';
 
@@ -14,9 +14,11 @@ import {DisplayName} from '../pipes/pipes.ts';
   pipes: [DisplayName]
 })
 @RequireUser()
+@InjectUser()
 export class PartyDetails extends MeteorComponent {
   party: Party;
   users: Mongo.Cursor<Object>;
+  user: Meteor.User;
 
   constructor(params: RouteParams) {
     super();
@@ -80,4 +82,12 @@ export class PartyDetails extends MeteorComponent {
       }
     });
   }
+
+  get isOwner(): boolean {
+    if (this.party && this.user) {
+      return this.user._id === this.party.owner;
+    }
+
+    return false;
+  }
 }
\ No newline at end of file
-- 
2.6.4


From 0f942cda35fc701c8069ba90da1bd91aa1fc80ce Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 4 Feb 2016 00:10:07 +0200
Subject: [PATCH 124/194] Step 15.4: add disable attribute bindings

---
 client/imports/party-details/party-details.html | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/client/imports/party-details/party-details.html b/client/imports/party-details/party-details.html
index f8b939b..0d45c9f 100644
--- a/client/imports/party-details/party-details.html
+++ b/client/imports/party-details/party-details.html
@@ -1,14 +1,14 @@
 <form (submit)="saveParty(party)" *ngIf="party">
   <label>Name</label>
-  <input type="text" [(ngModel)]="party.name">
+  <input [disabled]="!isOwner" type="text" [(ngModel)]="party.name">
 
   <label>Description</label>
-  <input type="text" [(ngModel)]="party.description">
+  <input [disabled]="!isOwner" type="text" [(ngModel)]="party.description">
 
   <label>Location</label>
-  <input type="text" [(ngModel)]="party.location">
+  <input [disabled]="!isOwner" type="text" [(ngModel)]="party.location">
 
-  <button type="submit">Save</button>
+  <button [disabled]="!isOwner" type="submit">Save</button>
   <button [routerLink]="['/PartiesList']">Cancel</button>
 </form>
 
-- 
2.6.4


From 1b05a1f3827b5855632aa837358ef2f0ffe7c62b Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 4 Feb 2016 00:11:12 +0200
Subject: [PATCH 125/194] Step 15.5: add isPublic and isInvited properties

---
 client/imports/party-details/party-details.ts | 17 +++++++++++++++++
 1 file changed, 17 insertions(+)

diff --git a/client/imports/party-details/party-details.ts b/client/imports/party-details/party-details.ts
index 1ac102c..6adf7bc 100644
--- a/client/imports/party-details/party-details.ts
+++ b/client/imports/party-details/party-details.ts
@@ -90,4 +90,21 @@ export class PartyDetails extends MeteorComponent {
 
     return false;
   }
+
+  get isPublic(): boolean {
+    if (this.party) {
+      return this.party.public;
+    }
+
+    return false;
+  }
+
+  get isInvited(): boolean {
+    if (this.party && this.user) {
+      let invited = this.party.invited || [];
+      return invited.indexOf(this.user._id) !== -1;
+    }
+
+    return false;
+  }
 }
\ No newline at end of file
-- 
2.6.4


From 77f7e7eb946f1fe29361b033bbbf60783d2574f3 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 4 Feb 2016 00:32:36 +0200
Subject: [PATCH 126/194] Step 15.6: make use of the properties in the template

---
 client/imports/party-details/party-details.html | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/client/imports/party-details/party-details.html b/client/imports/party-details/party-details.html
index 0d45c9f..def1c00 100644
--- a/client/imports/party-details/party-details.html
+++ b/client/imports/party-details/party-details.html
@@ -12,7 +12,7 @@
   <button [routerLink]="['/PartiesList']">Cancel</button>
 </form>
 
-<ul>
+<ul *ngIf="isOwner || isPublic">
   Users to invite:
   <li *ngFor="#user of users">
     <div>{{ user | displayName }}</div>
@@ -20,7 +20,7 @@
   </li>
 </ul>
 
-<div>
+<div *ngIf="isInvited">
   <h2>Reply to the invitation</h2>
   <input type="button" value="I'm going!" (click)="reply('yes')">
   <input type="button" value="Maybe" (click)="reply('maybe')">
-- 
2.6.4


From 05f811fe687b4804857b7127039a815e73f0150f Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 4 Feb 2016 00:33:40 +0200
Subject: [PATCH 127/194] Step 16.1: extend party location with lat and lng
 coordinates

---
 typings/party.d.ts | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/typings/party.d.ts b/typings/party.d.ts
index 4d41910..6387af4 100644
--- a/typings/party.d.ts
+++ b/typings/party.d.ts
@@ -3,7 +3,11 @@ interface Party {
   name: string;
   description?: string;
   location: string;
-  owner?: string;
+  location: {
+    name: string;
+    lat?: number;
+    lng?: number;
+  };
   invited?: Array<string>;
   rsvps?: Array<RSVP>;
 }
-- 
2.6.4


From 1f82c99bd0e08d546a1276879ed7c8ef671e3b72 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 4 Feb 2016 00:34:28 +0200
Subject: [PATCH 128/194] Step 16.2: change initial parties accordingly

---
 server/load-parties.ts | 18 ++++++++++++------
 1 file changed, 12 insertions(+), 6 deletions(-)

diff --git a/server/load-parties.ts b/server/load-parties.ts
index 0aef531..c2a0562 100644
--- a/server/load-parties.ts
+++ b/server/load-parties.ts
@@ -7,20 +7,26 @@ export function loadParties() {
       {
         'name': 'Dubstep-Free Zone',
         'description': 'Can we please just for an evening not listen to dubstep.',
-        'location': 'Palo Alto',
-        'public': true
+        'public': true,
+        'location': {
+          name: 'Palo Alto'
+        }
       },
       {
         'name': 'All dubstep all the time',
         'description': 'Get it on!',
-        'location': 'Palo Alto',
-        'public': true
+        'public': true,
+        'location': {
+          name: 'Palo Alto'
+        }
       },
       {
         'name': 'Savage lounging',
         'description': 'Leisure suit required. And only fiercest manners.',
-        'location': 'San Francisco',
-        'public': false
+        'public': false,
+        'location': {
+          name: 'Palo Alto'
+        }
       }
     ];
 
-- 
2.6.4


From cb94bacbf45f46ba8c3117b4c0782b5f2d0ccc2f Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 4 Feb 2016 00:35:21 +0200
Subject: [PATCH 129/194] Step 16.3: change party creation component

---
 client/imports/parties-form/parties-form.ts | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/client/imports/parties-form/parties-form.ts b/client/imports/parties-form/parties-form.ts
index 726794d..3f54b47 100644
--- a/client/imports/parties-form/parties-form.ts
+++ b/client/imports/parties-form/parties-form.ts
@@ -28,7 +28,9 @@ export class PartiesForm {
         Parties.insert(<Party>{
           name: party.name,
           description: party.description,
-          location: party.location,
+          location: {
+            name: party.location
+          },
           'public': party.public,
           owner: Meteor.userId()
         });
-- 
2.6.4


From 9382b1aba914f71635146c198ab5ca60bb5db24d Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 4 Feb 2016 00:36:06 +0200
Subject: [PATCH 130/194] Step 16.4: reflect type changes in the parties search

---
 server/parties.ts | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/server/parties.ts b/server/parties.ts
index 2a44e5e..88cbd96 100644
--- a/server/parties.ts
+++ b/server/parties.ts
@@ -27,7 +27,7 @@ function buildQuery(partyId: string, location: string): Object {
 
   let searchRegEx = { '$regex': '.*' + (location || '') + '.*', '$options': 'i' };
 
-  return { $and: [{ location: searchRegEx }, isAvailable] };
+  return { $and: [{ 'location.name': searchRegEx }, isAvailable] };
 }
 
 Meteor.publish('parties', function(options: Object, location: string) {
-- 
2.6.4


From a45c81cca7a771482fd0e5fd09e37d124c45d93b Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 4 Feb 2016 00:37:52 +0200
Subject: [PATCH 131/194] Step 16.5: add angular2 google maps package

---
 package.json | 1 +
 1 file changed, 1 insertion(+)

diff --git a/package.json b/package.json
index 7bce629..6115200 100644
--- a/package.json
+++ b/package.json
@@ -7,6 +7,7 @@
   "dependencies": {
     "angular2": "2.0.0-rc.1",
     "angular2-meteor": "0.5.5",
+    "angular2-google-maps": "0.9.0",
     "angular2-meteor-accounts-ui": "0.3.5",
     "angular2-pagination": "0.1.1",
     "angular2-meteor-auto-bootstrap": "0.5.4",
-- 
2.6.4


From 52590850f8a4226ad3e2edb17f5151cedd675641 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 4 Feb 2016 00:40:08 +0200
Subject: [PATCH 132/194] Step 16.6: import and install maps providers globally

---
 client/app.ts | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/client/app.ts b/client/app.ts
index ff9e6e4..9f29530 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -7,6 +7,7 @@ import {APP_BASE_HREF} from 'angular2/platform/common';
 import {PartiesList} from './imports/parties-list/parties-list.ts';
 import {PartyDetails} from './imports/party-details/party-details.ts';
 import '../collections/methods.ts';
+import {ANGULAR2_GOOGLE_MAPS_PROVIDERS} from 'angular2-google-maps/core';
 
 @Component({
   selector: 'app',
@@ -19,4 +20,4 @@ import '../collections/methods.ts';
 ])
 class Socially {}
 
-bootstrap(Socially, [ROUTER_PROVIDERS, provide(APP_BASE_HREF, { useValue: '/' })]);
\ No newline at end of file
+bootstrap(Socially, [ROUTER_PROVIDERS, ANGULAR2_GOOGLE_MAPS_PROVIDERS, provide(APP_BASE_HREF, { useValue: '/' })]);
\ No newline at end of file
-- 
2.6.4


From 86b77d4db1e969e7a54518a390203cf0164cf519 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 4 Feb 2016 00:41:07 +0200
Subject: [PATCH 133/194] Step 16.7: add maps markup to the PartyDetails
 template

---
 client/imports/party-details/party-details.html | 16 ++++++++++++++--
 1 file changed, 14 insertions(+), 2 deletions(-)

diff --git a/client/imports/party-details/party-details.html b/client/imports/party-details/party-details.html
index def1c00..b896d47 100644
--- a/client/imports/party-details/party-details.html
+++ b/client/imports/party-details/party-details.html
@@ -6,7 +6,7 @@
   <input [disabled]="!isOwner" type="text" [(ngModel)]="party.description">
 
   <label>Location</label>
-  <input [disabled]="!isOwner" type="text" [(ngModel)]="party.location">
+  <input [disabled]="!isOwner" type="text" [(ngModel)]="party.location.name">
 
   <button [disabled]="!isOwner" type="submit">Save</button>
   <button [routerLink]="['/PartiesList']">Cancel</button>
@@ -25,4 +25,16 @@
   <input type="button" value="I'm going!" (click)="reply('yes')">
   <input type="button" value="Maybe" (click)="reply('maybe')">
   <input type="button" value="No" (click)="reply('no')">
-</div>
\ No newline at end of file
+</div>
+
+<sebm-google-map
+        [latitude]="lat || centerLat"
+        [longitude]="lng || centerLng"
+        [zoom]="8"
+        (mapClick)="mapClicked($event)">
+  <sebm-google-map-marker
+          *ngIf="lat && lng"
+          [latitude]="lat"
+          [longitude]="lng">
+  </sebm-google-map-marker>
+</sebm-google-map>
\ No newline at end of file
-- 
2.6.4


From ba1901605003c66f501d62bdabf4538b4de7e874 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 4 Feb 2016 00:42:28 +0200
Subject: [PATCH 134/194] Step 16.8: add maps logic to the PartyDetails
 component

---
 client/imports/party-details/party-details.ts | 19 ++++++++++++++++++-
 1 file changed, 18 insertions(+), 1 deletion(-)

diff --git a/client/imports/party-details/party-details.ts b/client/imports/party-details/party-details.ts
index 6adf7bc..17aec8e 100644
--- a/client/imports/party-details/party-details.ts
+++ b/client/imports/party-details/party-details.ts
@@ -6,11 +6,12 @@ import {Meteor} from 'meteor/meteor';
 import {RequireUser, InjectUser} from 'angular2-meteor-accounts-ui';
 import {MeteorComponent} from 'angular2-meteor';
 import {DisplayName} from '../pipes/pipes.ts';
+import {ANGULAR2_GOOGLE_MAPS_DIRECTIVES, MouseEvent} from 'angular2-google-maps/core';
 
 @Component({
   selector: 'party-details',
   templateUrl: '/client/imports/party-details/party-details.html',
-  directives: [RouterLink],
+  directives: [RouterLink, ANGULAR2_GOOGLE_MAPS_DIRECTIVES],
   pipes: [DisplayName]
 })
 @RequireUser()
@@ -19,6 +20,9 @@ export class PartyDetails extends MeteorComponent {
   party: Party;
   users: Mongo.Cursor<Object>;
   user: Meteor.User;
+  // Default center Palo Alto coordinates.
+  centerLat: Number = 37.4292;
+  centerLng: Number = -122.1381;
 
   constructor(params: RouteParams) {
     super();
@@ -107,4 +111,17 @@ export class PartyDetails extends MeteorComponent {
 
     return false;
   }
+
+  get lat(): Number {
+    return this.party && this.party.location.lat;
+  }
+
+  get lng(): Number {
+    return this.party && this.party.location.lng;
+  }
+
+  mapClicked($event: MouseEvent) {
+    this.party.location.lat = $event.coords.lat;
+    this.party.location.lng = $event.coords.lng;
+  }
 }
\ No newline at end of file
-- 
2.6.4


From 9b76d2e50c85272a81a70e3c3163c5ccc73a5bd7 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 4 Feb 2016 10:56:33 +0200
Subject: [PATCH 135/194] Step 16.9: create main CSS file and add maps styles
 there

---
 client/css/main.css | 4 ++++
 1 file changed, 4 insertions(+)
 create mode 100644 client/css/main.css

diff --git a/client/css/main.css b/client/css/main.css
new file mode 100644
index 0000000..a5234b3
--- /dev/null
+++ b/client/css/main.css
@@ -0,0 +1,4 @@
+.sebm-google-map-container {
+    width: 400px;
+    height: 400px;
+}
\ No newline at end of file
-- 
2.6.4


From c1317924a2e21dd0bbc3ea31809575086851aca9 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 4 Feb 2016 10:57:33 +0200
Subject: [PATCH 136/194] Step 16.10: add all parties locations on the map

---
 client/imports/parties-list/parties-list.html | 14 +++++++++++++-
 1 file changed, 13 insertions(+), 1 deletion(-)

diff --git a/client/imports/parties-list/parties-list.html b/client/imports/parties-list/parties-list.html
index 254161c..10f5014 100644
--- a/client/imports/parties-list/parties-list.html
+++ b/client/imports/parties-list/parties-list.html
@@ -14,7 +14,7 @@
     <li *ngFor="let party of parties | paginate:{currentPage: 1, itemsPerPage: pageSize, totalItems: partiesSize}">
       <a [routerLink]="['/PartyDetails', {partyId: party._id}]">{{party.name}}</a>
       <p>{{party.description}}</p>
-      <p>{{party.location}}</p>
+      <p>{{party.location.name}}</p>
       <button [hidden]="!isOwner(party)"  (click)="removeParty(party)">X</button>
       <div>
         Who is coming:
@@ -24,5 +24,17 @@
       </div>
     </li>
   </ul>
+  <sebm-google-map
+          [latitude]="0"
+          [longitude]="0"
+          [zoom]="1">
+    <div *ngFor="#party of parties">
+      <sebm-google-map-marker
+              *ngIf="party.location.lat"
+              [latitude]="party.location.lat"
+              [longitude]="party.location.lng">
+      </sebm-google-map-marker>
+    </div>
+  </sebm-google-map>
   <pagination-controls (change)="onPageChanged($event.page)"></pagination-controls>
 </div>
\ No newline at end of file
-- 
2.6.4


From 5fbde3a4a5e0ac8450109e8a5c97ec2765c76330 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 4 Feb 2016 10:58:13 +0200
Subject: [PATCH 137/194] Step 16.11: import maps dependencies in the
 PartiesList

---
 client/imports/parties-list/parties-list.ts | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/client/imports/parties-list/parties-list.ts b/client/imports/parties-list/parties-list.ts
index 8dd0df7..d774647 100644
--- a/client/imports/parties-list/parties-list.ts
+++ b/client/imports/parties-list/parties-list.ts
@@ -9,12 +9,13 @@ import {ReactiveVar} from 'meteor/reactive-var';
 import {Counts} from 'meteor/tmeasday:publish-counts';
 import {PaginationService, PaginatePipe, PaginationControlsCmp} from 'angular2-pagination';
 import {RsvpPipe} from '../pipes/pipes.ts';
+import {ANGULAR2_GOOGLE_MAPS_DIRECTIVES} from 'angular2-google-maps/core';
 
 @Component({
   selector: 'parties-list',
   viewProviders: [PaginationService],
   templateUrl: '/client/imports/parties-list/parties-list.html',
-  directives: [PartiesForm, RouterLink, LoginButtons, PaginationControlsCmp],
+  directives: [ANGULAR2_GOOGLE_MAPS_DIRECTIVES, PartiesForm, RouterLink, LoginButtons, PaginationControlsCmp],
   pipes: [PaginatePipe, RsvpPipe]
 })
 @InjectUser()
-- 
2.6.4


From 84fc3cc9c40177d39f7646811dc6b43c08a23f31 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 4 Feb 2016 12:54:59 +0200
Subject: [PATCH 138/194] Step 17.1: Add bootstrap package to the project

---
 package.json | 1 +
 1 file changed, 1 insertion(+)

diff --git a/package.json b/package.json
index 6115200..2e3e85e 100644
--- a/package.json
+++ b/package.json
@@ -11,6 +11,7 @@
     "angular2-meteor-accounts-ui": "0.3.5",
     "angular2-pagination": "0.1.1",
     "angular2-meteor-auto-bootstrap": "0.5.4",
+    "bootstrap4-webpack-package": "1.0.0",
     "meteor-node-stubs": "^0.2.3",
     "rxjs": "5.0.0-beta.6"
   }
-- 
2.6.4


From 5dc09b8f96d3ea5f8d3799b28b70d67f1fa19d9e Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 4 Feb 2016 12:55:09 +0200
Subject: [PATCH 139/194] Step 17.2: Import bootstrap into the project

---
 client/app.ts | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/client/app.ts b/client/app.ts
index 9f29530..335f1c1 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -1,5 +1,7 @@
 import 'reflect-metadata';
 import 'zone.js/dist/zone';
+import 'bootstrap4-webpack-package';
+
 import {Component, provide} from 'angular2/core';
 import {bootstrap} from 'angular2-meteor-auto-bootstrap';
 import {ROUTER_PROVIDERS, ROUTER_DIRECTIVES, RouteConfig} from 'angular2/router';
-- 
2.6.4


From cff2e120d75ef353c0603ce7191472a0be9e1603 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 6 May 2016 21:57:52 +0300
Subject: [PATCH 140/194] Step 17.3: Add bootstrap navbar

---
 client/app.html | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

diff --git a/client/app.html b/client/app.html
index 90c6b64..b3c49f0 100644
--- a/client/app.html
+++ b/client/app.html
@@ -1 +1,6 @@
-<router-outlet></router-outlet>
\ No newline at end of file
+<nav class="navbar navbar-light bg-faded">
+  <a class="navbar-brand" href="#">Socially</a>
+</nav>
+<div class="container-fluid">
+  <router-outlet></router-outlet>
+</div>
\ No newline at end of file
-- 
2.6.4


From 7ad955b1ab1c5c38293e5f12b905e93aeff3127f Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 6 May 2016 21:58:02 +0300
Subject: [PATCH 141/194] Step 17.4: Add LESS compiler

---
 .meteor/packages | 1 +
 .meteor/versions | 1 +
 2 files changed, 2 insertions(+)

diff --git a/.meteor/packages b/.meteor/packages
index c9a3be2..72dbb42 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -22,3 +22,4 @@ reactive-var
 tmeasday:publish-counts
 email
 check
+less
diff --git a/.meteor/versions b/.meteor/versions
index 0eb9b2f..b6f9ef1 100644
--- a/.meteor/versions
+++ b/.meteor/versions
@@ -39,6 +39,7 @@ http@1.1.5
 id-map@1.0.7
 jquery@1.11.8
 launch-screen@1.0.11
+less@2.6.0
 livedata@1.0.18
 localstorage@1.0.9
 logging@1.0.12
-- 
2.6.4


From e611a6b270f80a4f234c041cf2562a6194979caf Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 4 Feb 2016 13:05:49 +0200
Subject: [PATCH 142/194] Step 17.5: Remove the login buttons from the parties
 list component

---
 client/imports/parties-list/parties-list.html | 1 -
 client/imports/parties-list/parties-list.ts   | 4 ++--
 2 files changed, 2 insertions(+), 3 deletions(-)

diff --git a/client/imports/parties-list/parties-list.html b/client/imports/parties-list/parties-list.html
index 10f5014..857efa8 100644
--- a/client/imports/parties-list/parties-list.html
+++ b/client/imports/parties-list/parties-list.html
@@ -2,7 +2,6 @@
   <parties-form [hidden]="!user" style="float: left"></parties-form>
   <input type="text" #searchtext placeholder="Search by Location">
   <button type="button" (click)="search(searchtext.value)">Search</button>
-  <login-buttons></login-buttons>
   <h1>Parties:</h1>
   <div>
     <select #sort (change)="changeSortOrder(sort.value)">
diff --git a/client/imports/parties-list/parties-list.ts b/client/imports/parties-list/parties-list.ts
index d774647..a4f8194 100644
--- a/client/imports/parties-list/parties-list.ts
+++ b/client/imports/parties-list/parties-list.ts
@@ -3,7 +3,7 @@ import {Parties} from '../../../collections/parties';
 import {PartiesForm} from '../parties-form/parties-form';
 import {Mongo} from 'meteor/mongo';
 import {RouterLink} from 'angular2/router';
-import {LoginButtons, InjectUser} from 'angular2-meteor-accounts-ui';
+import {InjectUser} from 'angular2-meteor-accounts-ui';
 import {MeteorComponent} from 'angular2-meteor';
 import {ReactiveVar} from 'meteor/reactive-var';
 import {Counts} from 'meteor/tmeasday:publish-counts';
@@ -15,7 +15,7 @@ import {ANGULAR2_GOOGLE_MAPS_DIRECTIVES} from 'angular2-google-maps/core';
   selector: 'parties-list',
   viewProviders: [PaginationService],
   templateUrl: '/client/imports/parties-list/parties-list.html',
-  directives: [ANGULAR2_GOOGLE_MAPS_DIRECTIVES, PartiesForm, RouterLink, LoginButtons, PaginationControlsCmp],
+  directives: [ANGULAR2_GOOGLE_MAPS_DIRECTIVES, PartiesForm, RouterLink, PaginationControlsCmp],
   pipes: [PaginatePipe, RsvpPipe]
 })
 @InjectUser()
-- 
2.6.4


From 8d3a991677d9ee737756fd6d155dcaa6a132d474 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 4 Feb 2016 13:06:13 +0200
Subject: [PATCH 143/194] Step 17.6: Add the login buttons to the app component

---
 client/app.html | 1 +
 1 file changed, 1 insertion(+)

diff --git a/client/app.html b/client/app.html
index b3c49f0..dffc2ea 100644
--- a/client/app.html
+++ b/client/app.html
@@ -1,5 +1,6 @@
 <nav class="navbar navbar-light bg-faded">
   <a class="navbar-brand" href="#">Socially</a>
+  <login-buttons class="pull-right"></login-buttons>
 </nav>
 <div class="container-fluid">
   <router-outlet></router-outlet>
-- 
2.6.4


From ec33102a536fc3aa530bb61b5b88a143196cf3fe Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 4 Feb 2016 13:06:25 +0200
Subject: [PATCH 144/194] Step 17.7: Import LoginButtons

---
 client/app.ts | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/client/app.ts b/client/app.ts
index 335f1c1..e05d9ec 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -10,11 +10,12 @@ import {PartiesList} from './imports/parties-list/parties-list.ts';
 import {PartyDetails} from './imports/party-details/party-details.ts';
 import '../collections/methods.ts';
 import {ANGULAR2_GOOGLE_MAPS_PROVIDERS} from 'angular2-google-maps/core';
+import {LoginButtons} from 'angular2-meteor-accounts-ui';
 
 @Component({
   selector: 'app',
   templateUrl: 'client/app.html',
-  directives: [ROUTER_DIRECTIVES]
+  directives: [ROUTER_DIRECTIVES, LoginButtons]
 })
 @RouteConfig([
   { path: '/', as: 'PartiesList', component: PartiesList },
-- 
2.6.4


From fd9fac21be067b51c3ed5f6509d6cb56fd2d3539 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 4 Feb 2016 13:07:00 +0200
Subject: [PATCH 145/194] Step 17.8: Add fonts and font awesome

---
 client/index.html | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/client/index.html b/client/index.html
index 2662e56..8a56f1a 100644
--- a/client/index.html
+++ b/client/index.html
@@ -1,3 +1,8 @@
+<head>
+  <meta name="viewport" content="width=device-width, initial-scale=1">
+  <link href='http://fonts.googleapis.com/css?family=Muli:400,300' rel='stylesheet' type='text/css'>
+  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
+</head>
 <body>
   <app></app>
 </body>
\ No newline at end of file
-- 
2.6.4


From 387c097d4613848807913050f6a3b47dd44ea175 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 4 Feb 2016 14:24:13 +0200
Subject: [PATCH 146/194] Step 17.9: Update the add new party form layout

---
 client/imports/parties-form/parties-form.html | 30 ++++++++++++++++++---------
 1 file changed, 20 insertions(+), 10 deletions(-)

diff --git a/client/imports/parties-form/parties-form.html b/client/imports/parties-form/parties-form.html
index 1dc86c7..3d07605 100644
--- a/client/imports/parties-form/parties-form.html
+++ b/client/imports/parties-form/parties-form.html
@@ -1,11 +1,21 @@
-<form [ngFormModel]="partiesForm" #f="ngForm" (submit)="addParty(f.value)">
-  <label>Name</label>
-  <input type="text" ngControl="name">
-  <label>Description</label>
-  <input type="text" ngControl="description">
-  <label>Location</label>
-  <input type="text" ngControl="location">
-  <button>Add</button>
-  <label>Public</label>
-  <input type="checkbox" ngControl="public">
+<form [ngFormModel]="partiesForm" #f="ngForm" (submit)="addParty(f.value)" class="form-inline">
+  <fieldset class="form-group">
+    <label for="partyName">Party name</label>
+    <input id="partyName" class="form-control" type="text" ngControl="name" placeholder="Party name" />
+
+    <label for="description">Description</label>
+    <input id="description" class="form-control" ype="text" ngControl="description" placeholder="Description">
+
+    <label for="location_name">Location</label>
+    <input id="location_name" class="form-control" type="text" ngControl="location" placeholder="Location name">
+
+    <div class="checkbox">
+      <label>
+        <input type="checkbox" ngControl="public">
+        Public
+      </label>
+    </div>
+
+    <button type="submit" class="btn btn-primary">Add Party!</button>
+  </fieldset>
 </form>
\ No newline at end of file
-- 
2.6.4


From d35d8f39627dd78ae15a71a54f0ed8b2d3556e0c Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 4 Feb 2016 14:24:29 +0200
Subject: [PATCH 147/194] Step 17.10: Update parties list layout

---
 client/imports/parties-list/parties-list.html | 129 +++++++++++++++++++-------
 1 file changed, 95 insertions(+), 34 deletions(-)

diff --git a/client/imports/parties-list/parties-list.html b/client/imports/parties-list/parties-list.html
index 857efa8..f375125 100644
--- a/client/imports/parties-list/parties-list.html
+++ b/client/imports/parties-list/parties-list.html
@@ -1,39 +1,100 @@
-<div>
-  <parties-form [hidden]="!user" style="float: left"></parties-form>
-  <input type="text" #searchtext placeholder="Search by Location">
-  <button type="button" (click)="search(searchtext.value)">Search</button>
-  <h1>Parties:</h1>
-  <div>
-    <select #sort (change)="changeSortOrder(sort.value)">
+<div class="row">
+  <div class="col-md-12">
+    <div class="jumbotron">
+      <h3>Create a new party!</h3>
+      <parties-form [hidden]="!user"></parties-form>
+      <div [hidden]="user">You need to login to create new parties!</div>
+    </div>
+  </div>
+</div>
+<div class="row ma-filters">
+  <div class="col-md-6">
+    <h3>All Parties:</h3>
+    <form class="form-inline">
+      <input type="text" class="form-control" #searchtext placeholder="Search by Location">
+      <button type="button" class="btn btn-primary" (click)="search(searchtext.value)">Search</button>
+      Sort by name: <select class="form-control" #sort (change)="changeSortOrder(sort.value)">
       <option value="1" selected>Ascending</option>
       <option value="-1">Descending</option>
     </select>
+    </form>
+  </div>
+</div>
+<div class="row">
+  <div class="col-md-6">
+    <ul class="list-group">
+      <li class="list-group-item">
+        <pagination-controls (change)="onPageChanged($event.page)"></pagination-controls>
+      </li>
+      <li *ngFor="let party of parties | paginate:{currentPage: 1, itemsPerPage: pageSize, totalItems: partiesSize}"
+          class="list-group-item ma-party-item">
+        <div class="row">
+          <div class="col-sm-8">
+            <h2 class="ma-party-name">
+              <a [routerLink]="['/PartyDetails', {partyId: party._id}]">{{party.name}}</a>
+            </h2>
+            @ {{party.location.name}}
+            <p class="ma-party-description">
+              {{party.description}}
+            </p>
+          </div>
+          <div class="col-sm-4">
+            <button class="btn btn-danger pull-right" [hidden]="!isOwner(party)" (click)="removeParty(party)"><i
+                    class="fa fa-times"></i></button>
+          </div>
+        </div>
+        <div class="row ma-party-item-bottom">
+          <div class="col-sm-4">
+            <div class="ma-rsvp-sum">
+              <div class="ma-rsvp-amount">
+                <div class="ma-amount">
+                  {{party | rsvp:'yes'}}
+                </div>
+                <div class="ma-rsvp-title">
+                  YES
+                </div>
+              </div>
+              <div class="ma-rsvp-amount">
+                <div class="ma-amount">
+                  {{party | rsvp:'maybe'}}
+                </div>
+                <div class="ma-rsvp-title">
+                  MAYBE
+                </div>
+              </div>
+              <div class="ma-rsvp-amount">
+                <div class="ma-amount">
+                  {{party | rsvp:'no'}}
+                </div>
+                <div class="ma-rsvp-title">
+                  NO
+                </div>
+              </div>
+            </div>
+          </div>
+        </div>
+      </li>
+      <li class="list-group-item">
+        <pagination-controls (change)="onPageChanged($event.page)"></pagination-controls>
+      </li>
+    </ul>
+  </div>
+  <div class="col-md-6">
+    <ul class="list-group">
+      <li class="list-group-item">
+        <sebm-google-map
+                [latitude]="0"
+                [longitude]="0"
+                [zoom]="1">
+          <div *ngFor="#party of parties">
+            <sebm-google-map-marker
+                    *ngIf="party.location.lat"
+                    [latitude]="party.location.lat"
+                    [longitude]="party.location.lng">
+            </sebm-google-map-marker>
+          </div>
+        </sebm-google-map>
+      </li>
+    </ul>
   </div>
-  <ul>
-    <li *ngFor="let party of parties | paginate:{currentPage: 1, itemsPerPage: pageSize, totalItems: partiesSize}">
-      <a [routerLink]="['/PartyDetails', {partyId: party._id}]">{{party.name}}</a>
-      <p>{{party.description}}</p>
-      <p>{{party.location.name}}</p>
-      <button [hidden]="!isOwner(party)"  (click)="removeParty(party)">X</button>
-      <div>
-        Who is coming:
-        Yes - {{party | rsvp:'yes'}}
-        Maybe - {{party | rsvp:'maybe'}}
-        No - {{party | rsvp:'no'}}
-      </div>
-    </li>
-  </ul>
-  <sebm-google-map
-          [latitude]="0"
-          [longitude]="0"
-          [zoom]="1">
-    <div *ngFor="#party of parties">
-      <sebm-google-map-marker
-              *ngIf="party.location.lat"
-              [latitude]="party.location.lat"
-              [longitude]="party.location.lng">
-      </sebm-google-map-marker>
-    </div>
-  </sebm-google-map>
-  <pagination-controls (change)="onPageChanged($event.page)"></pagination-controls>
 </div>
\ No newline at end of file
-- 
2.6.4


From c6c51e19ccfb4c3194a366323a5a23f469a28cf4 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Thu, 4 Feb 2016 14:25:08 +0200
Subject: [PATCH 148/194] Step 17.11: Use LESS and add some style

---
 client/css/main.css                                |   4 -
 .../imports/parties-list/parties-list.import.less  | 125 +++++++++++++++++++++
 client/style/main.less                             |  41 +++++++
 3 files changed, 166 insertions(+), 4 deletions(-)
 delete mode 100644 client/css/main.css
 create mode 100644 client/imports/parties-list/parties-list.import.less
 create mode 100644 client/style/main.less

diff --git a/client/css/main.css b/client/css/main.css
deleted file mode 100644
index a5234b3..0000000
--- a/client/css/main.css
+++ /dev/null
@@ -1,4 +0,0 @@
-.sebm-google-map-container {
-    width: 400px;
-    height: 400px;
-}
\ No newline at end of file
diff --git a/client/imports/parties-list/parties-list.import.less b/client/imports/parties-list/parties-list.import.less
new file mode 100644
index 0000000..f9b7bbc
--- /dev/null
+++ b/client/imports/parties-list/parties-list.import.less
@@ -0,0 +1,125 @@
+.ma-add-button-container {
+  button.btn {
+    background: @color3;
+    float: right;
+    margin-right: 5px;
+    outline: none;
+    i {
+      color: @color5;
+    }
+  }
+}
+
+.ma-parties-col {
+  padding-top: 20px;
+}
+
+.ma-filters {
+  margin-bottom: 10px;
+}
+
+.ma-party-item {
+  .ma-party-name {
+    margin-bottom: 20px;
+    a {
+      color: @color6;
+      text-decoration: none !important;
+      font-weight: 400;
+    }
+  }
+  .ma-party-description {
+    color: @color6;
+    font-weight: 300;
+    padding-left: 18px;
+    font-size: 14px;
+  }
+
+  .ma-remove {
+    color: lighten(@color7, 20%);
+    position: absolute;
+    right: 20px;
+    top: 20px;
+    &:hover {
+      color: @color7;
+    }
+  }
+
+  .ma-party-item-bottom {
+    padding-top: 10px;
+    .ma-posted-by-col {
+      .ma-posted-by {
+        color: darken(@color4, 30%);
+        font-size: 12px;
+      }
+      .ma-everyone-invited {
+        @media (max-width: 400px) {
+          display: block;
+          i {
+            margin-left: 0px !important;
+          }
+        }
+        font-size: 12px;
+        color: darken(@color4, 10%);
+        i {
+          color: darken(@color4, 10%);
+          margin-left: 5px;
+        }
+      }
+    }
+
+    .ma-rsvp-buttons {
+      input.btn {
+        color: darken(@color3, 20%);
+        background: transparent !important;
+        outline: none;
+        padding-left: 0;
+        &:active {
+          box-shadow: none;
+        }
+        &:hover {
+          color: darken(@color3, 30%);
+        }
+        &.btn-primary {
+          color: lighten(@color3, 10%);
+          border: 0;
+          background: transparent !important;
+        }
+      }
+    }
+
+    .ma-rsvp-sum {
+      width: 160px;
+      @media (min-width: 400px) {
+        float: right;
+      }
+      @media (max-width: 400px) {
+        margin: 0 auto;
+      }
+    }
+    .ma-rsvp-amount {
+      display: inline-block;
+      text-align: center;
+      width: 50px;
+      .ma-amount {
+        font-weight: bold;
+        font-size: 20px;
+      }
+      .ma-rsvp-title {
+        font-size: 11px;
+        color: #aaa;
+        text-transform: uppercase;
+      }
+    }
+  }
+}
+
+.ma-angular-map-col {
+  .angular-google-map-container, .angular-google-map {
+    height: 100%;
+    width: 100%;
+  }
+}
+
+.search-form {
+  margin-bottom: 1em;
+}
\ No newline at end of file
diff --git a/client/style/main.less b/client/style/main.less
new file mode 100644
index 0000000..be3061e
--- /dev/null
+++ b/client/style/main.less
@@ -0,0 +1,41 @@
+@color1 : #2F2933;
+@color2 : #01A2A6;
+@color3 : #29D9C2;
+@color4 : #BDF271;
+@color5 : #FFFFA6;
+@color6 : #2F2933;
+@color7 : #FF6F69;
+
+html, body {
+    height: 100%;
+}
+
+body {
+    background-color: #f8f8f8;
+    font-family: 'Muli', sans-serif;
+}
+
+.sebm-google-map-container {
+    width: 450px;
+    height: 450px;
+}
+
+.navbar {
+    background-color: #ffffff;
+    border-bottom: #eee 1px solid;
+    color: @color3;
+    font-family: 'Muli', sans-serif;
+    a {
+        color: @color3;
+        text-decoration: none !important;
+    }
+
+    .navbar-right-container {
+        position: absolute;
+        top: 17px;
+        right: 17px;
+    }
+}
+
+@import "../imports/parties-list/parties-list.import.less";
+@import "../imports/party-details/party-details.import.less";
-- 
2.6.4


From 667efac017aacefc47bd300b46768aca915eb0ed Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Fri, 5 Feb 2016 16:16:26 +0200
Subject: [PATCH 149/194] Step 17.12: Add style file for the party details page

---
 .../party-details/party-details.import.less        | 32 ++++++++++++++++++++++
 1 file changed, 32 insertions(+)
 create mode 100644 client/imports/party-details/party-details.import.less

diff --git a/client/imports/party-details/party-details.import.less b/client/imports/party-details/party-details.import.less
new file mode 100644
index 0000000..82dcfc3
--- /dev/null
+++ b/client/imports/party-details/party-details.import.less
@@ -0,0 +1,32 @@
+.ma-party-details-container {
+  padding: 20px;
+
+  .angular-google-map-container {
+    width: 100%;
+    height: 100%;
+  }
+
+  .angular-google-map {
+    width: 100%;
+    height: 400px;
+  }
+
+  .ma-map-title {
+    font-size: 16px;
+    font-weight: bolder;
+  }
+
+  .ma-invite-list {
+    margin-top: 20px;
+    margin-bottom: 20px;
+
+    h3 {
+      font-size: 16px;
+      font-weight: bolder;
+    }
+
+    ul {
+      padding: 0;
+    }
+  }
+}
\ No newline at end of file
-- 
2.6.4


From 6e9620b894dc560cb523fd5bbb760b7c80c5af75 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Fri, 5 Feb 2016 16:16:43 +0200
Subject: [PATCH 150/194] Step 17.13: Update the layout of the party details
 page

---
 client/imports/party-details/party-details.html | 90 +++++++++++++++----------
 1 file changed, 55 insertions(+), 35 deletions(-)

diff --git a/client/imports/party-details/party-details.html b/client/imports/party-details/party-details.html
index b896d47..a484a5b 100644
--- a/client/imports/party-details/party-details.html
+++ b/client/imports/party-details/party-details.html
@@ -1,40 +1,60 @@
-<form (submit)="saveParty(party)" *ngIf="party">
-  <label>Name</label>
-  <input [disabled]="!isOwner" type="text" [(ngModel)]="party.name">
+<div class="row ma-party-details-container">
+  <div class="col-sm-6 col-sm-offset-3">
 
-  <label>Description</label>
-  <input [disabled]="!isOwner" type="text" [(ngModel)]="party.description">
+    <legend>View and Edit Your Party Details:</legend>
+    <form class="form-horizontal" (submit)="saveParty(party)" *ngIf="party">
+      <div class="form-group">
+        <label>Party Name</label>
+        <input [disabled]="!isOwner" type="text" [(ngModel)]="party.name" class="form-control">
+      </div>
+      <div class="form-group">
+        <label>Description</label>
+        <input [disabled]="!isOwner" type="text" [(ngModel)]="party.description" class="form-control">
+      </div>
+      <div class="form-group">
+        <label>Location name</label>
+        <input [disabled]="!isOwner" type="text" [(ngModel)]="party.location.name" class="form-control">
+      </div>
+      <div class="form-group">
+        <button [disabled]="!isOwner" type="submit" class="btn btn-primary">Save</button>
+        <button [routerLink]="['/PartiesList']" class="btn">Back</button>
+      </div>
+    </form>
 
-  <label>Location</label>
-  <input [disabled]="!isOwner" type="text" [(ngModel)]="party.location.name">
+    <div class="ma-invite-list" ng-show="partyDetails.canInvite()">
+      <h3>
+        Users to invite:
+      </h3>
+      <ul>
+        <li *ngFor="#user of users">
+          <div>{{ user | displayName }}</div>
+          <button (click)="invite(user)" class="btn btn-primary btn-sm">Invite</button>
+        </li>
+      </ul>
+      <div *ngIf="isInvited">
+        <h2>Reply to the invitation</h2>
+        <input type="button" class="btn btn-primary" value="I'm going!" (click)="reply('yes')">
+        <input type="button" class="btn btn-warning" value="Maybe" (click)="reply('maybe')">
+        <input type="button" class="btn btn-danger" value="No" (click)="reply('no')">
+      </div>
+    </div>
 
-  <button [disabled]="!isOwner" type="submit">Save</button>
-  <button [routerLink]="['/PartiesList']">Cancel</button>
-</form>
+    <h3 class="ma-map-title">
+      Click the map to set the party location
+    </h3>
 
-<ul *ngIf="isOwner || isPublic">
-  Users to invite:
-  <li *ngFor="#user of users">
-    <div>{{ user | displayName }}</div>
-    <button (click)="invite(user)">Invite</button>
-  </li>
-</ul>
-
-<div *ngIf="isInvited">
-  <h2>Reply to the invitation</h2>
-  <input type="button" value="I'm going!" (click)="reply('yes')">
-  <input type="button" value="Maybe" (click)="reply('maybe')">
-  <input type="button" value="No" (click)="reply('no')">
+    <div class="angular-google-map-container">
+      <sebm-google-map
+              [latitude]="lat || centerLat"
+              [longitude]="lng || centerLng"
+              [zoom]="8"
+              (mapClick)="mapClicked($event)">
+        <sebm-google-map-marker
+                *ngIf="lat && lng"
+                [latitude]="lat"
+                [longitude]="lng">
+        </sebm-google-map-marker>
+      </sebm-google-map>
+    </div>
+  </div>
 </div>
-
-<sebm-google-map
-        [latitude]="lat || centerLat"
-        [longitude]="lng || centerLng"
-        [zoom]="8"
-        (mapClick)="mapClicked($event)">
-  <sebm-google-map-marker
-          *ngIf="lat && lng"
-          [latitude]="lat"
-          [longitude]="lng">
-  </sebm-google-map-marker>
-</sebm-google-map>
\ No newline at end of file
-- 
2.6.4


From b079a39ef85b7dcdba1b2513d1c6a4965d13cfdc Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 6 May 2016 22:01:30 +0300
Subject: [PATCH 151/194] Step 18.1: Removed bootstrap

---
 package.json | 1 -
 1 file changed, 1 deletion(-)

diff --git a/package.json b/package.json
index 2e3e85e..6115200 100644
--- a/package.json
+++ b/package.json
@@ -11,7 +11,6 @@
     "angular2-meteor-accounts-ui": "0.3.5",
     "angular2-pagination": "0.1.1",
     "angular2-meteor-auto-bootstrap": "0.5.4",
-    "bootstrap4-webpack-package": "1.0.0",
     "meteor-node-stubs": "^0.2.3",
     "rxjs": "5.0.0-beta.6"
   }
-- 
2.6.4


From baca5ea3fb520eb7f3f4ca1ad6832e609dcbfdf8 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Fri, 6 May 2016 22:01:44 +0300
Subject: [PATCH 152/194] Step 18.2: Removed bootstrap import

---
 client/app.ts | 1 -
 1 file changed, 1 deletion(-)

diff --git a/client/app.ts b/client/app.ts
index e05d9ec..08a99d3 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -1,6 +1,5 @@
 import 'reflect-metadata';
 import 'zone.js/dist/zone';
-import 'bootstrap4-webpack-package';
 
 import {Component, provide} from 'angular2/core';
 import {bootstrap} from 'angular2-meteor-auto-bootstrap';
-- 
2.6.4


From cb5976f014e0675f28ad5e56d993371425142567 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Sat, 6 Feb 2016 10:32:42 +0200
Subject: [PATCH 153/194] Step 18.3: Add ng2 material package

---
 package.json | 1 +
 1 file changed, 1 insertion(+)

diff --git a/package.json b/package.json
index 6115200..980861b 100644
--- a/package.json
+++ b/package.json
@@ -11,6 +11,7 @@
     "angular2-meteor-accounts-ui": "0.3.5",
     "angular2-pagination": "0.1.1",
     "angular2-meteor-auto-bootstrap": "0.5.4",
+    "ng2-material": "0.2.12",
     "meteor-node-stubs": "^0.2.3",
     "rxjs": "5.0.0-beta.6"
   }
-- 
2.6.4


From f94e2e744788a625864895578c9fc45381b97390 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Sat, 6 Feb 2016 10:32:57 +0200
Subject: [PATCH 154/194] Step 18.4: Import ng2 material components to the main
 app

---
 client/app.ts | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

diff --git a/client/app.ts b/client/app.ts
index 08a99d3..4a91e20 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -1,5 +1,8 @@
 import 'reflect-metadata';
 import 'zone.js/dist/zone';
+import 'ng2-material/all.webpack';
+import {MATERIAL_PROVIDERS, MATERIAL_DIRECTIVES} from 'ng2-material/all';
+
 
 import {Component, provide} from 'angular2/core';
 import {bootstrap} from 'angular2-meteor-auto-bootstrap';
@@ -14,7 +17,7 @@ import {LoginButtons} from 'angular2-meteor-accounts-ui';
 @Component({
   selector: 'app',
   templateUrl: 'client/app.html',
-  directives: [ROUTER_DIRECTIVES, LoginButtons]
+  directives: [ROUTER_DIRECTIVES, LoginButtons, MATERIAL_DIRECTIVES]
 })
 @RouteConfig([
   { path: '/', as: 'PartiesList', component: PartiesList },
@@ -22,4 +25,4 @@ import {LoginButtons} from 'angular2-meteor-accounts-ui';
 ])
 class Socially {}
 
-bootstrap(Socially, [ROUTER_PROVIDERS, ANGULAR2_GOOGLE_MAPS_PROVIDERS, provide(APP_BASE_HREF, { useValue: '/' })]);
\ No newline at end of file
+bootstrap(Socially, [MATERIAL_PROVIDERS, ROUTER_PROVIDERS, ANGULAR2_GOOGLE_MAPS_PROVIDERS, provide(APP_BASE_HREF, { useValue: '/' })]);
-- 
2.6.4


From bee135d08973eb2e89b70219d0a5187ef96e6be4 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Sat, 6 Feb 2016 10:33:22 +0200
Subject: [PATCH 155/194] Step 18.5: Import the fonts for material

---
 client/index.html | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

diff --git a/client/index.html b/client/index.html
index 8a56f1a..c6c91b2 100644
--- a/client/index.html
+++ b/client/index.html
@@ -1,8 +1,7 @@
 <head>
   <meta name="viewport" content="width=device-width, initial-scale=1">
-  <link href='http://fonts.googleapis.com/css?family=Muli:400,300' rel='stylesheet' type='text/css'>
-  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
+  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
 </head>
 <body>
-  <app></app>
+  <app layout="column"></app>
 </body>
\ No newline at end of file
-- 
2.6.4


From 9f193fe72c67e6d000ee6197469696d265d9d89e Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Sat, 6 Feb 2016 10:33:40 +0200
Subject: [PATCH 156/194] Step 18.6: Change the nav bar and the layout

---
 client/app.html | 17 ++++++++++-------
 1 file changed, 10 insertions(+), 7 deletions(-)

diff --git a/client/app.html b/client/app.html
index dffc2ea..abfc8de 100644
--- a/client/app.html
+++ b/client/app.html
@@ -1,7 +1,10 @@
-<nav class="navbar navbar-light bg-faded">
-  <a class="navbar-brand" href="#">Socially</a>
-  <login-buttons class="pull-right"></login-buttons>
-</nav>
-<div class="container-fluid">
-  <router-outlet></router-outlet>
-</div>
\ No newline at end of file
+<md-toolbar md-scroll-shrink layout="row" layout-align="start center" layout-padding>
+  <h2>
+    <a ui-sref="parties"><span class="md-title">Socially</span></a>
+  </h2>
+  <span flex></span>
+  <div class="navbar-right navbar-text">
+    <login-buttons></login-buttons>
+  </div>
+</md-toolbar>
+<router-outlet flex-gt-sm layout-gt-sm="row"></router-outlet>
\ No newline at end of file
-- 
2.6.4


From 17146cd2fbe7edf8d5aba385a09b953c012ff231 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Sat, 6 Feb 2016 11:02:13 +0200
Subject: [PATCH 157/194] Step 18.7: Import the components into the parties
 form

---
 client/imports/parties-form/parties-form.ts | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/client/imports/parties-form/parties-form.ts b/client/imports/parties-form/parties-form.ts
index 3f54b47..a48daa2 100644
--- a/client/imports/parties-form/parties-form.ts
+++ b/client/imports/parties-form/parties-form.ts
@@ -2,11 +2,14 @@ import 'reflect-metadata';
 import {Component} from 'angular2/core';
 import {FormBuilder, ControlGroup, Validators, Control} from 'angular2/common';
 import {Parties} from '../../../collections/parties.ts';
+import {MATERIAL_DIRECTIVES} from 'ng2-material/all';
+
 import {Meteor} from 'meteor/meteor';
 
 @Component({
   selector: 'parties-form',
-  templateUrl: '/client/imports/parties-form/parties-form.html'
+  templateUrl: '/client/imports/parties-form/parties-form.html',
+  directives: [MATERIAL_DIRECTIVES]
 })
 export class PartiesForm {
   partiesForm: ControlGroup;
-- 
2.6.4


From 4768e5b9e29b4e2650ba95b4d33daa42295216b1 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Sat, 6 Feb 2016 11:02:27 +0200
Subject: [PATCH 158/194] Step 18.8: Change the layout of the parties form

---
 client/imports/parties-form/parties-form.html | 41 ++++++++++++++-------------
 1 file changed, 21 insertions(+), 20 deletions(-)

diff --git a/client/imports/parties-form/parties-form.html b/client/imports/parties-form/parties-form.html
index 3d07605..af0c995 100644
--- a/client/imports/parties-form/parties-form.html
+++ b/client/imports/parties-form/parties-form.html
@@ -1,21 +1,22 @@
-<form [ngFormModel]="partiesForm" #f="ngForm" (submit)="addParty(f.value)" class="form-inline">
-  <fieldset class="form-group">
-    <label for="partyName">Party name</label>
-    <input id="partyName" class="form-control" type="text" ngControl="name" placeholder="Party name" />
-
-    <label for="description">Description</label>
-    <input id="description" class="form-control" ype="text" ngControl="description" placeholder="Description">
-
-    <label for="location_name">Location</label>
-    <input id="location_name" class="form-control" type="text" ngControl="location" placeholder="Location name">
-
-    <div class="checkbox">
-      <label>
-        <input type="checkbox" ngControl="public">
-        Public
-      </label>
-    </div>
-
-    <button type="submit" class="btn btn-primary">Add Party!</button>
-  </fieldset>
+<form [ngFormModel]="partiesForm" #f="ngForm" (submit)="addParty(f.value)">
+  <div layout-gt-sm="row">
+    <md-input-container class="md-block" flex-gt-sm>
+      <label>Party name</label>
+      <input md-input ngControl="name" placeholder="Party name">
+    </md-input-container>
+    <md-input-container class="md-block" flex-gt-sm>
+      <label>Description</label>
+      <input md-input type="text" ngControl="description" placeholder="Description">
+    </md-input-container>
+    <md-input-container class="md-block" flex-gt-sm>
+      <label>Location name</label>
+      <input md-input ngControl="location" placeholder="Location name">
+    </md-input-container>
+    <md-input-container class="md-block" flex-gt-sm>
+      <md-checkbox [(checked)]="partiesForm.public">
+        Public?
+      </md-checkbox>
+    </md-input-container>
+    <button type="submit" md-raised-button class="md-raised md-primary">Add Party!</button>
+  </div>
 </form>
\ No newline at end of file
-- 
2.6.4


From d4704b84726169664fd1425c6ff9aa5870b50c22 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Sat, 6 Feb 2016 11:14:41 +0200
Subject: [PATCH 159/194] Step 18.9: Add the import to the parties list

---
 client/imports/parties-list/parties-list.ts | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/client/imports/parties-list/parties-list.ts b/client/imports/parties-list/parties-list.ts
index a4f8194..a20d7cf 100644
--- a/client/imports/parties-list/parties-list.ts
+++ b/client/imports/parties-list/parties-list.ts
@@ -10,12 +10,13 @@ import {Counts} from 'meteor/tmeasday:publish-counts';
 import {PaginationService, PaginatePipe, PaginationControlsCmp} from 'angular2-pagination';
 import {RsvpPipe} from '../pipes/pipes.ts';
 import {ANGULAR2_GOOGLE_MAPS_DIRECTIVES} from 'angular2-google-maps/core';
+import {MATERIAL_DIRECTIVES} from 'ng2-material/all';
 
 @Component({
   selector: 'parties-list',
   viewProviders: [PaginationService],
   templateUrl: '/client/imports/parties-list/parties-list.html',
-  directives: [ANGULAR2_GOOGLE_MAPS_DIRECTIVES, PartiesForm, RouterLink, PaginationControlsCmp],
+  directives: [MATERIAL_DIRECTIVES, ANGULAR2_GOOGLE_MAPS_DIRECTIVES, PartiesForm, RouterLink, PaginationControlsCmp],
   pipes: [PaginatePipe, RsvpPipe]
 })
 @InjectUser()
-- 
2.6.4


From d7b0c9c9c8e6b469fe146ea24c0bba71b1452bf9 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Sat, 6 Feb 2016 11:15:01 +0200
Subject: [PATCH 160/194] Step 18.10: Change that layout of the parties list

---
 client/imports/parties-list/parties-list.html | 162 +++++++++++---------------
 1 file changed, 67 insertions(+), 95 deletions(-)

diff --git a/client/imports/parties-list/parties-list.html b/client/imports/parties-list/parties-list.html
index f375125..2da5d4e 100644
--- a/client/imports/parties-list/parties-list.html
+++ b/client/imports/parties-list/parties-list.html
@@ -1,100 +1,72 @@
-<div class="row">
-  <div class="col-md-12">
-    <div class="jumbotron">
-      <h3>Create a new party!</h3>
-      <parties-form [hidden]="!user"></parties-form>
-      <div [hidden]="user">You need to login to create new parties!</div>
-    </div>
-  </div>
-</div>
-<div class="row ma-filters">
-  <div class="col-md-6">
-    <h3>All Parties:</h3>
-    <form class="form-inline">
-      <input type="text" class="form-control" #searchtext placeholder="Search by Location">
-      <button type="button" class="btn btn-primary" (click)="search(searchtext.value)">Search</button>
-      Sort by name: <select class="form-control" #sort (change)="changeSortOrder(sort.value)">
-      <option value="1" selected>Ascending</option>
-      <option value="-1">Descending</option>
-    </select>
-    </form>
-  </div>
-</div>
-<div class="row">
-  <div class="col-md-6">
-    <ul class="list-group">
-      <li class="list-group-item">
-        <pagination-controls (change)="onPageChanged($event.page)"></pagination-controls>
-      </li>
-      <li *ngFor="let party of parties | paginate:{currentPage: 1, itemsPerPage: pageSize, totalItems: partiesSize}"
-          class="list-group-item ma-party-item">
-        <div class="row">
-          <div class="col-sm-8">
-            <h2 class="ma-party-name">
-              <a [routerLink]="['/PartyDetails', {partyId: party._id}]">{{party.name}}</a>
-            </h2>
-            @ {{party.location.name}}
-            <p class="ma-party-description">
-              {{party.description}}
-            </p>
-          </div>
-          <div class="col-sm-4">
-            <button class="btn btn-danger pull-right" [hidden]="!isOwner(party)" (click)="removeParty(party)"><i
-                    class="fa fa-times"></i></button>
-          </div>
+<md-content flex layout="row" class="ma-parties-list">
+  <div layout="row" flex>
+    <div flex="50">
+      <div>
+        <md-content class="new-party-form-container">
+          <md-toolbar>
+            <div class="md-toolbar-tools">
+              <h3>Create a new party!</h3>
+            </div>
+          </md-toolbar>
+          <parties-form [hidden]="!user"></parties-form>
+          <div [hidden]="user">You need to login to create new parties!</div>
+        </md-content>
+        <div layout-padding layout="row">
+          <md-input-container class="md-block" flex-gt-sm>
+            <label>Search</label>
+            <input type="text" md-input #searchtext placeholder="Search by Location">
+          </md-input-container>
+          Sort by name: <select class="form-control" #sort (change)="changeSortOrder(sort.value)">
+            <option value="1" selected>Ascending</option>
+            <option value="-1">Descending</option>
+          </select>
         </div>
-        <div class="row ma-party-item-bottom">
-          <div class="col-sm-4">
-            <div class="ma-rsvp-sum">
-              <div class="ma-rsvp-amount">
-                <div class="ma-amount">
-                  {{party | rsvp:'yes'}}
-                </div>
-                <div class="ma-rsvp-title">
-                  YES
-                </div>
-              </div>
-              <div class="ma-rsvp-amount">
-                <div class="ma-amount">
-                  {{party | rsvp:'maybe'}}
-                </div>
-                <div class="ma-rsvp-title">
-                  MAYBE
-                </div>
-              </div>
-              <div class="ma-rsvp-amount">
-                <div class="ma-amount">
-                  {{party | rsvp:'no'}}
-                </div>
-                <div class="ma-rsvp-title">
-                  NO
+      </div>
+      <md-content class="md-padding" style="padding-top:0;">
+        <pagination-controls (change)="onPageChanged($event.page)"></pagination-controls>
+        <div *ngFor="let party of parties | paginate:{currentPage: 1, itemsPerPage: pageSize, totalItems: partiesSize}" class="ma-party">
+          <md-card>
+            <md-card-content>
+              <h2 class="md-title ma-name" style=""><a [routerLink]="['/PartyDetails', {partyId: party._id}]">{{party.name}}</a></h2>
+              <p class="ma-description" style="padding:0 10px;margin-bottom:35px;margin-top: 6px;">{{party.description}}</p>
+              <div layout="row">
+                <div layout="row" layout-align="end end">
+                  <div>
+                    <div class="rsvps-sum">
+                      <div class="rsvps-amount">{{party | rsvp:'yes'}}</div>
+                      <div class="rsvps-title">Yes</div>
+                    </div>
+                    <div class="rsvps-sum">
+                      <div class="rsvps-amount">{{party | rsvp:'maybe'}}</div>
+                      <div class="rsvps-title">Maybe</div>
+                    </div>
+                    <div class="rsvps-sum">
+                      <div class="rsvps-amount">{{party | rsvp:'no'}}</div>
+                      <div class="rsvps-title">No</div>
+                    </div>
+                  </div>
                 </div>
               </div>
-            </div>
-          </div>
+            </md-card-content>
+          </md-card>
         </div>
-      </li>
-      <li class="list-group-item">
-        <pagination-controls (change)="onPageChanged($event.page)"></pagination-controls>
-      </li>
-    </ul>
-  </div>
-  <div class="col-md-6">
-    <ul class="list-group">
-      <li class="list-group-item">
-        <sebm-google-map
-                [latitude]="0"
-                [longitude]="0"
-                [zoom]="1">
-          <div *ngFor="#party of parties">
-            <sebm-google-map-marker
-                    *ngIf="party.location.lat"
-                    [latitude]="party.location.lat"
-                    [longitude]="party.location.lng">
-            </sebm-google-map-marker>
-          </div>
-        </sebm-google-map>
-      </li>
-    </ul>
+      </md-content>
+    </div>
+    <div flex="50" layout="row" style="min-height:300px;">
+      <sebm-google-map
+              style="width: 100%; min-height:300px;"
+              flex layout="row"
+              [latitude]="0"
+              [longitude]="0"
+              [zoom]="1">
+        <div *ngFor="#party of parties">
+          <sebm-google-map-marker
+                  *ngIf="party.location.lat"
+                  [latitude]="party.location.lat"
+                  [longitude]="party.location.lng">
+          </sebm-google-map-marker>
+        </div>
+      </sebm-google-map>
+    </div>
   </div>
-</div>
\ No newline at end of file
+</md-content>
\ No newline at end of file
-- 
2.6.4


From 69c3aa6d33558f67884e5747c9c85ebc3ad995eb Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Sat, 6 Feb 2016 11:15:12 +0200
Subject: [PATCH 161/194] Step 18.11: Add some style and css

---
 .../imports/parties-list/parties-list.import.less  | 149 ++++++---------------
 1 file changed, 43 insertions(+), 106 deletions(-)

diff --git a/client/imports/parties-list/parties-list.import.less b/client/imports/parties-list/parties-list.import.less
index f9b7bbc..02d53a3 100644
--- a/client/imports/parties-list/parties-list.import.less
+++ b/client/imports/parties-list/parties-list.import.less
@@ -1,125 +1,62 @@
-.ma-add-button-container {
-  button.btn {
-    background: @color3;
-    float: right;
-    margin-right: 5px;
-    outline: none;
-    i {
-      color: @color5;
-    }
-  }
-}
-
-.ma-parties-col {
-  padding-top: 20px;
-}
-
-.ma-filters {
-  margin-bottom: 10px;
+.new-party-form-container {
+  margin: 20px;
+  border: 1px gainsboro solid;
 }
-
-.ma-party-item {
-  .ma-party-name {
-    margin-bottom: 20px;
-    a {
-      color: @color6;
-      text-decoration: none !important;
-      font-weight: 400;
-    }
+.ma-parties-list {
+  .sebm-google-map {
+    box-sizing: border-box;
+    -webkit-flex: 1;
+    -ms-flex: 1;
+    flex: 1;
+    -webkit-flex-direction: row;
+    -ms-flex-direction: row;
+    flex-direction: row;
+    box-sizing: border-box;
+    display: -webkit-flex;
+    display: -moz-flex;
+    display: -ms-flexbox;
+    display: flex;
   }
-  .ma-party-description {
-    color: @color6;
-    font-weight: 300;
-    padding-left: 18px;
-    font-size: 14px;
+
+  .angular-google-map-container {
+    box-sizing: border-box;
+    -webkit-flex: 1;
+    -ms-flex: 1;
+    flex: 1;
   }
 
-  .ma-remove {
-    color: lighten(@color7, 20%);
-    position: absolute;
-    right: 20px;
-    top: 20px;
-    &:hover {
-      color: @color7;
+  .rsvps-sum {
+    float: left;
+    width: 50px;
+    text-align: center;
+    .rsvps-amount {
+      font-size: 24px;
+    }
+    .rsvps-title {
+      font-size: 13px;
+      color: #aaa;
     }
   }
 
-  .ma-party-item-bottom {
-    padding-top: 10px;
-    .ma-posted-by-col {
-      .ma-posted-by {
-        color: darken(@color4, 30%);
-        font-size: 12px;
-      }
-      .ma-everyone-invited {
-        @media (max-width: 400px) {
-          display: block;
-          i {
-            margin-left: 0px !important;
-          }
-        }
-        font-size: 12px;
-        color: darken(@color4, 10%);
-        i {
-          color: darken(@color4, 10%);
-          margin-left: 5px;
-        }
-      }
+  .ma-party {
+    .party-image {
+      background-size: cover;
+      width: 100%;
+      height: 200px;
     }
 
-    .ma-rsvp-buttons {
-      input.btn {
-        color: darken(@color3, 20%);
-        background: transparent !important;
-        outline: none;
-        padding-left: 0;
-        &:active {
-          box-shadow: none;
-        }
-        &:hover {
-          color: darken(@color3, 30%);
-        }
-        &.btn-primary {
-          color: lighten(@color3, 10%);
-          border: 0;
-          background: transparent !important;
-        }
+    .ma-name {
+      a {
+        text-decoration: none;
+        color: #333;
       }
     }
+    .ma-description {
 
-    .ma-rsvp-sum {
-      width: 160px;
-      @media (min-width: 400px) {
-        float: right;
-      }
-      @media (max-width: 400px) {
-        margin: 0 auto;
-      }
-    }
-    .ma-rsvp-amount {
-      display: inline-block;
-      text-align: center;
-      width: 50px;
-      .ma-amount {
-        font-weight: bold;
-        font-size: 20px;
-      }
-      .ma-rsvp-title {
-        font-size: 11px;
-        color: #aaa;
-        text-transform: uppercase;
-      }
     }
   }
 }
 
-.ma-angular-map-col {
-  .angular-google-map-container, .angular-google-map {
-    height: 100%;
-    width: 100%;
-  }
-}
-
 .search-form {
   margin-bottom: 1em;
 }
\ No newline at end of file
-- 
2.6.4


From 72b1878204c4fd33a074ead13f64240757a5257d Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Sat, 6 Feb 2016 11:22:54 +0200
Subject: [PATCH 162/194] Step 18.12: Import the directives in the party
 details page

---
 client/imports/party-details/party-details.ts | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/client/imports/party-details/party-details.ts b/client/imports/party-details/party-details.ts
index 17aec8e..f0cf088 100644
--- a/client/imports/party-details/party-details.ts
+++ b/client/imports/party-details/party-details.ts
@@ -7,11 +7,12 @@ import {RequireUser, InjectUser} from 'angular2-meteor-accounts-ui';
 import {MeteorComponent} from 'angular2-meteor';
 import {DisplayName} from '../pipes/pipes.ts';
 import {ANGULAR2_GOOGLE_MAPS_DIRECTIVES, MouseEvent} from 'angular2-google-maps/core';
+import {MATERIAL_DIRECTIVES} from 'ng2-material/all';
 
 @Component({
   selector: 'party-details',
   templateUrl: '/client/imports/party-details/party-details.html',
-  directives: [RouterLink, ANGULAR2_GOOGLE_MAPS_DIRECTIVES],
+  directives: [RouterLink, ANGULAR2_GOOGLE_MAPS_DIRECTIVES, MATERIAL_DIRECTIVES],
   pipes: [DisplayName]
 })
 @RequireUser()
-- 
2.6.4


From cb885196460a3927888e6f2b87511453721c49cd Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Sat, 6 Feb 2016 11:23:20 +0200
Subject: [PATCH 163/194] Step 18.13: Update the layout of the party details
 page

---
 client/imports/party-details/party-details.html | 106 ++++++++++++------------
 1 file changed, 51 insertions(+), 55 deletions(-)

diff --git a/client/imports/party-details/party-details.html b/client/imports/party-details/party-details.html
index a484a5b..45286ef 100644
--- a/client/imports/party-details/party-details.html
+++ b/client/imports/party-details/party-details.html
@@ -1,60 +1,56 @@
-<div class="row ma-party-details-container">
-  <div class="col-sm-6 col-sm-offset-3">
+<div layout="row" flex class="ma-party-details" *ngIf="party">
+  <div flex="33" offset="33">
+    <md-content class="new-party-form-container">
+      <md-toolbar>
+        <div class="md-toolbar-tools">
+          <h3>Your party details:</h3>
+        </div>
+      </md-toolbar>
+      <form layout="column">
+        <md-input-container>
+          <label>Party Name</label>
+          <input md-input [disabled]="!isOwner" type="text" [(ngModel)]="party.name">
+        </md-input-container>
+        <md-input-container>
+          <label>Party Description</label>
+          <input md-input [disabled]="!isOwner" type="text" [(ngModel)]="party.description">
+        </md-input-container>
+        <md-input-container>
+          <label>Location name</label>
+          <input md-input [disabled]="!isOwner" type="text" [(ngModel)]="party.location.name" class="form-control">
+        </md-input-container>
+        <md-checkbox [(checked)]="party.public" aria-label="Public">
+          Is public
+        </md-checkbox>
 
-    <legend>View and Edit Your Party Details:</legend>
-    <form class="form-horizontal" (submit)="saveParty(party)" *ngIf="party">
-      <div class="form-group">
-        <label>Party Name</label>
-        <input [disabled]="!isOwner" type="text" [(ngModel)]="party.name" class="form-control">
-      </div>
-      <div class="form-group">
-        <label>Description</label>
-        <input [disabled]="!isOwner" type="text" [(ngModel)]="party.description" class="form-control">
-      </div>
-      <div class="form-group">
-        <label>Location name</label>
-        <input [disabled]="!isOwner" type="text" [(ngModel)]="party.location.name" class="form-control">
-      </div>
-      <div class="form-group">
-        <button [disabled]="!isOwner" type="submit" class="btn btn-primary">Save</button>
-        <button [routerLink]="['/PartiesList']" class="btn">Back</button>
-      </div>
-    </form>
+        <div layout="row" layout-align="left">
+          <button [disabled]="!isOwner" type="submit" md-raised-button class="md-raised md-primary">Save</button>
+          <button [routerLink]="['/PartiesList']" md-raised-button class="md-raised">Back</button>
+        </div>
 
-    <div class="ma-invite-list" ng-show="partyDetails.canInvite()">
-      <h3>
-        Users to invite:
-      </h3>
-      <ul>
-        <li *ngFor="#user of users">
-          <div>{{ user | displayName }}</div>
-          <button (click)="invite(user)" class="btn btn-primary btn-sm">Invite</button>
-        </li>
-      </ul>
-      <div *ngIf="isInvited">
-        <h2>Reply to the invitation</h2>
-        <input type="button" class="btn btn-primary" value="I'm going!" (click)="reply('yes')">
-        <input type="button" class="btn btn-warning" value="Maybe" (click)="reply('maybe')">
-        <input type="button" class="btn btn-danger" value="No" (click)="reply('no')">
-      </div>
-    </div>
+        <md-list>
+          <md-subheader class="md-no-sticky">Users to invite:</md-subheader>
+          <md-list-item *ngFor="#user of users">
+            <div>{{ user | displayName }}</div>
+            <button (click)="invite(user)" md-raised-button class="md-raised">Invite</button>
+          </md-list-item>
+        </md-list>
 
-    <h3 class="ma-map-title">
-      Click the map to set the party location
-    </h3>
-
-    <div class="angular-google-map-container">
-      <sebm-google-map
-              [latitude]="lat || centerLat"
-              [longitude]="lng || centerLng"
-              [zoom]="8"
-              (mapClick)="mapClicked($event)">
-        <sebm-google-map-marker
-                *ngIf="lat && lng"
-                [latitude]="lat"
-                [longitude]="lng">
-        </sebm-google-map-marker>
-      </sebm-google-map>
-    </div>
+        <div class="angular-google-map-container">
+          <sebm-google-map
+                  style="height: 300px;"
+                  [latitude]="lat || centerLat"
+                  [longitude]="lng || centerLng"
+                  [zoom]="8"
+                  (mapClick)="mapClicked($event)">
+            <sebm-google-map-marker
+                    *ngIf="lat && lng"
+                    [latitude]="lat"
+                    [longitude]="lng">
+            </sebm-google-map-marker>
+          </sebm-google-map>
+        </div>
+      </form>
+    </md-content>
   </div>
 </div>
-- 
2.6.4


From 194f526e4bff023020fecdd049a7dd33f5da60f1 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Sat, 6 Feb 2016 13:38:10 +0200
Subject: [PATCH 164/194] Step 18.14: Replace login buttons with custom buttons

---
 client/app.html | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

diff --git a/client/app.html b/client/app.html
index abfc8de..a5bb6b8 100644
--- a/client/app.html
+++ b/client/app.html
@@ -4,7 +4,14 @@
   </h2>
   <span flex></span>
   <div class="navbar-right navbar-text">
-    <login-buttons></login-buttons>
+    <div [hidden]="user">
+      <button md-button [routerLink]="['/Login']" >Login</button>
+      <button md-button [routerLink]="['/Signup']">Sign up</button>
+    </div>
+    <div [hidden]="!user">
+      <span>{{ user | displayName }}</span>
+      <button md-button (click)="logout()">Logout</button>
+    </div>
   </div>
 </md-toolbar>
 <router-outlet flex-gt-sm layout-gt-sm="row"></router-outlet>
\ No newline at end of file
-- 
2.6.4


From 5297f13674108c6774dca3d181b7b1774fd29d86 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Sat, 6 Feb 2016 13:38:32 +0200
Subject: [PATCH 165/194] Step 18.15: Add logic to support custom login

---
 client/app.ts | 24 +++++++++++++++++++++---
 1 file changed, 21 insertions(+), 3 deletions(-)

diff --git a/client/app.ts b/client/app.ts
index 4a91e20..568eee8 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -2,6 +2,7 @@ import 'reflect-metadata';
 import 'zone.js/dist/zone';
 import 'ng2-material/all.webpack';
 import {MATERIAL_PROVIDERS, MATERIAL_DIRECTIVES} from 'ng2-material/all';
+import {MeteorComponent} from 'angular2-meteor';
 
 
 import {Component, provide} from 'angular2/core';
@@ -13,16 +14,33 @@ import {PartyDetails} from './imports/party-details/party-details.ts';
 import '../collections/methods.ts';
 import {ANGULAR2_GOOGLE_MAPS_PROVIDERS} from 'angular2-google-maps/core';
 import {LoginButtons} from 'angular2-meteor-accounts-ui';
+import {RouterLink} from 'angular2/router';
+import {DisplayName} from './imports/pipes/pipes.ts';
+import {InjectUser} from 'angular2-meteor-accounts-ui';
+import {Login} from './imports/auth/login.ts';
+import {Signup} from './imports/auth/signup.ts';
+import {Recover} from './imports/auth/recover.ts';
 
 @Component({
   selector: 'app',
   templateUrl: 'client/app.html',
-  directives: [ROUTER_DIRECTIVES, LoginButtons, MATERIAL_DIRECTIVES]
+  directives: [ROUTER_DIRECTIVES, LoginButtons, MATERIAL_DIRECTIVES, RouterLink],
+  pipes: [DisplayName]
 })
 @RouteConfig([
   { path: '/', as: 'PartiesList', component: PartiesList },
-  { path: '/party/:partyId', as: 'PartyDetails', component: PartyDetails }
+  { path: '/party/:partyId', as: 'PartyDetails', component: PartyDetails },
+  { path: '/login', as: 'Login', component: Login },
+  { path: '/signup', as: 'Signup', component: Signup },
+  { path: '/recover', as: 'Recover', component: Recover }
 ])
-class Socially {}
+@InjectUser()
+class Socially extends MeteorComponent {
+  user: Meteor.User;
+
+  constructor() {
+    super();
+  }
+}
 
 bootstrap(Socially, [MATERIAL_PROVIDERS, ROUTER_PROVIDERS, ANGULAR2_GOOGLE_MAPS_PROVIDERS, provide(APP_BASE_HREF, { useValue: '/' })]);
-- 
2.6.4


From 3b2849925dfe584230231cade40f9d2d09b3877d Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Sat, 6 Feb 2016 14:11:40 +0200
Subject: [PATCH 166/194] Step 18.16: Create the login component

---
 client/imports/auth/login.ts | 42 ++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 42 insertions(+)
 create mode 100644 client/imports/auth/login.ts

diff --git a/client/imports/auth/login.ts b/client/imports/auth/login.ts
new file mode 100644
index 0000000..f510324
--- /dev/null
+++ b/client/imports/auth/login.ts
@@ -0,0 +1,42 @@
+import {Component} from 'angular2/core';
+import {MeteorComponent} from 'angular2-meteor';
+import {Router} from 'angular2/router';
+import {FormBuilder, ControlGroup, Validators} from 'angular2/common';
+import {MATERIAL_DIRECTIVES} from 'ng2-material/all';
+import {RouterLink} from 'angular2/router';
+
+@Component({
+  selector: 'login',
+  directives: [MATERIAL_DIRECTIVES, RouterLink],
+  templateUrl: '/client/imports/auth/login.html'
+})
+export class Login extends MeteorComponent {
+  loginForm: ControlGroup;
+  error: string;
+
+  constructor(private router: Router) {
+    super();
+
+    let fb = new FormBuilder();
+
+    this.loginForm = fb.group({
+      email: ['', Validators.required],
+      password: ['', Validators.required]
+    });
+
+    this.error = '';
+  }
+
+  login(credentials) {
+    if (this.loginForm.valid) {
+      Meteor.loginWithPassword(credentials.email, credentials.password, (err) => {
+        if (err) {
+          this.error = err;
+        }
+        else {
+          this.router.navigate(['/PartiesList']);
+        }
+      });
+    }
+  }
+}
\ No newline at end of file
-- 
2.6.4


From 28fd6d826db28461e7b8ce05eb0f4b30c90b266b Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Sat, 6 Feb 2016 14:11:48 +0200
Subject: [PATCH 167/194] Step 18.17: Create the login view

---
 client/imports/auth/login.html | 54 ++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 54 insertions(+)
 create mode 100644 client/imports/auth/login.html

diff --git a/client/imports/auth/login.html b/client/imports/auth/login.html
new file mode 100644
index 0000000..19fa9de
--- /dev/null
+++ b/client/imports/auth/login.html
@@ -0,0 +1,54 @@
+<md-content layout="row" layout-align="center start" layout-fill layout-margin>
+  <md-whiteframe layout="column" flex flex-md="50" flex-lg="50" flex-gt-lg="33" class="md-whiteframe-z2" layout-fill>
+    <md-toolbar class="md-primary md-tall" layout="column" layout-align="end" layout-fill>
+      <div layout="row" class="md-toolbar-tools md-toolbar-tools-bottom">
+        <h3 class="md-display-1"> Sign in </h3>
+      </div>
+    </md-toolbar>
+    <div layout="column" layout-fill layout-margin layout-padding>
+      <div layout="row" layout-fill layout-margin>
+        <p class="md-body-2"> Use existing account</p>
+      </div>
+      <div layout="row" layout-fill layout-margin layout-padding layout-wrap>
+        <button md-button class="md-raised">
+          <span> Google</span>
+        </button>
+        <button md-button class="md-raised">
+          <span>Facebook </span>
+        </button>
+        <button md-button class="md-raised">
+          <span>Twitter </span>
+        </button>
+      </div>
+      <md-divider class="inset"></md-divider>
+      <div layout="row" layout-fill layout-margin>
+        <p class="md-body-2"> Sign in with your email</p>
+      </div>
+
+      <form [ngFormModel]="loginForm" #f="ngForm" (submit)="login(f.value)" layout="column" layout-fill layout-padding layout-margin>
+        <md-input-container>
+          <label> Email </label>
+          <input md-input type="text" ngControl="email" aria-label="email" />
+        </md-input-container>
+        <md-input-container>
+          <label> Password </label>
+          <input md-input type="password" ngControl="password" aria-label="password" />
+        </md-input-container>
+        <div layout="row" layout-align="space-between center">
+          <button md-button [routerLink]="['/Recover']">Forgot password?</button>
+          <button md-button class="md-raised md-primary" type="submit" aria-label="login">Sign In
+          </button>
+        </div>
+      </form>
+      <div [hidden]="error == ''">
+        <md-toolbar class="md-warn" layout="row" layout-fill layout-padding layout-margin>
+          <p class="md-body-1">{{ error }}</p>
+        </md-toolbar>
+      </div>
+      <md-divider></md-divider>
+      <div layout="row" layout-align="center">
+        <button md-button [routerLink]="['/Signup']">Need an account?</button>
+      </div>
+    </div>
+  </md-whiteframe>
+</md-content>
\ No newline at end of file
-- 
2.6.4


From e8117b6e3fef5b3e6628290e9674f818dc5f1965 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Sat, 6 Feb 2016 14:12:04 +0200
Subject: [PATCH 168/194] Step 18.18: Create the signup component

---
 client/imports/auth/signup.ts | 42 ++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 42 insertions(+)
 create mode 100644 client/imports/auth/signup.ts

diff --git a/client/imports/auth/signup.ts b/client/imports/auth/signup.ts
new file mode 100644
index 0000000..6aee6ce
--- /dev/null
+++ b/client/imports/auth/signup.ts
@@ -0,0 +1,42 @@
+import {Component} from 'angular2/core';
+import {MeteorComponent} from 'angular2-meteor';
+import {Router} from 'angular2/router';
+import {FormBuilder, ControlGroup, Validators} from 'angular2/common';
+import {MATERIAL_DIRECTIVES} from 'ng2-material/all';
+import {RouterLink} from 'angular2/router';
+
+@Component({
+  selector: 'signup',
+  directives: [MATERIAL_DIRECTIVES, RouterLink],
+  templateUrl: '/client/imports/auth/signup.html'
+})
+export class Signup extends MeteorComponent {
+  signupForm: ControlGroup;
+  error: string;
+
+  constructor(private router: Router) {
+    super();
+
+    let fb = new FormBuilder();
+
+    this.signupForm = fb.group({
+      email: ['', Validators.required],
+      password: ['', Validators.required]
+    });
+
+    this.error = '';
+  }
+
+  signup(credentials) {
+    if (this.signupForm.valid) {
+      Accounts.createUser({ email: credentials.email, password: credentials.password}, (err) => {
+        if (err) {
+          this.error = err;
+        }
+        else {
+          this.router.navigate(['/PartiesList']);
+        }
+      });
+    }
+  }
+}
\ No newline at end of file
-- 
2.6.4


From 49ca27e8c1220bab7f1309c7dab2315fcb0b7efb Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Sat, 6 Feb 2016 14:12:12 +0200
Subject: [PATCH 169/194] Step 18.19: Create the signup view

---
 client/imports/auth/signup.html | 50 +++++++++++++++++++++++++++++++++++++++++
 1 file changed, 50 insertions(+)
 create mode 100644 client/imports/auth/signup.html

diff --git a/client/imports/auth/signup.html b/client/imports/auth/signup.html
new file mode 100644
index 0000000..6222883
--- /dev/null
+++ b/client/imports/auth/signup.html
@@ -0,0 +1,50 @@
+<md-content layout="row" layout-align="center start" layout-fill layout-margin>
+  <md-whiteframe layout="column" flex flex-md="50" flex-lg="50" flex-gt-lg="33" class="md-whiteframe-z2" layout-fill>
+    <md-toolbar class="md-primary md-tall" layout="column" layout-align="end" layout-fill>
+      <div layout="row" class="md-toolbar-tools md-toolbar-tools-bottom">
+        <h3 class="md-display-1"> Sign up </h3>
+      </div>
+    </md-toolbar>
+    <div layout="column" layout-fill layout-margin layout-padding>
+      <form [ngFormModel]="signupForm" #f="ngForm" (submit)="signup(f.value)" layout="column" layout-fill layout-padding layout-margin>
+        <md-input-container>
+          <label> Email </label>
+          <input md-input type="text" ngControl="email" aria-label="email" />
+        </md-input-container>
+        <md-input-container>
+          <label> Password </label>
+          <input md-input type="password" ngControl="password" aria-label="password" />
+        </md-input-container>
+        <div layout="row" layout-align="space-between center">
+          <button md-button class="md-raised md-primary" type="submit" aria-label="login">Sign Up!
+          </button>
+        </div>
+      </form>
+      <md-divider></md-divider>
+      <div layout="row" layout-fill layout-margin>
+        <p class="md-body-2"> Want to use an existing account? </p>
+      </div>
+
+      <div layout="row" layout-fill layout-margin layout-padding layout-wrap>
+        <button md-button class="md-raised">
+          <span> Google</span>
+        </button>
+        <button md-button class="md-raised">
+          <span>Facebook </span>
+        </button>
+        <button md-button class="md-raised">
+          <span>Twitter </span>
+        </button>
+      </div>
+      <div [hidden]="error == ''">
+        <md-toolbar class="md-warn" layout="row" layout-fill layout-padding layout-margin>
+          <p class="md-body-1">{{ error }}</p>
+        </md-toolbar>
+      </div>
+      <md-divider></md-divider>
+      <div layout="row" layout-align="center">
+        <button md-button [routerLink]="['/Login']">Already a user?</button>
+      </div>
+    </div>
+  </md-whiteframe>
+</md-content>
\ No newline at end of file
-- 
2.6.4


From acef11f2f9c3f91c54c179865667728b48acc0c9 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Sat, 6 Feb 2016 14:15:27 +0200
Subject: [PATCH 170/194] Step 18.20: Create the recover component

---
 client/imports/auth/recover.ts | 41 +++++++++++++++++++++++++++++++++++++++++
 1 file changed, 41 insertions(+)
 create mode 100644 client/imports/auth/recover.ts

diff --git a/client/imports/auth/recover.ts b/client/imports/auth/recover.ts
new file mode 100644
index 0000000..2edcd38
--- /dev/null
+++ b/client/imports/auth/recover.ts
@@ -0,0 +1,41 @@
+import {Component} from 'angular2/core';
+import {MeteorComponent} from 'angular2-meteor';
+import {Router} from 'angular2/router';
+import {FormBuilder, ControlGroup, Validators} from 'angular2/common';
+import {MATERIAL_DIRECTIVES} from 'ng2-material/all';
+import {RouterLink} from 'angular2/router';
+
+@Component({
+  selector: 'recover',
+  directives: [MATERIAL_DIRECTIVES, RouterLink],
+  templateUrl: '/client/imports/auth/recover.html'
+})
+export class Recover extends MeteorComponent {
+  recoverForm: ControlGroup;
+  error: string;
+
+  constructor(private router: Router) {
+    super();
+
+    let fb = new FormBuilder();
+
+    this.recoverForm = fb.group({
+      email: ['', Validators.required]
+    });
+
+    this.error = '';
+  }
+
+  recover(credentials) {
+    if (this.recoverForm.valid) {
+      Accounts.forgotPassword({ email: credentials.email}, (err) => {
+        if (err) {
+          this.error = err;
+        }
+        else {
+          this.router.navigate(['/PartiesList']);
+        }
+      });
+    }
+  }
+}
\ No newline at end of file
-- 
2.6.4


From 29e1507419bcb1108ffce330df753ccae217dde9 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Sat, 6 Feb 2016 14:15:37 +0200
Subject: [PATCH 171/194] Step 18.21: Create the recover view

---
 client/imports/auth/recover.html | 30 ++++++++++++++++++++++++++++++
 1 file changed, 30 insertions(+)
 create mode 100644 client/imports/auth/recover.html

diff --git a/client/imports/auth/recover.html b/client/imports/auth/recover.html
new file mode 100644
index 0000000..5f0c5cb
--- /dev/null
+++ b/client/imports/auth/recover.html
@@ -0,0 +1,30 @@
+<md-content layout="row" layout-align="center start" layout-fill layout-margin>
+  <md-whiteframe layout="column" flex flex-md="50" flex-lg="50" flex-gt-lg="33" class="md-whiteframe-z2" layout-fill>
+    <md-toolbar class="md-primary md-tall" layout="column" layout-align="end" layout-fill>
+      <div layout="row" class="md-toolbar-tools md-toolbar-tools-bottom">
+        <h3 class="md-display-1"> Recover Your Password</h3>
+      </div>
+    </md-toolbar>
+    <div layout="column" layout-fill layout-margin layout-padding>
+      <form [ngFormModel]="recoverForm" #f="ngForm" (submit)="recover(f.value)" layout="column" layout-fill layout-padding layout-margin>
+        <md-input-container>
+          <label> Email </label>
+          <input md-input type="text" ngControl="email" aria-label="email" />
+        </md-input-container>
+        <div layout="row" layout-align="space-between center">
+          <button md-button class="md-raised md-primary" type="submit" aria-label="login">Recover
+          </button>
+        </div>
+      </form>
+      <div [hidden]="error == ''">
+        <md-toolbar class="md-warn" layout="row" layout-fill layout-padding layout-margin>
+          <p class="md-body-1">{{ error }}</p>
+        </md-toolbar>
+      </div>
+      <md-divider></md-divider>
+      <div layout="row" layout-align="center">
+        <button md-button [routerLink]="['/Login']">Remember your password?</button>
+      </div>
+    </div>
+  </md-whiteframe>
+</md-content>
\ No newline at end of file
-- 
2.6.4


From fa0bae6fea625ed7ad062197c06ead950a6c8f64 Mon Sep 17 00:00:00 2001
From: Dotan Simha <dotansimha@gmail.com>
Date: Sat, 6 Feb 2016 14:16:57 +0200
Subject: [PATCH 172/194] Step 18.22: Add the logout method to the main
 component

---
 client/app.ts | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/client/app.ts b/client/app.ts
index 568eee8..3230db2 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -41,6 +41,12 @@ class Socially extends MeteorComponent {
   constructor() {
     super();
   }
+
+  logout() {
+    this.autorun(() => {
+      Meteor.logout();
+    });
+  }
 }
 
 bootstrap(Socially, [MATERIAL_PROVIDERS, ROUTER_PROVIDERS, ANGULAR2_GOOGLE_MAPS_PROVIDERS, provide(APP_BASE_HREF, { useValue: '/' })]);
-- 
2.6.4


From 76323d0056ac038cc86ec48ecba2508b4d4df4b3 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Mon, 11 Apr 2016 21:26:31 +0300
Subject: [PATCH 173/194] Step 21.1: Create the socially-browser package

---
 packages/socially-browser/README.md                |  0
 packages/socially-browser/package.js               | 24 ++++++++++++++++++++++
 .../socially-browser/socially-browser-tests.js     | 11 ++++++++++
 packages/socially-browser/socially-browser.js      |  5 +++++
 4 files changed, 40 insertions(+)
 create mode 100644 packages/socially-browser/README.md
 create mode 100644 packages/socially-browser/package.js
 create mode 100644 packages/socially-browser/socially-browser-tests.js
 create mode 100644 packages/socially-browser/socially-browser.js

diff --git a/packages/socially-browser/README.md b/packages/socially-browser/README.md
new file mode 100644
index 0000000..e69de29
diff --git a/packages/socially-browser/package.js b/packages/socially-browser/package.js
new file mode 100644
index 0000000..2008a3b
--- /dev/null
+++ b/packages/socially-browser/package.js
@@ -0,0 +1,24 @@
+Package.describe({
+  name: 'socially-browser',
+  version: '0.0.1',
+  // Brief, one-line summary of the package.
+  summary: '',
+  // URL to the Git repository containing the source code for this package.
+  git: '',
+  // By default, Meteor will default to using README.md for documentation.
+  // To avoid submitting documentation, set this field to null.
+  documentation: 'README.md'
+});
+
+Package.onUse(function(api) {
+  api.versionsFrom('1.3');
+  api.use('ecmascript');
+  api.mainModule('socially-browser.js');
+});
+
+Package.onTest(function(api) {
+  api.use('ecmascript');
+  api.use('tinytest');
+  api.use('socially-browser');
+  api.mainModule('socially-browser-tests.js');
+});
diff --git a/packages/socially-browser/socially-browser-tests.js b/packages/socially-browser/socially-browser-tests.js
new file mode 100644
index 0000000..4d09527
--- /dev/null
+++ b/packages/socially-browser/socially-browser-tests.js
@@ -0,0 +1,11 @@
+// Import Tinytest from the tinytest Meteor package.
+import { Tinytest } from "meteor/tinytest";
+
+// Import and rename a variable exported by socially-browser.js.
+import { name as packageName } from "meteor/socially-browser";
+
+// Write your tests here!
+// Here is an example.
+Tinytest.add('socially-browser - example', function (test) {
+  test.equal(packageName, "socially-browser");
+});
diff --git a/packages/socially-browser/socially-browser.js b/packages/socially-browser/socially-browser.js
new file mode 100644
index 0000000..ff66909
--- /dev/null
+++ b/packages/socially-browser/socially-browser.js
@@ -0,0 +1,5 @@
+// Write your package code here!
+
+// Variables exported by this module can be imported by other packages and
+// applications. See socially-browser-tests.js for an example of importing.
+export const name = 'socially-browser';
-- 
2.6.4


From 33a958a22e0ac9ea5ce6426316eaec611299c7b1 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Mon, 11 Apr 2016 22:12:47 +0300
Subject: [PATCH 174/194] Step 21.2: Clean up the package folder and file

---
 packages/socially-browser/package.js                |  6 +-----
 packages/socially-browser/socially-browser-tests.js | 11 -----------
 packages/socially-browser/socially-browser.js       |  5 -----
 3 files changed, 1 insertion(+), 21 deletions(-)
 delete mode 100644 packages/socially-browser/socially-browser-tests.js
 delete mode 100644 packages/socially-browser/socially-browser.js

diff --git a/packages/socially-browser/package.js b/packages/socially-browser/package.js
index 2008a3b..11d39b6 100644
--- a/packages/socially-browser/package.js
+++ b/packages/socially-browser/package.js
@@ -13,12 +13,8 @@ Package.describe({
 Package.onUse(function(api) {
   api.versionsFrom('1.3');
   api.use('ecmascript');
-  api.mainModule('socially-browser.js');
+  api.use(['angular2-compilers', 'barbatus:angular2-runtime'], 'client');
 });
 
 Package.onTest(function(api) {
-  api.use('ecmascript');
-  api.use('tinytest');
-  api.use('socially-browser');
-  api.mainModule('socially-browser-tests.js');
 });
diff --git a/packages/socially-browser/socially-browser-tests.js b/packages/socially-browser/socially-browser-tests.js
deleted file mode 100644
index 4d09527..0000000
--- a/packages/socially-browser/socially-browser-tests.js
+++ /dev/null
@@ -1,11 +0,0 @@
-// Import Tinytest from the tinytest Meteor package.
-import { Tinytest } from "meteor/tinytest";
-
-// Import and rename a variable exported by socially-browser.js.
-import { name as packageName } from "meteor/socially-browser";
-
-// Write your tests here!
-// Here is an example.
-Tinytest.add('socially-browser - example', function (test) {
-  test.equal(packageName, "socially-browser");
-});
diff --git a/packages/socially-browser/socially-browser.js b/packages/socially-browser/socially-browser.js
deleted file mode 100644
index ff66909..0000000
--- a/packages/socially-browser/socially-browser.js
+++ /dev/null
@@ -1,5 +0,0 @@
-// Write your package code here!
-
-// Variables exported by this module can be imported by other packages and
-// applications. See socially-browser-tests.js for an example of importing.
-export const name = 'socially-browser';
-- 
2.6.4


From 02c7bc43f5ef97cbadbd26988ac1a7c8d3bc0d51 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Mon, 11 Apr 2016 22:16:08 +0300
Subject: [PATCH 175/194] Step 21.3: Create empty main file

---
 packages/socially-browser/README.md           | 0
 packages/socially-browser/socially-browser.ts | 2 ++
 2 files changed, 2 insertions(+)
 delete mode 100644 packages/socially-browser/README.md
 create mode 100644 packages/socially-browser/socially-browser.ts

diff --git a/packages/socially-browser/README.md b/packages/socially-browser/README.md
deleted file mode 100644
index e69de29..0000000
diff --git a/packages/socially-browser/socially-browser.ts b/packages/socially-browser/socially-browser.ts
new file mode 100644
index 0000000..defd5f8
--- /dev/null
+++ b/packages/socially-browser/socially-browser.ts
@@ -0,0 +1,2 @@
+import 'reflect-metadata';
+
-- 
2.6.4


From f5e02df9bc8d17d2b3ffa29d1c701328a97f36a7 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Mon, 11 Apr 2016 22:16:23 +0300
Subject: [PATCH 176/194] Step 21.4: Import the main file and set it as the
 main module

---
 packages/socially-browser/package.js | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/packages/socially-browser/package.js b/packages/socially-browser/package.js
index 11d39b6..965c2ba 100644
--- a/packages/socially-browser/package.js
+++ b/packages/socially-browser/package.js
@@ -14,6 +14,8 @@ Package.onUse(function(api) {
   api.versionsFrom('1.3');
   api.use('ecmascript');
   api.use(['angular2-compilers', 'barbatus:angular2-runtime'], 'client');
+  
+  api.mainModule('socially-browser.ts', 'web.browser');
 });
 
 Package.onTest(function(api) {
-- 
2.6.4


From 1e5667dcbf41a8f83c3a5ffd78e4727286293d57 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Mon, 11 Apr 2016 22:17:11 +0300
Subject: [PATCH 177/194] Step 21.5: Move the login component into the package

---
 client/imports/auth/login.html            | 54 -------------------------------
 client/imports/auth/login.ts              | 42 ------------------------
 packages/socially-browser/auth/login.html | 54 +++++++++++++++++++++++++++++++
 packages/socially-browser/auth/login.ts   | 42 ++++++++++++++++++++++++
 4 files changed, 96 insertions(+), 96 deletions(-)
 delete mode 100644 client/imports/auth/login.html
 delete mode 100644 client/imports/auth/login.ts
 create mode 100644 packages/socially-browser/auth/login.html
 create mode 100644 packages/socially-browser/auth/login.ts

diff --git a/client/imports/auth/login.html b/client/imports/auth/login.html
deleted file mode 100644
index 19fa9de..0000000
--- a/client/imports/auth/login.html
+++ /dev/null
@@ -1,54 +0,0 @@
-<md-content layout="row" layout-align="center start" layout-fill layout-margin>
-  <md-whiteframe layout="column" flex flex-md="50" flex-lg="50" flex-gt-lg="33" class="md-whiteframe-z2" layout-fill>
-    <md-toolbar class="md-primary md-tall" layout="column" layout-align="end" layout-fill>
-      <div layout="row" class="md-toolbar-tools md-toolbar-tools-bottom">
-        <h3 class="md-display-1"> Sign in </h3>
-      </div>
-    </md-toolbar>
-    <div layout="column" layout-fill layout-margin layout-padding>
-      <div layout="row" layout-fill layout-margin>
-        <p class="md-body-2"> Use existing account</p>
-      </div>
-      <div layout="row" layout-fill layout-margin layout-padding layout-wrap>
-        <button md-button class="md-raised">
-          <span> Google</span>
-        </button>
-        <button md-button class="md-raised">
-          <span>Facebook </span>
-        </button>
-        <button md-button class="md-raised">
-          <span>Twitter </span>
-        </button>
-      </div>
-      <md-divider class="inset"></md-divider>
-      <div layout="row" layout-fill layout-margin>
-        <p class="md-body-2"> Sign in with your email</p>
-      </div>
-
-      <form [ngFormModel]="loginForm" #f="ngForm" (submit)="login(f.value)" layout="column" layout-fill layout-padding layout-margin>
-        <md-input-container>
-          <label> Email </label>
-          <input md-input type="text" ngControl="email" aria-label="email" />
-        </md-input-container>
-        <md-input-container>
-          <label> Password </label>
-          <input md-input type="password" ngControl="password" aria-label="password" />
-        </md-input-container>
-        <div layout="row" layout-align="space-between center">
-          <button md-button [routerLink]="['/Recover']">Forgot password?</button>
-          <button md-button class="md-raised md-primary" type="submit" aria-label="login">Sign In
-          </button>
-        </div>
-      </form>
-      <div [hidden]="error == ''">
-        <md-toolbar class="md-warn" layout="row" layout-fill layout-padding layout-margin>
-          <p class="md-body-1">{{ error }}</p>
-        </md-toolbar>
-      </div>
-      <md-divider></md-divider>
-      <div layout="row" layout-align="center">
-        <button md-button [routerLink]="['/Signup']">Need an account?</button>
-      </div>
-    </div>
-  </md-whiteframe>
-</md-content>
\ No newline at end of file
diff --git a/client/imports/auth/login.ts b/client/imports/auth/login.ts
deleted file mode 100644
index f510324..0000000
--- a/client/imports/auth/login.ts
+++ /dev/null
@@ -1,42 +0,0 @@
-import {Component} from 'angular2/core';
-import {MeteorComponent} from 'angular2-meteor';
-import {Router} from 'angular2/router';
-import {FormBuilder, ControlGroup, Validators} from 'angular2/common';
-import {MATERIAL_DIRECTIVES} from 'ng2-material/all';
-import {RouterLink} from 'angular2/router';
-
-@Component({
-  selector: 'login',
-  directives: [MATERIAL_DIRECTIVES, RouterLink],
-  templateUrl: '/client/imports/auth/login.html'
-})
-export class Login extends MeteorComponent {
-  loginForm: ControlGroup;
-  error: string;
-
-  constructor(private router: Router) {
-    super();
-
-    let fb = new FormBuilder();
-
-    this.loginForm = fb.group({
-      email: ['', Validators.required],
-      password: ['', Validators.required]
-    });
-
-    this.error = '';
-  }
-
-  login(credentials) {
-    if (this.loginForm.valid) {
-      Meteor.loginWithPassword(credentials.email, credentials.password, (err) => {
-        if (err) {
-          this.error = err;
-        }
-        else {
-          this.router.navigate(['/PartiesList']);
-        }
-      });
-    }
-  }
-}
\ No newline at end of file
diff --git a/packages/socially-browser/auth/login.html b/packages/socially-browser/auth/login.html
new file mode 100644
index 0000000..19fa9de
--- /dev/null
+++ b/packages/socially-browser/auth/login.html
@@ -0,0 +1,54 @@
+<md-content layout="row" layout-align="center start" layout-fill layout-margin>
+  <md-whiteframe layout="column" flex flex-md="50" flex-lg="50" flex-gt-lg="33" class="md-whiteframe-z2" layout-fill>
+    <md-toolbar class="md-primary md-tall" layout="column" layout-align="end" layout-fill>
+      <div layout="row" class="md-toolbar-tools md-toolbar-tools-bottom">
+        <h3 class="md-display-1"> Sign in </h3>
+      </div>
+    </md-toolbar>
+    <div layout="column" layout-fill layout-margin layout-padding>
+      <div layout="row" layout-fill layout-margin>
+        <p class="md-body-2"> Use existing account</p>
+      </div>
+      <div layout="row" layout-fill layout-margin layout-padding layout-wrap>
+        <button md-button class="md-raised">
+          <span> Google</span>
+        </button>
+        <button md-button class="md-raised">
+          <span>Facebook </span>
+        </button>
+        <button md-button class="md-raised">
+          <span>Twitter </span>
+        </button>
+      </div>
+      <md-divider class="inset"></md-divider>
+      <div layout="row" layout-fill layout-margin>
+        <p class="md-body-2"> Sign in with your email</p>
+      </div>
+
+      <form [ngFormModel]="loginForm" #f="ngForm" (submit)="login(f.value)" layout="column" layout-fill layout-padding layout-margin>
+        <md-input-container>
+          <label> Email </label>
+          <input md-input type="text" ngControl="email" aria-label="email" />
+        </md-input-container>
+        <md-input-container>
+          <label> Password </label>
+          <input md-input type="password" ngControl="password" aria-label="password" />
+        </md-input-container>
+        <div layout="row" layout-align="space-between center">
+          <button md-button [routerLink]="['/Recover']">Forgot password?</button>
+          <button md-button class="md-raised md-primary" type="submit" aria-label="login">Sign In
+          </button>
+        </div>
+      </form>
+      <div [hidden]="error == ''">
+        <md-toolbar class="md-warn" layout="row" layout-fill layout-padding layout-margin>
+          <p class="md-body-1">{{ error }}</p>
+        </md-toolbar>
+      </div>
+      <md-divider></md-divider>
+      <div layout="row" layout-align="center">
+        <button md-button [routerLink]="['/Signup']">Need an account?</button>
+      </div>
+    </div>
+  </md-whiteframe>
+</md-content>
\ No newline at end of file
diff --git a/packages/socially-browser/auth/login.ts b/packages/socially-browser/auth/login.ts
new file mode 100644
index 0000000..f510324
--- /dev/null
+++ b/packages/socially-browser/auth/login.ts
@@ -0,0 +1,42 @@
+import {Component} from 'angular2/core';
+import {MeteorComponent} from 'angular2-meteor';
+import {Router} from 'angular2/router';
+import {FormBuilder, ControlGroup, Validators} from 'angular2/common';
+import {MATERIAL_DIRECTIVES} from 'ng2-material/all';
+import {RouterLink} from 'angular2/router';
+
+@Component({
+  selector: 'login',
+  directives: [MATERIAL_DIRECTIVES, RouterLink],
+  templateUrl: '/client/imports/auth/login.html'
+})
+export class Login extends MeteorComponent {
+  loginForm: ControlGroup;
+  error: string;
+
+  constructor(private router: Router) {
+    super();
+
+    let fb = new FormBuilder();
+
+    this.loginForm = fb.group({
+      email: ['', Validators.required],
+      password: ['', Validators.required]
+    });
+
+    this.error = '';
+  }
+
+  login(credentials) {
+    if (this.loginForm.valid) {
+      Meteor.loginWithPassword(credentials.email, credentials.password, (err) => {
+        if (err) {
+          this.error = err;
+        }
+        else {
+          this.router.navigate(['/PartiesList']);
+        }
+      });
+    }
+  }
+}
\ No newline at end of file
-- 
2.6.4


From 43111c4055c5d47fd8bb8af0eef686788d7863e5 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Mon, 11 Apr 2016 22:17:29 +0300
Subject: [PATCH 178/194] Step 21.6: Change the name of the login component

---
 packages/socially-browser/auth/login.ts | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/packages/socially-browser/auth/login.ts b/packages/socially-browser/auth/login.ts
index f510324..dc1eef4 100644
--- a/packages/socially-browser/auth/login.ts
+++ b/packages/socially-browser/auth/login.ts
@@ -10,7 +10,7 @@ import {RouterLink} from 'angular2/router';
   directives: [MATERIAL_DIRECTIVES, RouterLink],
   templateUrl: '/client/imports/auth/login.html'
 })
-export class Login extends MeteorComponent {
+export class BrowserLogin extends MeteorComponent {
   loginForm: ControlGroup;
   error: string;
 
-- 
2.6.4


From 972b072c719d7eef6994f240e65dc8ecb81a0156 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Mon, 11 Apr 2016 22:18:13 +0300
Subject: [PATCH 179/194] Step 21.7: Export the login component from the main
 package file

---
 .meteor/packages                              | 1 +
 .meteor/versions                              | 2 ++
 packages/socially-browser/socially-browser.ts | 1 +
 3 files changed, 4 insertions(+)

diff --git a/.meteor/packages b/.meteor/packages
index 72dbb42..76d5bbf 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -23,3 +23,4 @@ tmeasday:publish-counts
 email
 check
 less
+socially-browser
diff --git a/.meteor/versions b/.meteor/versions
index b6f9ef1..81fae36 100644
--- a/.meteor/versions
+++ b/.meteor/versions
@@ -6,6 +6,7 @@ angular2-html-templates@0.5.2
 autoupdate@1.2.9
 babel-compiler@6.6.4
 babel-runtime@0.1.8
+barbatus:angular2-runtime@0.1.0
 barbatus:angular2-runtime@0.2.3_2
 barbatus:typescript@0.2.11
 barbatus:typescript-compiler@0.5.9
@@ -69,6 +70,7 @@ routepolicy@1.0.10
 service-configuration@1.0.9
 session@1.1.5
 sha@1.0.7
+socially-browser@0.0.1
 spacebars@1.0.11
 spacebars-compiler@1.0.11
 srp@1.0.8
diff --git a/packages/socially-browser/socially-browser.ts b/packages/socially-browser/socially-browser.ts
index defd5f8..36ff3c8 100644
--- a/packages/socially-browser/socially-browser.ts
+++ b/packages/socially-browser/socially-browser.ts
@@ -1,2 +1,3 @@
 import 'reflect-metadata';
 
+export * from "./auth/login";
\ No newline at end of file
-- 
2.6.4


From 5fd24d57e79e9017da3afe5f32eb9eaf5990aa68 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Mon, 11 Apr 2016 22:19:36 +0300
Subject: [PATCH 180/194] Step 21.10: Import and use the browser package

---
 client/app.ts | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/client/app.ts b/client/app.ts
index 3230db2..f60ea61 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -17,9 +17,9 @@ import {LoginButtons} from 'angular2-meteor-accounts-ui';
 import {RouterLink} from 'angular2/router';
 import {DisplayName} from './imports/pipes/pipes.ts';
 import {InjectUser} from 'angular2-meteor-accounts-ui';
-import {Login} from './imports/auth/login.ts';
 import {Signup} from './imports/auth/signup.ts';
 import {Recover} from './imports/auth/recover.ts';
+import {BrowserLogin} from 'meteor/socially-browser';
 
 @Component({
   selector: 'app',
@@ -30,7 +30,7 @@ import {Recover} from './imports/auth/recover.ts';
 @RouteConfig([
   { path: '/', as: 'PartiesList', component: PartiesList },
   { path: '/party/:partyId', as: 'PartyDetails', component: PartyDetails },
-  { path: '/login', as: 'Login', component: Login },
+  { path: '/login', as: 'Login', component: BrowserLogin },
   { path: '/signup', as: 'Signup', component: Signup },
   { path: '/recover', as: 'Recover', component: Recover }
 ])
-- 
2.6.4


From 2fcdbbb16538d7ad8623b981b10073d5a982731a Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Mon, 11 Apr 2016 22:47:17 +0300
Subject: [PATCH 181/194] Step 21.11: Add the HTML file to the package.js

---
 packages/socially-browser/package.js | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/packages/socially-browser/package.js b/packages/socially-browser/package.js
index 965c2ba..6a89869 100644
--- a/packages/socially-browser/package.js
+++ b/packages/socially-browser/package.js
@@ -14,8 +14,9 @@ Package.onUse(function(api) {
   api.versionsFrom('1.3');
   api.use('ecmascript');
   api.use(['angular2-compilers', 'barbatus:angular2-runtime'], 'client');
-  
+
   api.mainModule('socially-browser.ts', 'web.browser');
+  api.addFiles('auth/login.html', 'web.browser');
 });
 
 Package.onTest(function(api) {
-- 
2.6.4


From 5be671d96eff586e76d1ab4da7b30beff24b9c72 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Mon, 11 Apr 2016 22:47:38 +0300
Subject: [PATCH 182/194] Step 21.12: Correct the path for the HTML file

---
 packages/socially-browser/auth/login.ts | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/packages/socially-browser/auth/login.ts b/packages/socially-browser/auth/login.ts
index dc1eef4..6ea0b5b 100644
--- a/packages/socially-browser/auth/login.ts
+++ b/packages/socially-browser/auth/login.ts
@@ -8,7 +8,7 @@ import {RouterLink} from 'angular2/router';
 @Component({
   selector: 'login',
   directives: [MATERIAL_DIRECTIVES, RouterLink],
-  templateUrl: '/client/imports/auth/login.html'
+  templateUrl: '/packages/socially-browser/auth/login.html'
 })
 export class BrowserLogin extends MeteorComponent {
   loginForm: ControlGroup;
-- 
2.6.4


From 7f23b27fbf65da99d2b81b5b1692bca4bea9219b Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Mon, 11 Apr 2016 22:49:04 +0300
Subject: [PATCH 183/194] Step 21.13: Add cordova platform to the project

---
 .meteor/platforms | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/.meteor/platforms b/.meteor/platforms
index efeba1b..81ae701 100644
--- a/.meteor/platforms
+++ b/.meteor/platforms
@@ -1,2 +1,3 @@
-server
 browser
+ios
+server
-- 
2.6.4


From 64a16852f645b9650329749b0a60d43ed34f3599 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Mon, 11 Apr 2016 23:19:08 +0300
Subject: [PATCH 184/194] Step 21.14: Create the mobile package

---
 packages/socially-mobile/package.js         | 23 +++++++++++++++++++++++
 packages/socially-mobile/socially-mobile.ts |  3 +++
 2 files changed, 26 insertions(+)
 create mode 100644 packages/socially-mobile/package.js
 create mode 100644 packages/socially-mobile/socially-mobile.ts

diff --git a/packages/socially-mobile/package.js b/packages/socially-mobile/package.js
new file mode 100644
index 0000000..6da32ef
--- /dev/null
+++ b/packages/socially-mobile/package.js
@@ -0,0 +1,23 @@
+Package.describe({
+  name: 'socially-mobile',
+  version: '0.0.1',
+  // Brief, one-line summary of the package.
+  summary: '',
+  // URL to the Git repository containing the source code for this package.
+  git: '',
+  // By default, Meteor will default to using README.md for documentation.
+  // To avoid submitting documentation, set this field to null.
+  documentation: 'README.md'
+});
+
+Package.onUse(function(api) {
+  api.versionsFrom('1.3');
+  api.use('ecmascript');
+  api.use(['angular2-compilers', 'barbatus:angular2-runtime'], 'client');
+
+  api.mainModule('socially-mobile.ts', 'web.cordova');
+  api.addFiles('auth/login.html', 'web.cordova');
+});
+
+Package.onTest(function(api) {
+});
diff --git a/packages/socially-mobile/socially-mobile.ts b/packages/socially-mobile/socially-mobile.ts
new file mode 100644
index 0000000..36ff3c8
--- /dev/null
+++ b/packages/socially-mobile/socially-mobile.ts
@@ -0,0 +1,3 @@
+import 'reflect-metadata';
+
+export * from "./auth/login";
\ No newline at end of file
-- 
2.6.4


From df9fd577382f469cbce476ab621add0f66f42c2a Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Mon, 11 Apr 2016 23:19:27 +0300
Subject: [PATCH 185/194] Step 21.15: Add the login component for the mobile

---
 .meteor/packages                         |  1 +
 .meteor/versions                         |  1 +
 packages/socially-mobile/auth/login.html |  1 +
 packages/socially-mobile/auth/login.ts   | 12 ++++++++++++
 4 files changed, 15 insertions(+)
 create mode 100644 packages/socially-mobile/auth/login.html
 create mode 100644 packages/socially-mobile/auth/login.ts

diff --git a/.meteor/packages b/.meteor/packages
index 76d5bbf..4797229 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -24,3 +24,4 @@ email
 check
 less
 socially-browser
+socially-mobile
diff --git a/.meteor/versions b/.meteor/versions
index 81fae36..5f61965 100644
--- a/.meteor/versions
+++ b/.meteor/versions
@@ -71,6 +71,7 @@ service-configuration@1.0.9
 session@1.1.5
 sha@1.0.7
 socially-browser@0.0.1
+socially-mobile@0.0.1
 spacebars@1.0.11
 spacebars-compiler@1.0.11
 srp@1.0.8
diff --git a/packages/socially-mobile/auth/login.html b/packages/socially-mobile/auth/login.html
new file mode 100644
index 0000000..88395a9
--- /dev/null
+++ b/packages/socially-mobile/auth/login.html
@@ -0,0 +1 @@
+This is the mobile login!
\ No newline at end of file
diff --git a/packages/socially-mobile/auth/login.ts b/packages/socially-mobile/auth/login.ts
new file mode 100644
index 0000000..b9050d5
--- /dev/null
+++ b/packages/socially-mobile/auth/login.ts
@@ -0,0 +1,12 @@
+import {Component} from 'angular2/core';
+import {MeteorComponent} from 'angular2-meteor';
+
+@Component({
+  selector: 'login',
+  templateUrl: '/packages/socially-mobile/auth/login.html'
+})
+export class MobileLogin extends MeteorComponent {
+  constructor() {
+    super();
+  }
+}
-- 
2.6.4


From 394000d9e43dbc6d4a404fc74cb2d198a7c1ce0d Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Mon, 11 Apr 2016 23:20:04 +0300
Subject: [PATCH 186/194] Step 21.17: Import and use the mobile login

---
 client/app.ts | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/client/app.ts b/client/app.ts
index f60ea61..ce0d655 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -20,6 +20,7 @@ import {InjectUser} from 'angular2-meteor-accounts-ui';
 import {Signup} from './imports/auth/signup.ts';
 import {Recover} from './imports/auth/recover.ts';
 import {BrowserLogin} from 'meteor/socially-browser';
+import {MobileLogin} from 'meteor/socially-mobile';
 
 @Component({
   selector: 'app',
@@ -30,7 +31,7 @@ import {BrowserLogin} from 'meteor/socially-browser';
 @RouteConfig([
   { path: '/', as: 'PartiesList', component: PartiesList },
   { path: '/party/:partyId', as: 'PartyDetails', component: PartyDetails },
-  { path: '/login', as: 'Login', component: BrowserLogin },
+  { path: '/login', as: 'Login', component: BrowserLogin || MobileLogin},
   { path: '/signup', as: 'Signup', component: Signup },
   { path: '/recover', as: 'Recover', component: Recover }
 ])
-- 
2.6.4


From 42f1bba4cc26e5cbb6b6c931024fd3360a1476b4 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Mon, 11 Apr 2016 23:35:26 +0300
Subject: [PATCH 187/194] Step 22.1: Add ionic to the project

---
 package.json | 1 +
 1 file changed, 1 insertion(+)

diff --git a/package.json b/package.json
index 980861b..0c0e37e 100644
--- a/package.json
+++ b/package.json
@@ -13,6 +13,7 @@
     "angular2-meteor-auto-bootstrap": "0.5.4",
     "ng2-material": "0.2.12",
     "meteor-node-stubs": "^0.2.3",
+    "ionic-webpack-package": "^1.0.0",
     "rxjs": "5.0.0-beta.6"
   }
 }
-- 
2.6.4


From ee1ebf06142a6aab40da91e84679ebf6cc8e5d33 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Mon, 11 Apr 2016 23:41:09 +0300
Subject: [PATCH 188/194] Step 22.2: Export the mobile imports from the mobile
 package

---
 packages/socially-mobile/socially-mobile.ts | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/packages/socially-mobile/socially-mobile.ts b/packages/socially-mobile/socially-mobile.ts
index 36ff3c8..cccf968 100644
--- a/packages/socially-mobile/socially-mobile.ts
+++ b/packages/socially-mobile/socially-mobile.ts
@@ -1,3 +1,5 @@
 import 'reflect-metadata';
+import {IONIC_DIRECTIVES} from 'ionic-webpack-package';
 
-export * from "./auth/login";
\ No newline at end of file
+export * from "./auth/login";
+export let MOBILE_IMPORTS = IONIC_DIRECTIVES;
\ No newline at end of file
-- 
2.6.4


From b8dd7720c6dd041a6d93439570ec7e3c9977bcfb Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Mon, 11 Apr 2016 23:41:49 +0300
Subject: [PATCH 189/194] Step 22.3: Import the mobile imports in the root
 project

---
 client/app.ts | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/client/app.ts b/client/app.ts
index ce0d655..9acb73d 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -20,7 +20,7 @@ import {InjectUser} from 'angular2-meteor-accounts-ui';
 import {Signup} from './imports/auth/signup.ts';
 import {Recover} from './imports/auth/recover.ts';
 import {BrowserLogin} from 'meteor/socially-browser';
-import {MobileLogin} from 'meteor/socially-mobile';
+import {MobileLogin, MOBILE_IMPORTS} from 'meteor/socially-mobile';
 
 @Component({
   selector: 'app',
@@ -50,4 +50,4 @@ class Socially extends MeteorComponent {
   }
 }
 
-bootstrap(Socially, [MATERIAL_PROVIDERS, ROUTER_PROVIDERS, ANGULAR2_GOOGLE_MAPS_PROVIDERS, provide(APP_BASE_HREF, { useValue: '/' })]);
+bootstrap(Socially, [MATERIAL_PROVIDERS, ROUTER_PROVIDERS, ANGULAR2_GOOGLE_MAPS_PROVIDERS, provide(APP_BASE_HREF, { useValue: '/' }), MOBILE_IMPORTS || []]);
-- 
2.6.4


From aedfa4e47ded0cee07730e369c238c6ff3f1541b Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Mon, 11 Apr 2016 23:45:04 +0300
Subject: [PATCH 190/194] Step 22.4: Added app component view for mobile
 package

---
 packages/socially-mobile/app/app.html | 1 +
 1 file changed, 1 insertion(+)
 create mode 100644 packages/socially-mobile/app/app.html

diff --git a/packages/socially-mobile/app/app.html b/packages/socially-mobile/app/app.html
new file mode 100644
index 0000000..d3974fa
--- /dev/null
+++ b/packages/socially-mobile/app/app.html
@@ -0,0 +1 @@
+Mobile main!
\ No newline at end of file
-- 
2.6.4


From a710ae925bfda64ddf347cd2c4d5853ae40a5ca4 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Mon, 11 Apr 2016 23:45:26 +0300
Subject: [PATCH 191/194] Step 22.5: Export the mobile app path from the
 package

---
 packages/socially-mobile/socially-mobile.ts | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/packages/socially-mobile/socially-mobile.ts b/packages/socially-mobile/socially-mobile.ts
index cccf968..17c8101 100644
--- a/packages/socially-mobile/socially-mobile.ts
+++ b/packages/socially-mobile/socially-mobile.ts
@@ -2,4 +2,5 @@ import 'reflect-metadata';
 import {IONIC_DIRECTIVES} from 'ionic-webpack-package';
 
 export * from "./auth/login";
-export let MOBILE_IMPORTS = IONIC_DIRECTIVES;
\ No newline at end of file
+export let MOBILE_IMPORTS = IONIC_DIRECTIVES;
+export let APP_COMPONENT_MOBILE_TEMPLATE = "/packages/socially-mobile/app/app.html";
\ No newline at end of file
-- 
2.6.4


From 68517567b1678128556fe60ac97801e03a5c14bd Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Mon, 11 Apr 2016 23:45:43 +0300
Subject: [PATCH 192/194] Step 22.6: Move the main app template into the
 browser package

---
 client/app.html                        | 17 -----------------
 packages/socially-browser/app/app.html | 17 +++++++++++++++++
 2 files changed, 17 insertions(+), 17 deletions(-)
 delete mode 100644 client/app.html
 create mode 100644 packages/socially-browser/app/app.html

diff --git a/client/app.html b/client/app.html
deleted file mode 100644
index a5bb6b8..0000000
--- a/client/app.html
+++ /dev/null
@@ -1,17 +0,0 @@
-<md-toolbar md-scroll-shrink layout="row" layout-align="start center" layout-padding>
-  <h2>
-    <a ui-sref="parties"><span class="md-title">Socially</span></a>
-  </h2>
-  <span flex></span>
-  <div class="navbar-right navbar-text">
-    <div [hidden]="user">
-      <button md-button [routerLink]="['/Login']" >Login</button>
-      <button md-button [routerLink]="['/Signup']">Sign up</button>
-    </div>
-    <div [hidden]="!user">
-      <span>{{ user | displayName }}</span>
-      <button md-button (click)="logout()">Logout</button>
-    </div>
-  </div>
-</md-toolbar>
-<router-outlet flex-gt-sm layout-gt-sm="row"></router-outlet>
\ No newline at end of file
diff --git a/packages/socially-browser/app/app.html b/packages/socially-browser/app/app.html
new file mode 100644
index 0000000..a5bb6b8
--- /dev/null
+++ b/packages/socially-browser/app/app.html
@@ -0,0 +1,17 @@
+<md-toolbar md-scroll-shrink layout="row" layout-align="start center" layout-padding>
+  <h2>
+    <a ui-sref="parties"><span class="md-title">Socially</span></a>
+  </h2>
+  <span flex></span>
+  <div class="navbar-right navbar-text">
+    <div [hidden]="user">
+      <button md-button [routerLink]="['/Login']" >Login</button>
+      <button md-button [routerLink]="['/Signup']">Sign up</button>
+    </div>
+    <div [hidden]="!user">
+      <span>{{ user | displayName }}</span>
+      <button md-button (click)="logout()">Logout</button>
+    </div>
+  </div>
+</md-toolbar>
+<router-outlet flex-gt-sm layout-gt-sm="row"></router-outlet>
\ No newline at end of file
-- 
2.6.4


From f6b98c5dcad48e7dd84551fff3f882f83ce2cc29 Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Mon, 11 Apr 2016 23:46:01 +0300
Subject: [PATCH 193/194] Step 22.7: Export the path of browser app template
 from the browser package

---
 packages/socially-browser/socially-browser.ts | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/packages/socially-browser/socially-browser.ts b/packages/socially-browser/socially-browser.ts
index 36ff3c8..8744e46 100644
--- a/packages/socially-browser/socially-browser.ts
+++ b/packages/socially-browser/socially-browser.ts
@@ -1,3 +1,4 @@
 import 'reflect-metadata';
 
-export * from "./auth/login";
\ No newline at end of file
+export * from "./auth/login";
+export let APP_COMPONENT_BROWSER_TEMPLATE = "/packages/socially-browser/app/app.html";
\ No newline at end of file
-- 
2.6.4


From bd37b9d3366b3643c495ab6c2596935980abe1fb Mon Sep 17 00:00:00 2001
From: dotansimha <dotansimha@gmail.com>
Date: Mon, 11 Apr 2016 23:46:17 +0300
Subject: [PATCH 194/194] Step 22.8: Added usage of the dynamic template path

---
 client/app.ts | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/client/app.ts b/client/app.ts
index 9acb73d..ccf4d52 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -19,12 +19,12 @@ import {DisplayName} from './imports/pipes/pipes.ts';
 import {InjectUser} from 'angular2-meteor-accounts-ui';
 import {Signup} from './imports/auth/signup.ts';
 import {Recover} from './imports/auth/recover.ts';
-import {BrowserLogin} from 'meteor/socially-browser';
-import {MobileLogin, MOBILE_IMPORTS} from 'meteor/socially-mobile';
+import {BrowserLogin, APP_COMPONENT_BROWSER_TEMPLATE} from 'meteor/socially-browser';
+import {MobileLogin, MOBILE_IMPORTS, APP_COMPONENT_MOBILE_TEMPLATE} from 'meteor/socially-mobile';
 
 @Component({
   selector: 'app',
-  templateUrl: 'client/app.html',
+  templateUrl: APP_COMPONENT_BROWSER_TEMPLATE || APP_COMPONENT_MOBILE_TEMPLATE,
   directives: [ROUTER_DIRECTIVES, LoginButtons, MATERIAL_DIRECTIVES, RouterLink],
   pipes: [DisplayName]
 })
-- 
2.6.4

